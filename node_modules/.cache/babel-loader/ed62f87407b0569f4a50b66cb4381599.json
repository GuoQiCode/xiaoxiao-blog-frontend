{"remainingRequest":"E:\\xiaoxiao-blog-frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\xiaoxiao-blog-frontend\\src\\assets\\photo\\js\\main.js","dependencies":[{"path":"E:\\xiaoxiao-blog-frontend\\src\\assets\\photo\\js\\main.js","mtime":1579589707928},{"path":"E:\\xiaoxiao-blog-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\xiaoxiao-blog-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtaW50IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CgovKioKICogbWFpbi5qcwogKiBodHRwOi8vd3d3LmNvZHJvcHMuY29tCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS4KICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKICogCiAqIENvcHlyaWdodCAyMDE1LCBDb2Ryb3BzCiAqIGh0dHA6Ly93d3cuY29kcm9wcy5jb20KICovCmltcG9ydCAiLi9pbWFnZXNsb2FkZWQucGtnZC5taW4iOwppbXBvcnQgIi4vbWFzb25yeS5wa2dkLm1pbiI7CmltcG9ydCAiLi9tb2Rlcm5penItY3VzdG9tIjsKaW1wb3J0ICIuL2NsYXNzaWUiOwppbXBvcnQgIi4vaHRtbDVzaGl2Lm1pbiI7CmltcG9ydCBqUXVlcnkgZnJvbSAiLi4vLi4vanMvanF1ZXJ5Lm1pbi5qcyI7CgooZnVuY3Rpb24gKHdpbmRvdykgewogICd1c2Ugc3RyaWN0JzsKCiAgdmFyIHN1cHBvcnQgPSB7CiAgICB0cmFuc2l0aW9uczogTW9kZXJuaXpyLmNzc3RyYW5zaXRpb25zCiAgfSwKICAgICAgLy8gdHJhbnNpdGlvbiBlbmQgZXZlbnQgbmFtZQogIHRyYW5zRW5kRXZlbnROYW1lcyA9IHsKICAgICdXZWJraXRUcmFuc2l0aW9uJzogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLAogICAgJ01velRyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcsCiAgICAnT1RyYW5zaXRpb24nOiAnb1RyYW5zaXRpb25FbmQnLAogICAgJ21zVHJhbnNpdGlvbic6ICdNU1RyYW5zaXRpb25FbmQnLAogICAgJ3RyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcKICB9LAogICAgICB0cmFuc0VuZEV2ZW50TmFtZSA9IHRyYW5zRW5kRXZlbnROYW1lc1tNb2Rlcm5penIucHJlZml4ZWQoJ3RyYW5zaXRpb24nKV0sCiAgICAgIG9uRW5kVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIG9uRW5kVHJhbnNpdGlvbihlbCwgY2FsbGJhY2spIHsKICAgIHZhciBvbkVuZENhbGxiYWNrRm4gPSBmdW5jdGlvbiBvbkVuZENhbGxiYWNrRm4oZXYpIHsKICAgICAgaWYgKHN1cHBvcnQudHJhbnNpdGlvbnMpIHsKICAgICAgICBpZiAoZXYudGFyZ2V0ICE9IHRoaXMpIHJldHVybjsKICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNFbmRFdmVudE5hbWUsIG9uRW5kQ2FsbGJhY2tGbik7CiAgICAgIH0KCiAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpOwogICAgICB9CiAgICB9OwoKICAgIGlmIChzdXBwb3J0LnRyYW5zaXRpb25zKSB7CiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIodHJhbnNFbmRFdmVudE5hbWUsIG9uRW5kQ2FsbGJhY2tGbik7CiAgICB9IGVsc2UgewogICAgICBvbkVuZENhbGxiYWNrRm4oKTsKICAgIH0KICB9OwogIC8qKgogICAqIHNvbWUgaGVscGVyIGZ1bmN0aW9ucwogICAqLwoKCiAgZnVuY3Rpb24gdGhyb3R0bGUoZm4sIGRlbGF5KSB7CiAgICB2YXIgYWxsb3dTYW1wbGUgPSB0cnVlOwogICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChhbGxvd1NhbXBsZSkgewogICAgICAgIGFsbG93U2FtcGxlID0gZmFsc2U7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBhbGxvd1NhbXBsZSA9IHRydWU7CiAgICAgICAgfSwgZGVsYXkpOwogICAgICAgIGZuKGUpOwogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbmV4dFNpYmxpbmcoZWwpIHsKICAgIHZhciBuZXh0U2libGluZyA9IGVsLm5leHRTaWJsaW5nOwoKICAgIHdoaWxlIChuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5ub2RlVHlwZSAhPSAxKSB7CiAgICAgIG5leHRTaWJsaW5nID0gbmV4dFNpYmxpbmcubmV4dFNpYmxpbmc7CiAgICB9CgogICAgcmV0dXJuIG5leHRTaWJsaW5nOwogIH0KCiAgZnVuY3Rpb24gZXh0ZW5kKGEsIGIpIHsKICAgIGZvciAodmFyIGtleSBpbiBiKSB7CiAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICBhW2tleV0gPSBiW2tleV07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYTsKICB9CiAgLyoqCiAgICogR3JpZEZ4IG9iagogICAqLwoKCiAgZnVuY3Rpb24gR3JpZEZ4KGVsLCBvcHRpb25zKSB7CiAgICB0aGlzLmdyaWRFbCA9IGVsOwogICAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMpOwogICAgZXh0ZW5kKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7CiAgICB0aGlzLml0ZW1zID0gW10uc2xpY2UuY2FsbCh0aGlzLmdyaWRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZF9faXRlbScpKTsKICAgIHRoaXMucHJldmlld0VsID0gbmV4dFNpYmxpbmcodGhpcy5ncmlkRWwpOwogICAgdGhpcy5pc0V4cGFuZGVkID0gZmFsc2U7CiAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7CiAgICB0aGlzLmNsb3NlQ3RybCA9IHRoaXMucHJldmlld0VsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi5hY3Rpb24tLWNsb3NlJyk7CiAgICB0aGlzLnByZXZpZXdEZXNjcmlwdGlvbkVsID0gdGhpcy5wcmV2aWV3RWwucXVlcnlTZWxlY3RvcignLmRlc2NyaXB0aW9uLS1wcmV2aWV3Jyk7CgogICAgdGhpcy5faW5pdCgpOwogIH0KICAvKioKICAgKiBvcHRpb25zCiAgICovCgoKICBHcmlkRngucHJvdG90eXBlLm9wdGlvbnMgPSB7CiAgICBwYWdlbWFyZ2luOiAwLAogICAgLy8geCBhbmQgeSBjYW4gaGF2ZSB2YWx1ZXMgZnJvbSAwIHRvIDEgKHBlcmNlbnRhZ2UpLiBJZiBuZWdhdGl2ZSB0aGVuIGl0IG1lYW5zIHRoZSBhbGlnbm1lbnQgaXMgbGVmdCBhbmQvb3IgdG9wIHJhdGhlciB0aGFuIHJpZ2h0IGFuZC9vciBib3R0b20KICAgIC8vIHNvLCBhcyBhbiBleGFtcGxlLCBpZiB3ZSB3YW50IG91ciBsYXJnZSBpbWFnZSB0byBiZSBwb3NpdGlvbmVkIHZlcnRpY2FsbHkgb24gMjUlIG9mIHRoZSBzY3JlZW4gYW5kIGNlbnRlcmVkIGhvcml6b250YWxseSB0aGUgdmFsdWVzIHdvdWxkIGJlIHg6MSx5Oi0wLjI1CiAgICBpbWdQb3NpdGlvbjogewogICAgICB4OiAxLAogICAgICB5OiAxCiAgICB9LAogICAgb25Jbml0OiBmdW5jdGlvbiBvbkluaXQoaW5zdGFuY2UpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIG9uUmVzaXplOiBmdW5jdGlvbiBvblJlc2l6ZShpbnN0YW5jZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgb25PcGVuSXRlbTogZnVuY3Rpb24gb25PcGVuSXRlbShpbnN0YW5jZSwgaXRlbSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgb25DbG9zZUl0ZW06IGZ1bmN0aW9uIG9uQ2xvc2VJdGVtKGluc3RhbmNlLCBpdGVtKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBvbkV4cGFuZDogZnVuY3Rpb24gb25FeHBhbmQoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9OwoKICBHcmlkRngucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkgewogICAgLy8gY2FsbGJhY2sKICAgIHRoaXMub3B0aW9ucy5vbkluaXQodGhpcyk7CiAgICB2YXIgc2VsZiA9IHRoaXM7IC8vIGluaXQgbWFzb25yeSBhZnRlciBhbGwgaW1hZ2VzIGFyZSBsb2FkZWQKCiAgICBpbWFnZXNMb2FkZWQodGhpcy5ncmlkRWwsIGZ1bmN0aW9uICgpIHsKICAgICAgLy8gaW5pdGlhbGl6ZSBtYXNvbnJ5CiAgICAgIG5ldyBNYXNvbnJ5KHNlbGYuZ3JpZEVsLCB7CiAgICAgICAgaXRlbVNlbGVjdG9yOiAnLmdyaWRfX2l0ZW0nLAogICAgICAgIGlzRml0V2lkdGg6IHRydWUKICAgICAgfSk7IC8vIHNob3cgZ3JpZCBhZnRlciBhbGwgaW1hZ2VzICh0aHVtYnMpIGFyZSBsb2FkZWQKCiAgICAgIGNsYXNzaWUuYWRkKHNlbGYuZ3JpZEVsLCAnZ3JpZC0tbG9hZGVkJyk7IC8vIGluaXQvYmluZCBldmVudHMKCiAgICAgIHNlbGYuX2luaXRFdmVudHMoKTsgLy8gY3JlYXRlIHRoZSBsYXJnZSBpbWFnZSBhbmQgYXBwZW5kIGl0IHRvIHRoZSBET00KCgogICAgICBzZWxmLl9zZXRPcmlnaW5hbCgpOyAvLyBjcmVhdGUgdGhlIGNsb25lIGltYWdlIGFuZCBhcHBlbmQgaXQgdG8gdGhlIERPTQoKCiAgICAgIHNlbGYuX3NldENsb25lKCk7CiAgICB9KTsKICB9OwogIC8qKgogICAqIGluaXRpYWxpemUvYmluZCBldmVudHMKICAgKi8KCgogIEdyaWRGeC5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2VsZiA9IHRoaXMsCiAgICAgICAgY2xpY2tFdmVudCA9IGRvY3VtZW50Lm9udG91Y2hzdGFydCAhPT0gbnVsbCA/ICdjbGljaycgOiAndG91Y2hzdGFydCc7CiAgICB0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgdmFyIHRvdWNoZW5kID0gZnVuY3Rpb24gdG91Y2hlbmQoZXYpIHsKICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBzZWxmLl9vcGVuSXRlbShldiwgaXRlbSk7CgogICAgICAgIGl0ZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0b3VjaGVuZCk7CiAgICAgIH0sCiAgICAgICAgICB0b3VjaG1vdmUgPSBmdW5jdGlvbiB0b3VjaG1vdmUoZXYpIHsKICAgICAgICBpdGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdG91Y2hlbmQpOwogICAgICB9LAogICAgICAgICAgbWFuYWdlVG91Y2ggPSBmdW5jdGlvbiBtYW5hZ2VUb3VjaCgpIHsKICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdG91Y2hlbmQpOwogICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdG91Y2htb3ZlKTsKICAgICAgfTsKCiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihjbGlja0V2ZW50LCBmdW5jdGlvbiAoZXYpIHsKICAgICAgICBpZiAoY2xpY2tFdmVudCA9PT0gJ2NsaWNrJykgewogICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICBzZWxmLl9vcGVuSXRlbShldiwgaXRlbSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1hbmFnZVRvdWNoKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOyAvLyBjbG9zZSBleHBhbmRlZCBpbWFnZQoKICAgIHRoaXMuY2xvc2VDdHJsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICBzZWxmLl9jbG9zZUl0ZW0oKTsKICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRocm90dGxlKGZ1bmN0aW9uIChldikgewogICAgICAvLyBjYWxsYmFjawogICAgICBzZWxmLm9wdGlvbnMub25SZXNpemUoc2VsZik7CiAgICB9LCAxMCkpOwogIH07CiAgLyoqCiAgICogb3BlbiBhIGdyaWQgaXRlbQogICAqLwoKCiAgR3JpZEZ4LnByb3RvdHlwZS5fb3Blbkl0ZW0gPSBmdW5jdGlvbiAoZXYsIGl0ZW0pIHsKICAgIGlmICh0aGlzLmlzQW5pbWF0aW5nIHx8IHRoaXMuaXNFeHBhbmRlZCkgcmV0dXJuOwogICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7CiAgICB0aGlzLmlzRXhwYW5kZWQgPSB0cnVlOyAvLyBpdGVtJ3MgaW1hZ2UKCiAgICB2YXIgZ3JpZEltZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW1nJyksCiAgICAgICAgZ3JpZEltZ09mZnNldCA9IGdyaWRJbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7IC8vIGluZGV4IG9mIGN1cnJlbnQgaXRlbQoKICAgIHRoaXMuY3VycmVudCA9IHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKTsgLy8gc2V0IHRoZSBzcmMgb2YgdGhlIG9yaWdpbmFsIGltYWdlIGVsZW1lbnQgKGxhcmdlIGltYWdlKQoKICAgIHRoaXMuX3NldE9yaWdpbmFsKGl0ZW0ucXVlcnlTZWxlY3RvcignYScpLmdldEF0dHJpYnV0ZSgnaHJlZicpKTsgLy8gY2FsbGJhY2sKCgogICAgdGhpcy5vcHRpb25zLm9uT3Blbkl0ZW0odGhpcywgaXRlbSk7IC8vIHNldCB0aGUgY2xvbmUgaW1hZ2UKCiAgICB0aGlzLl9zZXRDbG9uZShncmlkSW1nLnNyYywgewogICAgICB3aWR0aDogZ3JpZEltZy5vZmZzZXRXaWR0aCwKICAgICAgaGVpZ2h0OiBncmlkSW1nLm9mZnNldEhlaWdodCwKICAgICAgbGVmdDogZ3JpZEltZ09mZnNldC5sZWZ0LAogICAgICB0b3A6IGdyaWRJbWdPZmZzZXQudG9wCiAgICB9KTsgLy8gaGlkZSBvcmlnaW5hbCBncmlkIGl0ZW0KCgogICAgY2xhc3NpZS5hZGQoaXRlbSwgJ2dyaWRfX2l0ZW0tLWN1cnJlbnQnKTsgLy8gY2FsY3VsYXRlIHRoZSB0cmFuc2Zvcm0gdmFsdWUgZm9yIHRoZSBjbG9uZSB0byBhbmltYXRlIHRvIHRoZSBmdWxsIGltYWdlIHZpZXcKCiAgICB2YXIgd2luID0gdGhpcy5fZ2V0V2luU2l6ZSgpLAogICAgICAgIG9yaWdpbmFsU2l6ZUFyciA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXNpemUnKS5zcGxpdCgneCcpLAogICAgICAgIG9yaWdpbmFsU2l6ZSA9IHsKICAgICAgd2lkdGg6IG9yaWdpbmFsU2l6ZUFyclswXSwKICAgICAgaGVpZ2h0OiBvcmlnaW5hbFNpemVBcnJbMV0KICAgIH0sCiAgICAgICAgZHggPSAodGhpcy5vcHRpb25zLmltZ1Bvc2l0aW9uLnggPiAwID8gMSAtIE1hdGguYWJzKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi54KSA6IE1hdGguYWJzKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi54KSkgKiB3aW4ud2lkdGggKyB0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueCAqIHdpbi53aWR0aCAvIDIgLSBncmlkSW1nT2Zmc2V0LmxlZnQgLSAwLjUgKiBncmlkSW1nLm9mZnNldFdpZHRoLAogICAgICAgIGR5ID0gKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi55ID4gMCA/IDEgLSBNYXRoLmFicyh0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueSkgOiBNYXRoLmFicyh0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueSkpICogd2luLmhlaWdodCArIHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi55ICogd2luLmhlaWdodCAvIDIgLSBncmlkSW1nT2Zmc2V0LnRvcCAtIDAuNSAqIGdyaWRJbWcub2Zmc2V0SGVpZ2h0LAogICAgICAgIHogPSBNYXRoLm1pbihNYXRoLm1pbih3aW4ud2lkdGggKiBNYXRoLmFicyh0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueCkgLSB0aGlzLm9wdGlvbnMucGFnZW1hcmdpbiwgb3JpZ2luYWxTaXplLndpZHRoIC0gdGhpcy5vcHRpb25zLnBhZ2VtYXJnaW4pIC8gZ3JpZEltZy5vZmZzZXRXaWR0aCwgTWF0aC5taW4od2luLmhlaWdodCAqIE1hdGguYWJzKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi55KSAtIHRoaXMub3B0aW9ucy5wYWdlbWFyZ2luLCBvcmlnaW5hbFNpemUuaGVpZ2h0IC0gdGhpcy5vcHRpb25zLnBhZ2VtYXJnaW4pIC8gZ3JpZEltZy5vZmZzZXRIZWlnaHQpOyAvLyBhcHBseSB0cmFuc2Zvcm0gdG8gdGhlIGNsb25lCgoKICAgIHRoaXMuY2xvbmVJbWcuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgKyBkeCArICdweCwgJyArIGR5ICsgJ3B4LCAwKSBzY2FsZTNkKCcgKyB6ICsgJywgJyArIHogKyAnLCAxKSc7CiAgICB0aGlzLmNsb25lSW1nLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgZHggKyAncHgsICcgKyBkeSArICdweCwgMCkgc2NhbGUzZCgnICsgeiArICcsICcgKyB6ICsgJywgMSknOyAvLyBhZGQgdGhlIGRlc2NyaXB0aW9uIGlmIGFueQoKICAgIHZhciBkZXNjcmlwdGlvbkVsID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuZGVzY3JpcHRpb24nKTsKCiAgICBpZiAoZGVzY3JpcHRpb25FbCkgewogICAgICB0aGlzLnByZXZpZXdEZXNjcmlwdGlvbkVsLmlubmVySFRNTCA9IGRlc2NyaXB0aW9uRWwuaW5uZXJIVE1MOwogICAgfQoKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAvLyBjb250cm9scyB0aGUgZWxlbWVudHMgaW5zaWRlIHRoZSBleHBhbmRlZCB2aWV3CiAgICAgIGNsYXNzaWUuYWRkKHNlbGYucHJldmlld0VsLCAncHJldmlldy0tb3BlbicpOyAvLyBjYWxsYmFjawoKICAgICAgc2VsZi5vcHRpb25zLm9uRXhwYW5kKCk7CiAgICB9LCAwKTsgLy8gYWZ0ZXIgdGhlIGNsb25lIGFuaW1hdGVzLi4KCiAgICBvbkVuZFRyYW5zaXRpb24odGhpcy5jbG9uZUltZywgZnVuY3Rpb24gKCkgewogICAgICAvLyB3aGVuIHRoZSBvcmlnaW5hbC9sYXJnZSBpbWFnZSBpcyBsb2FkZWQuLgogICAgICBpbWFnZXNMb2FkZWQoc2VsZi5vcmlnaW5hbEltZywgZnVuY3Rpb24gKCkgewogICAgICAgIC8vIGNsb3NlIGJ1dHRvbiBqdXN0IGdldHMgc2hvd24gYWZ0ZXIgdGhlIGxhcmdlIGltYWdlIGdldHMgbG9hZGVkCiAgICAgICAgY2xhc3NpZS5hZGQoc2VsZi5wcmV2aWV3RWwsICdwcmV2aWV3LS1pbWFnZS1sb2FkZWQnKTsgLy8gYW5pbWF0ZSB0aGUgb3BhY2l0eSB0byAxCgogICAgICAgIHNlbGYub3JpZ2luYWxJbWcuc3R5bGUub3BhY2l0eSA9IDE7IC8vIGFuZCBvbmNlIHRoYXQncyBkb25lLi4KCiAgICAgICAgb25FbmRUcmFuc2l0aW9uKHNlbGYub3JpZ2luYWxJbWcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIHJlc2V0IGNsb25lSW1nCiAgICAgICAgICBzZWxmLmNsb25lSW1nLnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICAgICAgc2VsZi5jbG9uZUltZy5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlM2QoMSwxLDEpJzsKICAgICAgICAgIHNlbGYuY2xvbmVJbWcuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZTNkKDEsMSwxKSc7CiAgICAgICAgICBzZWxmLmlzQW5pbWF0aW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKICAvKioKICAgKiBjcmVhdGUvc2V0IHRoZSBvcmlnaW5hbC9sYXJnZSBpbWFnZSBlbGVtZW50CiAgICovCgoKICBHcmlkRngucHJvdG90eXBlLl9zZXRPcmlnaW5hbCA9IGZ1bmN0aW9uIChzcmMpIHsKICAgIGlmICghc3JjKSB7CiAgICAgIHRoaXMub3JpZ2luYWxJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgdGhpcy5vcmlnaW5hbEltZy5jbGFzc05hbWUgPSAnb3JpZ2luYWwnOwogICAgICB0aGlzLm9yaWdpbmFsSW1nLnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICB0aGlzLm9yaWdpbmFsSW1nLnN0eWxlLm1heFdpZHRoID0gJ2NhbGMoJyArIHBhcnNlSW50KE1hdGguYWJzKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi54KSAqIDEwMCkgKyAndncgLSAnICsgdGhpcy5vcHRpb25zLnBhZ2VtYXJnaW4gKyAncHgpJzsKICAgICAgdGhpcy5vcmlnaW5hbEltZy5zdHlsZS5tYXhIZWlnaHQgPSAnY2FsYygnICsgcGFyc2VJbnQoTWF0aC5hYnModGhpcy5vcHRpb25zLmltZ1Bvc2l0aW9uLnkpICogMTAwKSArICd2aCAtICcgKyB0aGlzLm9wdGlvbnMucGFnZW1hcmdpbiArICdweCknOyAvLyBuZWVkIGl0IGJlY2F1c2Ugb2YgZmlyZWZveAoKICAgICAgdGhpcy5vcmlnaW5hbEltZy5zdHlsZS5XZWJraXRUcmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlM2QoMSwxLDEpJzsKICAgICAgdGhpcy5vcmlnaW5hbEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlM2QoMSwxLDEpJzsKICAgICAgc3JjID0gJyc7CiAgICAgIHRoaXMucHJldmlld0VsLmFwcGVuZENoaWxkKHRoaXMub3JpZ2luYWxJbWcpOwogICAgfQoKICAgIHRoaXMub3JpZ2luYWxJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpOwogIH07CiAgLyoqCiAgICogY3JlYXRlL3NldCB0aGUgY2xvbmUgaW1hZ2UgZWxlbWVudAogICAqLwoKCiAgR3JpZEZ4LnByb3RvdHlwZS5fc2V0Q2xvbmUgPSBmdW5jdGlvbiAoc3JjLCBzZXR0aW5ncykgewogICAgaWYgKCFzcmMpIHsKICAgICAgdGhpcy5jbG9uZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICB0aGlzLmNsb25lSW1nLmNsYXNzTmFtZSA9ICdjbG9uZSc7CiAgICAgIHNyYyA9ICcnOwogICAgICB0aGlzLmNsb25lSW1nLnN0eWxlLm9wYWNpdHkgPSAwOwogICAgICB0aGlzLnByZXZpZXdFbC5hcHBlbmRDaGlsZCh0aGlzLmNsb25lSW1nKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuY2xvbmVJbWcuc3R5bGUub3BhY2l0eSA9IDE7IC8vIHNldCB0b3AvbGVmdC93aWR0aC9oZWlnaHQgb2YgZ3JpZCBpdGVtJ3MgaW1hZ2UgdG8gdGhlIGNsb25lCgogICAgICB0aGlzLmNsb25lSW1nLnN0eWxlLndpZHRoID0gc2V0dGluZ3Mud2lkdGggKyAncHgnOwogICAgICB0aGlzLmNsb25lSW1nLnN0eWxlLmhlaWdodCA9IHNldHRpbmdzLmhlaWdodCArICdweCc7CiAgICAgIHRoaXMuY2xvbmVJbWcuc3R5bGUudG9wID0gc2V0dGluZ3MudG9wICsgJ3B4JzsKICAgICAgdGhpcy5jbG9uZUltZy5zdHlsZS5sZWZ0ID0gc2V0dGluZ3MubGVmdCArICdweCc7CiAgICB9CgogICAgdGhpcy5jbG9uZUltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYyk7CiAgfTsKICAvKioKICAgKiBjbG9zZXMgdGhlIG9yaWdpbmFsL2xhcmdlIGltYWdlIHZpZXcKICAgKi8KCgogIEdyaWRGeC5wcm90b3R5cGUuX2Nsb3NlSXRlbSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdGhpcy5pc0V4cGFuZGVkIHx8IHRoaXMuaXNBbmltYXRpbmcpIHJldHVybjsKICAgIHRoaXMuaXNFeHBhbmRlZCA9IGZhbHNlOwogICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7IC8vIHRoZSBncmlkIGl0ZW0ncyBpbWFnZSBhbmQgaXRzIG9mZnNldAoKICAgIHZhciBncmlkSXRlbSA9IHRoaXMuaXRlbXNbdGhpcy5jdXJyZW50XSwKICAgICAgICBncmlkSW1nID0gZ3JpZEl0ZW0ucXVlcnlTZWxlY3RvcignaW1nJyksCiAgICAgICAgZ3JpZEltZ09mZnNldCA9IGdyaWRJbWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgc2VsZiA9IHRoaXM7CiAgICBjbGFzc2llLnJlbW92ZSh0aGlzLnByZXZpZXdFbCwgJ3ByZXZpZXctLW9wZW4nKTsKICAgIGNsYXNzaWUucmVtb3ZlKHRoaXMucHJldmlld0VsLCAncHJldmlldy0taW1hZ2UtbG9hZGVkJyk7IC8vIGNhbGxiYWNrCgogICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VJdGVtKHRoaXMsIGdyaWRJdGVtKTsgLy8gbGFyZ2UgaW1hZ2Ugd2lsbCBhbmltYXRlIGJhY2sgdG8gdGhlIHBvc2l0aW9uIG9mIGl0cyBncmlkJ3MgaXRlbQoKICAgIGNsYXNzaWUuYWRkKHRoaXMub3JpZ2luYWxJbWcsICdhbmltYXRlJyk7IC8vIHNldCB0aGUgdHJhbnNmb3JtIHRvIHRoZSBvcmlnaW5hbC9sYXJnZSBpbWFnZQoKICAgIHZhciB3aW4gPSB0aGlzLl9nZXRXaW5TaXplKCksCiAgICAgICAgZHggPSBncmlkSW1nT2Zmc2V0LmxlZnQgKyBncmlkSW1nLm9mZnNldFdpZHRoIC8gMiAtICgodGhpcy5vcHRpb25zLmltZ1Bvc2l0aW9uLnggPiAwID8gMSAtIE1hdGguYWJzKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi54KSA6IE1hdGguYWJzKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi54KSkgKiB3aW4ud2lkdGggKyB0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueCAqIHdpbi53aWR0aCAvIDIpLAogICAgICAgIGR5ID0gZ3JpZEltZ09mZnNldC50b3AgKyBncmlkSW1nLm9mZnNldEhlaWdodCAvIDIgLSAoKHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi55ID4gMCA/IDEgLSBNYXRoLmFicyh0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueSkgOiBNYXRoLmFicyh0aGlzLm9wdGlvbnMuaW1nUG9zaXRpb24ueSkpICogd2luLmhlaWdodCArIHRoaXMub3B0aW9ucy5pbWdQb3NpdGlvbi55ICogd2luLmhlaWdodCAvIDIpLAogICAgICAgIHogPSBncmlkSW1nLm9mZnNldFdpZHRoIC8gdGhpcy5vcmlnaW5hbEltZy5vZmZzZXRXaWR0aDsKCiAgICB0aGlzLm9yaWdpbmFsSW1nLnN0eWxlLldlYmtpdFRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgnICsgZHggKyAncHgsICcgKyBkeSArICdweCwgMCkgc2NhbGUzZCgnICsgeiArICcsICcgKyB6ICsgJywgMSknOwogICAgdGhpcy5vcmlnaW5hbEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoJyArIGR4ICsgJ3B4LCAnICsgZHkgKyAncHgsIDApIHNjYWxlM2QoJyArIHogKyAnLCAnICsgeiArICcsIDEpJzsgLy8gb25jZSB0aGF0J3MgZG9uZS4uCgogICAgb25FbmRUcmFuc2l0aW9uKHRoaXMub3JpZ2luYWxJbWcsIGZ1bmN0aW9uICgpIHsKICAgICAgLy8gY2xlYXIgZGVzY3JpcHRpb24KICAgICAgc2VsZi5wcmV2aWV3RGVzY3JpcHRpb25FbC5pbm5lckhUTUwgPSAnJzsgLy8gc2hvdyBvcmlnaW5hbCBncmlkIGl0ZW0KCiAgICAgIGNsYXNzaWUucmVtb3ZlKGdyaWRJdGVtLCAnZ3JpZF9faXRlbS0tY3VycmVudCcpOyAvLyBmYWRlIG91dCB0aGUgb3JpZ2luYWwgaW1hZ2UKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYub3JpZ2luYWxJbWcuc3R5bGUub3BhY2l0eSA9IDA7CiAgICAgIH0sIDYwKTsgLy8gYW5kIGFmdGVyIHRoYXQKCiAgICAgIG9uRW5kVHJhbnNpdGlvbihzZWxmLm9yaWdpbmFsSW1nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gcmVzZXQgb3JpZ2luYWwvbGFyZ2UgaW1hZ2UKICAgICAgICBjbGFzc2llLnJlbW92ZShzZWxmLm9yaWdpbmFsSW1nLCAnYW5pbWF0ZScpOwogICAgICAgIHNlbGYub3JpZ2luYWxJbWcuc3R5bGUuV2Via2l0VHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsMCwwKSBzY2FsZTNkKDEsMSwxKSc7CiAgICAgICAgc2VsZi5vcmlnaW5hbEltZy5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwwLDApIHNjYWxlM2QoMSwxLDEpJzsKICAgICAgICBzZWxmLmlzQW5pbWF0aW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKICAvKioKICAgKiBnZXRzIHRoZSB3aW5kb3cgc2l6ZXMKICAgKi8KCgogIEdyaWRGeC5wcm90b3R5cGUuX2dldFdpblNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB3aWR0aDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLAogICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodAogICAgfTsKICB9OwoKICB3aW5kb3cuR3JpZEZ4ID0gR3JpZEZ4Owp9KSh3aW5kb3cpOw=="},{"version":3,"sources":["E:/xiaoxiao-blog-frontend/src/assets/photo/js/main.js"],"names":["jQuery","window","support","transitions","Modernizr","csstransitions","transEndEventNames","transEndEventName","prefixed","onEndTransition","el","callback","onEndCallbackFn","ev","target","removeEventListener","call","addEventListener","throttle","fn","delay","allowSample","e","setTimeout","nextSibling","nodeType","extend","a","b","key","hasOwnProperty","GridFx","options","gridEl","items","slice","querySelectorAll","previewEl","isExpanded","isAnimating","closeCtrl","querySelector","previewDescriptionEl","_init","prototype","pagemargin","imgPosition","x","y","onInit","instance","onResize","onOpenItem","item","onCloseItem","onExpand","self","imagesLoaded","Masonry","itemSelector","isFitWidth","classie","add","_initEvents","_setOriginal","_setClone","clickEvent","document","ontouchstart","forEach","touchend","preventDefault","_openItem","touchmove","manageTouch","_closeItem","gridImg","gridImgOffset","getBoundingClientRect","current","indexOf","getAttribute","src","width","offsetWidth","height","offsetHeight","left","top","win","_getWinSize","originalSizeArr","split","originalSize","dx","Math","abs","dy","z","min","cloneImg","style","WebkitTransform","transform","descriptionEl","innerHTML","originalImg","opacity","createElement","className","maxWidth","parseInt","maxHeight","appendChild","setAttribute","settings","gridItem","remove","documentElement","clientWidth","innerHeight"],"mappings":"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","sourcesContent":["/**\n * main.js\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2015, Codrops\n * http://www.codrops.com\n */\nimport\"./imagesloaded.pkgd.min\"\nimport\"./masonry.pkgd.min\"\nimport\"./modernizr-custom\"\nimport\"./classie\"\nimport \"./html5shiv.min\"\nimport jQuery from \"../../js/jquery.min.js\"\n;(function(window) {\n\t'use strict';\n\tvar support = { transitions: Modernizr.csstransitions },\n\t\t// transition end event name\n\t\ttransEndEventNames = { 'WebkitTransition': 'webkitTransitionEnd', 'MozTransition': 'transitionend', 'OTransition': 'oTransitionEnd', 'msTransition': 'MSTransitionEnd', 'transition': 'transitionend' },\n\t\ttransEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],\n\t\tonEndTransition = function( el, callback ) {\n\t\t\tvar onEndCallbackFn = function( ev ) {\n\t\t\t\tif( support.transitions ) {\n\t\t\t\t\tif( ev.target != this ) return;\n\t\t\t\t\tthis.removeEventListener( transEndEventName, onEndCallbackFn );\n\t\t\t\t}\n\t\t\t\tif( callback && typeof callback === 'function' ) { callback.call(this); }\n\t\t\t};\n\t\t\tif( support.transitions ) {\n\t\t\t\tel.addEventListener( transEndEventName, onEndCallbackFn );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tonEndCallbackFn();\n\t\t\t}\n\t\t};\n\n\t/**\n\t * some helper functions\n\t */\n\t\n\tfunction throttle(fn, delay) {\n\t\tvar allowSample = true;\n\n\t\treturn function(e) {\n\t\t\tif (allowSample) {\n\t\t\t\tallowSample = false;\n\t\t\t\tsetTimeout(function() { allowSample = true; }, delay);\n\t\t\t\tfn(e);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction nextSibling(el) {\n\t\tvar nextSibling = el.nextSibling;\n\t\twhile(nextSibling && nextSibling.nodeType != 1) {\n\t\t\tnextSibling = nextSibling.nextSibling\n\t\t}\n\t\treturn nextSibling;\n\t}\n\n\tfunction extend( a, b ) {\n\t\tfor( var key in b ) { \n\t\t\tif( b.hasOwnProperty( key ) ) {\n\t\t\t\ta[key] = b[key];\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\n\t/**\n\t * GridFx obj\n\t */\n\tfunction GridFx(el, options) {\n\t\tthis.gridEl = el;\n\t\tthis.options = extend( {}, this.options );\n\t\textend( this.options, options );\n\t\t\n\t\tthis.items = [].slice.call(this.gridEl.querySelectorAll('.grid__item'));\n\t\tthis.previewEl = nextSibling(this.gridEl);\n\t\tthis.isExpanded = false;\n\t\tthis.isAnimating = false;\n\t\tthis.closeCtrl = this.previewEl.querySelector('button.action--close');\n\t\tthis.previewDescriptionEl = this.previewEl.querySelector('.description--preview');\n\n\t\tthis._init();\n\t}\n\n\t/**\n\t * options\n\t */\n\tGridFx.prototype.options = {\n\t\tpagemargin : 0,\n\t\t// x and y can have values from 0 to 1 (percentage). If negative then it means the alignment is left and/or top rather than right and/or bottom\n\t\t// so, as an example, if we want our large image to be positioned vertically on 25% of the screen and centered horizontally the values would be x:1,y:-0.25\n\t\timgPosition : { x : 1, y : 1 },\n\t\tonInit : function(instance) { return false; },\n\t\tonResize : function(instance) { return false; },\n\t\tonOpenItem : function(instance, item) { return false; },\n\t\tonCloseItem : function(instance, item) { return false; },\n\t\tonExpand : function() { return false; }\n\t}\n\n\tGridFx.prototype._init = function() {\n\t\t// callback\n\t\tthis.options.onInit(this);\n\n\t\tvar self = this;\n\t\t// init masonry after all images are loaded\n\t\timagesLoaded( this.gridEl, function() {\n\t\t\t// initialize masonry\n\t\t\tnew Masonry(self.gridEl, {\n\t\t\t\titemSelector: '.grid__item',\n\t\t\t\tisFitWidth : true\n\t\t\t});\n\t\t\t// show grid after all images (thumbs) are loaded\n\t\t\tclassie.add(self.gridEl, 'grid--loaded');\n\t\t\t// init/bind events\n\t\t\tself._initEvents();\n\t\t\t// create the large image and append it to the DOM\n\t\t\tself._setOriginal();\n\t\t\t// create the clone image and append it to the DOM\n\t\t\tself._setClone();\n\t\t});\n\t};\n\n\t/**\n\t * initialize/bind events\n\t */\n\tGridFx.prototype._initEvents = function () {\n\t\tvar self = this,\n\t\t\tclickEvent = (document.ontouchstart!==null ? 'click' : 'touchstart');\n\n\t\tthis.items.forEach(function(item) {\n\t\t\tvar touchend = function(ev) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself._openItem(ev, item);\n\t\t\t\t\titem.removeEventListener('touchend', touchend);\t\n\t\t\t\t},\n\t\t\t\ttouchmove = function(ev) {\n\t\t\t\t\titem.removeEventListener('touchend', touchend);\t\n\t\t\t\t},\n\t\t\t\tmanageTouch = function() {\n\t\t\t\t\titem.addEventListener('touchend', touchend);\n\t\t\t\t\titem.addEventListener('touchmove', touchmove);\n\t\t\t\t};\n\n\t\t\titem.addEventListener(clickEvent, function(ev) {\n\t\t\t\tif(clickEvent === 'click') {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tself._openItem(ev, item);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmanageTouch();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// close expanded image\n\t\tthis.closeCtrl.addEventListener('click', function() {\n\t\t\tself._closeItem(); \n\t\t});\n\n\t\twindow.addEventListener('resize', throttle(function(ev) {\n\t\t\t// callback\n\t\t\tself.options.onResize(self);\n\t\t}, 10));\n\t}\n\n\t/**\n\t * open a grid item\n\t */\n\tGridFx.prototype._openItem = function(ev, item) {\n\t\tif( this.isAnimating || this.isExpanded ) return;\n\t\tthis.isAnimating = true;\n\t\tthis.isExpanded = true;\n\n\t\t// item's image\n\t\tvar gridImg = item.querySelector('img'),\n\t\t\tgridImgOffset = gridImg.getBoundingClientRect();\n\n\t\t// index of current item\n\t\tthis.current = this.items.indexOf(item);\n\n\t\t// set the src of the original image element (large image)\n\t\tthis._setOriginal(item.querySelector('a').getAttribute('href'));\n\t\t\n\t\t// callback\n\t\tthis.options.onOpenItem(this, item);\n\n\t\t// set the clone image\n\t\tthis._setClone(gridImg.src, {\n\t\t\twidth : gridImg.offsetWidth,\n\t\t\theight : gridImg.offsetHeight,\n\t\t\tleft : gridImgOffset.left,\n\t\t\ttop : gridImgOffset.top\n\t\t});\n\n\t\t// hide original grid item\n\t\tclassie.add(item, 'grid__item--current');\n\n\t\t// calculate the transform value for the clone to animate to the full image view\n\t\tvar win = this._getWinSize(),\n\t\t\toriginalSizeArr = item.getAttribute('data-size').split('x'),\n\t\t\toriginalSize = {width: originalSizeArr[0], height: originalSizeArr[1]},\n\t\t\tdx = ((this.options.imgPosition.x > 0 ? 1-Math.abs(this.options.imgPosition.x) : Math.abs(this.options.imgPosition.x)) * win.width + this.options.imgPosition.x * win.width/2) - gridImgOffset.left - 0.5 * gridImg.offsetWidth,\n\t\t\tdy = ((this.options.imgPosition.y > 0 ? 1-Math.abs(this.options.imgPosition.y) : Math.abs(this.options.imgPosition.y)) * win.height + this.options.imgPosition.y * win.height/2) - gridImgOffset.top - 0.5 * gridImg.offsetHeight,\n\t\t\tz = Math.min( Math.min(win.width*Math.abs(this.options.imgPosition.x) - this.options.pagemargin, originalSize.width - this.options.pagemargin)/gridImg.offsetWidth, Math.min(win.height*Math.abs(this.options.imgPosition.y) - this.options.pagemargin, originalSize.height - this.options.pagemargin)/gridImg.offsetHeight );\n\n\t\t// apply transform to the clone\n\t\tthis.cloneImg.style.WebkitTransform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\t\tthis.cloneImg.style.transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\n\t\t// add the description if any\n\t\tvar descriptionEl = item.querySelector('.description');\n\t\tif( descriptionEl ) {\n\t\t\tthis.previewDescriptionEl.innerHTML = descriptionEl.innerHTML;\n\t\t}\n\n\t\tvar self = this;\n\t\tsetTimeout(function() { \n\t\t\t// controls the elements inside the expanded view\n\t\t\tclassie.add(self.previewEl, 'preview--open');\n\t\t\t// callback\n\t\t\tself.options.onExpand();\n\t\t}, 0);\n\n\t\t// after the clone animates..\n\t\tonEndTransition(this.cloneImg, function() {\n\t\t\t// when the original/large image is loaded..\n\t\t\timagesLoaded(self.originalImg, function() {\n\t\t\t\t// close button just gets shown after the large image gets loaded\n\t\t\t\tclassie.add(self.previewEl, 'preview--image-loaded');\n\t\t\t\t// animate the opacity to 1\n\t\t\t\tself.originalImg.style.opacity = 1;\n\t\t\t\t// and once that's done..\n\t\t\t\tonEndTransition(self.originalImg, function() {\n\t\t\t\t\t// reset cloneImg\n\t\t\t\t\tself.cloneImg.style.opacity = 0;\n\t\t\t\t\tself.cloneImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\t\t\t\tself.cloneImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n\t\t\t\t\tself.isAnimating = false;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t});\t\n\t\t});\n\t};\n\n\t/**\n\t * create/set the original/large image element\n\t */\n\tGridFx.prototype._setOriginal = function(src) {\n\t\tif( !src ) {\n\t\t\tthis.originalImg = document.createElement('img');\n\t\t\tthis.originalImg.className = 'original';\n\t\t\tthis.originalImg.style.opacity = 0;\n\t\t\tthis.originalImg.style.maxWidth = 'calc(' + parseInt(Math.abs(this.options.imgPosition.x)*100) + 'vw - ' + this.options.pagemargin + 'px)';\n\t\t\tthis.originalImg.style.maxHeight = 'calc(' + parseInt(Math.abs(this.options.imgPosition.y)*100) + 'vh - ' + this.options.pagemargin + 'px)';\n\t\t\t// need it because of firefox\n\t\t\tthis.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\t\tthis.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\t\tsrc = '';\n\t\t\tthis.previewEl.appendChild(this.originalImg);\n\t\t}\n\n\t\tthis.originalImg.setAttribute('src', src);\n\t};\n\n\t/**\n\t * create/set the clone image element\n\t */\n\tGridFx.prototype._setClone = function(src, settings) {\n\t\tif( !src ) {\n\t\t\tthis.cloneImg = document.createElement('img');\n\t\t\tthis.cloneImg.className = 'clone';\n\t\t\tsrc = '';\n\t\t\tthis.cloneImg.style.opacity = 0;\n\t\t\tthis.previewEl.appendChild(this.cloneImg);\n\t\t}\n\t\telse {\n\t\t\tthis.cloneImg.style.opacity = 1;\n\t\t\t// set top/left/width/height of grid item's image to the clone\n\t\t\tthis.cloneImg.style.width = settings.width  + 'px';\n\t\t\tthis.cloneImg.style.height = settings.height  + 'px';\n\t\t\tthis.cloneImg.style.top = settings.top  + 'px';\n\t\t\tthis.cloneImg.style.left = settings.left  + 'px';\n\t\t}\n\n\t\tthis.cloneImg.setAttribute('src', src);\n\t};\n\n\t/**\n\t * closes the original/large image view\n\t */\n\tGridFx.prototype._closeItem = function() {\n\t\tif( !this.isExpanded || this.isAnimating ) return;\n\t\tthis.isExpanded = false;\n\t\tthis.isAnimating = true;\n\n\t\t// the grid item's image and its offset\n\t\tvar gridItem = this.items[this.current],\n\t\t\tgridImg = gridItem.querySelector('img'),\n\t\t\tgridImgOffset = gridImg.getBoundingClientRect(),\n\t\t\tself = this;\n\n\t\tclassie.remove(this.previewEl, 'preview--open');\n\t\tclassie.remove(this.previewEl, 'preview--image-loaded');\n\t\t\n\t\t// callback\n\t\tthis.options.onCloseItem(this, gridItem);\n\n\t\t// large image will animate back to the position of its grid's item\n\t\tclassie.add(this.originalImg, 'animate');\n\n\t\t// set the transform to the original/large image\n\t\tvar win = this._getWinSize(),\n\t\t\tdx = gridImgOffset.left + gridImg.offsetWidth/2 - ((this.options.imgPosition.x > 0 ? 1-Math.abs(this.options.imgPosition.x) : Math.abs(this.options.imgPosition.x)) * win.width + this.options.imgPosition.x * win.width/2),\n\t\t\tdy = gridImgOffset.top + gridImg.offsetHeight/2 - ((this.options.imgPosition.y > 0 ? 1-Math.abs(this.options.imgPosition.y) : Math.abs(this.options.imgPosition.y)) * win.height + this.options.imgPosition.y * win.height/2),\n\t\t\tz = gridImg.offsetWidth/this.originalImg.offsetWidth;\n\n\t\tthis.originalImg.style.WebkitTransform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\n\t\tthis.originalImg.style.transform = 'translate3d(' + dx + 'px, ' + dy + 'px, 0) scale3d(' + z + ', ' + z + ', 1)';\t\n\t\t\n\t\t// once that's done..\n\t\tonEndTransition(this.originalImg, function() {\n\t\t\t// clear description\n\t\t\tself.previewDescriptionEl.innerHTML = '';\n\n\t\t\t// show original grid item\n\t\t\tclassie.remove(gridItem, 'grid__item--current');\n\n\t\t\t// fade out the original image\n\t\t\tsetTimeout(function() { self.originalImg.style.opacity = 0;\t}, 60);\n\n\t\t\t// and after that\n\t\t\tonEndTransition(self.originalImg, function() {\n\t\t\t\t// reset original/large image\n\t\t\t\tclassie.remove(self.originalImg, 'animate');\n\t\t\t\tself.originalImg.style.WebkitTransform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\t\t\t\tself.originalImg.style.transform = 'translate3d(0,0,0) scale3d(1,1,1)';\n\n\t\t\t\tself.isAnimating = false;\n\t\t\t});\n\t\t});\n\t};\n\n\t/**\n\t * gets the window sizes\n\t */\n\tGridFx.prototype._getWinSize = function() {\n\t\treturn {\n\t\t\twidth: document.documentElement.clientWidth,\n\t\t\theight: window.innerHeight\n\t\t};\n\t};\n\n\twindow.GridFx = GridFx;\n\n})(window);"]}]}