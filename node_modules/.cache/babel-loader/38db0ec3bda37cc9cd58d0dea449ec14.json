{"remainingRequest":"E:\\vue\\xiaoxiao-blog-frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\vue\\xiaoxiao-blog-frontend\\src\\assets\\js\\plugins.js","dependencies":[{"path":"E:\\vue\\xiaoxiao-blog-frontend\\src\\assets\\js\\plugins.js","mtime":1578800074925},{"path":"E:\\vue\\xiaoxiao-blog-frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue\\xiaoxiao-blog-frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pcy1hcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5sYXN0LWluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmV2ZXJzZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUubm93IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5iaW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmNyZWF0ZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtZmxvYXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5mbGFncyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmFuY2hvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkU6XFx2dWVcXHhpYW94aWFvLWJsb2ctZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAqIGJvb3RzdHJhcC1zY3JvbGxzcHkuanMgdjIuMC40CiAqIGh0dHA6Ly90d2l0dGVyLmdpdGh1Yi5jb20vYm9vdHN0cmFwL2phdmFzY3JpcHQuaHRtbCNzY3JvbGxzcHkKICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogKiBDb3B5cmlnaHQgMjAxMiBUd2l0dGVyLCBJbmMuCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogKgogKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICoKICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsKaW1wb3J0ICIuLi9ib290c3RyYXAvanMvYm9vdHN0cmFwLm1pbiI7CiFmdW5jdGlvbiAoJCQpIHsKICAidXNlIHN0cmljdCI7IC8vIGpzaGludCA7XzsKCiAgLyogU0NST0xMU1BZIENMQVNTIERFRklOSVRJT04KICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICBmdW5jdGlvbiBTY3JvbGxTcHkoZWxlbWVudCwgb3B0aW9ucykgewogICAgdmFyIHByb2Nlc3MgPSAkLnByb3h5KHRoaXMucHJvY2VzcywgdGhpcyksCiAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpLmlzKCdib2R5JykgPyAkKHdpbmRvdykgOiAkKGVsZW1lbnQpLAogICAgICAgIGhyZWY7CiAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgJC5mbi5zY3JvbGxzcHkuZGVmYXVsdHMsIG9wdGlvbnMpOwogICAgdGhpcy4kc2Nyb2xsRWxlbWVudCA9ICRlbGVtZW50Lm9uKCdzY3JvbGwuc2Nyb2xsLmRhdGEtYXBpJywgcHJvY2Vzcyk7CiAgICB0aGlzLnNlbGVjdG9yID0gKHRoaXMub3B0aW9ucy50YXJnZXQgfHwgKGhyZWYgPSAkKGVsZW1lbnQpLmF0dHIoJ2hyZWYnKSkgJiYgaHJlZi5yZXBsYWNlKC8uKig/PSNbXlxzXSskKS8sICcnKSAvL3N0cmlwIGZvciBpZTcKICAgIHx8ICcnKSArICcgLm5hdiBsaSA+IGEnOwogICAgdGhpcy4kYm9keSA9ICQoJ2JvZHknKTsKICAgIHRoaXMucmVmcmVzaCgpOwogICAgdGhpcy5wcm9jZXNzKCk7CiAgfQoKICBTY3JvbGxTcHkucHJvdG90eXBlID0gewogICAgY29uc3RydWN0b3I6IFNjcm9sbFNweSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goKSB7CiAgICAgIHZhciBzZWxmID0gdGhpcywKICAgICAgICAgICR0YXJnZXRzOwogICAgICB0aGlzLm9mZnNldHMgPSAkKFtdKTsKICAgICAgdGhpcy50YXJnZXRzID0gJChbXSk7CiAgICAgICR0YXJnZXRzID0gdGhpcy4kYm9keS5maW5kKHRoaXMuc2VsZWN0b3IpLm1hcChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyICRlbCA9ICQodGhpcyksCiAgICAgICAgICAgIGhyZWYgPSAkZWwuZGF0YSgndGFyZ2V0JykgfHwgJGVsLmF0dHIoJ2hyZWYnKSwKICAgICAgICAgICAgJGhyZWYgPSAvXiNcdy8udGVzdChocmVmKSAmJiAkKGhyZWYpOwogICAgICAgIHJldHVybiAkaHJlZiAmJiBocmVmLmxlbmd0aCAmJiBbWyRocmVmLnBvc2l0aW9uKCkudG9wLCBocmVmXV0gfHwgbnVsbDsKICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhWzBdIC0gYlswXTsKICAgICAgfSkuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5vZmZzZXRzLnB1c2godGhpc1swXSk7CiAgICAgICAgc2VsZi50YXJnZXRzLnB1c2godGhpc1sxXSk7CiAgICAgIH0pOwogICAgfSwKICAgIHByb2Nlc3M6IGZ1bmN0aW9uIHByb2Nlc3MoKSB7CiAgICAgIHZhciBzY3JvbGxUb3AgPSB0aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpICsgdGhpcy5vcHRpb25zLm9mZnNldCwKICAgICAgICAgIHNjcm9sbEhlaWdodCA9IHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0IHx8IHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0LAogICAgICAgICAgbWF4U2Nyb2xsID0gc2Nyb2xsSGVpZ2h0IC0gdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKSwKICAgICAgICAgIG9mZnNldHMgPSB0aGlzLm9mZnNldHMsCiAgICAgICAgICB0YXJnZXRzID0gdGhpcy50YXJnZXRzLAogICAgICAgICAgYWN0aXZlVGFyZ2V0ID0gdGhpcy5hY3RpdmVUYXJnZXQsCiAgICAgICAgICBpOwoKICAgICAgaWYgKHNjcm9sbFRvcCA+PSBtYXhTY3JvbGwpIHsKICAgICAgICByZXR1cm4gYWN0aXZlVGFyZ2V0ICE9IChpID0gdGFyZ2V0cy5sYXN0KClbMF0pICYmIHRoaXMuYWN0aXZhdGUoaSk7CiAgICAgIH0KCiAgICAgIGZvciAoaSA9IG9mZnNldHMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgYWN0aXZlVGFyZ2V0ICE9IHRhcmdldHNbaV0gJiYgc2Nyb2xsVG9wID49IG9mZnNldHNbaV0gJiYgKCFvZmZzZXRzW2kgKyAxXSB8fCBzY3JvbGxUb3AgPD0gb2Zmc2V0c1tpICsgMV0pICYmIHRoaXMuYWN0aXZhdGUodGFyZ2V0c1tpXSk7CiAgICAgIH0KICAgIH0sCiAgICBhY3RpdmF0ZTogZnVuY3Rpb24gYWN0aXZhdGUodGFyZ2V0KSB7CiAgICAgIHZhciBhY3RpdmUsIHNlbGVjdG9yOwogICAgICB0aGlzLmFjdGl2ZVRhcmdldCA9IHRhcmdldDsKICAgICAgJCh0aGlzLnNlbGVjdG9yKS5wYXJlbnQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7CiAgICAgIHNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciArICdbZGF0YS10YXJnZXQ9IicgKyB0YXJnZXQgKyAnIl0sJyArIHRoaXMuc2VsZWN0b3IgKyAnW2hyZWY9IicgKyB0YXJnZXQgKyAnIl0nOwogICAgICBhY3RpdmUgPSAkKHNlbGVjdG9yKS5wYXJlbnQoJ2xpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpOwoKICAgICAgaWYgKGFjdGl2ZS5wYXJlbnQoJy5kcm9wZG93bi1tZW51JykpIHsKICAgICAgICBhY3RpdmUgPSBhY3RpdmUuY2xvc2VzdCgnbGkuZHJvcGRvd24nKS5hZGRDbGFzcygnYWN0aXZlJyk7CiAgICAgIH0KCiAgICAgIGFjdGl2ZS50cmlnZ2VyKCdhY3RpdmF0ZScpOwogICAgfQogIH07CiAgLyogU0NST0xMU1BZIFBMVUdJTiBERUZJTklUSU9OCiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogICQuZm4uc2Nyb2xsc3B5ID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksCiAgICAgICAgICBkYXRhID0gJHRoaXMuZGF0YSgnc2Nyb2xsc3B5JyksCiAgICAgICAgICBvcHRpb25zID0gX3R5cGVvZihvcHRpb24pID09ICdvYmplY3QnICYmIG9wdGlvbjsKICAgICAgaWYgKCFkYXRhKSAkdGhpcy5kYXRhKCdzY3JvbGxzcHknLCBkYXRhID0gbmV3IFNjcm9sbFNweSh0aGlzLCBvcHRpb25zKSk7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uID09ICdzdHJpbmcnKSBkYXRhW29wdGlvbl0oKTsKICAgIH0pOwogIH07CgogICQuZm4uc2Nyb2xsc3B5LkNvbnN0cnVjdG9yID0gU2Nyb2xsU3B5OwogICQuZm4uc2Nyb2xsc3B5LmRlZmF1bHRzID0gewogICAgb2Zmc2V0OiAxMAogIH07CiAgLyogU0NST0xMU1BZIERBVEEtQVBJCiAgICogPT09PT09PT09PT09PT09PT09ICovCgogICQoZnVuY3Rpb24gKCkgewogICAgJCgnW2RhdGEtc3B5PSJzY3JvbGwiXScpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgJHNweSA9ICQodGhpcyk7CiAgICAgICRzcHkuc2Nyb2xsc3B5KCRzcHkuZGF0YSgpKTsKICAgIH0pOwogIH0pOwp9KHdpbmRvdy5qUXVlcnkpOwovKiEKICogTWFzb25yeSBQQUNLQUdFRCB2NC4wLjAKICogQ2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnkKICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tCiAqIE1JVCBMaWNlbnNlCiAqIGJ5IERhdmlkIERlU2FuZHJvCiAqLwoKLyoqCiAqIEJyaWRnZXQgbWFrZXMgalF1ZXJ5IHdpZGdldHMKICogdjIuMC4wCiAqIE1JVCBsaWNlbnNlCiAqLwoKLyoganNoaW50IGJyb3dzZXI6IHRydWUsIHN0cmljdDogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqLwoKKGZ1bmN0aW9uICh3aW5kb3csIGZhY3RvcnkpIHsKICAndXNlIHN0cmljdCc7CiAgLyogZ2xvYmFscyBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlLCByZXF1aXJlOiBmYWxzZSAqLwoKICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRAogICAgZGVmaW5lKCdqcXVlcnktYnJpZGdldC9qcXVlcnktYnJpZGdldCcsIFsnanF1ZXJ5J10sIGZ1bmN0aW9uIChqUXVlcnkpIHsKICAgICAgZmFjdG9yeSh3aW5kb3csIGpRdWVyeSk7CiAgICB9KTsKICB9IGVsc2UgaWYgKCh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgLy8gQ29tbW9uSlMKICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSh3aW5kb3csIHJlcXVpcmUoJ2pxdWVyeScpKTsKICB9IGVsc2UgewogICAgLy8gYnJvd3NlciBnbG9iYWwKICAgIHdpbmRvdy5qUXVlcnlCcmlkZ2V0ID0gZmFjdG9yeSh3aW5kb3csIHdpbmRvdy5qUXVlcnkpOwogIH0KfSkod2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KHdpbmRvdywgalF1ZXJ5KSB7CiAgJ3VzZSBzdHJpY3QnOyAvLyAtLS0tLSB1dGlscyAtLS0tLSAvLwoKICB2YXIgYXJyYXlTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsgLy8gaGVscGVyIGZ1bmN0aW9uIGZvciBsb2dnaW5nIGVycm9ycwogIC8vICQuZXJyb3IgYnJlYWtzIGpRdWVyeSBjaGFpbmluZwoKICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlOwogIHZhciBsb2dFcnJvciA9IHR5cGVvZiBjb25zb2xlID09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKCkge30gOiBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsKICB9OyAvLyAtLS0tLSBqUXVlcnlCcmlkZ2V0IC0tLS0tIC8vCgogIGZ1bmN0aW9uIGpRdWVyeUJyaWRnZXQobmFtZXNwYWNlLCBQbHVnaW5DbGFzcywgJCkgewogICAgJCA9ICQgfHwgalF1ZXJ5IHx8IHdpbmRvdy5qUXVlcnk7CgogICAgaWYgKCEkKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gYWRkIG9wdGlvbiBtZXRob2QgLT4gJCgpLnBsdWdpbignb3B0aW9uJywgey4uLn0pCgoKICAgIGlmICghUGx1Z2luQ2xhc3MucHJvdG90eXBlLm9wdGlvbikgewogICAgICAvLyBvcHRpb24gc2V0dGVyCiAgICAgIFBsdWdpbkNsYXNzLnByb3RvdHlwZS5vcHRpb24gPSBmdW5jdGlvbiAob3B0cykgewogICAgICAgIC8vIGJhaWwgb3V0IGlmIG5vdCBhbiBvYmplY3QKICAgICAgICBpZiAoISQuaXNQbGFpbk9iamVjdChvcHRzKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQodHJ1ZSwgdGhpcy5vcHRpb25zLCBvcHRzKTsKICAgICAgfTsKICAgIH0gLy8gbWFrZSBqUXVlcnkgcGx1Z2luCgoKICAgICQuZm5bbmFtZXNwYWNlXSA9IGZ1bmN0aW9uIChhcmcwCiAgICAvKiwgYXJnMSAqLwogICAgKSB7CiAgICAgIGlmICh0eXBlb2YgYXJnMCA9PSAnc3RyaW5nJykgewogICAgICAgIC8vIG1ldGhvZCBjYWxsICQoKS5wbHVnaW4oICdtZXRob2ROYW1lJywgeyBvcHRpb25zIH0gKQogICAgICAgIC8vIHNoaWZ0IGFyZ3VtZW50cyBieSAxCiAgICAgICAgdmFyIGFyZ3MgPSBhcnJheVNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgICAgICByZXR1cm4gbWV0aG9kQ2FsbCh0aGlzLCBhcmcwLCBhcmdzKTsKICAgICAgfSAvLyBqdXN0ICQoKS5wbHVnaW4oeyBvcHRpb25zIH0pCgoKICAgICAgcGxhaW5DYWxsKHRoaXMsIGFyZzApOwogICAgICByZXR1cm4gdGhpczsKICAgIH07IC8vICQoKS5wbHVnaW4oJ21ldGhvZE5hbWUnKQoKCiAgICBmdW5jdGlvbiBtZXRob2RDYWxsKCRlbGVtcywgbWV0aG9kTmFtZSwgYXJncykgewogICAgICB2YXIgcmV0dXJuVmFsdWU7CiAgICAgIHZhciBwbHVnaW5NZXRob2RTdHIgPSAnJCgpLicgKyBuYW1lc3BhY2UgKyAnKCInICsgbWV0aG9kTmFtZSArICciKSc7CiAgICAgICRlbGVtcy5lYWNoKGZ1bmN0aW9uIChpLCBlbGVtKSB7CiAgICAgICAgLy8gZ2V0IGluc3RhbmNlCiAgICAgICAgdmFyIGluc3RhbmNlID0gJC5kYXRhKGVsZW0sIG5hbWVzcGFjZSk7CgogICAgICAgIGlmICghaW5zdGFuY2UpIHsKICAgICAgICAgIGxvZ0Vycm9yKG5hbWVzcGFjZSArICcgbm90IGluaXRpYWxpemVkLiBDYW5ub3QgY2FsbCBtZXRob2RzLCBpLmUuICcgKyBwbHVnaW5NZXRob2RTdHIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdmFyIG1ldGhvZCA9IGluc3RhbmNlW21ldGhvZE5hbWVdOwoKICAgICAgICBpZiAoIW1ldGhvZCB8fCBtZXRob2ROYW1lLmNoYXJBdCgwKSA9PSAnXycpIHsKICAgICAgICAgIGxvZ0Vycm9yKHBsdWdpbk1ldGhvZFN0ciArICcgaXMgbm90IGEgdmFsaWQgbWV0aG9kJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBhcHBseSBtZXRob2QsIGdldCByZXR1cm4gdmFsdWUKCgogICAgICAgIHZhciB2YWx1ZSA9IG1ldGhvZC5hcHBseShpbnN0YW5jZSwgYXJncyk7IC8vIHNldCByZXR1cm4gdmFsdWUgaWYgdmFsdWUgaXMgcmV0dXJuZWQsIHVzZSBvbmx5IGZpcnN0IHZhbHVlCgogICAgICAgIHJldHVyblZhbHVlID0gcmV0dXJuVmFsdWUgPT09IHVuZGVmaW5lZCA/IHZhbHVlIDogcmV0dXJuVmFsdWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmV0dXJuVmFsdWUgIT09IHVuZGVmaW5lZCA/IHJldHVyblZhbHVlIDogJGVsZW1zOwogICAgfQoKICAgIGZ1bmN0aW9uIHBsYWluQ2FsbCgkZWxlbXMsIG9wdGlvbnMpIHsKICAgICAgJGVsZW1zLmVhY2goZnVuY3Rpb24gKGksIGVsZW0pIHsKICAgICAgICB2YXIgaW5zdGFuY2UgPSAkLmRhdGEoZWxlbSwgbmFtZXNwYWNlKTsKCiAgICAgICAgaWYgKGluc3RhbmNlKSB7CiAgICAgICAgICAvLyBzZXQgb3B0aW9ucyAmIGluaXQKICAgICAgICAgIGluc3RhbmNlLm9wdGlvbihvcHRpb25zKTsKCiAgICAgICAgICBpbnN0YW5jZS5faW5pdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBpbml0aWFsaXplIG5ldyBpbnN0YW5jZQogICAgICAgICAgaW5zdGFuY2UgPSBuZXcgUGx1Z2luQ2xhc3MoZWxlbSwgb3B0aW9ucyk7CiAgICAgICAgICAkLmRhdGEoZWxlbSwgbmFtZXNwYWNlLCBpbnN0YW5jZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICB1cGRhdGVKUXVlcnkoJCk7CiAgfSAvLyAtLS0tLSB1cGRhdGVKUXVlcnkgLS0tLS0gLy8KICAvLyBzZXQgJC5icmlkZ2V0IGZvciB2MSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQoKCiAgZnVuY3Rpb24gdXBkYXRlSlF1ZXJ5KCQpIHsKICAgIGlmICghJCB8fCAkICYmICQuYnJpZGdldCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgJC5icmlkZ2V0ID0galF1ZXJ5QnJpZGdldDsKICB9CgogIHVwZGF0ZUpRdWVyeShqUXVlcnkgfHwgd2luZG93LmpRdWVyeSk7IC8vIC0tLS0tICAtLS0tLSAvLwoKICByZXR1cm4galF1ZXJ5QnJpZGdldDsKfSk7Ci8qKgogKiBFdkVtaXR0ZXIgdjEuMC4xCiAqIExpbCcgZXZlbnQgZW1pdHRlcgogKiBNSVQgTGljZW5zZQogKi8KCi8qIGpzaGludCB1bnVzZWQ6IHRydWUsIHVuZGVmOiB0cnVlLCBzdHJpY3Q6IHRydWUgKi8KCgooZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkgewogIC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvbgoKICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLwoKICAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlICovCiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQgLSBSZXF1aXJlSlMKICAgIGRlZmluZSgnZXYtZW1pdHRlci9ldi1lbWl0dGVyJywgZmFjdG9yeSk7CiAgfSBlbHNlIGlmICgodHlwZW9mIG1vZHVsZSA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YobW9kdWxlKSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsKICAgIC8vIENvbW1vbkpTIC0gQnJvd3NlcmlmeSwgV2VicGFjawogICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7CiAgfSBlbHNlIHsvLyBCcm93c2VyIGdsb2JhbHMKICB9Cn0pKHRoaXMsIGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBFdkVtaXR0ZXIoKSB7fQoKICB2YXIgcHJvdG8gPSBFdkVtaXR0ZXIucHJvdG90eXBlOwoKICBwcm90by5vbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGxpc3RlbmVyKSB7CiAgICBpZiAoIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBzZXQgZXZlbnRzIGhhc2gKCgogICAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTsgLy8gc2V0IGxpc3RlbmVycyBhcnJheQoKICAgIHZhciBsaXN0ZW5lcnMgPSBldmVudHNbZXZlbnROYW1lXSA9IGV2ZW50c1tldmVudE5hbWVdIHx8IFtdOyAvLyBvbmx5IGFkZCBvbmNlCgogICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA9PSAtMSkgewogICAgICBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcHJvdG8ub25jZSA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGxpc3RlbmVyKSB7CiAgICBpZiAoIWV2ZW50TmFtZSB8fCAhbGlzdGVuZXIpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBhZGQgZXZlbnQKCgogICAgdGhpcy5vbihldmVudE5hbWUsIGxpc3RlbmVyKTsgLy8gc2V0IG9uY2UgZmxhZwogICAgLy8gc2V0IG9uY2VFdmVudHMgaGFzaAoKICAgIHZhciBvbmNlRXZlbnRzID0gdGhpcy5fb25jZUV2ZW50cyA9IHRoaXMuX29uY2VFdmVudHMgfHwge307IC8vIHNldCBvbmNlTGlzdGVuZXJzIGFycmF5CgogICAgdmFyIG9uY2VMaXN0ZW5lcnMgPSBvbmNlRXZlbnRzW2V2ZW50TmFtZV0gPSBvbmNlRXZlbnRzW2V2ZW50TmFtZV0gfHwgW107IC8vIHNldCBmbGFnCgogICAgb25jZUxpc3RlbmVyc1tsaXN0ZW5lcl0gPSB0cnVlOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcHJvdG8ub2ZmID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHsKICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW2V2ZW50TmFtZV07CgogICAgaWYgKCFsaXN0ZW5lcnMgfHwgIWxpc3RlbmVycy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTsKCiAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgcHJvdG8uZW1pdEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgYXJncykgewogICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50cyAmJiB0aGlzLl9ldmVudHNbZXZlbnROYW1lXTsKCiAgICBpZiAoIWxpc3RlbmVycyB8fCAhbGlzdGVuZXJzLmxlbmd0aCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGkgPSAwOwogICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldOwogICAgYXJncyA9IGFyZ3MgfHwgW107IC8vIG9uY2Ugc3R1ZmYKCiAgICB2YXIgb25jZUxpc3RlbmVycyA9IHRoaXMuX29uY2VFdmVudHMgJiYgdGhpcy5fb25jZUV2ZW50c1tldmVudE5hbWVdOwoKICAgIHdoaWxlIChsaXN0ZW5lcikgewogICAgICB2YXIgaXNPbmNlID0gb25jZUxpc3RlbmVycyAmJiBvbmNlTGlzdGVuZXJzW2xpc3RlbmVyXTsKCiAgICAgIGlmIChpc09uY2UpIHsKICAgICAgICAvLyByZW1vdmUgbGlzdGVuZXIKICAgICAgICAvLyByZW1vdmUgYmVmb3JlIHRyaWdnZXIgdG8gcHJldmVudCByZWN1cnNpb24KICAgICAgICB0aGlzLm9mZihldmVudE5hbWUsIGxpc3RlbmVyKTsgLy8gdW5zZXQgb25jZSBmbGFnCgogICAgICAgIGRlbGV0ZSBvbmNlTGlzdGVuZXJzW2xpc3RlbmVyXTsKICAgICAgfSAvLyB0cmlnZ2VyIGxpc3RlbmVyCgoKICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJncyk7IC8vIGdldCBuZXh0IGxpc3RlbmVyCgogICAgICBpICs9IGlzT25jZSA/IDAgOiAxOwogICAgICBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsKICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9OwoKICByZXR1cm4gRXZFbWl0dGVyOwp9KTsKLyohCiAqIGdldFNpemUgdjIuMC4yCiAqIG1lYXN1cmUgc2l6ZSBvZiBlbGVtZW50cwogKiBNSVQgbGljZW5zZQogKi8KCi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHN0cmljdDogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqLwoKLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSwgY29uc29sZTogZmFsc2UgKi8KCgooZnVuY3Rpb24gKHdpbmRvdywgZmFjdG9yeSkgewogICd1c2Ugc3RyaWN0JzsKCiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICAvLyBBTUQKICAgIGRlZmluZSgnZ2V0LXNpemUvZ2V0LXNpemUnLCBbXSwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gZmFjdG9yeSgpOwogICAgfSk7CiAgfSBlbHNlIGlmICgodHlwZW9mIG1vZHVsZSA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YobW9kdWxlKSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsKICAgIC8vIENvbW1vbkpTCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTsKICB9IGVsc2UgewogICAgLy8gYnJvd3NlciBnbG9iYWwKICAgIHdpbmRvdy5nZXRTaXplID0gZmFjdG9yeSgpOwogIH0KfSkod2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KCkgewogICd1c2Ugc3RyaWN0JzsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gaGVscGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwogIC8vIGdldCBhIG51bWJlciBmcm9tIGEgc3RyaW5nLCBub3QgYSBwZXJjZW50YWdlCgogIGZ1bmN0aW9uIGdldFN0eWxlU2l6ZSh2YWx1ZSkgewogICAgdmFyIG51bSA9IHBhcnNlRmxvYXQodmFsdWUpOyAvLyBub3QgYSBwZXJjZW50IGxpa2UgJzEwMCUnLCBhbmQgYSBudW1iZXIKCiAgICB2YXIgaXNWYWxpZCA9IHZhbHVlLmluZGV4T2YoJyUnKSA9PSAtMSAmJiAhaXNOYU4obnVtKTsKICAgIHJldHVybiBpc1ZhbGlkICYmIG51bTsKICB9CgogIGZ1bmN0aW9uIG5vb3AoKSB7fQoKICB2YXIgbG9nRXJyb3IgPSB0eXBlb2YgY29uc29sZSA9PSAndW5kZWZpbmVkJyA/IG5vb3AgOiBmdW5jdGlvbiAobWVzc2FnZSkgewogICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTsKICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBtZWFzdXJlbWVudHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KCiAgdmFyIG1lYXN1cmVtZW50cyA9IFsncGFkZGluZ0xlZnQnLCAncGFkZGluZ1JpZ2h0JywgJ3BhZGRpbmdUb3AnLCAncGFkZGluZ0JvdHRvbScsICdtYXJnaW5MZWZ0JywgJ21hcmdpblJpZ2h0JywgJ21hcmdpblRvcCcsICdtYXJnaW5Cb3R0b20nLCAnYm9yZGVyTGVmdFdpZHRoJywgJ2JvcmRlclJpZ2h0V2lkdGgnLCAnYm9yZGVyVG9wV2lkdGgnLCAnYm9yZGVyQm90dG9tV2lkdGgnXTsKICB2YXIgbWVhc3VyZW1lbnRzTGVuZ3RoID0gbWVhc3VyZW1lbnRzLmxlbmd0aDsKCiAgZnVuY3Rpb24gZ2V0WmVyb1NpemUoKSB7CiAgICB2YXIgc2l6ZSA9IHsKICAgICAgd2lkdGg6IDAsCiAgICAgIGhlaWdodDogMCwKICAgICAgaW5uZXJXaWR0aDogMCwKICAgICAgaW5uZXJIZWlnaHQ6IDAsCiAgICAgIG91dGVyV2lkdGg6IDAsCiAgICAgIG91dGVySGVpZ2h0OiAwCiAgICB9OwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVhc3VyZW1lbnRzTGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIG1lYXN1cmVtZW50ID0gbWVhc3VyZW1lbnRzW2ldOwogICAgICBzaXplW21lYXN1cmVtZW50XSA9IDA7CiAgICB9CgogICAgcmV0dXJuIHNpemU7CiAgfSAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBnZXRTdHlsZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwoKICAvKioKICAgKiBnZXRTdHlsZSwgZ2V0IHN0eWxlIG9mIGVsZW1lbnQsIGNoZWNrIGZvciBGaXJlZm94IGJ1ZwogICAqIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTU0ODM5NwogICAqLwoKCiAgZnVuY3Rpb24gZ2V0U3R5bGUoZWxlbSkgewogICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTsKCiAgICBpZiAoIXN0eWxlKSB7CiAgICAgIGxvZ0Vycm9yKCdTdHlsZSByZXR1cm5lZCAnICsgc3R5bGUgKyAnLiBBcmUgeW91IHJ1bm5pbmcgdGhpcyBjb2RlIGluIGEgaGlkZGVuIGlmcmFtZSBvbiBGaXJlZm94PyAnICsgJ1NlZSBodHRwOi8vYml0Lmx5L2dldHNpemVidWcxJyk7CiAgICB9CgogICAgcmV0dXJuIHN0eWxlOwogIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gc2V0dXAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KCgogIHZhciBpc1NldHVwID0gZmFsc2U7CiAgdmFyIGlzQm94U2l6ZU91dGVyOwogIC8qKgogICAqIHNldHVwCiAgICogY2hlY2sgaXNCb3hTaXplck91dGVyCiAgICogZG8gb24gZmlyc3QgZ2V0U2l6ZSgpIHJhdGhlciB0aGFuIG9uIHBhZ2UgbG9hZCBmb3IgRmlyZWZveCBidWcKICAgKi8KCiAgZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAvLyBzZXR1cCBvbmNlCiAgICBpZiAoaXNTZXR1cCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaXNTZXR1cCA9IHRydWU7IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGJveCBzaXppbmcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KCiAgICAvKioKICAgICAqIFdlYktpdCBtZWFzdXJlcyB0aGUgb3V0ZXItd2lkdGggb24gc3R5bGUud2lkdGggb24gYm9yZGVyLWJveCBlbGVtcwogICAgICogSUUgJiBGaXJlZm94PDI5IG1lYXN1cmVzIHRoZSBpbm5lci13aWR0aAogICAgICovCgogICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZGl2LnN0eWxlLndpZHRoID0gJzIwMHB4JzsKICAgIGRpdi5zdHlsZS5wYWRkaW5nID0gJzFweCAycHggM3B4IDRweCc7CiAgICBkaXYuc3R5bGUuYm9yZGVyU3R5bGUgPSAnc29saWQnOwogICAgZGl2LnN0eWxlLmJvcmRlcldpZHRoID0gJzFweCAycHggM3B4IDRweCc7CiAgICBkaXYuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnOwogICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgIGJvZHkuYXBwZW5kQ2hpbGQoZGl2KTsKICAgIHZhciBzdHlsZSA9IGdldFN0eWxlKGRpdik7CiAgICBnZXRTaXplLmlzQm94U2l6ZU91dGVyID0gaXNCb3hTaXplT3V0ZXIgPSBnZXRTdHlsZVNpemUoc3R5bGUud2lkdGgpID09IDIwMDsKICAgIGJvZHkucmVtb3ZlQ2hpbGQoZGl2KTsKICB9IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIGdldFNpemUgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KCgogIGZ1bmN0aW9uIGdldFNpemUoZWxlbSkgewogICAgc2V0dXAoKTsgLy8gdXNlIHF1ZXJ5U2VsZXRvciBpZiBlbGVtIGlzIHN0cmluZwoKICAgIGlmICh0eXBlb2YgZWxlbSA9PSAnc3RyaW5nJykgewogICAgICBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtKTsKICAgIH0gLy8gZG8gbm90IHByb2NlZWQgb24gbm9uLW9iamVjdHMKCgogICAgaWYgKCFlbGVtIHx8IF90eXBlb2YoZWxlbSkgIT0gJ29iamVjdCcgfHwgIWVsZW0ubm9kZVR5cGUpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzdHlsZSA9IGdldFN0eWxlKGVsZW0pOyAvLyBpZiBoaWRkZW4sIGV2ZXJ5dGhpbmcgaXMgMAoKICAgIGlmIChzdHlsZS5kaXNwbGF5ID09ICdub25lJykgewogICAgICByZXR1cm4gZ2V0WmVyb1NpemUoKTsKICAgIH0KCiAgICB2YXIgc2l6ZSA9IHt9OwogICAgc2l6ZS53aWR0aCA9IGVsZW0ub2Zmc2V0V2lkdGg7CiAgICBzaXplLmhlaWdodCA9IGVsZW0ub2Zmc2V0SGVpZ2h0OwogICAgdmFyIGlzQm9yZGVyQm94ID0gc2l6ZS5pc0JvcmRlckJveCA9IHN0eWxlLmJveFNpemluZyA9PSAnYm9yZGVyLWJveCc7IC8vIGdldCBhbGwgbWVhc3VyZW1lbnRzCgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZWFzdXJlbWVudHNMZW5ndGg7IGkrKykgewogICAgICB2YXIgbWVhc3VyZW1lbnQgPSBtZWFzdXJlbWVudHNbaV07CiAgICAgIHZhciB2YWx1ZSA9IHN0eWxlW21lYXN1cmVtZW50XTsKICAgICAgdmFyIG51bSA9IHBhcnNlRmxvYXQodmFsdWUpOyAvLyBhbnkgJ2F1dG8nLCAnbWVkaXVtJyB2YWx1ZSB3aWxsIGJlIDAKCiAgICAgIHNpemVbbWVhc3VyZW1lbnRdID0gIWlzTmFOKG51bSkgPyBudW0gOiAwOwogICAgfQoKICAgIHZhciBwYWRkaW5nV2lkdGggPSBzaXplLnBhZGRpbmdMZWZ0ICsgc2l6ZS5wYWRkaW5nUmlnaHQ7CiAgICB2YXIgcGFkZGluZ0hlaWdodCA9IHNpemUucGFkZGluZ1RvcCArIHNpemUucGFkZGluZ0JvdHRvbTsKICAgIHZhciBtYXJnaW5XaWR0aCA9IHNpemUubWFyZ2luTGVmdCArIHNpemUubWFyZ2luUmlnaHQ7CiAgICB2YXIgbWFyZ2luSGVpZ2h0ID0gc2l6ZS5tYXJnaW5Ub3AgKyBzaXplLm1hcmdpbkJvdHRvbTsKICAgIHZhciBib3JkZXJXaWR0aCA9IHNpemUuYm9yZGVyTGVmdFdpZHRoICsgc2l6ZS5ib3JkZXJSaWdodFdpZHRoOwogICAgdmFyIGJvcmRlckhlaWdodCA9IHNpemUuYm9yZGVyVG9wV2lkdGggKyBzaXplLmJvcmRlckJvdHRvbVdpZHRoOwogICAgdmFyIGlzQm9yZGVyQm94U2l6ZU91dGVyID0gaXNCb3JkZXJCb3ggJiYgaXNCb3hTaXplT3V0ZXI7IC8vIG92ZXJ3cml0ZSB3aWR0aCBhbmQgaGVpZ2h0IGlmIHdlIGNhbiBnZXQgaXQgZnJvbSBzdHlsZQoKICAgIHZhciBzdHlsZVdpZHRoID0gZ2V0U3R5bGVTaXplKHN0eWxlLndpZHRoKTsKCiAgICBpZiAoc3R5bGVXaWR0aCAhPT0gZmFsc2UpIHsKICAgICAgc2l6ZS53aWR0aCA9IHN0eWxlV2lkdGggKyAoIC8vIGFkZCBwYWRkaW5nIGFuZCBib3JkZXIgdW5sZXNzIGl0J3MgYWxyZWFkeSBpbmNsdWRpbmcgaXQKICAgICAgaXNCb3JkZXJCb3hTaXplT3V0ZXIgPyAwIDogcGFkZGluZ1dpZHRoICsgYm9yZGVyV2lkdGgpOwogICAgfQoKICAgIHZhciBzdHlsZUhlaWdodCA9IGdldFN0eWxlU2l6ZShzdHlsZS5oZWlnaHQpOwoKICAgIGlmIChzdHlsZUhlaWdodCAhPT0gZmFsc2UpIHsKICAgICAgc2l6ZS5oZWlnaHQgPSBzdHlsZUhlaWdodCArICggLy8gYWRkIHBhZGRpbmcgYW5kIGJvcmRlciB1bmxlc3MgaXQncyBhbHJlYWR5IGluY2x1ZGluZyBpdAogICAgICBpc0JvcmRlckJveFNpemVPdXRlciA/IDAgOiBwYWRkaW5nSGVpZ2h0ICsgYm9yZGVySGVpZ2h0KTsKICAgIH0KCiAgICBzaXplLmlubmVyV2lkdGggPSBzaXplLndpZHRoIC0gKHBhZGRpbmdXaWR0aCArIGJvcmRlcldpZHRoKTsKICAgIHNpemUuaW5uZXJIZWlnaHQgPSBzaXplLmhlaWdodCAtIChwYWRkaW5nSGVpZ2h0ICsgYm9yZGVySGVpZ2h0KTsKICAgIHNpemUub3V0ZXJXaWR0aCA9IHNpemUud2lkdGggKyBtYXJnaW5XaWR0aDsKICAgIHNpemUub3V0ZXJIZWlnaHQgPSBzaXplLmhlaWdodCArIG1hcmdpbkhlaWdodDsKICAgIHJldHVybiBzaXplOwogIH0KCiAgcmV0dXJuIGdldFNpemU7Cn0pOwovKioKICogbWF0Y2hlc1NlbGVjdG9yIHYyLjAuMQogKiBtYXRjaGVzU2VsZWN0b3IoIGVsZW1lbnQsICcuc2VsZWN0b3InICkKICogTUlUIGxpY2Vuc2UKICovCgovKmpzaGludCBicm93c2VyOiB0cnVlLCBzdHJpY3Q6IHRydWUsIHVuZGVmOiB0cnVlLCB1bnVzZWQ6IHRydWUgKi8KCgooZnVuY3Rpb24gKHdpbmRvdywgZmFjdG9yeSkgewogIC8qZ2xvYmFsIGRlZmluZTogZmFsc2UsIG1vZHVsZTogZmFsc2UgKi8KICAndXNlIHN0cmljdCc7IC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvbgoKICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRAogICAgZGVmaW5lKCdtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3InLCBmYWN0b3J5KTsKICB9IGVsc2UgaWYgKCh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgLy8gQ29tbW9uSlMKICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpOwogIH0gZWxzZSB7CiAgICAvLyBicm93c2VyIGdsb2JhbAogICAgd2luZG93Lm1hdGNoZXNTZWxlY3RvciA9IGZhY3RvcnkoKTsKICB9Cn0pKHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeSgpIHsKICAndXNlIHN0cmljdCc7CgogIHZhciBtYXRjaGVzTWV0aG9kID0gZnVuY3Rpb24gKCkgewogICAgdmFyIEVsZW1Qcm90byA9IEVsZW1lbnQucHJvdG90eXBlOyAvLyBjaGVjayBmb3IgdGhlIHN0YW5kYXJkIG1ldGhvZCBuYW1lIGZpcnN0CgogICAgaWYgKEVsZW1Qcm90by5tYXRjaGVzKSB7CiAgICAgIHJldHVybiAnbWF0Y2hlcyc7CiAgICB9IC8vIGNoZWNrIHVuLXByZWZpeGVkCgoKICAgIGlmIChFbGVtUHJvdG8ubWF0Y2hlc1NlbGVjdG9yKSB7CiAgICAgIHJldHVybiAnbWF0Y2hlc1NlbGVjdG9yJzsKICAgIH0gLy8gY2hlY2sgdmVuZG9yIHByZWZpeGVzCgoKICAgIHZhciBwcmVmaXhlcyA9IFsnd2Via2l0JywgJ21veicsICdtcycsICdvJ107CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcmVmaXhlcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgcHJlZml4ID0gcHJlZml4ZXNbaV07CiAgICAgIHZhciBtZXRob2QgPSBwcmVmaXggKyAnTWF0Y2hlc1NlbGVjdG9yJzsKCiAgICAgIGlmIChFbGVtUHJvdG9bbWV0aG9kXSkgewogICAgICAgIHJldHVybiBtZXRob2Q7CiAgICAgIH0KICAgIH0KICB9KCk7CgogIHJldHVybiBmdW5jdGlvbiBtYXRjaGVzU2VsZWN0b3IoZWxlbSwgc2VsZWN0b3IpIHsKICAgIHJldHVybiBlbGVtW21hdGNoZXNNZXRob2RdKHNlbGVjdG9yKTsKICB9Owp9KTsKLyoqCiAqIEZpenp5IFVJIHV0aWxzIHYyLjAuMAogKiBNSVQgbGljZW5zZQogKi8KCi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHVuZGVmOiB0cnVlLCB1bnVzZWQ6IHRydWUsIHN0cmljdDogdHJ1ZSAqLwoKCihmdW5jdGlvbiAod2luZG93LCBmYWN0b3J5KSB7CiAgLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSwgcmVxdWlyZTogZmFsc2UgKi8KICAndXNlIHN0cmljdCc7IC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvbgoKICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRAogICAgZGVmaW5lKCdmaXp6eS11aS11dGlscy91dGlscycsIFsnbWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yJ10sIGZ1bmN0aW9uIChtYXRjaGVzU2VsZWN0b3IpIHsKICAgICAgcmV0dXJuIGZhY3Rvcnkod2luZG93LCBtYXRjaGVzU2VsZWN0b3IpOwogICAgfSk7CiAgfSBlbHNlIGlmICgodHlwZW9mIG1vZHVsZSA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YobW9kdWxlKSkgPT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsKICAgIC8vIENvbW1vbkpTCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkod2luZG93LCByZXF1aXJlKCdkZXNhbmRyby1tYXRjaGVzLXNlbGVjdG9yJykpOwogIH0gZWxzZSB7CiAgICAvLyBicm93c2VyIGdsb2JhbAogICAgd2luZG93LmZpenp5VUlVdGlscyA9IGZhY3Rvcnkod2luZG93LCB3aW5kb3cubWF0Y2hlc1NlbGVjdG9yKTsKICB9Cn0pKHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeSh3aW5kb3csIG1hdGNoZXNTZWxlY3RvcikgewogIHZhciB1dGlscyA9IHt9OyAvLyAtLS0tLSBleHRlbmQgLS0tLS0gLy8KICAvLyBleHRlbmRzIG9iamVjdHMKCiAgdXRpbHMuZXh0ZW5kID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGZvciAodmFyIHByb3AgaW4gYikgewogICAgICBhW3Byb3BdID0gYltwcm9wXTsKICAgIH0KCiAgICByZXR1cm4gYTsKICB9OyAvLyAtLS0tLSBtb2R1bG8gLS0tLS0gLy8KCgogIHV0aWxzLm1vZHVsbyA9IGZ1bmN0aW9uIChudW0sIGRpdikgewogICAgcmV0dXJuIChudW0gJSBkaXYgKyBkaXYpICUgZGl2OwogIH07IC8vIC0tLS0tIG1ha2VBcnJheSAtLS0tLSAvLwogIC8vIHR1cm4gZWxlbWVudCBvciBub2RlTGlzdCBpbnRvIGFuIGFycmF5CgoKICB1dGlscy5tYWtlQXJyYXkgPSBmdW5jdGlvbiAob2JqKSB7CiAgICB2YXIgYXJ5ID0gW107CgogICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAvLyB1c2Ugb2JqZWN0IGlmIGFscmVhZHkgYW4gYXJyYXkKICAgICAgYXJ5ID0gb2JqOwogICAgfSBlbHNlIGlmIChvYmogJiYgdHlwZW9mIG9iai5sZW5ndGggPT0gJ251bWJlcicpIHsKICAgICAgLy8gY29udmVydCBub2RlTGlzdCB0byBhcnJheQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykgewogICAgICAgIGFyeS5wdXNoKG9ialtpXSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIGFycmF5IG9mIHNpbmdsZSBpbmRleAogICAgICBhcnkucHVzaChvYmopOwogICAgfQoKICAgIHJldHVybiBhcnk7CiAgfTsgLy8gLS0tLS0gcmVtb3ZlRnJvbSAtLS0tLSAvLwoKCiAgdXRpbHMucmVtb3ZlRnJvbSA9IGZ1bmN0aW9uIChhcnksIG9iaikgewogICAgdmFyIGluZGV4ID0gYXJ5LmluZGV4T2Yob2JqKTsKCiAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgYXJ5LnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfTsgLy8gLS0tLS0gZ2V0UGFyZW50IC0tLS0tIC8vCgoKICB1dGlscy5nZXRQYXJlbnQgPSBmdW5jdGlvbiAoZWxlbSwgc2VsZWN0b3IpIHsKICAgIHdoaWxlIChlbGVtICE9IGRvY3VtZW50LmJvZHkpIHsKICAgICAgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZTsKCiAgICAgIGlmIChtYXRjaGVzU2VsZWN0b3IoZWxlbSwgc2VsZWN0b3IpKSB7CiAgICAgICAgcmV0dXJuIGVsZW07CiAgICAgIH0KICAgIH0KICB9OyAvLyAtLS0tLSBnZXRRdWVyeUVsZW1lbnQgLS0tLS0gLy8KICAvLyB1c2UgZWxlbWVudCBhcyBzZWxlY3RvciBzdHJpbmcKCgogIHV0aWxzLmdldFF1ZXJ5RWxlbWVudCA9IGZ1bmN0aW9uIChlbGVtKSB7CiAgICBpZiAodHlwZW9mIGVsZW0gPT0gJ3N0cmluZycpIHsKICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbSk7CiAgICB9CgogICAgcmV0dXJuIGVsZW07CiAgfTsgLy8gLS0tLS0gaGFuZGxlRXZlbnQgLS0tLS0gLy8KICAvLyBlbmFibGUgLm9udHlwZSB0byB0cmlnZ2VyIGZyb20gLmFkZEV2ZW50TGlzdGVuZXIoIGVsZW0sICd0eXBlJyApCgoKICB1dGlscy5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlOwoKICAgIGlmICh0aGlzW21ldGhvZF0pIHsKICAgICAgdGhpc1ttZXRob2RdKGV2ZW50KTsKICAgIH0KICB9OyAvLyAtLS0tLSBmaWx0ZXJGaW5kRWxlbWVudHMgLS0tLS0gLy8KCgogIHV0aWxzLmZpbHRlckZpbmRFbGVtZW50cyA9IGZ1bmN0aW9uIChlbGVtcywgc2VsZWN0b3IpIHsKICAgIC8vIG1ha2UgYXJyYXkgb2YgZWxlbXMKICAgIGVsZW1zID0gdXRpbHMubWFrZUFycmF5KGVsZW1zKTsKICAgIHZhciBmZkVsZW1zID0gW107CiAgICBlbGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgIC8vIGNoZWNrIHRoYXQgZWxlbSBpcyBhbiBhY3R1YWwgZWxlbWVudAogICAgICBpZiAoIShlbGVtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIGFkZCBlbGVtIGlmIG5vIHNlbGVjdG9yCgoKICAgICAgaWYgKCFzZWxlY3RvcikgewogICAgICAgIGZmRWxlbXMucHVzaChlbGVtKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gZmlsdGVyICYgZmluZCBpdGVtcyBpZiB3ZSBoYXZlIGEgc2VsZWN0b3IKICAgICAgLy8gZmlsdGVyCgoKICAgICAgaWYgKG1hdGNoZXNTZWxlY3RvcihlbGVtLCBzZWxlY3RvcikpIHsKICAgICAgICBmZkVsZW1zLnB1c2goZWxlbSk7CiAgICAgIH0gLy8gZmluZCBjaGlsZHJlbgoKCiAgICAgIHZhciBjaGlsZEVsZW1zID0gZWxlbS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTsgLy8gY29uY2F0IGNoaWxkRWxlbXMgdG8gZmlsdGVyRm91bmQgYXJyYXkKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRFbGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZmRWxlbXMucHVzaChjaGlsZEVsZW1zW2ldKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gZmZFbGVtczsKICB9OyAvLyAtLS0tLSBkZWJvdW5jZU1ldGhvZCAtLS0tLSAvLwoKCiAgdXRpbHMuZGVib3VuY2VNZXRob2QgPSBmdW5jdGlvbiAoX2NsYXNzLCBtZXRob2ROYW1lLCB0aHJlc2hvbGQpIHsKICAgIC8vIG9yaWdpbmFsIG1ldGhvZAogICAgdmFyIG1ldGhvZCA9IF9jbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV07CiAgICB2YXIgdGltZW91dE5hbWUgPSBtZXRob2ROYW1lICsgJ1RpbWVvdXQnOwoKICAgIF9jbGFzcy5wcm90b3R5cGVbbWV0aG9kTmFtZV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0aW1lb3V0ID0gdGhpc1t0aW1lb3V0TmFtZV07CgogICAgICBpZiAodGltZW91dCkgewogICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsKICAgICAgfQoKICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7CgogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpc1t0aW1lb3V0TmFtZV0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBtZXRob2QuYXBwbHkoX3RoaXMsIGFyZ3MpOwogICAgICAgIGRlbGV0ZSBfdGhpc1t0aW1lb3V0TmFtZV07CiAgICAgIH0sIHRocmVzaG9sZCB8fCAxMDApOwogICAgfTsKICB9OyAvLyAtLS0tLSBkb2NSZWFkeSAtLS0tLSAvLwoKCiAgdXRpbHMuZG9jUmVhZHkgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpIHsKICAgICAgY2FsbGJhY2soKTsKICAgIH0gZWxzZSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjYWxsYmFjayk7CiAgICB9CiAgfTsgLy8gLS0tLS0gaHRtbEluaXQgLS0tLS0gLy8KICAvLyBodHRwOi8vamFtZXNyb2JlcnRzLm5hbWUvYmxvZy8yMDEwLzAyLzIyL3N0cmluZy1mdW5jdGlvbnMtZm9yLWphdmFzY3JpcHQtdHJpbS10by1jYW1lbC1jYXNlLXRvLWRhc2hlZC1hbmQtdG8tdW5kZXJzY29yZS8KCgogIHV0aWxzLnRvRGFzaGVkID0gZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oLikoW0EtWl0pL2csIGZ1bmN0aW9uIChtYXRjaCwgJDEsICQyKSB7CiAgICAgIHJldHVybiAkMSArICctJyArICQyOwogICAgfSkudG9Mb3dlckNhc2UoKTsKICB9OwoKICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlOwogIC8qKgogICAqIGFsbG93IHVzZXIgdG8gaW5pdGlhbGl6ZSBjbGFzc2VzIHZpYSBbZGF0YS1uYW1lc3BhY2VdIG9yIC5qcy1uYW1lc3BhY2UgY2xhc3MKICAgKiBodG1sSW5pdCggV2lkZ2V0LCAnd2lkZ2V0TmFtZScgKQogICAqIG9wdGlvbnMgYXJlIHBhcnNlZCBmcm9tIGRhdGEtbmFtZXNwYWNlLW9wdGlvbnMKICAgKi8KCiAgdXRpbHMuaHRtbEluaXQgPSBmdW5jdGlvbiAoV2lkZ2V0Q2xhc3MsIG5hbWVzcGFjZSkgewogICAgdXRpbHMuZG9jUmVhZHkoZnVuY3Rpb24gKCkgewogICAgICB2YXIgZGFzaGVkTmFtZXNwYWNlID0gdXRpbHMudG9EYXNoZWQobmFtZXNwYWNlKTsKICAgICAgdmFyIGRhdGFBdHRyID0gJ2RhdGEtJyArIGRhc2hlZE5hbWVzcGFjZTsKICAgICAgdmFyIGRhdGFBdHRyRWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbJyArIGRhdGFBdHRyICsgJ10nKTsKICAgICAgdmFyIGpzRGFzaEVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLScgKyBkYXNoZWROYW1lc3BhY2UpOwogICAgICB2YXIgZWxlbXMgPSB1dGlscy5tYWtlQXJyYXkoZGF0YUF0dHJFbGVtcykuY29uY2F0KHV0aWxzLm1ha2VBcnJheShqc0Rhc2hFbGVtcykpOwogICAgICB2YXIgZGF0YU9wdGlvbnNBdHRyID0gZGF0YUF0dHIgKyAnLW9wdGlvbnMnOwogICAgICB2YXIgalF1ZXJ5ID0gd2luZG93LmpRdWVyeTsKICAgICAgZWxlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICAgIHZhciBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoZGF0YUF0dHIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKGRhdGFPcHRpb25zQXR0cik7CiAgICAgICAgdmFyIG9wdGlvbnM7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBvcHRpb25zID0gYXR0ciAmJiBKU09OLnBhcnNlKGF0dHIpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAvLyBsb2cgZXJyb3IsIGRvIG5vdCBpbml0aWFsaXplCiAgICAgICAgICBpZiAoY29uc29sZSkgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nICcgKyBkYXRhQXR0ciArICcgb24gJyArIGVsZW0uY2xhc3NOYW1lICsgJzogJyArIGVycm9yKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyBpbml0aWFsaXplCgoKICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgV2lkZ2V0Q2xhc3MoZWxlbSwgb3B0aW9ucyk7IC8vIG1ha2UgYXZhaWxhYmxlIHZpYSAkKCkuZGF0YSgnbGF5b3V0bmFtZScpCgogICAgICAgIGlmIChqUXVlcnkpIHsKICAgICAgICAgIGpRdWVyeS5kYXRhKGVsZW0sIG5hbWVzcGFjZSwgaW5zdGFuY2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9OyAvLyAtLS0tLSAgLS0tLS0gLy8KCgogIHJldHVybiB1dGlsczsKfSk7Ci8qKgogKiBPdXRsYXllciBJdGVtCiAqLwoKCihmdW5jdGlvbiAod2luZG93LCBmYWN0b3J5KSB7CiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uCgogIC8qIGpzaGludCBzdHJpY3Q6IGZhbHNlICovCgogIC8qIGdsb2JhbHMgZGVmaW5lLCBtb2R1bGUsIHJlcXVpcmUgKi8KICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHsKICAgIC8vIEFNRCAtIFJlcXVpcmVKUwogICAgZGVmaW5lKCdvdXRsYXllci9pdGVtJywgWydldi1lbWl0dGVyL2V2LWVtaXR0ZXInLCAnZ2V0LXNpemUvZ2V0LXNpemUnXSwgZnVuY3Rpb24gKEV2RW1pdHRlciwgZ2V0U2l6ZSkgewogICAgICByZXR1cm4gZmFjdG9yeSh3aW5kb3csIEV2RW1pdHRlciwgZ2V0U2l6ZSk7CiAgICB9KTsKICB9IGVsc2UgaWYgKCh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgLy8gQ29tbW9uSlMgLSBCcm93c2VyaWZ5LCBXZWJwYWNrCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkod2luZG93LCByZXF1aXJlKCdldi1lbWl0dGVyJyksIHJlcXVpcmUoJ2dldC1zaXplJykpOwogIH0gZWxzZSB7CiAgICAvLyBicm93c2VyIGdsb2JhbAogICAgd2luZG93Lk91dGxheWVyID0ge307CiAgICB3aW5kb3cuT3V0bGF5ZXIuSXRlbSA9IGZhY3Rvcnkod2luZG93LCB3aW5kb3cuRXZFbWl0dGVyLCB3aW5kb3cuZ2V0U2l6ZSk7CiAgfQp9KSh3aW5kb3csIGZ1bmN0aW9uIGZhY3Rvcnkod2luZG93LCBFdkVtaXR0ZXIsIGdldFNpemUpIHsKICAndXNlIHN0cmljdCc7IC8vIC0tLS0tIGhlbHBlcnMgLS0tLS0gLy8KCiAgZnVuY3Rpb24gaXNFbXB0eU9iaihvYmopIHsKICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwcm9wID0gbnVsbDsKICAgIHJldHVybiB0cnVlOwogIH0gLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQ1NTMyBzdXBwb3J0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vCgoKICB2YXIgZG9jRWxlbVN0eWxlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOwogIHZhciB0cmFuc2l0aW9uUHJvcGVydHkgPSB0eXBlb2YgZG9jRWxlbVN0eWxlLnRyYW5zaXRpb24gPT0gJ3N0cmluZycgPyAndHJhbnNpdGlvbicgOiAnV2Via2l0VHJhbnNpdGlvbic7CiAgdmFyIHRyYW5zZm9ybVByb3BlcnR5ID0gdHlwZW9mIGRvY0VsZW1TdHlsZS50cmFuc2Zvcm0gPT0gJ3N0cmluZycgPyAndHJhbnNmb3JtJyA6ICdXZWJraXRUcmFuc2Zvcm0nOwogIHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB7CiAgICBXZWJraXRUcmFuc2l0aW9uOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsCiAgICB0cmFuc2l0aW9uOiAndHJhbnNpdGlvbmVuZCcKICB9W3RyYW5zaXRpb25Qcm9wZXJ0eV07IC8vIGNhY2hlIGFsbCB2ZW5kb3IgcHJvcGVydGllcwoKICB2YXIgdmVuZG9yUHJvcGVydGllcyA9IFt0cmFuc2Zvcm1Qcm9wZXJ0eSwgdHJhbnNpdGlvblByb3BlcnR5LCB0cmFuc2l0aW9uUHJvcGVydHkgKyAnRHVyYXRpb24nLCB0cmFuc2l0aW9uUHJvcGVydHkgKyAnUHJvcGVydHknXTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSXRlbSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwoKICBmdW5jdGlvbiBJdGVtKGVsZW1lbnQsIGxheW91dCkgewogICAgaWYgKCFlbGVtZW50KSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50OyAvLyBwYXJlbnQgbGF5b3V0IGNsYXNzLCBpLmUuIE1hc29ucnksIElzb3RvcGUsIG9yIFBhY2tlcnkKCiAgICB0aGlzLmxheW91dCA9IGxheW91dDsKICAgIHRoaXMucG9zaXRpb24gPSB7CiAgICAgIHg6IDAsCiAgICAgIHk6IDAKICAgIH07CgogICAgdGhpcy5fY3JlYXRlKCk7CiAgfSAvLyBpbmhlcml0IEV2RW1pdHRlcgoKCiAgdmFyIHByb3RvID0gSXRlbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2RW1pdHRlci5wcm90b3R5cGUpOwogIHByb3RvLmNvbnN0cnVjdG9yID0gSXRlbTsKCiAgcHJvdG8uX2NyZWF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIC8vIHRyYW5zaXRpb24gb2JqZWN0cwogICAgdGhpcy5fdHJhbnNuID0gewogICAgICBpbmdQcm9wZXJ0aWVzOiB7fSwKICAgICAgY2xlYW46IHt9LAogICAgICBvbkVuZDoge30KICAgIH07CiAgICB0aGlzLmNzcyh7CiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnCiAgICB9KTsKICB9OyAvLyB0cmlnZ2VyIHNwZWNpZmllZCBoYW5kbGVyIGZvciBldmVudCB0eXBlCgoKICBwcm90by5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIG1ldGhvZCA9ICdvbicgKyBldmVudC50eXBlOwoKICAgIGlmICh0aGlzW21ldGhvZF0pIHsKICAgICAgdGhpc1ttZXRob2RdKGV2ZW50KTsKICAgIH0KICB9OwoKICBwcm90by5nZXRTaXplID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5zaXplID0gZ2V0U2l6ZSh0aGlzLmVsZW1lbnQpOwogIH07CiAgLyoqCiAgICogYXBwbHkgQ1NTIHN0eWxlcyB0byBlbGVtZW50CiAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlCiAgICovCgoKICBwcm90by5jc3MgPSBmdW5jdGlvbiAoc3R5bGUpIHsKICAgIHZhciBlbGVtU3R5bGUgPSB0aGlzLmVsZW1lbnQuc3R5bGU7CgogICAgZm9yICh2YXIgcHJvcCBpbiBzdHlsZSkgewogICAgICAvLyB1c2UgdmVuZG9yIHByb3BlcnR5IGlmIGF2YWlsYWJsZQogICAgICB2YXIgc3VwcG9ydGVkUHJvcCA9IHZlbmRvclByb3BlcnRpZXNbcHJvcF0gfHwgcHJvcDsKICAgICAgZWxlbVN0eWxlW3N1cHBvcnRlZFByb3BdID0gc3R5bGVbcHJvcF07CiAgICB9CiAgfTsgLy8gbWVhc3VyZSBwb3NpdGlvbiwgYW5kIHNldHMgaXQKCgogIHByb3RvLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnQpOwoKICAgIHZhciBpc09yaWdpbkxlZnQgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdvcmlnaW5MZWZ0Jyk7CgogICAgdmFyIGlzT3JpZ2luVG9wID0gdGhpcy5sYXlvdXQuX2dldE9wdGlvbignb3JpZ2luVG9wJyk7CgogICAgdmFyIHhWYWx1ZSA9IHN0eWxlW2lzT3JpZ2luTGVmdCA/ICdsZWZ0JyA6ICdyaWdodCddOwogICAgdmFyIHlWYWx1ZSA9IHN0eWxlW2lzT3JpZ2luVG9wID8gJ3RvcCcgOiAnYm90dG9tJ107IC8vIGNvbnZlcnQgcGVyY2VudCB0byBwaXhlbHMKCiAgICB2YXIgbGF5b3V0U2l6ZSA9IHRoaXMubGF5b3V0LnNpemU7CiAgICB2YXIgeCA9IHhWYWx1ZS5pbmRleE9mKCclJykgIT0gLTEgPyBwYXJzZUZsb2F0KHhWYWx1ZSkgLyAxMDAgKiBsYXlvdXRTaXplLndpZHRoIDogcGFyc2VJbnQoeFZhbHVlLCAxMCk7CiAgICB2YXIgeSA9IHlWYWx1ZS5pbmRleE9mKCclJykgIT0gLTEgPyBwYXJzZUZsb2F0KHlWYWx1ZSkgLyAxMDAgKiBsYXlvdXRTaXplLmhlaWdodCA6IHBhcnNlSW50KHlWYWx1ZSwgMTApOyAvLyBjbGVhbiB1cCAnYXV0bycgb3Igb3RoZXIgbm9uLWludGVnZXIgdmFsdWVzCgogICAgeCA9IGlzTmFOKHgpID8gMCA6IHg7CiAgICB5ID0gaXNOYU4oeSkgPyAwIDogeTsgLy8gcmVtb3ZlIHBhZGRpbmcgZnJvbSBtZWFzdXJlbWVudAoKICAgIHggLT0gaXNPcmlnaW5MZWZ0ID8gbGF5b3V0U2l6ZS5wYWRkaW5nTGVmdCA6IGxheW91dFNpemUucGFkZGluZ1JpZ2h0OwogICAgeSAtPSBpc09yaWdpblRvcCA/IGxheW91dFNpemUucGFkZGluZ1RvcCA6IGxheW91dFNpemUucGFkZGluZ0JvdHRvbTsKICAgIHRoaXMucG9zaXRpb24ueCA9IHg7CiAgICB0aGlzLnBvc2l0aW9uLnkgPSB5OwogIH07IC8vIHNldCBzZXR0bGVkIHBvc2l0aW9uLCBhcHBseSBwYWRkaW5nCgoKICBwcm90by5sYXlvdXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBsYXlvdXRTaXplID0gdGhpcy5sYXlvdXQuc2l6ZTsKICAgIHZhciBzdHlsZSA9IHt9OwoKICAgIHZhciBpc09yaWdpbkxlZnQgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdvcmlnaW5MZWZ0Jyk7CgogICAgdmFyIGlzT3JpZ2luVG9wID0gdGhpcy5sYXlvdXQuX2dldE9wdGlvbignb3JpZ2luVG9wJyk7IC8vIHgKCgogICAgdmFyIHhQYWRkaW5nID0gaXNPcmlnaW5MZWZ0ID8gJ3BhZGRpbmdMZWZ0JyA6ICdwYWRkaW5nUmlnaHQnOwogICAgdmFyIHhQcm9wZXJ0eSA9IGlzT3JpZ2luTGVmdCA/ICdsZWZ0JyA6ICdyaWdodCc7CiAgICB2YXIgeFJlc2V0UHJvcGVydHkgPSBpc09yaWdpbkxlZnQgPyAncmlnaHQnIDogJ2xlZnQnOwogICAgdmFyIHggPSB0aGlzLnBvc2l0aW9uLnggKyBsYXlvdXRTaXplW3hQYWRkaW5nXTsgLy8gc2V0IGluIHBlcmNlbnRhZ2Ugb3IgcGl4ZWxzCgogICAgc3R5bGVbeFByb3BlcnR5XSA9IHRoaXMuZ2V0WFZhbHVlKHgpOyAvLyByZXNldCBvdGhlciBwcm9wZXJ0eQoKICAgIHN0eWxlW3hSZXNldFByb3BlcnR5XSA9ICcnOyAvLyB5CgogICAgdmFyIHlQYWRkaW5nID0gaXNPcmlnaW5Ub3AgPyAncGFkZGluZ1RvcCcgOiAncGFkZGluZ0JvdHRvbSc7CiAgICB2YXIgeVByb3BlcnR5ID0gaXNPcmlnaW5Ub3AgPyAndG9wJyA6ICdib3R0b20nOwogICAgdmFyIHlSZXNldFByb3BlcnR5ID0gaXNPcmlnaW5Ub3AgPyAnYm90dG9tJyA6ICd0b3AnOwogICAgdmFyIHkgPSB0aGlzLnBvc2l0aW9uLnkgKyBsYXlvdXRTaXplW3lQYWRkaW5nXTsgLy8gc2V0IGluIHBlcmNlbnRhZ2Ugb3IgcGl4ZWxzCgogICAgc3R5bGVbeVByb3BlcnR5XSA9IHRoaXMuZ2V0WVZhbHVlKHkpOyAvLyByZXNldCBvdGhlciBwcm9wZXJ0eQoKICAgIHN0eWxlW3lSZXNldFByb3BlcnR5XSA9ICcnOwogICAgdGhpcy5jc3Moc3R5bGUpOwogICAgdGhpcy5lbWl0RXZlbnQoJ2xheW91dCcsIFt0aGlzXSk7CiAgfTsKCiAgcHJvdG8uZ2V0WFZhbHVlID0gZnVuY3Rpb24gKHgpIHsKICAgIHZhciBpc0hvcml6b250YWwgPSB0aGlzLmxheW91dC5fZ2V0T3B0aW9uKCdob3Jpem9udGFsJyk7CgogICAgcmV0dXJuIHRoaXMubGF5b3V0Lm9wdGlvbnMucGVyY2VudFBvc2l0aW9uICYmICFpc0hvcml6b250YWwgPyB4IC8gdGhpcy5sYXlvdXQuc2l6ZS53aWR0aCAqIDEwMCArICclJyA6IHggKyAncHgnOwogIH07CgogIHByb3RvLmdldFlWYWx1ZSA9IGZ1bmN0aW9uICh5KSB7CiAgICB2YXIgaXNIb3Jpem9udGFsID0gdGhpcy5sYXlvdXQuX2dldE9wdGlvbignaG9yaXpvbnRhbCcpOwoKICAgIHJldHVybiB0aGlzLmxheW91dC5vcHRpb25zLnBlcmNlbnRQb3NpdGlvbiAmJiBpc0hvcml6b250YWwgPyB5IC8gdGhpcy5sYXlvdXQuc2l6ZS5oZWlnaHQgKiAxMDAgKyAnJScgOiB5ICsgJ3B4JzsKICB9OwoKICBwcm90by5fdHJhbnNpdGlvblRvID0gZnVuY3Rpb24gKHgsIHkpIHsKICAgIHRoaXMuZ2V0UG9zaXRpb24oKTsgLy8gZ2V0IGN1cnJlbnQgeCAmIHkgZnJvbSB0b3AvbGVmdAoKICAgIHZhciBjdXJYID0gdGhpcy5wb3NpdGlvbi54OwogICAgdmFyIGN1clkgPSB0aGlzLnBvc2l0aW9uLnk7CiAgICB2YXIgY29tcGFyZVggPSBwYXJzZUludCh4LCAxMCk7CiAgICB2YXIgY29tcGFyZVkgPSBwYXJzZUludCh5LCAxMCk7CiAgICB2YXIgZGlkTm90TW92ZSA9IGNvbXBhcmVYID09PSB0aGlzLnBvc2l0aW9uLnggJiYgY29tcGFyZVkgPT09IHRoaXMucG9zaXRpb24ueTsgLy8gc2F2ZSBlbmQgcG9zaXRpb24KCiAgICB0aGlzLnNldFBvc2l0aW9uKHgsIHkpOyAvLyBpZiBkaWQgbm90IG1vdmUgYW5kIG5vdCB0cmFuc2l0aW9uaW5nLCBqdXN0IGdvIHRvIGxheW91dAoKICAgIGlmIChkaWROb3RNb3ZlICYmICF0aGlzLmlzVHJhbnNpdGlvbmluZykgewogICAgICB0aGlzLmxheW91dFBvc2l0aW9uKCk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgdHJhbnNYID0geCAtIGN1clg7CiAgICB2YXIgdHJhbnNZID0geSAtIGN1clk7CiAgICB2YXIgdHJhbnNpdGlvblN0eWxlID0ge307CiAgICB0cmFuc2l0aW9uU3R5bGUudHJhbnNmb3JtID0gdGhpcy5nZXRUcmFuc2xhdGUodHJhbnNYLCB0cmFuc1kpOwogICAgdGhpcy50cmFuc2l0aW9uKHsKICAgICAgdG86IHRyYW5zaXRpb25TdHlsZSwKICAgICAgb25UcmFuc2l0aW9uRW5kOiB7CiAgICAgICAgdHJhbnNmb3JtOiB0aGlzLmxheW91dFBvc2l0aW9uCiAgICAgIH0sCiAgICAgIGlzQ2xlYW5pbmc6IHRydWUKICAgIH0pOwogIH07CgogIHByb3RvLmdldFRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh4LCB5KSB7CiAgICAvLyBmbGlwIGNvb3JpZGluYXRlcyBpZiBvcmlnaW4gb24gcmlnaHQgb3IgYm90dG9tCiAgICB2YXIgaXNPcmlnaW5MZWZ0ID0gdGhpcy5sYXlvdXQuX2dldE9wdGlvbignb3JpZ2luTGVmdCcpOwoKICAgIHZhciBpc09yaWdpblRvcCA9IHRoaXMubGF5b3V0Ll9nZXRPcHRpb24oJ29yaWdpblRvcCcpOwoKICAgIHggPSBpc09yaWdpbkxlZnQgPyB4IDogLXg7CiAgICB5ID0gaXNPcmlnaW5Ub3AgPyB5IDogLXk7CiAgICByZXR1cm4gJ3RyYW5zbGF0ZTNkKCcgKyB4ICsgJ3B4LCAnICsgeSArICdweCwgMCknOwogIH07IC8vIG5vbiB0cmFuc2l0aW9uICsgdHJhbnNmb3JtIHN1cHBvcnQKCgogIHByb3RvLmdvVG8gPSBmdW5jdGlvbiAoeCwgeSkgewogICAgdGhpcy5zZXRQb3NpdGlvbih4LCB5KTsKICAgIHRoaXMubGF5b3V0UG9zaXRpb24oKTsKICB9OwoKICBwcm90by5tb3ZlVG8gPSBwcm90by5fdHJhbnNpdGlvblRvOwoKICBwcm90by5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICh4LCB5KSB7CiAgICB0aGlzLnBvc2l0aW9uLnggPSBwYXJzZUludCh4LCAxMCk7CiAgICB0aGlzLnBvc2l0aW9uLnkgPSBwYXJzZUludCh5LCAxMCk7CiAgfTsgLy8gLS0tLS0gdHJhbnNpdGlvbiAtLS0tLSAvLwoKICAvKioKICAgKiBAcGFyYW0ge09iamVjdH0gc3R5bGUgLSBDU1MKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblRyYW5zaXRpb25FbmQKICAgKi8KICAvLyBub24gdHJhbnNpdGlvbiwganVzdCB0cmlnZ2VyIGNhbGxiYWNrCgoKICBwcm90by5fbm9uVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChhcmdzKSB7CiAgICB0aGlzLmNzcyhhcmdzLnRvKTsKCiAgICBpZiAoYXJncy5pc0NsZWFuaW5nKSB7CiAgICAgIHRoaXMuX3JlbW92ZVN0eWxlcyhhcmdzLnRvKTsKICAgIH0KCiAgICBmb3IgKHZhciBwcm9wIGluIGFyZ3Mub25UcmFuc2l0aW9uRW5kKSB7CiAgICAgIGFyZ3Mub25UcmFuc2l0aW9uRW5kW3Byb3BdLmNhbGwodGhpcyk7CiAgICB9CiAgfTsKICAvKioKICAgKiBwcm9wZXIgdHJhbnNpdGlvbgogICAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzIC0gYXJndW1lbnRzCiAgICogICBAcGFyYW0ge09iamVjdH0gdG8gLSBzdHlsZSB0byB0cmFuc2l0aW9uIHRvCiAgICogICBAcGFyYW0ge09iamVjdH0gZnJvbSAtIHN0eWxlIHRvIHN0YXJ0IHRyYW5zaXRpb24gZnJvbQogICAqICAgQHBhcmFtIHtCb29sZWFufSBpc0NsZWFuaW5nIC0gcmVtb3ZlcyB0cmFuc2l0aW9uIHN0eWxlcyBhZnRlciB0cmFuc2l0aW9uCiAgICogICBAcGFyYW0ge0Z1bmN0aW9ufSBvblRyYW5zaXRpb25FbmQgLSBjYWxsYmFjawogICAqLwoKCiAgcHJvdG8uX3RyYW5zaXRpb24gPSBmdW5jdGlvbiAoYXJncykgewogICAgLy8gcmVkaXJlY3QgdG8gbm9uVHJhbnNpdGlvbiBpZiBubyB0cmFuc2l0aW9uIGR1cmF0aW9uCiAgICBpZiAoIXBhcnNlRmxvYXQodGhpcy5sYXlvdXQub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24pKSB7CiAgICAgIHRoaXMuX25vblRyYW5zaXRpb24oYXJncyk7CgogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIF90cmFuc2l0aW9uID0gdGhpcy5fdHJhbnNuOyAvLyBrZWVwIHRyYWNrIG9mIG9uVHJhbnNpdGlvbkVuZCBjYWxsYmFjayBieSBjc3MgcHJvcGVydHkKCiAgICBmb3IgKHZhciBwcm9wIGluIGFyZ3Mub25UcmFuc2l0aW9uRW5kKSB7CiAgICAgIF90cmFuc2l0aW9uLm9uRW5kW3Byb3BdID0gYXJncy5vblRyYW5zaXRpb25FbmRbcHJvcF07CiAgICB9IC8vIGtlZXAgdHJhY2sgb2YgcHJvcGVydGllcyB0aGF0IGFyZSB0cmFuc2l0aW9uaW5nCgoKICAgIGZvciAocHJvcCBpbiBhcmdzLnRvKSB7CiAgICAgIF90cmFuc2l0aW9uLmluZ1Byb3BlcnRpZXNbcHJvcF0gPSB0cnVlOyAvLyBrZWVwIHRyYWNrIG9mIHByb3BlcnRpZXMgdG8gY2xlYW4gdXAgd2hlbiB0cmFuc2l0aW9uIGlzIGRvbmUKCiAgICAgIGlmIChhcmdzLmlzQ2xlYW5pbmcpIHsKICAgICAgICBfdHJhbnNpdGlvbi5jbGVhbltwcm9wXSA9IHRydWU7CiAgICAgIH0KICAgIH0gLy8gc2V0IGZyb20gc3R5bGVzCgoKICAgIGlmIChhcmdzLmZyb20pIHsKICAgICAgdGhpcy5jc3MoYXJncy5mcm9tKTsgLy8gZm9yY2UgcmVkcmF3LiBodHRwOi8vYmxvZy5hbGV4bWFjY2F3LmNvbS9jc3MtdHJhbnNpdGlvbnMKCiAgICAgIHZhciBoID0gdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodDsgLy8gaGFjayBmb3IgSlNIaW50IHRvIGh1c2ggYWJvdXQgdW51c2VkIHZhcgoKICAgICAgaCA9IG51bGw7CiAgICB9IC8vIGVuYWJsZSB0cmFuc2l0aW9uCgoKICAgIHRoaXMuZW5hYmxlVHJhbnNpdGlvbihhcmdzLnRvKTsgLy8gc2V0IHN0eWxlcyB0aGF0IGFyZSB0cmFuc2l0aW9uaW5nCgogICAgdGhpcy5jc3MoYXJncy50byk7CiAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IHRydWU7CiAgfTsgLy8gZGFzaCBiZWZvcmUgYWxsIGNhcCBsZXR0ZXJzLCBpbmNsdWRpbmcgZmlyc3QgZm9yCiAgLy8gV2Via2l0VHJhbnNmb3JtID0+IC13ZWJraXQtdHJhbnNmb3JtCgoKICBmdW5jdGlvbiB0b0Rhc2hlZEFsbChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoJDEpIHsKICAgICAgcmV0dXJuICctJyArICQxLnRvTG93ZXJDYXNlKCk7CiAgICB9KTsKICB9CgogIHZhciB0cmFuc2l0aW9uUHJvcHMgPSAnb3BhY2l0eSwnICsgdG9EYXNoZWRBbGwodmVuZG9yUHJvcGVydGllcy50cmFuc2Zvcm0gfHwgJ3RyYW5zZm9ybScpOwoKICBwcm90by5lbmFibGVUcmFuc2l0aW9uID0gZnVuY3Rpb24gKCkKICAvKiBzdHlsZSAqLwogIHsKICAgIC8vIEhBQ0sgY2hhbmdpbmcgdHJhbnNpdGlvblByb3BlcnR5IGR1cmluZyBhIHRyYW5zaXRpb24KICAgIC8vIHdpbGwgY2F1c2UgdHJhbnNpdGlvbiB0byBqdW1wCiAgICBpZiAodGhpcy5pc1RyYW5zaXRpb25pbmcpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBtYWtlIGB0cmFuc2l0aW9uOiBmb28sIGJhciwgYmF6YCBmcm9tIHN0eWxlIG9iamVjdAogICAgLy8gSEFDSyB1bi1jb21tZW50IHRoaXMgd2hlbiBlbmFibGVUcmFuc2l0aW9uIGNhbiB3b3JrCiAgICAvLyB3aGlsZSBhIHRyYW5zaXRpb24gaXMgaGFwcGVuaW5nCiAgICAvLyB2YXIgdHJhbnNpdGlvblZhbHVlcyA9IFtdOwogICAgLy8gZm9yICggdmFyIHByb3AgaW4gc3R5bGUgKSB7CiAgICAvLyAgIC8vIGRhc2gtaWZ5IGNhbWVsQ2FzZWQgcHJvcGVydGllcyBsaWtlIFdlYmtpdFRyYW5zaXRpb24KICAgIC8vICAgcHJvcCA9IHZlbmRvclByb3BlcnRpZXNbIHByb3AgXSB8fCBwcm9wOwogICAgLy8gICB0cmFuc2l0aW9uVmFsdWVzLnB1c2goIHRvRGFzaGVkQWxsKCBwcm9wICkgKTsKICAgIC8vIH0KICAgIC8vIGVuYWJsZSB0cmFuc2l0aW9uIHN0eWxlcwoKCiAgICB0aGlzLmNzcyh7CiAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogdHJhbnNpdGlvblByb3BzLAogICAgICB0cmFuc2l0aW9uRHVyYXRpb246IHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uCiAgICB9KTsgLy8gbGlzdGVuIGZvciB0cmFuc2l0aW9uIGVuZCBldmVudAoKICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRyYW5zaXRpb25FbmRFdmVudCwgdGhpcywgZmFsc2UpOwogIH07CgogIHByb3RvLnRyYW5zaXRpb24gPSBJdGVtLnByb3RvdHlwZVt0cmFuc2l0aW9uUHJvcGVydHkgPyAnX3RyYW5zaXRpb24nIDogJ19ub25UcmFuc2l0aW9uJ107IC8vIC0tLS0tIGV2ZW50cyAtLS0tLSAvLwoKICBwcm90by5vbndlYmtpdFRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHRoaXMub250cmFuc2l0aW9uZW5kKGV2ZW50KTsKICB9OwoKICBwcm90by5vbm90cmFuc2l0aW9uZW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB0aGlzLm9udHJhbnNpdGlvbmVuZChldmVudCk7CiAgfTsgLy8gcHJvcGVydGllcyB0aGF0IEkgbXVuZ2UgdG8gbWFrZSBteSBsaWZlIGVhc2llcgoKCiAgdmFyIGRhc2hlZFZlbmRvclByb3BlcnRpZXMgPSB7CiAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAndHJhbnNmb3JtJwogIH07CgogIHByb3RvLm9udHJhbnNpdGlvbmVuZCA9IGZ1bmN0aW9uIChldmVudCkgewogICAgLy8gZGlzcmVnYXJkIGJ1YmJsZWQgZXZlbnRzIGZyb20gY2hpbGRyZW4KICAgIGlmIChldmVudC50YXJnZXQgIT09IHRoaXMuZWxlbWVudCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIF90cmFuc2l0aW9uID0gdGhpcy5fdHJhbnNuOyAvLyBnZXQgcHJvcGVydHkgbmFtZSBvZiB0cmFuc2l0aW9uZWQgcHJvcGVydHksIGNvbnZlcnQgdG8gcHJlZml4LWZyZWUKCiAgICB2YXIgcHJvcGVydHlOYW1lID0gZGFzaGVkVmVuZG9yUHJvcGVydGllc1tldmVudC5wcm9wZXJ0eU5hbWVdIHx8IGV2ZW50LnByb3BlcnR5TmFtZTsgLy8gcmVtb3ZlIHByb3BlcnR5IHRoYXQgaGFzIGNvbXBsZXRlZCB0cmFuc2l0aW9uaW5nCgogICAgZGVsZXRlIF90cmFuc2l0aW9uLmluZ1Byb3BlcnRpZXNbcHJvcGVydHlOYW1lXTsgLy8gY2hlY2sgaWYgYW55IHByb3BlcnRpZXMgYXJlIHN0aWxsIHRyYW5zaXRpb25pbmcKCiAgICBpZiAoaXNFbXB0eU9iaihfdHJhbnNpdGlvbi5pbmdQcm9wZXJ0aWVzKSkgewogICAgICAvLyBhbGwgcHJvcGVydGllcyBoYXZlIGNvbXBsZXRlZCB0cmFuc2l0aW9uaW5nCiAgICAgIHRoaXMuZGlzYWJsZVRyYW5zaXRpb24oKTsKICAgIH0gLy8gY2xlYW4gc3R5bGUKCgogICAgaWYgKHByb3BlcnR5TmFtZSBpbiBfdHJhbnNpdGlvbi5jbGVhbikgewogICAgICAvLyBjbGVhbiB1cCBzdHlsZQogICAgICB0aGlzLmVsZW1lbnQuc3R5bGVbZXZlbnQucHJvcGVydHlOYW1lXSA9ICcnOwogICAgICBkZWxldGUgX3RyYW5zaXRpb24uY2xlYW5bcHJvcGVydHlOYW1lXTsKICAgIH0gLy8gdHJpZ2dlciBvblRyYW5zaXRpb25FbmQgY2FsbGJhY2sKCgogICAgaWYgKHByb3BlcnR5TmFtZSBpbiBfdHJhbnNpdGlvbi5vbkVuZCkgewogICAgICB2YXIgb25UcmFuc2l0aW9uRW5kID0gX3RyYW5zaXRpb24ub25FbmRbcHJvcGVydHlOYW1lXTsKICAgICAgb25UcmFuc2l0aW9uRW5kLmNhbGwodGhpcyk7CiAgICAgIGRlbGV0ZSBfdHJhbnNpdGlvbi5vbkVuZFtwcm9wZXJ0eU5hbWVdOwogICAgfQoKICAgIHRoaXMuZW1pdEV2ZW50KCd0cmFuc2l0aW9uRW5kJywgW3RoaXNdKTsKICB9OwoKICBwcm90by5kaXNhYmxlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpOwogICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHJhbnNpdGlvbkVuZEV2ZW50LCB0aGlzLCBmYWxzZSk7CiAgICB0aGlzLmlzVHJhbnNpdGlvbmluZyA9IGZhbHNlOwogIH07CiAgLyoqCiAgICogcmVtb3ZlcyBzdHlsZSBwcm9wZXJ0eSBmcm9tIGVsZW1lbnQKICAgKiBAcGFyYW0ge09iamVjdH0gc3R5bGUKICAqKi8KCgogIHByb3RvLl9yZW1vdmVTdHlsZXMgPSBmdW5jdGlvbiAoc3R5bGUpIHsKICAgIC8vIGNsZWFuIHVwIHRyYW5zaXRpb24gc3R5bGVzCiAgICB2YXIgY2xlYW5TdHlsZSA9IHt9OwoKICAgIGZvciAodmFyIHByb3AgaW4gc3R5bGUpIHsKICAgICAgY2xlYW5TdHlsZVtwcm9wXSA9ICcnOwogICAgfQoKICAgIHRoaXMuY3NzKGNsZWFuU3R5bGUpOwogIH07CgogIHZhciBjbGVhblRyYW5zaXRpb25TdHlsZSA9IHsKICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJycsCiAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcnCiAgfTsKCiAgcHJvdG8ucmVtb3ZlVHJhbnNpdGlvblN0eWxlcyA9IGZ1bmN0aW9uICgpIHsKICAgIC8vIHJlbW92ZSB0cmFuc2l0aW9uCiAgICB0aGlzLmNzcyhjbGVhblRyYW5zaXRpb25TdHlsZSk7CiAgfTsgLy8gLS0tLS0gc2hvdy9oaWRlL3JlbW92ZSAtLS0tLSAvLwogIC8vIHJlbW92ZSBlbGVtZW50IGZyb20gRE9NCgoKICBwcm90by5yZW1vdmVFbGVtID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTsgLy8gcmVtb3ZlIGRpc3BsYXk6IG5vbmUKCiAgICB0aGlzLmNzcyh7CiAgICAgIGRpc3BsYXk6ICcnCiAgICB9KTsKICAgIHRoaXMuZW1pdEV2ZW50KCdyZW1vdmUnLCBbdGhpc10pOwogIH07CgogIHByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHsKICAgIC8vIGp1c3QgcmVtb3ZlIGVsZW1lbnQgaWYgbm8gdHJhbnNpdGlvbiBzdXBwb3J0IG9yIG5vIHRyYW5zaXRpb24KICAgIGlmICghdHJhbnNpdGlvblByb3BlcnR5IHx8ICFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSkgewogICAgICB0aGlzLnJlbW92ZUVsZW0oKTsKICAgICAgcmV0dXJuOwogICAgfSAvLyBzdGFydCB0cmFuc2l0aW9uCgoKICAgIHRoaXMub25jZSgndHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5yZW1vdmVFbGVtKCk7CiAgICB9KTsKICAgIHRoaXMuaGlkZSgpOwogIH07CgogIHByb3RvLnJldmVhbCA9IGZ1bmN0aW9uICgpIHsKICAgIGRlbGV0ZSB0aGlzLmlzSGlkZGVuOyAvLyByZW1vdmUgZGlzcGxheTogbm9uZQoKICAgIHRoaXMuY3NzKHsKICAgICAgZGlzcGxheTogJycKICAgIH0pOwogICAgdmFyIG9wdGlvbnMgPSB0aGlzLmxheW91dC5vcHRpb25zOwogICAgdmFyIG9uVHJhbnNpdGlvbkVuZCA9IHt9OwogICAgdmFyIHRyYW5zaXRpb25FbmRQcm9wZXJ0eSA9IHRoaXMuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSgndmlzaWJsZVN0eWxlJyk7CiAgICBvblRyYW5zaXRpb25FbmRbdHJhbnNpdGlvbkVuZFByb3BlcnR5XSA9IHRoaXMub25SZXZlYWxUcmFuc2l0aW9uRW5kOwogICAgdGhpcy50cmFuc2l0aW9uKHsKICAgICAgZnJvbTogb3B0aW9ucy5oaWRkZW5TdHlsZSwKICAgICAgdG86IG9wdGlvbnMudmlzaWJsZVN0eWxlLAogICAgICBpc0NsZWFuaW5nOiB0cnVlLAogICAgICBvblRyYW5zaXRpb25FbmQ6IG9uVHJhbnNpdGlvbkVuZAogICAgfSk7CiAgfTsKCiAgcHJvdG8ub25SZXZlYWxUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKCkgewogICAgLy8gY2hlY2sgaWYgc3RpbGwgdmlzaWJsZQogICAgLy8gZHVyaW5nIHRyYW5zaXRpb24sIGl0ZW0gbWF5IGhhdmUgYmVlbiBoaWRkZW4KICAgIGlmICghdGhpcy5pc0hpZGRlbikgewogICAgICB0aGlzLmVtaXRFdmVudCgncmV2ZWFsJyk7CiAgICB9CiAgfTsKICAvKioKICAgKiBnZXQgc3R5bGUgcHJvcGVydHkgdXNlIGZvciBoaWRlL3JldmVhbCB0cmFuc2l0aW9uIGVuZAogICAqIEBwYXJhbSB7U3RyaW5nfSBzdHlsZVByb3BlcnR5IC0gaGlkZGVuU3R5bGUvdmlzaWJsZVN0eWxlCiAgICogQHJldHVybnMge1N0cmluZ30KICAgKi8KCgogIHByb3RvLmdldEhpZGVSZXZlYWxUcmFuc2l0aW9uRW5kUHJvcGVydHkgPSBmdW5jdGlvbiAoc3R5bGVQcm9wZXJ0eSkgewogICAgdmFyIG9wdGlvblN0eWxlID0gdGhpcy5sYXlvdXQub3B0aW9uc1tzdHlsZVByb3BlcnR5XTsgLy8gdXNlIG9wYWNpdHkKCiAgICBpZiAob3B0aW9uU3R5bGUub3BhY2l0eSkgewogICAgICByZXR1cm4gJ29wYWNpdHknOwogICAgfSAvLyBnZXQgZmlyc3QgcHJvcGVydHkKCgogICAgZm9yICh2YXIgcHJvcCBpbiBvcHRpb25TdHlsZSkgewogICAgICByZXR1cm4gcHJvcDsKICAgIH0KICB9OwoKICBwcm90by5oaWRlID0gZnVuY3Rpb24gKCkgewogICAgLy8gc2V0IGZsYWcKICAgIHRoaXMuaXNIaWRkZW4gPSB0cnVlOyAvLyByZW1vdmUgZGlzcGxheTogbm9uZQoKICAgIHRoaXMuY3NzKHsKICAgICAgZGlzcGxheTogJycKICAgIH0pOwogICAgdmFyIG9wdGlvbnMgPSB0aGlzLmxheW91dC5vcHRpb25zOwogICAgdmFyIG9uVHJhbnNpdGlvbkVuZCA9IHt9OwogICAgdmFyIHRyYW5zaXRpb25FbmRQcm9wZXJ0eSA9IHRoaXMuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSgnaGlkZGVuU3R5bGUnKTsKICAgIG9uVHJhbnNpdGlvbkVuZFt0cmFuc2l0aW9uRW5kUHJvcGVydHldID0gdGhpcy5vbkhpZGVUcmFuc2l0aW9uRW5kOwogICAgdGhpcy50cmFuc2l0aW9uKHsKICAgICAgZnJvbTogb3B0aW9ucy52aXNpYmxlU3R5bGUsCiAgICAgIHRvOiBvcHRpb25zLmhpZGRlblN0eWxlLAogICAgICAvLyBrZWVwIGhpZGRlbiBzdHVmZiBoaWRkZW4KICAgICAgaXNDbGVhbmluZzogdHJ1ZSwKICAgICAgb25UcmFuc2l0aW9uRW5kOiBvblRyYW5zaXRpb25FbmQKICAgIH0pOwogIH07CgogIHByb3RvLm9uSGlkZVRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAvLyBjaGVjayBpZiBzdGlsbCBoaWRkZW4KICAgIC8vIGR1cmluZyB0cmFuc2l0aW9uLCBpdGVtIG1heSBoYXZlIGJlZW4gdW4taGlkZGVuCiAgICBpZiAodGhpcy5pc0hpZGRlbikgewogICAgICB0aGlzLmNzcyh7CiAgICAgICAgZGlzcGxheTogJ25vbmUnCiAgICAgIH0pOwogICAgICB0aGlzLmVtaXRFdmVudCgnaGlkZScpOwogICAgfQogIH07CgogIHByb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmNzcyh7CiAgICAgIHBvc2l0aW9uOiAnJywKICAgICAgbGVmdDogJycsCiAgICAgIHJpZ2h0OiAnJywKICAgICAgdG9wOiAnJywKICAgICAgYm90dG9tOiAnJywKICAgICAgdHJhbnNpdGlvbjogJycsCiAgICAgIHRyYW5zZm9ybTogJycKICAgIH0pOwogIH07CgogIHJldHVybiBJdGVtOwp9KTsKLyohCiAqIE91dGxheWVyIHYyLjAuMAogKiB0aGUgYnJhaW5zIGFuZCBndXRzIG9mIGEgbGF5b3V0IGxpYnJhcnkKICogTUlUIGxpY2Vuc2UKICovCgoKKGZ1bmN0aW9uICh3aW5kb3csIGZhY3RvcnkpIHsKICAndXNlIHN0cmljdCc7IC8vIHVuaXZlcnNhbCBtb2R1bGUgZGVmaW5pdGlvbgoKICAvKiBqc2hpbnQgc3RyaWN0OiBmYWxzZSAqLwoKICAvKiBnbG9iYWxzIGRlZmluZSwgbW9kdWxlLCByZXF1aXJlICovCgogIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1EIC0gUmVxdWlyZUpTCiAgICBkZWZpbmUoJ291dGxheWVyL291dGxheWVyJywgWydldi1lbWl0dGVyL2V2LWVtaXR0ZXInLCAnZ2V0LXNpemUvZ2V0LXNpemUnLCAnZml6enktdWktdXRpbHMvdXRpbHMnLCAnLi9pdGVtJ10sIGZ1bmN0aW9uIChFdkVtaXR0ZXIsIGdldFNpemUsIHV0aWxzLCBJdGVtKSB7CiAgICAgIHJldHVybiBmYWN0b3J5KHdpbmRvdywgRXZFbWl0dGVyLCBnZXRTaXplLCB1dGlscywgSXRlbSk7CiAgICB9KTsKICB9IGVsc2UgaWYgKCh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgLy8gQ29tbW9uSlMgLSBCcm93c2VyaWZ5LCBXZWJwYWNrCiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkod2luZG93LCByZXF1aXJlKCdldi1lbWl0dGVyJyksIHJlcXVpcmUoJ2dldC1zaXplJyksIHJlcXVpcmUoJ2Zpenp5LXVpLXV0aWxzJyksIHJlcXVpcmUoJy4vaXRlbScpKTsKICB9IGVsc2UgewogICAgLy8gYnJvd3NlciBnbG9iYWwKICAgIHdpbmRvdy5PdXRsYXllciA9IGZhY3Rvcnkod2luZG93LCB3aW5kb3cuRXZFbWl0dGVyLCB3aW5kb3cuZ2V0U2l6ZSwgd2luZG93LmZpenp5VUlVdGlscywgd2luZG93Lk91dGxheWVyLkl0ZW0pOwogIH0KfSkod2luZG93LCBmdW5jdGlvbiBmYWN0b3J5KHdpbmRvdywgRXZFbWl0dGVyLCBnZXRTaXplLCB1dGlscywgSXRlbSkgewogICd1c2Ugc3RyaWN0JzsgLy8gLS0tLS0gdmFycyAtLS0tLSAvLwoKICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlOwogIHZhciBqUXVlcnkgPSB3aW5kb3cualF1ZXJ5OwoKICB2YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gT3V0bGF5ZXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KICAvLyBnbG9iYWxseSB1bmlxdWUgaWRlbnRpZmllcnMKCgogIHZhciBHVUlEID0gMDsgLy8gaW50ZXJuYWwgc3RvcmUgb2YgYWxsIE91dGxheWVyIGludGFuY2VzCgogIHZhciBpbnN0YW5jZXMgPSB7fTsKICAvKioKICAgKiBAcGFyYW0ge0VsZW1lbnQsIFN0cmluZ30gZWxlbWVudAogICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAgICogQGNvbnN0cnVjdG9yCiAgICovCgogIGZ1bmN0aW9uIE91dGxheWVyKGVsZW1lbnQsIG9wdGlvbnMpIHsKICAgIHZhciBxdWVyeUVsZW1lbnQgPSB1dGlscy5nZXRRdWVyeUVsZW1lbnQoZWxlbWVudCk7CgogICAgaWYgKCFxdWVyeUVsZW1lbnQpIHsKICAgICAgaWYgKGNvbnNvbGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdCYWQgZWxlbWVudCBmb3IgJyArIHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlICsgJzogJyArIChxdWVyeUVsZW1lbnQgfHwgZWxlbWVudCkpOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5lbGVtZW50ID0gcXVlcnlFbGVtZW50OyAvLyBhZGQgalF1ZXJ5CgogICAgaWYgKGpRdWVyeSkgewogICAgICB0aGlzLiRlbGVtZW50ID0galF1ZXJ5KHRoaXMuZWxlbWVudCk7CiAgICB9IC8vIG9wdGlvbnMKCgogICAgdGhpcy5vcHRpb25zID0gdXRpbHMuZXh0ZW5kKHt9LCB0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKTsKICAgIHRoaXMub3B0aW9uKG9wdGlvbnMpOyAvLyBhZGQgaWQgZm9yIE91dGxheWVyLmdldEZyb21FbGVtZW50CgogICAgdmFyIGlkID0gKytHVUlEOwogICAgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCA9IGlkOyAvLyBleHBhbmRvCgogICAgaW5zdGFuY2VzW2lkXSA9IHRoaXM7IC8vIGFzc29jaWF0ZSB2aWEgaWQKICAgIC8vIGtpY2sgaXQgb2ZmCgogICAgdGhpcy5fY3JlYXRlKCk7CgogICAgdmFyIGlzSW5pdExheW91dCA9IHRoaXMuX2dldE9wdGlvbignaW5pdExheW91dCcpOwoKICAgIGlmIChpc0luaXRMYXlvdXQpIHsKICAgICAgdGhpcy5sYXlvdXQoKTsKICAgIH0KICB9IC8vIHNldHRpbmdzIGFyZSBmb3IgaW50ZXJuYWwgdXNlIG9ubHkKCgogIE91dGxheWVyLm5hbWVzcGFjZSA9ICdvdXRsYXllcic7CiAgT3V0bGF5ZXIuSXRlbSA9IEl0ZW07IC8vIGRlZmF1bHQgb3B0aW9ucwoKICBPdXRsYXllci5kZWZhdWx0cyA9IHsKICAgIGNvbnRhaW5lclN0eWxlOiB7CiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnCiAgICB9LAogICAgaW5pdExheW91dDogdHJ1ZSwKICAgIG9yaWdpbkxlZnQ6IHRydWUsCiAgICBvcmlnaW5Ub3A6IHRydWUsCiAgICByZXNpemU6IHRydWUsCiAgICByZXNpemVDb250YWluZXI6IHRydWUsCiAgICAvLyBpdGVtIG9wdGlvbnMKICAgIHRyYW5zaXRpb25EdXJhdGlvbjogJzAuNHMnLAogICAgaGlkZGVuU3R5bGU6IHsKICAgICAgb3BhY2l0eTogMCwKICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMC4wMDEpJwogICAgfSwKICAgIHZpc2libGVTdHlsZTogewogICAgICBvcGFjaXR5OiAxLAogICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScKICAgIH0KICB9OwogIHZhciBwcm90byA9IE91dGxheWVyLnByb3RvdHlwZTsgLy8gaW5oZXJpdCBFdkVtaXR0ZXIKCiAgdXRpbHMuZXh0ZW5kKHByb3RvLCBFdkVtaXR0ZXIucHJvdG90eXBlKTsKICAvKioKICAgKiBzZXQgb3B0aW9ucwogICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzCiAgICovCgogIHByb3RvLm9wdGlvbiA9IGZ1bmN0aW9uIChvcHRzKSB7CiAgICB1dGlscy5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRzKTsKICB9OwogIC8qKgogICAqIGdldCBiYWNrd2FyZHMgY29tcGF0aWJsZSBvcHRpb24gdmFsdWUsIGNoZWNrIG9sZCBuYW1lCiAgICovCgoKICBwcm90by5fZ2V0T3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbikgewogICAgdmFyIG9sZE9wdGlvbiA9IHRoaXMuY29uc3RydWN0b3IuY29tcGF0T3B0aW9uc1tvcHRpb25dOwogICAgcmV0dXJuIG9sZE9wdGlvbiAmJiB0aGlzLm9wdGlvbnNbb2xkT3B0aW9uXSAhPT0gdW5kZWZpbmVkID8gdGhpcy5vcHRpb25zW29sZE9wdGlvbl0gOiB0aGlzLm9wdGlvbnNbb3B0aW9uXTsKICB9OwoKICBPdXRsYXllci5jb21wYXRPcHRpb25zID0gewogICAgLy8gY3VycmVudE5hbWU6IG9sZE5hbWUKICAgIGluaXRMYXlvdXQ6ICdpc0luaXRMYXlvdXQnLAogICAgaG9yaXpvbnRhbDogJ2lzSG9yaXpvbnRhbCcsCiAgICBsYXlvdXRJbnN0YW50OiAnaXNMYXlvdXRJbnN0YW50JywKICAgIG9yaWdpbkxlZnQ6ICdpc09yaWdpbkxlZnQnLAogICAgb3JpZ2luVG9wOiAnaXNPcmlnaW5Ub3AnLAogICAgcmVzaXplOiAnaXNSZXNpemVCb3VuZCcsCiAgICByZXNpemVDb250YWluZXI6ICdpc1Jlc2l6aW5nQ29udGFpbmVyJwogIH07CgogIHByb3RvLl9jcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAvLyBnZXQgaXRlbXMgZnJvbSBjaGlsZHJlbgogICAgdGhpcy5yZWxvYWRJdGVtcygpOyAvLyBlbGVtZW50cyB0aGF0IGFmZmVjdCBsYXlvdXQsIGJ1dCBhcmUgbm90IGxhaWQgb3V0CgogICAgdGhpcy5zdGFtcHMgPSBbXTsKICAgIHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKTsgLy8gc2V0IGNvbnRhaW5lciBzdHlsZQoKICAgIHV0aWxzLmV4dGVuZCh0aGlzLmVsZW1lbnQuc3R5bGUsIHRoaXMub3B0aW9ucy5jb250YWluZXJTdHlsZSk7IC8vIGJpbmQgcmVzaXplIG1ldGhvZAoKICAgIHZhciBjYW5CaW5kUmVzaXplID0gdGhpcy5fZ2V0T3B0aW9uKCdyZXNpemUnKTsKCiAgICBpZiAoY2FuQmluZFJlc2l6ZSkgewogICAgICB0aGlzLmJpbmRSZXNpemUoKTsKICAgIH0KICB9OyAvLyBnb2VzIHRocm91Z2ggYWxsIGNoaWxkcmVuIGFnYWluIGFuZCBnZXRzIGJyaWNrcyBpbiBwcm9wZXIgb3JkZXIKCgogIHByb3RvLnJlbG9hZEl0ZW1zID0gZnVuY3Rpb24gKCkgewogICAgLy8gY29sbGVjdGlvbiBvZiBpdGVtIGVsZW1lbnRzCiAgICB0aGlzLml0ZW1zID0gdGhpcy5faXRlbWl6ZSh0aGlzLmVsZW1lbnQuY2hpbGRyZW4pOwogIH07CiAgLyoqCiAgICogdHVybiBlbGVtZW50cyBpbnRvIE91dGxheWVyLkl0ZW1zIHRvIGJlIHVzZWQgaW4gbGF5b3V0CiAgICogQHBhcmFtIHtBcnJheSBvciBOb2RlTGlzdCBvciBIVE1MRWxlbWVudH0gZWxlbXMKICAgKiBAcmV0dXJucyB7QXJyYXl9IGl0ZW1zIC0gY29sbGVjdGlvbiBvZiBuZXcgT3V0bGF5ZXIgSXRlbXMKICAgKi8KCgogIHByb3RvLl9pdGVtaXplID0gZnVuY3Rpb24gKGVsZW1zKSB7CiAgICB2YXIgaXRlbUVsZW1zID0gdGhpcy5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cyhlbGVtcyk7CgogICAgdmFyIEl0ZW0gPSB0aGlzLmNvbnN0cnVjdG9yLkl0ZW07IC8vIGNyZWF0ZSBuZXcgT3V0bGF5ZXIgSXRlbXMgZm9yIGNvbGxlY3Rpb24KCiAgICB2YXIgaXRlbXMgPSBbXTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1FbGVtcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZWxlbSA9IGl0ZW1FbGVtc1tpXTsKICAgICAgdmFyIGl0ZW0gPSBuZXcgSXRlbShlbGVtLCB0aGlzKTsKICAgICAgaXRlbXMucHVzaChpdGVtKTsKICAgIH0KCiAgICByZXR1cm4gaXRlbXM7CiAgfTsKICAvKioKICAgKiBnZXQgaXRlbSBlbGVtZW50cyB0byBiZSB1c2VkIGluIGxheW91dAogICAqIEBwYXJhbSB7QXJyYXkgb3IgTm9kZUxpc3Qgb3IgSFRNTEVsZW1lbnR9IGVsZW1zCiAgICogQHJldHVybnMge0FycmF5fSBpdGVtcyAtIGl0ZW0gZWxlbWVudHMKICAgKi8KCgogIHByb3RvLl9maWx0ZXJGaW5kSXRlbUVsZW1lbnRzID0gZnVuY3Rpb24gKGVsZW1zKSB7CiAgICByZXR1cm4gdXRpbHMuZmlsdGVyRmluZEVsZW1lbnRzKGVsZW1zLCB0aGlzLm9wdGlvbnMuaXRlbVNlbGVjdG9yKTsKICB9OwogIC8qKgogICAqIGdldHRlciBtZXRob2QgZm9yIGdldHRpbmcgaXRlbSBlbGVtZW50cwogICAqIEByZXR1cm5zIHtBcnJheX0gZWxlbXMgLSBjb2xsZWN0aW9uIG9mIGl0ZW0gZWxlbWVudHMKICAgKi8KCgogIHByb3RvLmdldEl0ZW1FbGVtZW50cyA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLml0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5lbGVtZW50OwogICAgfSk7CiAgfTsgLy8gLS0tLS0gaW5pdCAmIGxheW91dCAtLS0tLSAvLwoKICAvKioKICAgKiBsYXlzIG91dCBhbGwgaXRlbXMKICAgKi8KCgogIHByb3RvLmxheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuX3Jlc2V0TGF5b3V0KCk7CgogICAgdGhpcy5fbWFuYWdlU3RhbXBzKCk7IC8vIGRvbid0IGFuaW1hdGUgZmlyc3QgbGF5b3V0CgoKICAgIHZhciBsYXlvdXRJbnN0YW50ID0gdGhpcy5fZ2V0T3B0aW9uKCdsYXlvdXRJbnN0YW50Jyk7CgogICAgdmFyIGlzSW5zdGFudCA9IGxheW91dEluc3RhbnQgIT09IHVuZGVmaW5lZCA/IGxheW91dEluc3RhbnQgOiAhdGhpcy5faXNMYXlvdXRJbml0ZWQ7CiAgICB0aGlzLmxheW91dEl0ZW1zKHRoaXMuaXRlbXMsIGlzSW5zdGFudCk7IC8vIGZsYWcgZm9yIGluaXRhbGl6ZWQKCiAgICB0aGlzLl9pc0xheW91dEluaXRlZCA9IHRydWU7CiAgfTsgLy8gX2luaXQgaXMgYWxpYXMgZm9yIGxheW91dAoKCiAgcHJvdG8uX2luaXQgPSBwcm90by5sYXlvdXQ7CiAgLyoqCiAgICogbG9naWMgYmVmb3JlIGFueSBuZXcgbGF5b3V0CiAgICovCgogIHByb3RvLl9yZXNldExheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZ2V0U2l6ZSgpOwogIH07CgogIHByb3RvLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnNpemUgPSBnZXRTaXplKHRoaXMuZWxlbWVudCk7CiAgfTsKICAvKioKICAgKiBnZXQgbWVhc3VyZW1lbnQgZnJvbSBvcHRpb24sIGZvciBjb2x1bW5XaWR0aCwgcm93SGVpZ2h0LCBndXR0ZXIKICAgKiBpZiBvcHRpb24gaXMgU3RyaW5nIC0+IGdldCBlbGVtZW50IGZyb20gc2VsZWN0b3Igc3RyaW5nLCAmIGdldCBzaXplIG9mIGVsZW1lbnQKICAgKiBpZiBvcHRpb24gaXMgRWxlbWVudCAtPiBnZXQgc2l6ZSBvZiBlbGVtZW50CiAgICogZWxzZSB1c2Ugb3B0aW9uIGFzIGEgbnVtYmVyCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gbWVhc3VyZW1lbnQKICAgKiBAcGFyYW0ge1N0cmluZ30gc2l6ZSAtIHdpZHRoIG9yIGhlaWdodAogICAqIEBwcml2YXRlCiAgICovCgoKICBwcm90by5fZ2V0TWVhc3VyZW1lbnQgPSBmdW5jdGlvbiAobWVhc3VyZW1lbnQsIHNpemUpIHsKICAgIHZhciBvcHRpb24gPSB0aGlzLm9wdGlvbnNbbWVhc3VyZW1lbnRdOwogICAgdmFyIGVsZW07CgogICAgaWYgKCFvcHRpb24pIHsKICAgICAgLy8gZGVmYXVsdCB0byAwCiAgICAgIHRoaXNbbWVhc3VyZW1lbnRdID0gMDsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHVzZSBvcHRpb24gYXMgYW4gZWxlbWVudAogICAgICBpZiAodHlwZW9mIG9wdGlvbiA9PSAnc3RyaW5nJykgewogICAgICAgIGVsZW0gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb24pOwogICAgICB9IGVsc2UgaWYgKG9wdGlvbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7CiAgICAgICAgZWxlbSA9IG9wdGlvbjsKICAgICAgfSAvLyB1c2Ugc2l6ZSBvZiBlbGVtZW50LCBpZiBlbGVtZW50CgoKICAgICAgdGhpc1ttZWFzdXJlbWVudF0gPSBlbGVtID8gZ2V0U2l6ZShlbGVtKVtzaXplXSA6IG9wdGlvbjsKICAgIH0KICB9OwogIC8qKgogICAqIGxheW91dCBhIGNvbGxlY3Rpb24gb2YgaXRlbSBlbGVtZW50cwogICAqIEBhcGkgcHVibGljCiAgICovCgoKICBwcm90by5sYXlvdXRJdGVtcyA9IGZ1bmN0aW9uIChpdGVtcywgaXNJbnN0YW50KSB7CiAgICBpdGVtcyA9IHRoaXMuX2dldEl0ZW1zRm9yTGF5b3V0KGl0ZW1zKTsKCiAgICB0aGlzLl9sYXlvdXRJdGVtcyhpdGVtcywgaXNJbnN0YW50KTsKCiAgICB0aGlzLl9wb3N0TGF5b3V0KCk7CiAgfTsKICAvKioKICAgKiBnZXQgdGhlIGl0ZW1zIHRvIGJlIGxhaWQgb3V0CiAgICogeW91IG1heSB3YW50IHRvIHNraXAgb3ZlciBzb21lIGl0ZW1zCiAgICogQHBhcmFtIHtBcnJheX0gaXRlbXMKICAgKiBAcmV0dXJucyB7QXJyYXl9IGl0ZW1zCiAgICovCgoKICBwcm90by5fZ2V0SXRlbXNGb3JMYXlvdXQgPSBmdW5jdGlvbiAoaXRlbXMpIHsKICAgIHJldHVybiBpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuICFpdGVtLmlzSWdub3JlZDsKICAgIH0pOwogIH07CiAgLyoqCiAgICogbGF5b3V0IGl0ZW1zCiAgICogQHBhcmFtIHtBcnJheX0gaXRlbXMKICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW5zdGFudAogICAqLwoKCiAgcHJvdG8uX2xheW91dEl0ZW1zID0gZnVuY3Rpb24gKGl0ZW1zLCBpc0luc3RhbnQpIHsKICAgIHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoJ2xheW91dCcsIGl0ZW1zKTsKCiAgICBpZiAoIWl0ZW1zIHx8ICFpdGVtcy5sZW5ndGgpIHsKICAgICAgLy8gbm8gaXRlbXMsIGVtaXQgZXZlbnQgd2l0aCBlbXB0eSBhcnJheQogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIHF1ZXVlID0gW107CiAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIC8vIGdldCB4L3kgb2JqZWN0IGZyb20gbWV0aG9kCiAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbihpdGVtKTsgLy8gZW5xdWV1ZQoKCiAgICAgIHBvc2l0aW9uLml0ZW0gPSBpdGVtOwogICAgICBwb3NpdGlvbi5pc0luc3RhbnQgPSBpc0luc3RhbnQgfHwgaXRlbS5pc0xheW91dEluc3RhbnQ7CiAgICAgIHF1ZXVlLnB1c2gocG9zaXRpb24pOwogICAgfSwgdGhpcyk7CgogICAgdGhpcy5fcHJvY2Vzc0xheW91dFF1ZXVlKHF1ZXVlKTsKICB9OwogIC8qKgogICAqIGdldCBpdGVtIGxheW91dCBwb3NpdGlvbgogICAqIEBwYXJhbSB7T3V0bGF5ZXIuSXRlbX0gaXRlbQogICAqIEByZXR1cm5zIHtPYmplY3R9IHggYW5kIHkgcG9zaXRpb24KICAgKi8KCgogIHByb3RvLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKQogIC8qIGl0ZW0gKi8KICB7CiAgICByZXR1cm4gewogICAgICB4OiAwLAogICAgICB5OiAwCiAgICB9OwogIH07CiAgLyoqCiAgICogaXRlcmF0ZSBvdmVyIGFycmF5IGFuZCBwb3NpdGlvbiBlYWNoIGl0ZW0KICAgKiBSZWFzb24gYmVpbmcgLSBzZXBhcmF0aW5nIHRoaXMgbG9naWMgcHJldmVudHMgJ2xheW91dCBpbnZhbGlkYXRpb24nCiAgICogdGh4IEBwYXVsX2lyaXNoCiAgICogQHBhcmFtIHtBcnJheX0gcXVldWUKICAgKi8KCgogIHByb3RvLl9wcm9jZXNzTGF5b3V0UXVldWUgPSBmdW5jdGlvbiAocXVldWUpIHsKICAgIHF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKG9iaikgewogICAgICB0aGlzLl9wb3NpdGlvbkl0ZW0ob2JqLml0ZW0sIG9iai54LCBvYmoueSwgb2JqLmlzSW5zdGFudCk7CiAgICB9LCB0aGlzKTsKICB9OwogIC8qKgogICAqIFNldHMgcG9zaXRpb24gb2YgaXRlbSBpbiBET00KICAgKiBAcGFyYW0ge091dGxheWVyLkl0ZW19IGl0ZW0KICAgKiBAcGFyYW0ge051bWJlcn0geCAtIGhvcml6b250YWwgcG9zaXRpb24KICAgKiBAcGFyYW0ge051bWJlcn0geSAtIHZlcnRpY2FsIHBvc2l0aW9uCiAgICogQHBhcmFtIHtCb29sZWFufSBpc0luc3RhbnQgLSBkaXNhYmxlcyB0cmFuc2l0aW9ucwogICAqLwoKCiAgcHJvdG8uX3Bvc2l0aW9uSXRlbSA9IGZ1bmN0aW9uIChpdGVtLCB4LCB5LCBpc0luc3RhbnQpIHsKICAgIGlmIChpc0luc3RhbnQpIHsKICAgICAgLy8gaWYgbm90IHRyYW5zaXRpb24sIGp1c3Qgc2V0IENTUwogICAgICBpdGVtLmdvVG8oeCwgeSk7CiAgICB9IGVsc2UgewogICAgICBpdGVtLm1vdmVUbyh4LCB5KTsKICAgIH0KICB9OwogIC8qKgogICAqIEFueSBsb2dpYyB5b3Ugd2FudCB0byBkbyBhZnRlciBlYWNoIGxheW91dCwKICAgKiBpLmUuIHNpemUgdGhlIGNvbnRhaW5lcgogICAqLwoKCiAgcHJvdG8uX3Bvc3RMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnJlc2l6ZUNvbnRhaW5lcigpOwogIH07CgogIHByb3RvLnJlc2l6ZUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpc1Jlc2l6aW5nQ29udGFpbmVyID0gdGhpcy5fZ2V0T3B0aW9uKCdyZXNpemVDb250YWluZXInKTsKCiAgICBpZiAoIWlzUmVzaXppbmdDb250YWluZXIpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzaXplID0gdGhpcy5fZ2V0Q29udGFpbmVyU2l6ZSgpOwoKICAgIGlmIChzaXplKSB7CiAgICAgIHRoaXMuX3NldENvbnRhaW5lck1lYXN1cmUoc2l6ZS53aWR0aCwgdHJ1ZSk7CgogICAgICB0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKHNpemUuaGVpZ2h0LCBmYWxzZSk7CiAgICB9CiAgfTsKICAvKioKICAgKiBTZXRzIHdpZHRoIG9yIGhlaWdodCBvZiBjb250YWluZXIgaWYgcmV0dXJuZWQKICAgKiBAcmV0dXJucyB7T2JqZWN0fSBzaXplCiAgICogICBAcGFyYW0ge051bWJlcn0gd2lkdGgKICAgKiAgIEBwYXJhbSB7TnVtYmVyfSBoZWlnaHQKICAgKi8KCgogIHByb3RvLl9nZXRDb250YWluZXJTaXplID0gbm9vcDsKICAvKioKICAgKiBAcGFyYW0ge051bWJlcn0gbWVhc3VyZSAtIHNpemUgb2Ygd2lkdGggb3IgaGVpZ2h0CiAgICogQHBhcmFtIHtCb29sZWFufSBpc1dpZHRoCiAgICovCgogIHByb3RvLl9zZXRDb250YWluZXJNZWFzdXJlID0gZnVuY3Rpb24gKG1lYXN1cmUsIGlzV2lkdGgpIHsKICAgIGlmIChtZWFzdXJlID09PSB1bmRlZmluZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBlbGVtU2l6ZSA9IHRoaXMuc2l6ZTsgLy8gYWRkIHBhZGRpbmcgYW5kIGJvcmRlciB3aWR0aCBpZiBib3JkZXIgYm94CgogICAgaWYgKGVsZW1TaXplLmlzQm9yZGVyQm94KSB7CiAgICAgIG1lYXN1cmUgKz0gaXNXaWR0aCA/IGVsZW1TaXplLnBhZGRpbmdMZWZ0ICsgZWxlbVNpemUucGFkZGluZ1JpZ2h0ICsgZWxlbVNpemUuYm9yZGVyTGVmdFdpZHRoICsgZWxlbVNpemUuYm9yZGVyUmlnaHRXaWR0aCA6IGVsZW1TaXplLnBhZGRpbmdCb3R0b20gKyBlbGVtU2l6ZS5wYWRkaW5nVG9wICsgZWxlbVNpemUuYm9yZGVyVG9wV2lkdGggKyBlbGVtU2l6ZS5ib3JkZXJCb3R0b21XaWR0aDsKICAgIH0KCiAgICBtZWFzdXJlID0gTWF0aC5tYXgobWVhc3VyZSwgMCk7CiAgICB0aGlzLmVsZW1lbnQuc3R5bGVbaXNXaWR0aCA/ICd3aWR0aCcgOiAnaGVpZ2h0J10gPSBtZWFzdXJlICsgJ3B4JzsKICB9OwogIC8qKgogICAqIGVtaXQgZXZlbnRDb21wbGV0ZSBvbiBhIGNvbGxlY3Rpb24gb2YgaXRlbXMgZXZlbnRzCiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50TmFtZQogICAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zIC0gT3V0bGF5ZXIuSXRlbXMKICAgKi8KCgogIHByb3RvLl9lbWl0Q29tcGxldGVPbkl0ZW1zID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgaXRlbXMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgZnVuY3Rpb24gb25Db21wbGV0ZSgpIHsKICAgICAgX3RoaXMuZGlzcGF0Y2hFdmVudChldmVudE5hbWUgKyAnQ29tcGxldGUnLCBudWxsLCBbaXRlbXNdKTsKICAgIH0KCiAgICB2YXIgY291bnQgPSBpdGVtcy5sZW5ndGg7CgogICAgaWYgKCFpdGVtcyB8fCAhY291bnQpIHsKICAgICAgb25Db21wbGV0ZSgpOwogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGRvbmVDb3VudCA9IDA7CgogICAgZnVuY3Rpb24gdGljaygpIHsKICAgICAgZG9uZUNvdW50Kys7CgogICAgICBpZiAoZG9uZUNvdW50ID09IGNvdW50KSB7CiAgICAgICAgb25Db21wbGV0ZSgpOwogICAgICB9CiAgICB9IC8vIGJpbmQgY2FsbGJhY2sKCgogICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpdGVtLm9uY2UoZXZlbnROYW1lLCB0aWNrKTsKICAgIH0pOwogIH07CiAgLyoqCiAgICogZW1pdHMgZXZlbnRzIHZpYSBFdkVtaXR0ZXIgYW5kIGpRdWVyeSBldmVudHMKICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIG5hbWUgb2YgZXZlbnQKICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAtIG9yaWdpbmFsIGV2ZW50CiAgICogQHBhcmFtIHtBcnJheX0gYXJncyAtIGV4dHJhIGFyZ3VtZW50cwogICAqLwoKCiAgcHJvdG8uZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uICh0eXBlLCBldmVudCwgYXJncykgewogICAgLy8gYWRkIG9yaWdpbmFsIGV2ZW50IHRvIGFyZ3VtZW50cwogICAgdmFyIGVtaXRBcmdzID0gZXZlbnQgPyBbZXZlbnRdLmNvbmNhdChhcmdzKSA6IGFyZ3M7CiAgICB0aGlzLmVtaXRFdmVudCh0eXBlLCBlbWl0QXJncyk7CgogICAgaWYgKGpRdWVyeSkgewogICAgICAvLyBzZXQgdGhpcy4kZWxlbWVudAogICAgICB0aGlzLiRlbGVtZW50ID0gdGhpcy4kZWxlbWVudCB8fCBqUXVlcnkodGhpcy5lbGVtZW50KTsKCiAgICAgIGlmIChldmVudCkgewogICAgICAgIC8vIGNyZWF0ZSBqUXVlcnkgZXZlbnQKICAgICAgICB2YXIgJGV2ZW50ID0galF1ZXJ5LkV2ZW50KGV2ZW50KTsKICAgICAgICAkZXZlbnQudHlwZSA9IHR5cGU7CiAgICAgICAgdGhpcy4kZWxlbWVudC50cmlnZ2VyKCRldmVudCwgYXJncyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8ganVzdCB0cmlnZ2VyIHdpdGggdHlwZSBpZiBubyBldmVudCBhdmFpbGFibGUKICAgICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIodHlwZSwgYXJncyk7CiAgICAgIH0KICAgIH0KICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBpZ25vcmUgJiBzdGFtcHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KCiAgLyoqCiAgICoga2VlcCBpdGVtIGluIGNvbGxlY3Rpb24sIGJ1dCBkbyBub3QgbGF5IGl0IG91dAogICAqIGlnbm9yZWQgaXRlbXMgZG8gbm90IGdldCBza2lwcGVkIGluIGxheW91dAogICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbQogICAqLwoKCiAgcHJvdG8uaWdub3JlID0gZnVuY3Rpb24gKGVsZW0pIHsKICAgIHZhciBpdGVtID0gdGhpcy5nZXRJdGVtKGVsZW0pOwoKICAgIGlmIChpdGVtKSB7CiAgICAgIGl0ZW0uaXNJZ25vcmVkID0gdHJ1ZTsKICAgIH0KICB9OwogIC8qKgogICAqIHJldHVybiBpdGVtIHRvIGxheW91dCBjb2xsZWN0aW9uCiAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtCiAgICovCgoKICBwcm90by51bmlnbm9yZSA9IGZ1bmN0aW9uIChlbGVtKSB7CiAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShlbGVtKTsKCiAgICBpZiAoaXRlbSkgewogICAgICBkZWxldGUgaXRlbS5pc0lnbm9yZWQ7CiAgICB9CiAgfTsKICAvKioKICAgKiBhZGRzIGVsZW1lbnRzIHRvIHN0YW1wcwogICAqIEBwYXJhbSB7Tm9kZUxpc3QsIEFycmF5LCBFbGVtZW50LCBvciBTdHJpbmd9IGVsZW1zCiAgICovCgoKICBwcm90by5zdGFtcCA9IGZ1bmN0aW9uIChlbGVtcykgewogICAgZWxlbXMgPSB0aGlzLl9maW5kKGVsZW1zKTsKCiAgICBpZiAoIWVsZW1zKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLnN0YW1wcyA9IHRoaXMuc3RhbXBzLmNvbmNhdChlbGVtcyk7IC8vIGlnbm9yZQoKICAgIGVsZW1zLmZvckVhY2godGhpcy5pZ25vcmUsIHRoaXMpOwogIH07CiAgLyoqCiAgICogcmVtb3ZlcyBlbGVtZW50cyB0byBzdGFtcHMKICAgKiBAcGFyYW0ge05vZGVMaXN0LCBBcnJheSwgb3IgRWxlbWVudH0gZWxlbXMKICAgKi8KCgogIHByb3RvLnVuc3RhbXAgPSBmdW5jdGlvbiAoZWxlbXMpIHsKICAgIGVsZW1zID0gdGhpcy5fZmluZChlbGVtcyk7CgogICAgaWYgKCFlbGVtcykgewogICAgICByZXR1cm47CiAgICB9CgogICAgZWxlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICAvLyBmaWx0ZXIgb3V0IHJlbW92ZWQgc3RhbXAgZWxlbWVudHMKICAgICAgdXRpbHMucmVtb3ZlRnJvbSh0aGlzLnN0YW1wcywgZWxlbSk7CiAgICAgIHRoaXMudW5pZ25vcmUoZWxlbSk7CiAgICB9LCB0aGlzKTsKICB9OwogIC8qKgogICAqIGZpbmRzIGNoaWxkIGVsZW1lbnRzCiAgICogQHBhcmFtIHtOb2RlTGlzdCwgQXJyYXksIEVsZW1lbnQsIG9yIFN0cmluZ30gZWxlbXMKICAgKiBAcmV0dXJucyB7QXJyYXl9IGVsZW1zCiAgICovCgoKICBwcm90by5fZmluZCA9IGZ1bmN0aW9uIChlbGVtcykgewogICAgaWYgKCFlbGVtcykgewogICAgICByZXR1cm47CiAgICB9IC8vIGlmIHN0cmluZywgdXNlIGFyZ3VtZW50IGFzIHNlbGVjdG9yIHN0cmluZwoKCiAgICBpZiAodHlwZW9mIGVsZW1zID09ICdzdHJpbmcnKSB7CiAgICAgIGVsZW1zID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbXMpOwogICAgfQoKICAgIGVsZW1zID0gdXRpbHMubWFrZUFycmF5KGVsZW1zKTsKICAgIHJldHVybiBlbGVtczsKICB9OwoKICBwcm90by5fbWFuYWdlU3RhbXBzID0gZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLnN0YW1wcyB8fCAhdGhpcy5zdGFtcHMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLl9nZXRCb3VuZGluZ1JlY3QoKTsKCiAgICB0aGlzLnN0YW1wcy5mb3JFYWNoKHRoaXMuX21hbmFnZVN0YW1wLCB0aGlzKTsKICB9OyAvLyB1cGRhdGUgYm91bmRpbmdMZWZ0IC8gVG9wCgoKICBwcm90by5fZ2V0Qm91bmRpbmdSZWN0ID0gZnVuY3Rpb24gKCkgewogICAgLy8gZ2V0IGJvdW5kaW5nIHJlY3QgZm9yIGNvbnRhaW5lciBlbGVtZW50CiAgICB2YXIgYm91bmRpbmdSZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CiAgICB0aGlzLl9ib3VuZGluZ1JlY3QgPSB7CiAgICAgIGxlZnQ6IGJvdW5kaW5nUmVjdC5sZWZ0ICsgc2l6ZS5wYWRkaW5nTGVmdCArIHNpemUuYm9yZGVyTGVmdFdpZHRoLAogICAgICB0b3A6IGJvdW5kaW5nUmVjdC50b3AgKyBzaXplLnBhZGRpbmdUb3AgKyBzaXplLmJvcmRlclRvcFdpZHRoLAogICAgICByaWdodDogYm91bmRpbmdSZWN0LnJpZ2h0IC0gKHNpemUucGFkZGluZ1JpZ2h0ICsgc2l6ZS5ib3JkZXJSaWdodFdpZHRoKSwKICAgICAgYm90dG9tOiBib3VuZGluZ1JlY3QuYm90dG9tIC0gKHNpemUucGFkZGluZ0JvdHRvbSArIHNpemUuYm9yZGVyQm90dG9tV2lkdGgpCiAgICB9OwogIH07CiAgLyoqCiAgICogQHBhcmFtIHtFbGVtZW50fSBzdGFtcAogICoqLwoKCiAgcHJvdG8uX21hbmFnZVN0YW1wID0gbm9vcDsKICAvKioKICAgKiBnZXQgeC95IHBvc2l0aW9uIG9mIGVsZW1lbnQgcmVsYXRpdmUgdG8gY29udGFpbmVyIGVsZW1lbnQKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0KICAgKiBAcmV0dXJucyB7T2JqZWN0fSBvZmZzZXQgLSBoYXMgbGVmdCwgdG9wLCByaWdodCwgYm90dG9tCiAgICovCgogIHByb3RvLl9nZXRFbGVtZW50T2Zmc2V0ID0gZnVuY3Rpb24gKGVsZW0pIHsKICAgIHZhciBib3VuZGluZ1JlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgdmFyIHRoaXNSZWN0ID0gdGhpcy5fYm91bmRpbmdSZWN0OwogICAgdmFyIHNpemUgPSBnZXRTaXplKGVsZW0pOwogICAgdmFyIG9mZnNldCA9IHsKICAgICAgbGVmdDogYm91bmRpbmdSZWN0LmxlZnQgLSB0aGlzUmVjdC5sZWZ0IC0gc2l6ZS5tYXJnaW5MZWZ0LAogICAgICB0b3A6IGJvdW5kaW5nUmVjdC50b3AgLSB0aGlzUmVjdC50b3AgLSBzaXplLm1hcmdpblRvcCwKICAgICAgcmlnaHQ6IHRoaXNSZWN0LnJpZ2h0IC0gYm91bmRpbmdSZWN0LnJpZ2h0IC0gc2l6ZS5tYXJnaW5SaWdodCwKICAgICAgYm90dG9tOiB0aGlzUmVjdC5ib3R0b20gLSBib3VuZGluZ1JlY3QuYm90dG9tIC0gc2l6ZS5tYXJnaW5Cb3R0b20KICAgIH07CiAgICByZXR1cm4gb2Zmc2V0OwogIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHJlc2l6ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwogIC8vIGVuYWJsZSBldmVudCBoYW5kbGVycyBmb3IgbGlzdGVuZXJzCiAgLy8gaS5lLiByZXNpemUgLT4gb25yZXNpemUKCgogIHByb3RvLmhhbmRsZUV2ZW50ID0gdXRpbHMuaGFuZGxlRXZlbnQ7CiAgLyoqCiAgICogQmluZCBsYXlvdXQgdG8gd2luZG93IHJlc2l6aW5nCiAgICovCgogIHByb3RvLmJpbmRSZXNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcyk7CiAgICB0aGlzLmlzUmVzaXplQm91bmQgPSB0cnVlOwogIH07CiAgLyoqCiAgICogVW5iaW5kIGxheW91dCB0byB3aW5kb3cgcmVzaXppbmcKICAgKi8KCgogIHByb3RvLnVuYmluZFJlc2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzKTsKICAgIHRoaXMuaXNSZXNpemVCb3VuZCA9IGZhbHNlOwogIH07CgogIHByb3RvLm9ucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5yZXNpemUoKTsKICB9OwoKICB1dGlscy5kZWJvdW5jZU1ldGhvZChPdXRsYXllciwgJ29ucmVzaXplJywgMTAwKTsKCiAgcHJvdG8ucmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgLy8gZG9uJ3QgdHJpZ2dlciBpZiBzaXplIGRpZCBub3QgY2hhbmdlCiAgICAvLyBvciBpZiByZXNpemUgd2FzIHVuYm91bmQuIFNlZSAjOQogICAgaWYgKCF0aGlzLmlzUmVzaXplQm91bmQgfHwgIXRoaXMubmVlZHNSZXNpemVMYXlvdXQoKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5sYXlvdXQoKTsKICB9OwogIC8qKgogICAqIGNoZWNrIGlmIGxheW91dCBpcyBuZWVkZWQgcG9zdCBsYXlvdXQKICAgKiBAcmV0dXJucyBCb29sZWFuCiAgICovCgoKICBwcm90by5uZWVkc1Jlc2l6ZUxheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaXplID0gZ2V0U2l6ZSh0aGlzLmVsZW1lbnQpOyAvLyBjaGVjayB0aGF0IHRoaXMuc2l6ZSBhbmQgc2l6ZSBhcmUgdGhlcmUKICAgIC8vIElFOCB0cmlnZ2VycyByZXNpemUgb24gYm9keSBzaXplIGNoYW5nZSwgc28gdGhleSBtaWdodCBub3QgYmUKCiAgICB2YXIgaGFzU2l6ZXMgPSB0aGlzLnNpemUgJiYgc2l6ZTsKICAgIHJldHVybiBoYXNTaXplcyAmJiBzaXplLmlubmVyV2lkdGggIT09IHRoaXMuc2l6ZS5pbm5lcldpZHRoOwogIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIG1ldGhvZHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gLy8KCiAgLyoqCiAgICogYWRkIGl0ZW1zIHRvIE91dGxheWVyIGluc3RhbmNlCiAgICogQHBhcmFtIHtBcnJheSBvciBOb2RlTGlzdCBvciBFbGVtZW50fSBlbGVtcwogICAqIEByZXR1cm5zIHtBcnJheX0gaXRlbXMgLSBPdXRsYXllci5JdGVtcwogICoqLwoKCiAgcHJvdG8uYWRkSXRlbXMgPSBmdW5jdGlvbiAoZWxlbXMpIHsKICAgIHZhciBpdGVtcyA9IHRoaXMuX2l0ZW1pemUoZWxlbXMpOyAvLyBhZGQgaXRlbXMgdG8gY29sbGVjdGlvbgoKCiAgICBpZiAoaXRlbXMubGVuZ3RoKSB7CiAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmNvbmNhdChpdGVtcyk7CiAgICB9CgogICAgcmV0dXJuIGl0ZW1zOwogIH07CiAgLyoqCiAgICogTGF5b3V0IG5ld2x5LWFwcGVuZGVkIGl0ZW0gZWxlbWVudHMKICAgKiBAcGFyYW0ge0FycmF5IG9yIE5vZGVMaXN0IG9yIEVsZW1lbnR9IGVsZW1zCiAgICovCgoKICBwcm90by5hcHBlbmRlZCA9IGZ1bmN0aW9uIChlbGVtcykgewogICAgdmFyIGl0ZW1zID0gdGhpcy5hZGRJdGVtcyhlbGVtcyk7CgogICAgaWYgKCFpdGVtcy5sZW5ndGgpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBsYXlvdXQgYW5kIHJldmVhbCBqdXN0IHRoZSBuZXcgaXRlbXMKCgogICAgdGhpcy5sYXlvdXRJdGVtcyhpdGVtcywgdHJ1ZSk7CiAgICB0aGlzLnJldmVhbChpdGVtcyk7CiAgfTsKICAvKioKICAgKiBMYXlvdXQgcHJlcGVuZGVkIGVsZW1lbnRzCiAgICogQHBhcmFtIHtBcnJheSBvciBOb2RlTGlzdCBvciBFbGVtZW50fSBlbGVtcwogICAqLwoKCiAgcHJvdG8ucHJlcGVuZGVkID0gZnVuY3Rpb24gKGVsZW1zKSB7CiAgICB2YXIgaXRlbXMgPSB0aGlzLl9pdGVtaXplKGVsZW1zKTsKCiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgewogICAgICByZXR1cm47CiAgICB9IC8vIGFkZCBpdGVtcyB0byBiZWdpbm5pbmcgb2YgY29sbGVjdGlvbgoKCiAgICB2YXIgcHJldmlvdXNJdGVtcyA9IHRoaXMuaXRlbXMuc2xpY2UoMCk7CiAgICB0aGlzLml0ZW1zID0gaXRlbXMuY29uY2F0KHByZXZpb3VzSXRlbXMpOyAvLyBzdGFydCBuZXcgbGF5b3V0CgogICAgdGhpcy5fcmVzZXRMYXlvdXQoKTsKCiAgICB0aGlzLl9tYW5hZ2VTdGFtcHMoKTsgLy8gbGF5b3V0IG5ldyBzdHVmZiB3aXRob3V0IHRyYW5zaXRpb24KCgogICAgdGhpcy5sYXlvdXRJdGVtcyhpdGVtcywgdHJ1ZSk7CiAgICB0aGlzLnJldmVhbChpdGVtcyk7IC8vIGxheW91dCBwcmV2aW91cyBpdGVtcwoKICAgIHRoaXMubGF5b3V0SXRlbXMocHJldmlvdXNJdGVtcyk7CiAgfTsKICAvKioKICAgKiByZXZlYWwgYSBjb2xsZWN0aW9uIG9mIGl0ZW1zCiAgICogQHBhcmFtIHtBcnJheSBvZiBPdXRsYXllci5JdGVtc30gaXRlbXMKICAgKi8KCgogIHByb3RvLnJldmVhbCA9IGZ1bmN0aW9uIChpdGVtcykgewogICAgdGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcygncmV2ZWFsJywgaXRlbXMpOwoKICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpdGVtLnJldmVhbCgpOwogICAgfSk7CiAgfTsKICAvKioKICAgKiBoaWRlIGEgY29sbGVjdGlvbiBvZiBpdGVtcwogICAqIEBwYXJhbSB7QXJyYXkgb2YgT3V0bGF5ZXIuSXRlbXN9IGl0ZW1zCiAgICovCgoKICBwcm90by5oaWRlID0gZnVuY3Rpb24gKGl0ZW1zKSB7CiAgICB0aGlzLl9lbWl0Q29tcGxldGVPbkl0ZW1zKCdoaWRlJywgaXRlbXMpOwoKICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpdGVtLmhpZGUoKTsKICAgIH0pOwogIH07CiAgLyoqCiAgICogcmV2ZWFsIGl0ZW0gZWxlbWVudHMKICAgKiBAcGFyYW0ge0FycmF5fSwge0VsZW1lbnR9LCB7Tm9kZUxpc3R9IGl0ZW1zCiAgICovCgoKICBwcm90by5yZXZlYWxJdGVtRWxlbWVudHMgPSBmdW5jdGlvbiAoZWxlbXMpIHsKICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0SXRlbXMoZWxlbXMpOwogICAgdGhpcy5yZXZlYWwoaXRlbXMpOwogIH07CiAgLyoqCiAgICogaGlkZSBpdGVtIGVsZW1lbnRzCiAgICogQHBhcmFtIHtBcnJheX0sIHtFbGVtZW50fSwge05vZGVMaXN0fSBpdGVtcwogICAqLwoKCiAgcHJvdG8uaGlkZUl0ZW1FbGVtZW50cyA9IGZ1bmN0aW9uIChlbGVtcykgewogICAgdmFyIGl0ZW1zID0gdGhpcy5nZXRJdGVtcyhlbGVtcyk7CiAgICB0aGlzLmhpZGUoaXRlbXMpOwogIH07CiAgLyoqCiAgICogZ2V0IE91dGxheWVyLkl0ZW0sIGdpdmVuIGFuIEVsZW1lbnQKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0KICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAqIEByZXR1cm5zIHtPdXRsYXllci5JdGVtfSBpdGVtCiAgICovCgoKICBwcm90by5nZXRJdGVtID0gZnVuY3Rpb24gKGVsZW0pIHsKICAgIC8vIGxvb3AgdGhyb3VnaCBpdGVtcyB0byBnZXQgdGhlIG9uZSB0aGF0IG1hdGNoZXMKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgaXRlbSA9IHRoaXMuaXRlbXNbaV07CgogICAgICBpZiAoaXRlbS5lbGVtZW50ID09IGVsZW0pIHsKICAgICAgICAvLyByZXR1cm4gaXRlbQogICAgICAgIHJldHVybiBpdGVtOwogICAgICB9CiAgICB9CiAgfTsKICAvKioKICAgKiBnZXQgY29sbGVjdGlvbiBvZiBPdXRsYXllci5JdGVtcywgZ2l2ZW4gRWxlbWVudHMKICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtcwogICAqIEByZXR1cm5zIHtBcnJheX0gaXRlbXMgLSBPdXRsYXllci5JdGVtcwogICAqLwoKCiAgcHJvdG8uZ2V0SXRlbXMgPSBmdW5jdGlvbiAoZWxlbXMpIHsKICAgIGVsZW1zID0gdXRpbHMubWFrZUFycmF5KGVsZW1zKTsKICAgIHZhciBpdGVtcyA9IFtdOwogICAgZWxlbXMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbSkgewogICAgICB2YXIgaXRlbSA9IHRoaXMuZ2V0SXRlbShlbGVtKTsKCiAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgaXRlbXMucHVzaChpdGVtKTsKICAgICAgfQogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gaXRlbXM7CiAgfTsKICAvKioKICAgKiByZW1vdmUgZWxlbWVudChzKSBmcm9tIGluc3RhbmNlIGFuZCBET00KICAgKiBAcGFyYW0ge0FycmF5IG9yIE5vZGVMaXN0IG9yIEVsZW1lbnR9IGVsZW1zCiAgICovCgoKICBwcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlbXMpIHsKICAgIHZhciByZW1vdmVJdGVtcyA9IHRoaXMuZ2V0SXRlbXMoZWxlbXMpOwoKICAgIHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoJ3JlbW92ZScsIHJlbW92ZUl0ZW1zKTsgLy8gYmFpbCBpZiBubyBpdGVtcyB0byByZW1vdmUKCgogICAgaWYgKCFyZW1vdmVJdGVtcyB8fCAhcmVtb3ZlSXRlbXMubGVuZ3RoKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICByZW1vdmVJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGl0ZW0ucmVtb3ZlKCk7IC8vIHJlbW92ZSBpdGVtIGZyb20gY29sbGVjdGlvbgoKICAgICAgdXRpbHMucmVtb3ZlRnJvbSh0aGlzLml0ZW1zLCBpdGVtKTsKICAgIH0sIHRoaXMpOwogIH07IC8vIC0tLS0tIGRlc3Ryb3kgLS0tLS0gLy8KICAvLyByZW1vdmUgYW5kIGRpc2FibGUgT3V0bGF5ZXIgaW5zdGFuY2UKCgogIHByb3RvLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICAvLyBjbGVhbiB1cCBkeW5hbWljIHN0eWxlcwogICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50LnN0eWxlOwogICAgc3R5bGUuaGVpZ2h0ID0gJyc7CiAgICBzdHlsZS5wb3NpdGlvbiA9ICcnOwogICAgc3R5bGUud2lkdGggPSAnJzsgLy8gZGVzdHJveSBpdGVtcwoKICAgIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpdGVtLmRlc3Ryb3koKTsKICAgIH0pOwogICAgdGhpcy51bmJpbmRSZXNpemUoKTsKICAgIHZhciBpZCA9IHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ7CiAgICBkZWxldGUgaW5zdGFuY2VzW2lkXTsgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBpbnN0YW5jZSBieSBpZAoKICAgIGRlbGV0ZSB0aGlzLmVsZW1lbnQub3V0bGF5ZXJHVUlEOyAvLyByZW1vdmUgZGF0YSBmb3IgalF1ZXJ5CgogICAgaWYgKGpRdWVyeSkgewogICAgICBqUXVlcnkucmVtb3ZlRGF0YSh0aGlzLmVsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlKTsKICAgIH0KICB9OyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkYXRhIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vCgogIC8qKgogICAqIGdldCBPdXRsYXllciBpbnN0YW5jZSBmcm9tIGVsZW1lbnQKICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0KICAgKiBAcmV0dXJucyB7T3V0bGF5ZXJ9CiAgICovCgoKICBPdXRsYXllci5kYXRhID0gZnVuY3Rpb24gKGVsZW0pIHsKICAgIGVsZW0gPSB1dGlscy5nZXRRdWVyeUVsZW1lbnQoZWxlbSk7CiAgICB2YXIgaWQgPSBlbGVtICYmIGVsZW0ub3V0bGF5ZXJHVUlEOwogICAgcmV0dXJuIGlkICYmIGluc3RhbmNlc1tpZF07CiAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gY3JlYXRlIE91dGxheWVyIGNsYXNzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vCgogIC8qKgogICAqIGNyZWF0ZSBhIGxheW91dCBjbGFzcwogICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UKICAgKi8KCgogIE91dGxheWVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuYW1lc3BhY2UsIG9wdGlvbnMpIHsKICAgIC8vIHN1Yi1jbGFzcyBPdXRsYXllcgogICAgdmFyIExheW91dCA9IHN1YmNsYXNzKE91dGxheWVyKTsgLy8gYXBwbHkgbmV3IG9wdGlvbnMgYW5kIGNvbXBhdE9wdGlvbnMKCiAgICBMYXlvdXQuZGVmYXVsdHMgPSB1dGlscy5leHRlbmQoe30sIE91dGxheWVyLmRlZmF1bHRzKTsKICAgIHV0aWxzLmV4dGVuZChMYXlvdXQuZGVmYXVsdHMsIG9wdGlvbnMpOwogICAgTGF5b3V0LmNvbXBhdE9wdGlvbnMgPSB1dGlscy5leHRlbmQoe30sIE91dGxheWVyLmNvbXBhdE9wdGlvbnMpOwogICAgTGF5b3V0Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZTsKICAgIExheW91dC5kYXRhID0gT3V0bGF5ZXIuZGF0YTsgLy8gc3ViLWNsYXNzIEl0ZW0KCiAgICBMYXlvdXQuSXRlbSA9IHN1YmNsYXNzKEl0ZW0pOyAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBkZWNsYXJhdGl2ZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwoKICAgIHV0aWxzLmh0bWxJbml0KExheW91dCwgbmFtZXNwYWNlKTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0galF1ZXJ5IGJyaWRnZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvLwogICAgLy8gbWFrZSBpbnRvIGpRdWVyeSBwbHVnaW4KCiAgICBpZiAoalF1ZXJ5ICYmIGpRdWVyeS5icmlkZ2V0KSB7CiAgICAgIGpRdWVyeS5icmlkZ2V0KG5hbWVzcGFjZSwgTGF5b3V0KTsKICAgIH0KCiAgICByZXR1cm4gTGF5b3V0OwogIH07CgogIGZ1bmN0aW9uIHN1YmNsYXNzKFBhcmVudCkgewogICAgZnVuY3Rpb24gU3ViQ2xhc3MoKSB7CiAgICAgIFBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIFN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGFyZW50LnByb3RvdHlwZSk7CiAgICBTdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJDbGFzczsKICAgIHJldHVybiBTdWJDbGFzczsKICB9IC8vIC0tLS0tIGZpbiAtLS0tLSAvLwogIC8vIGJhY2sgaW4gZ2xvYmFsCgoKICBPdXRsYXllci5JdGVtID0gSXRlbTsKICByZXR1cm4gT3V0bGF5ZXI7Cn0pOwovKiEKICogTWFzb25yeSB2NC4wLjAKICogQ2FzY2FkaW5nIGdyaWQgbGF5b3V0IGxpYnJhcnkKICogaHR0cDovL21hc29ucnkuZGVzYW5kcm8uY29tCiAqIE1JVCBMaWNlbnNlCiAqIGJ5IERhdmlkIERlU2FuZHJvCiAqLwoKCihmdW5jdGlvbiAod2luZG93LCBmYWN0b3J5KSB7CiAgLy8gdW5pdmVyc2FsIG1vZHVsZSBkZWZpbml0aW9uCgogIC8qIGpzaGludCBzdHJpY3Q6IGZhbHNlICovCgogIC8qZ2xvYmFscyBkZWZpbmUsIG1vZHVsZSwgcmVxdWlyZSAqLwogIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgLy8gQU1ECiAgICBkZWZpbmUoWydvdXRsYXllci9vdXRsYXllcicsICdnZXQtc2l6ZS9nZXQtc2l6ZSddLCBmYWN0b3J5KTsKICB9IGVsc2UgaWYgKCh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykgewogICAgLy8gQ29tbW9uSlMKICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdvdXRsYXllcicpLCByZXF1aXJlKCdnZXQtc2l6ZScpKTsKICB9IGVsc2UgewogICAgLy8gYnJvd3NlciBnbG9iYWwKICAgIHdpbmRvdy5NYXNvbnJ5ID0gZmFjdG9yeSh3aW5kb3cuT3V0bGF5ZXIsIHdpbmRvdy5nZXRTaXplKTsKICB9Cn0pKHdpbmRvdywgZnVuY3Rpb24gZmFjdG9yeShPdXRsYXllciwgZ2V0U2l6ZSkgewogIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIG1hc29ucnlEZWZpbml0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vCiAgLy8gY3JlYXRlIGFuIE91dGxheWVyIGxheW91dCBjbGFzcwogIHZhciBNYXNvbnJ5ID0gT3V0bGF5ZXIuY3JlYXRlKCdtYXNvbnJ5Jyk7IC8vIGlzRml0V2lkdGggLT4gZml0V2lkdGgKCiAgTWFzb25yeS5jb21wYXRPcHRpb25zLmZpdFdpZHRoID0gJ2lzRml0V2lkdGgnOwoKICBNYXNvbnJ5LnByb3RvdHlwZS5fcmVzZXRMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmdldFNpemUoKTsKCiAgICB0aGlzLl9nZXRNZWFzdXJlbWVudCgnY29sdW1uV2lkdGgnLCAnb3V0ZXJXaWR0aCcpOwoKICAgIHRoaXMuX2dldE1lYXN1cmVtZW50KCdndXR0ZXInLCAnb3V0ZXJXaWR0aCcpOwoKICAgIHRoaXMubWVhc3VyZUNvbHVtbnMoKTsgLy8gcmVzZXQgY29sdW1uIFkKCiAgICB0aGlzLmNvbFlzID0gW107CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNvbHM7IGkrKykgewogICAgICB0aGlzLmNvbFlzLnB1c2goMCk7CiAgICB9CgogICAgdGhpcy5tYXhZID0gMDsKICB9OwoKICBNYXNvbnJ5LnByb3RvdHlwZS5tZWFzdXJlQ29sdW1ucyA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZ2V0Q29udGFpbmVyV2lkdGgoKTsgLy8gaWYgY29sdW1uV2lkdGggaXMgMCwgZGVmYXVsdCB0byBvdXRlcldpZHRoIG9mIGZpcnN0IGl0ZW0KCiAgICBpZiAoIXRoaXMuY29sdW1uV2lkdGgpIHsKICAgICAgdmFyIGZpcnN0SXRlbSA9IHRoaXMuaXRlbXNbMF07CiAgICAgIHZhciBmaXJzdEl0ZW1FbGVtID0gZmlyc3RJdGVtICYmIGZpcnN0SXRlbS5lbGVtZW50OyAvLyBjb2x1bW5XaWR0aCBmYWxsIGJhY2sgdG8gaXRlbSBvZiBmaXJzdCBlbGVtZW50CgogICAgICB0aGlzLmNvbHVtbldpZHRoID0gZmlyc3RJdGVtRWxlbSAmJiBnZXRTaXplKGZpcnN0SXRlbUVsZW0pLm91dGVyV2lkdGggfHwgLy8gaWYgZmlyc3QgZWxlbSBoYXMgbm8gd2lkdGgsIGRlZmF1bHQgdG8gc2l6ZSBvZiBjb250YWluZXIKICAgICAgdGhpcy5jb250YWluZXJXaWR0aDsKICAgIH0KCiAgICB2YXIgY29sdW1uV2lkdGggPSB0aGlzLmNvbHVtbldpZHRoICs9IHRoaXMuZ3V0dGVyOyAvLyBjYWxjdWxhdGUgY29sdW1ucwoKICAgIHZhciBjb250YWluZXJXaWR0aCA9IHRoaXMuY29udGFpbmVyV2lkdGggKyB0aGlzLmd1dHRlcjsKICAgIHZhciBjb2xzID0gY29udGFpbmVyV2lkdGggLyBjb2x1bW5XaWR0aDsgLy8gZml4IHJvdW5kaW5nIGVycm9ycywgdHlwaWNhbGx5IHdpdGggZ3V0dGVycwoKICAgIHZhciBleGNlc3MgPSBjb2x1bW5XaWR0aCAtIGNvbnRhaW5lcldpZHRoICUgY29sdW1uV2lkdGg7IC8vIGlmIG92ZXJzaG9vdCBpcyBsZXNzIHRoYW4gYSBwaXhlbCwgcm91bmQgdXAsIG90aGVyd2lzZSBmbG9vciBpdAoKICAgIHZhciBtYXRoTWV0aG9kID0gZXhjZXNzICYmIGV4Y2VzcyA8IDEgPyAncm91bmQnIDogJ2Zsb29yJzsKICAgIGNvbHMgPSBNYXRoW21hdGhNZXRob2RdKGNvbHMpOwogICAgdGhpcy5jb2xzID0gTWF0aC5tYXgoY29scywgMSk7CiAgfTsKCiAgTWFzb25yeS5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGggPSBmdW5jdGlvbiAoKSB7CiAgICAvLyBjb250YWluZXIgaXMgcGFyZW50IGlmIGZpdCB3aWR0aAogICAgdmFyIGlzRml0V2lkdGggPSB0aGlzLl9nZXRPcHRpb24oJ2ZpdFdpZHRoJyk7CgogICAgdmFyIGNvbnRhaW5lciA9IGlzRml0V2lkdGggPyB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSA6IHRoaXMuZWxlbWVudDsgLy8gY2hlY2sgdGhhdCB0aGlzLnNpemUgYW5kIHNpemUgYXJlIHRoZXJlCiAgICAvLyBJRTggdHJpZ2dlcnMgcmVzaXplIG9uIGJvZHkgc2l6ZSBjaGFuZ2UsIHNvIHRoZXkgbWlnaHQgbm90IGJlCgogICAgdmFyIHNpemUgPSBnZXRTaXplKGNvbnRhaW5lcik7CiAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gc2l6ZSAmJiBzaXplLmlubmVyV2lkdGg7CiAgfTsKCiAgTWFzb25yeS5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpdGVtLmdldFNpemUoKTsgLy8gaG93IG1hbnkgY29sdW1ucyBkb2VzIHRoaXMgYnJpY2sgc3BhbgoKICAgIHZhciByZW1haW5kZXIgPSBpdGVtLnNpemUub3V0ZXJXaWR0aCAlIHRoaXMuY29sdW1uV2lkdGg7CiAgICB2YXIgbWF0aE1ldGhvZCA9IHJlbWFpbmRlciAmJiByZW1haW5kZXIgPCAxID8gJ3JvdW5kJyA6ICdjZWlsJzsgLy8gcm91bmQgaWYgb2ZmIGJ5IDEgcGl4ZWwsIG90aGVyd2lzZSB1c2UgY2VpbAoKICAgIHZhciBjb2xTcGFuID0gTWF0aFttYXRoTWV0aG9kXShpdGVtLnNpemUub3V0ZXJXaWR0aCAvIHRoaXMuY29sdW1uV2lkdGgpOwogICAgY29sU3BhbiA9IE1hdGgubWluKGNvbFNwYW4sIHRoaXMuY29scyk7CgogICAgdmFyIGNvbEdyb3VwID0gdGhpcy5fZ2V0Q29sR3JvdXAoY29sU3Bhbik7IC8vIGdldCB0aGUgbWluaW11bSBZIHZhbHVlIGZyb20gdGhlIGNvbHVtbnMKCgogICAgdmFyIG1pbmltdW1ZID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgY29sR3JvdXApOwogICAgdmFyIHNob3J0Q29sSW5kZXggPSBjb2xHcm91cC5pbmRleE9mKG1pbmltdW1ZKTsgLy8gcG9zaXRpb24gdGhlIGJyaWNrCgogICAgdmFyIHBvc2l0aW9uID0gewogICAgICB4OiB0aGlzLmNvbHVtbldpZHRoICogc2hvcnRDb2xJbmRleCwKICAgICAgeTogbWluaW11bVkKICAgIH07IC8vIGFwcGx5IHNldEhlaWdodCB0byBuZWNlc3NhcnkgY29sdW1ucwoKICAgIHZhciBzZXRIZWlnaHQgPSBtaW5pbXVtWSArIGl0ZW0uc2l6ZS5vdXRlckhlaWdodDsKICAgIHZhciBzZXRTcGFuID0gdGhpcy5jb2xzICsgMSAtIGNvbEdyb3VwLmxlbmd0aDsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldFNwYW47IGkrKykgewogICAgICB0aGlzLmNvbFlzW3Nob3J0Q29sSW5kZXggKyBpXSA9IHNldEhlaWdodDsKICAgIH0KCiAgICByZXR1cm4gcG9zaXRpb247CiAgfTsKICAvKioKICAgKiBAcGFyYW0ge051bWJlcn0gY29sU3BhbiAtIG51bWJlciBvZiBjb2x1bW5zIHRoZSBlbGVtZW50IHNwYW5zCiAgICogQHJldHVybnMge0FycmF5fSBjb2xHcm91cAogICAqLwoKCiAgTWFzb25yeS5wcm90b3R5cGUuX2dldENvbEdyb3VwID0gZnVuY3Rpb24gKGNvbFNwYW4pIHsKICAgIGlmIChjb2xTcGFuIDwgMikgewogICAgICAvLyBpZiBicmljayBzcGFucyBvbmx5IG9uZSBjb2x1bW4sIHVzZSBhbGwgdGhlIGNvbHVtbiBZcwogICAgICByZXR1cm4gdGhpcy5jb2xZczsKICAgIH0KCiAgICB2YXIgY29sR3JvdXAgPSBbXTsgLy8gaG93IG1hbnkgZGlmZmVyZW50IHBsYWNlcyBjb3VsZCB0aGlzIGJyaWNrIGZpdCBob3Jpem9udGFsbHkKCiAgICB2YXIgZ3JvdXBDb3VudCA9IHRoaXMuY29scyArIDEgLSBjb2xTcGFuOyAvLyBmb3IgZWFjaCBncm91cCBwb3RlbnRpYWwgaG9yaXpvbnRhbCBwb3NpdGlvbgoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JvdXBDb3VudDsgaSsrKSB7CiAgICAgIC8vIG1ha2UgYW4gYXJyYXkgb2YgY29sWSB2YWx1ZXMgZm9yIHRoYXQgb25lIGdyb3VwCiAgICAgIHZhciBncm91cENvbFlzID0gdGhpcy5jb2xZcy5zbGljZShpLCBpICsgY29sU3Bhbik7IC8vIGFuZCBnZXQgdGhlIG1heCB2YWx1ZSBvZiB0aGUgYXJyYXkKCiAgICAgIGNvbEdyb3VwW2ldID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgZ3JvdXBDb2xZcyk7CiAgICB9CgogICAgcmV0dXJuIGNvbEdyb3VwOwogIH07CgogIE1hc29ucnkucHJvdG90eXBlLl9tYW5hZ2VTdGFtcCA9IGZ1bmN0aW9uIChzdGFtcCkgewogICAgdmFyIHN0YW1wU2l6ZSA9IGdldFNpemUoc3RhbXApOwoKICAgIHZhciBvZmZzZXQgPSB0aGlzLl9nZXRFbGVtZW50T2Zmc2V0KHN0YW1wKTsgLy8gZ2V0IHRoZSBjb2x1bW5zIHRoYXQgdGhpcyBzdGFtcCBhZmZlY3RzCgoKICAgIHZhciBpc09yaWdpbkxlZnQgPSB0aGlzLl9nZXRPcHRpb24oJ29yaWdpbkxlZnQnKTsKCiAgICB2YXIgZmlyc3RYID0gaXNPcmlnaW5MZWZ0ID8gb2Zmc2V0LmxlZnQgOiBvZmZzZXQucmlnaHQ7CiAgICB2YXIgbGFzdFggPSBmaXJzdFggKyBzdGFtcFNpemUub3V0ZXJXaWR0aDsKICAgIHZhciBmaXJzdENvbCA9IE1hdGguZmxvb3IoZmlyc3RYIC8gdGhpcy5jb2x1bW5XaWR0aCk7CiAgICBmaXJzdENvbCA9IE1hdGgubWF4KDAsIGZpcnN0Q29sKTsKICAgIHZhciBsYXN0Q29sID0gTWF0aC5mbG9vcihsYXN0WCAvIHRoaXMuY29sdW1uV2lkdGgpOyAvLyBsYXN0Q29sIHNob3VsZCBub3QgZ28gb3ZlciBpZiBtdWx0aXBsZSBvZiBjb2x1bW5XaWR0aCAjNDI1CgogICAgbGFzdENvbCAtPSBsYXN0WCAlIHRoaXMuY29sdW1uV2lkdGggPyAwIDogMTsKICAgIGxhc3RDb2wgPSBNYXRoLm1pbih0aGlzLmNvbHMgLSAxLCBsYXN0Q29sKTsgLy8gc2V0IGNvbFlzIHRvIGJvdHRvbSBvZiB0aGUgc3RhbXAKCiAgICB2YXIgaXNPcmlnaW5Ub3AgPSB0aGlzLl9nZXRPcHRpb24oJ29yaWdpblRvcCcpOwoKICAgIHZhciBzdGFtcE1heFkgPSAoaXNPcmlnaW5Ub3AgPyBvZmZzZXQudG9wIDogb2Zmc2V0LmJvdHRvbSkgKyBzdGFtcFNpemUub3V0ZXJIZWlnaHQ7CgogICAgZm9yICh2YXIgaSA9IGZpcnN0Q29sOyBpIDw9IGxhc3RDb2w7IGkrKykgewogICAgICB0aGlzLmNvbFlzW2ldID0gTWF0aC5tYXgoc3RhbXBNYXhZLCB0aGlzLmNvbFlzW2ldKTsKICAgIH0KICB9OwoKICBNYXNvbnJ5LnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMubWF4WSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHRoaXMuY29sWXMpOwogICAgdmFyIHNpemUgPSB7CiAgICAgIGhlaWdodDogdGhpcy5tYXhZCiAgICB9OwoKICAgIGlmICh0aGlzLl9nZXRPcHRpb24oJ2ZpdFdpZHRoJykpIHsKICAgICAgc2l6ZS53aWR0aCA9IHRoaXMuX2dldENvbnRhaW5lckZpdFdpZHRoKCk7CiAgICB9CgogICAgcmV0dXJuIHNpemU7CiAgfTsKCiAgTWFzb25yeS5wcm90b3R5cGUuX2dldENvbnRhaW5lckZpdFdpZHRoID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHVudXNlZENvbHMgPSAwOyAvLyBjb3VudCB1bnVzZWQgY29sdW1ucwoKICAgIHZhciBpID0gdGhpcy5jb2xzOwoKICAgIHdoaWxlICgtLWkpIHsKICAgICAgaWYgKHRoaXMuY29sWXNbaV0gIT09IDApIHsKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgdW51c2VkQ29scysrOwogICAgfSAvLyBmaXQgY29udGFpbmVyIHRvIGNvbHVtbnMgdGhhdCBoYXZlIGJlZW4gdXNlZAoKCiAgICByZXR1cm4gKHRoaXMuY29scyAtIHVudXNlZENvbHMpICogdGhpcy5jb2x1bW5XaWR0aCAtIHRoaXMuZ3V0dGVyOwogIH07CgogIE1hc29ucnkucHJvdG90eXBlLm5lZWRzUmVzaXplTGF5b3V0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIHByZXZpb3VzV2lkdGggPSB0aGlzLmNvbnRhaW5lcldpZHRoOwogICAgdGhpcy5nZXRDb250YWluZXJXaWR0aCgpOwogICAgcmV0dXJuIHByZXZpb3VzV2lkdGggIT0gdGhpcy5jb250YWluZXJXaWR0aDsKICB9OwoKICByZXR1cm4gTWFzb25yeTsKfSk7CgokKGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBhKCkgewogICAgZS50b2dnbGVDbGFzcyhqKSwgZC50b2dnbGVDbGFzcyhpKSwgZi50b2dnbGVDbGFzcyhrKSwgZy50b2dnbGVDbGFzcyhsKTsKICB9CgogIGZ1bmN0aW9uIGIoKSB7CiAgICBlLmFkZENsYXNzKGopLCBkLmFuaW1hdGUoewogICAgICBsZWZ0OiAiMHB4IgogICAgfSwgbiksIGYuYW5pbWF0ZSh7CiAgICAgIGxlZnQ6IG8KICAgIH0sIG4pLCBnLmFuaW1hdGUoewogICAgICBsZWZ0OiBvCiAgICB9LCBuKTsKICB9CgogIGZ1bmN0aW9uIGMoKSB7CiAgICBlLnJlbW92ZUNsYXNzKGopLCBkLmFuaW1hdGUoewogICAgICBsZWZ0OiAiLSIgKyBvCiAgICB9LCBuKSwgZi5hbmltYXRlKHsKICAgICAgbGVmdDogIjBweCIKICAgIH0sIG4pLCBnLmFuaW1hdGUoewogICAgICBsZWZ0OiAiMHB4IgogICAgfSwgbik7CiAgfQoKICB2YXIgZCA9ICQoIi5wdXNoeSIpLAogICAgICBlID0gJCgiYm9keSIpLAogICAgICBmID0gJCgiI2NvbnRhaW5lciIpLAogICAgICBnID0gJCgiLnB1c2giKSwKICAgICAgaCA9ICQoIi5zaXRlLW92ZXJsYXkiKSwKICAgICAgaSA9ICJwdXNoeS1sZWZ0IHB1c2h5LW9wZW4iLAogICAgICBqID0gInB1c2h5LWFjdGl2ZSIsCiAgICAgIGsgPSAiY29udGFpbmVyLXB1c2giLAogICAgICBsID0gInB1c2gtcHVzaCIsCiAgICAgIG0gPSAkKCIubWVudS1idG4sIC5wdXNoeSBhOm5vdCguc3VibWVudS1saW5rKSIpLAogICAgICBuID0gMjAwLAogICAgICBvID0gZC53aWR0aCgpICsgInB4IjsKICBpZiAoY3NzVHJhbnNmb3JtczNkID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIiksCiAgICAgICAgYiA9ICExLAogICAgICAgIGMgPSB7CiAgICAgIHdlYmtpdFRyYW5zZm9ybTogIi13ZWJraXQtdHJhbnNmb3JtIiwKICAgICAgT1RyYW5zZm9ybTogIi1vLXRyYW5zZm9ybSIsCiAgICAgIG1zVHJhbnNmb3JtOiAiLW1zLXRyYW5zZm9ybSIsCiAgICAgIE1velRyYW5zZm9ybTogIi1tb3otdHJhbnNmb3JtIiwKICAgICAgdHJhbnNmb3JtOiAidHJhbnNmb3JtIgogICAgfTsKICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGEsIG51bGwpOwoKICAgIGZvciAodmFyIGQgaW4gYykgewogICAgICB2b2lkIDAgIT09IGEuc3R5bGVbZF0gJiYgKGEuc3R5bGVbZF0gPSAidHJhbnNsYXRlM2QoMXB4LDFweCwxcHgpIiwgYiA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGEpLmdldFByb3BlcnR5VmFsdWUoY1tkXSkpOwogICAgfQoKICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpLCB2b2lkIDAgIT09IGIgJiYgYi5sZW5ndGggPiAwICYmICJub25lIiAhPT0gYjsKICB9KCkpIG0uY2xpY2soZnVuY3Rpb24gKCkgewogICAgYSgpOwogIH0pLCBoLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgIGEoKTsKICB9KTtlbHNlIHsKICAgIGQuY3NzKHsKICAgICAgbGVmdDogIi0iICsgbwogICAgfSksIGYuY3NzKHsKICAgICAgIm92ZXJmbG93LXgiOiAiaGlkZGVuIgogICAgfSk7CiAgICB2YXIgcCA9ICEwOwogICAgbS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgIHAgPyAoYigpLCBwID0gITEpIDogKGMoKSwgcCA9ICEwKTsKICAgIH0pLCBoLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgcCA/IChiKCksIHAgPSAhMSkgOiAoYygpLCBwID0gITApOwogICAgfSk7CiAgfQp9KTsKLyohIFdPVyAtIHYxLjEuMiAtIDIwMTUtMDgtMTkKKiBDb3B5cmlnaHQgKGMpIDIwMTUgTWF0dGhpZXUgQXVzc2FndWVsOyBMaWNlbnNlZCBNSVQgKi8KCihmdW5jdGlvbiAoKSB7CiAgdmFyIGEsCiAgICAgIGIsCiAgICAgIGMsCiAgICAgIGQsCiAgICAgIGUsCiAgICAgIGYgPSBmdW5jdGlvbiBmKGEsIGIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBhLmFwcGx5KGIsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0sCiAgICAgIGcgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uIChhKSB7CiAgICBmb3IgKHZhciBiID0gMCwgYyA9IHRoaXMubGVuZ3RoOyBjID4gYjsgYisrKSB7CiAgICAgIGlmIChiIGluIHRoaXMgJiYgdGhpc1tiXSA9PT0gYSkgcmV0dXJuIGI7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH07CgogIGIgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBhKCkge30KCiAgICByZXR1cm4gYS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgdmFyIGMsIGQ7CgogICAgICBmb3IgKGMgaW4gYikgewogICAgICAgIGQgPSBiW2NdLCBudWxsID09IGFbY10gJiYgKGFbY10gPSBkKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9LCBhLnByb3RvdHlwZS5pc01vYmlsZSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QoYSk7CiAgICB9LCBhLnByb3RvdHlwZS5jcmVhdGVFdmVudCA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CiAgICAgIHZhciBlOwogICAgICByZXR1cm4gbnVsbCA9PSBiICYmIChiID0gITEpLCBudWxsID09IGMgJiYgKGMgPSAhMSksIG51bGwgPT0gZCAmJiAoZCA9IG51bGwpLCBudWxsICE9IGRvY3VtZW50LmNyZWF0ZUV2ZW50ID8gKGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgiQ3VzdG9tRXZlbnQiKSwgZS5pbml0Q3VzdG9tRXZlbnQoYSwgYiwgYywgZCkpIDogbnVsbCAhPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCA/IChlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKSwgZS5ldmVudFR5cGUgPSBhKSA6IGUuZXZlbnROYW1lID0gYSwgZTsKICAgIH0sIGEucHJvdG90eXBlLmVtaXRFdmVudCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgIHJldHVybiBudWxsICE9IGEuZGlzcGF0Y2hFdmVudCA/IGEuZGlzcGF0Y2hFdmVudChiKSA6IGIgaW4gKG51bGwgIT0gYSkgPyBhW2JdKCkgOiAib24iICsgYiBpbiAobnVsbCAhPSBhKSA/IGFbIm9uIiArIGJdKCkgOiB2b2lkIDA7CiAgICB9LCBhLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgICAgIHJldHVybiBudWxsICE9IGEuYWRkRXZlbnRMaXN0ZW5lciA/IGEuYWRkRXZlbnRMaXN0ZW5lcihiLCBjLCAhMSkgOiBudWxsICE9IGEuYXR0YWNoRXZlbnQgPyBhLmF0dGFjaEV2ZW50KCJvbiIgKyBiLCBjKSA6IGFbYl0gPSBjOwogICAgfSwgYS5wcm90b3R5cGUucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICByZXR1cm4gbnVsbCAhPSBhLnJlbW92ZUV2ZW50TGlzdGVuZXIgPyBhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYiwgYywgITEpIDogbnVsbCAhPSBhLmRldGFjaEV2ZW50ID8gYS5kZXRhY2hFdmVudCgib24iICsgYiwgYykgOiBkZWxldGUgYVtiXTsKICAgIH0sIGEucHJvdG90eXBlLmlubmVySGVpZ2h0ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gImlubmVySGVpZ2h0IiBpbiB3aW5kb3cgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwogICAgfSwgYTsKICB9KCksIGMgPSB0aGlzLldlYWtNYXAgfHwgdGhpcy5Nb3pXZWFrTWFwIHx8IChjID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gYSgpIHsKICAgICAgdGhpcy5rZXlzID0gW10sIHRoaXMudmFsdWVzID0gW107CiAgICB9CgogICAgcmV0dXJuIGEucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChhKSB7CiAgICAgIHZhciBiLCBjLCBkLCBlLCBmOwoKICAgICAgZm9yIChmID0gdGhpcy5rZXlzLCBiID0gZCA9IDAsIGUgPSBmLmxlbmd0aDsgZSA+IGQ7IGIgPSArK2QpIHsKICAgICAgICBpZiAoYyA9IGZbYl0sIGMgPT09IGEpIHJldHVybiB0aGlzLnZhbHVlc1tiXTsKICAgICAgfQogICAgfSwgYS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgdmFyIGMsIGQsIGUsIGYsIGc7CgogICAgICBmb3IgKGcgPSB0aGlzLmtleXMsIGMgPSBlID0gMCwgZiA9IGcubGVuZ3RoOyBmID4gZTsgYyA9ICsrZSkgewogICAgICAgIGlmIChkID0gZ1tjXSwgZCA9PT0gYSkgcmV0dXJuIHZvaWQgKHRoaXMudmFsdWVzW2NdID0gYik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmtleXMucHVzaChhKSwgdGhpcy52YWx1ZXMucHVzaChiKTsKICAgIH0sIGE7CiAgfSgpKSwgYSA9IHRoaXMuTXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyIHx8IChhID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gYSgpIHsKICAgICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGNvbnNvbGUgJiYgbnVsbCAhPT0gY29uc29sZSAmJiBjb25zb2xlLndhcm4oIk11dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuIiksICJ1bmRlZmluZWQiICE9IHR5cGVvZiBjb25zb2xlICYmIG51bGwgIT09IGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCJXT1cuanMgY2Fubm90IGRldGVjdCBkb20gbXV0YXRpb25zLCBwbGVhc2UgY2FsbCAuc3luYygpIGFmdGVyIGxvYWRpbmcgbmV3IGNvbnRlbnQuIik7CiAgICB9CgogICAgcmV0dXJuIGEubm90U3VwcG9ydGVkID0gITAsIGEucHJvdG90eXBlLm9ic2VydmUgPSBmdW5jdGlvbiAoKSB7fSwgYTsKICB9KCkpLCBkID0gdGhpcy5nZXRDb21wdXRlZFN0eWxlIHx8IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gdGhpcy5nZXRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24gKGIpIHsKICAgICAgdmFyIGM7CiAgICAgIHJldHVybiAiZmxvYXQiID09PSBiICYmIChiID0gInN0eWxlRmxvYXQiKSwgZS50ZXN0KGIpICYmIGIucmVwbGFjZShlLCBmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBiLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0pLCAobnVsbCAhPSAoYyA9IGEuY3VycmVudFN0eWxlKSA/IGNbYl0gOiB2b2lkIDApIHx8IG51bGw7CiAgICB9LCB0aGlzOwogIH0sIGUgPSAvKFwtKFthLXpdKXsxfSkvZywgdGhpcy5XT1cgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBlKGEpIHsKICAgICAgbnVsbCA9PSBhICYmIChhID0ge30pLCB0aGlzLnNjcm9sbENhbGxiYWNrID0gZih0aGlzLnNjcm9sbENhbGxiYWNrLCB0aGlzKSwgdGhpcy5zY3JvbGxIYW5kbGVyID0gZih0aGlzLnNjcm9sbEhhbmRsZXIsIHRoaXMpLCB0aGlzLnJlc2V0QW5pbWF0aW9uID0gZih0aGlzLnJlc2V0QW5pbWF0aW9uLCB0aGlzKSwgdGhpcy5zdGFydCA9IGYodGhpcy5zdGFydCwgdGhpcyksIHRoaXMuc2Nyb2xsZWQgPSAhMCwgdGhpcy5jb25maWcgPSB0aGlzLnV0aWwoKS5leHRlbmQoYSwgdGhpcy5kZWZhdWx0cyksIG51bGwgIT0gYS5zY3JvbGxDb250YWluZXIgJiYgKHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYS5zY3JvbGxDb250YWluZXIpKSwgdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUgPSBuZXcgYygpLCB0aGlzLndvd0V2ZW50ID0gdGhpcy51dGlsKCkuY3JlYXRlRXZlbnQodGhpcy5jb25maWcuYm94Q2xhc3MpOwogICAgfQoKICAgIHJldHVybiBlLnByb3RvdHlwZS5kZWZhdWx0cyA9IHsKICAgICAgYm94Q2xhc3M6ICJ3b3ciLAogICAgICBhbmltYXRlQ2xhc3M6ICJhbmltYXRlZCIsCiAgICAgIG9mZnNldDogMCwKICAgICAgbW9iaWxlOiAhMCwKICAgICAgbGl2ZTogITAsCiAgICAgIGNhbGxiYWNrOiBudWxsLAogICAgICBzY3JvbGxDb250YWluZXI6IG51bGwKICAgIH0sIGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhOwogICAgICByZXR1cm4gdGhpcy5lbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgImludGVyYWN0aXZlIiA9PT0gKGEgPSBkb2N1bWVudC5yZWFkeVN0YXRlKSB8fCAiY29tcGxldGUiID09PSBhID8gdGhpcy5zdGFydCgpIDogdGhpcy51dGlsKCkuYWRkRXZlbnQoZG9jdW1lbnQsICJET01Db250ZW50TG9hZGVkIiwgdGhpcy5zdGFydCksIHRoaXMuZmluaXNoZWQgPSBbXTsKICAgIH0sIGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYiwgYywgZCwgZTsKICAgICAgaWYgKHRoaXMuc3RvcHBlZCA9ICExLCB0aGlzLmJveGVzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBhLCBjLCBkLCBlOwoKICAgICAgICBmb3IgKGQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLiIgKyB0aGlzLmNvbmZpZy5ib3hDbGFzcyksIGUgPSBbXSwgYSA9IDAsIGMgPSBkLmxlbmd0aDsgYyA+IGE7IGErKykgewogICAgICAgICAgYiA9IGRbYV0sIGUucHVzaChiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlOwogICAgICB9LmNhbGwodGhpcyksIHRoaXMuYWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBhLCBjLCBkLCBlOwoKICAgICAgICBmb3IgKGQgPSB0aGlzLmJveGVzLCBlID0gW10sIGEgPSAwLCBjID0gZC5sZW5ndGg7IGMgPiBhOyBhKyspIHsKICAgICAgICAgIGIgPSBkW2FdLCBlLnB1c2goYik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZTsKICAgICAgfS5jYWxsKHRoaXMpLCB0aGlzLmJveGVzLmxlbmd0aCkgaWYgKHRoaXMuZGlzYWJsZWQoKSkgdGhpcy5yZXNldFN0eWxlKCk7ZWxzZSBmb3IgKGUgPSB0aGlzLmJveGVzLCBjID0gMCwgZCA9IGUubGVuZ3RoOyBkID4gYzsgYysrKSB7CiAgICAgICAgYiA9IGVbY10sIHRoaXMuYXBwbHlTdHlsZShiLCAhMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQoKSB8fCAodGhpcy51dGlsKCkuYWRkRXZlbnQodGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyIHx8IHdpbmRvdywgInNjcm9sbCIsIHRoaXMuc2Nyb2xsSGFuZGxlciksIHRoaXMudXRpbCgpLmFkZEV2ZW50KHdpbmRvdywgInJlc2l6ZSIsIHRoaXMuc2Nyb2xsSGFuZGxlciksIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnNjcm9sbENhbGxiYWNrLCA1MCkpLCB0aGlzLmNvbmZpZy5saXZlID8gbmV3IGEoZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIpIHsKICAgICAgICAgIHZhciBjLCBkLCBlLCBmLCBnOwoKICAgICAgICAgIGZvciAoZyA9IFtdLCBjID0gMCwgZCA9IGIubGVuZ3RoOyBkID4gYzsgYysrKSB7CiAgICAgICAgICAgIGYgPSBiW2NdLCBnLnB1c2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBhLCBiLCBjLCBkOwoKICAgICAgICAgICAgICBmb3IgKGMgPSBmLmFkZGVkTm9kZXMgfHwgW10sIGQgPSBbXSwgYSA9IDAsIGIgPSBjLmxlbmd0aDsgYiA+IGE7IGErKykgewogICAgICAgICAgICAgICAgZSA9IGNbYV0sIGQucHVzaCh0aGlzLmRvU3luYyhlKSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gZDsKICAgICAgICAgICAgfS5jYWxsKGEpKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZzsKICAgICAgICB9OwogICAgICB9KHRoaXMpKS5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsKICAgICAgICBjaGlsZExpc3Q6ICEwLAogICAgICAgIHN1YnRyZWU6ICEwCiAgICAgIH0pIDogdm9pZCAwOwogICAgfSwgZS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RvcHBlZCA9ICEwLCB0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIgfHwgd2luZG93LCAic2Nyb2xsIiwgdGhpcy5zY3JvbGxIYW5kbGVyKSwgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAicmVzaXplIiwgdGhpcy5zY3JvbGxIYW5kbGVyKSwgbnVsbCAhPSB0aGlzLmludGVydmFsID8gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSA6IHZvaWQgMDsKICAgIH0sIGUucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBhLm5vdFN1cHBvcnRlZCA/IHRoaXMuZG9TeW5jKHRoaXMuZWxlbWVudCkgOiB2b2lkIDA7CiAgICB9LCBlLnByb3RvdHlwZS5kb1N5bmMgPSBmdW5jdGlvbiAoYSkgewogICAgICB2YXIgYiwgYywgZCwgZSwgZjsKCiAgICAgIGlmIChudWxsID09IGEgJiYgKGEgPSB0aGlzLmVsZW1lbnQpLCAxID09PSBhLm5vZGVUeXBlKSB7CiAgICAgICAgZm9yIChhID0gYS5wYXJlbnROb2RlIHx8IGEsIGUgPSBhLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iICsgdGhpcy5jb25maWcuYm94Q2xhc3MpLCBmID0gW10sIGMgPSAwLCBkID0gZS5sZW5ndGg7IGQgPiBjOyBjKyspIHsKICAgICAgICAgIGIgPSBlW2NdLCBnLmNhbGwodGhpcy5hbGwsIGIpIDwgMCA/ICh0aGlzLmJveGVzLnB1c2goYiksIHRoaXMuYWxsLnB1c2goYiksIHRoaXMuc3RvcHBlZCB8fCB0aGlzLmRpc2FibGVkKCkgPyB0aGlzLnJlc2V0U3R5bGUoKSA6IHRoaXMuYXBwbHlTdHlsZShiLCAhMCksIGYucHVzaCh0aGlzLnNjcm9sbGVkID0gITApKSA6IGYucHVzaCh2b2lkIDApOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGY7CiAgICAgIH0KICAgIH0sIGUucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gdGhpcy5hcHBseVN0eWxlKGEpLCBhLmNsYXNzTmFtZSA9IGEuY2xhc3NOYW1lICsgIiAiICsgdGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzLCBudWxsICE9IHRoaXMuY29uZmlnLmNhbGxiYWNrICYmIHRoaXMuY29uZmlnLmNhbGxiYWNrKGEpLCB0aGlzLnV0aWwoKS5lbWl0RXZlbnQoYSwgdGhpcy53b3dFdmVudCksIHRoaXMudXRpbCgpLmFkZEV2ZW50KGEsICJhbmltYXRpb25lbmQiLCB0aGlzLnJlc2V0QW5pbWF0aW9uKSwgdGhpcy51dGlsKCkuYWRkRXZlbnQoYSwgIm9hbmltYXRpb25lbmQiLCB0aGlzLnJlc2V0QW5pbWF0aW9uKSwgdGhpcy51dGlsKCkuYWRkRXZlbnQoYSwgIndlYmtpdEFuaW1hdGlvbkVuZCIsIHRoaXMucmVzZXRBbmltYXRpb24pLCB0aGlzLnV0aWwoKS5hZGRFdmVudChhLCAiTVNBbmltYXRpb25FbmQiLCB0aGlzLnJlc2V0QW5pbWF0aW9uKSwgYTsKICAgIH0sIGUucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbiAoYSwgYikgewogICAgICB2YXIgYywgZCwgZTsKICAgICAgcmV0dXJuIGQgPSBhLmdldEF0dHJpYnV0ZSgiZGF0YS13b3ctZHVyYXRpb24iKSwgYyA9IGEuZ2V0QXR0cmlidXRlKCJkYXRhLXdvdy1kZWxheSIpLCBlID0gYS5nZXRBdHRyaWJ1dGUoImRhdGEtd293LWl0ZXJhdGlvbiIpLCB0aGlzLmFuaW1hdGUoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGYuY3VzdG9tU3R5bGUoYSwgYiwgZCwgYywgZSk7CiAgICAgICAgfTsKICAgICAgfSh0aGlzKSk7CiAgICB9LCBlLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gInJlcXVlc3RBbmltYXRpb25GcmFtZSIgaW4gd2luZG93ID8gZnVuY3Rpb24gKGEpIHsKICAgICAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShhKTsKICAgICAgfSA6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuIGEoKTsKICAgICAgfTsKICAgIH0oKSwgZS5wcm90b3R5cGUucmVzZXRTdHlsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGEsIGIsIGMsIGQsIGU7CgogICAgICBmb3IgKGQgPSB0aGlzLmJveGVzLCBlID0gW10sIGIgPSAwLCBjID0gZC5sZW5ndGg7IGMgPiBiOyBiKyspIHsKICAgICAgICBhID0gZFtiXSwgZS5wdXNoKGEuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIik7CiAgICAgIH0KCiAgICAgIHJldHVybiBlOwogICAgfSwgZS5wcm90b3R5cGUucmVzZXRBbmltYXRpb24gPSBmdW5jdGlvbiAoYSkgewogICAgICB2YXIgYjsKICAgICAgcmV0dXJuIGEudHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImFuaW1hdGlvbmVuZCIpID49IDAgPyAoYiA9IGEudGFyZ2V0IHx8IGEuc3JjRWxlbWVudCwgYi5jbGFzc05hbWUgPSBiLmNsYXNzTmFtZS5yZXBsYWNlKHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcywgIiIpLnRyaW0oKSkgOiB2b2lkIDA7CiAgICB9LCBlLnByb3RvdHlwZS5jdXN0b21TdHlsZSA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CiAgICAgIHJldHVybiBiICYmIHRoaXMuY2FjaGVBbmltYXRpb25OYW1lKGEpLCBhLnN0eWxlLnZpc2liaWxpdHkgPSBiID8gImhpZGRlbiIgOiAidmlzaWJsZSIsIGMgJiYgdGhpcy52ZW5kb3JTZXQoYS5zdHlsZSwgewogICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiBjCiAgICAgIH0pLCBkICYmIHRoaXMudmVuZG9yU2V0KGEuc3R5bGUsIHsKICAgICAgICBhbmltYXRpb25EZWxheTogZAogICAgICB9KSwgZSAmJiB0aGlzLnZlbmRvclNldChhLnN0eWxlLCB7CiAgICAgICAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IGUKICAgICAgfSksIHRoaXMudmVuZG9yU2V0KGEuc3R5bGUsIHsKICAgICAgICBhbmltYXRpb25OYW1lOiBiID8gIm5vbmUiIDogdGhpcy5jYWNoZWRBbmltYXRpb25OYW1lKGEpCiAgICAgIH0pLCBhOwogICAgfSwgZS5wcm90b3R5cGUudmVuZG9ycyA9IFsibW96IiwgIndlYmtpdCJdLCBlLnByb3RvdHlwZS52ZW5kb3JTZXQgPSBmdW5jdGlvbiAoYSwgYikgewogICAgICB2YXIgYywgZCwgZSwgZjsKICAgICAgZCA9IFtdOwoKICAgICAgZm9yIChjIGluIGIpIHsKICAgICAgICBlID0gYltjXSwgYVsiIiArIGNdID0gZSwgZC5wdXNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBiLCBkLCBnLCBoOwoKICAgICAgICAgIGZvciAoZyA9IHRoaXMudmVuZG9ycywgaCA9IFtdLCBiID0gMCwgZCA9IGcubGVuZ3RoOyBkID4gYjsgYisrKSB7CiAgICAgICAgICAgIGYgPSBnW2JdLCBoLnB1c2goYVsiIiArIGYgKyBjLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgYy5zdWJzdHIoMSldID0gZSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGg7CiAgICAgICAgfS5jYWxsKHRoaXMpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGQ7CiAgICB9LCBlLnByb3RvdHlwZS52ZW5kb3JDU1MgPSBmdW5jdGlvbiAoYSwgYikgewogICAgICB2YXIgYywgZSwgZiwgZywgaCwgaTsKCiAgICAgIGZvciAoaCA9IGQoYSksIGcgPSBoLmdldFByb3BlcnR5Q1NTVmFsdWUoYiksIGYgPSB0aGlzLnZlbmRvcnMsIGMgPSAwLCBlID0gZi5sZW5ndGg7IGUgPiBjOyBjKyspIHsKICAgICAgICBpID0gZltjXSwgZyA9IGcgfHwgaC5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCItIiArIGkgKyAiLSIgKyBiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGc7CiAgICB9LCBlLnByb3RvdHlwZS5hbmltYXRpb25OYW1lID0gZnVuY3Rpb24gKGEpIHsKICAgICAgdmFyIGI7CgogICAgICB0cnkgewogICAgICAgIGIgPSB0aGlzLnZlbmRvckNTUyhhLCAiYW5pbWF0aW9uLW5hbWUiKS5jc3NUZXh0OwogICAgICB9IGNhdGNoIChjKSB7CiAgICAgICAgYiA9IGQoYSkuZ2V0UHJvcGVydHlWYWx1ZSgiYW5pbWF0aW9uLW5hbWUiKTsKICAgICAgfQoKICAgICAgcmV0dXJuICJub25lIiA9PT0gYiA/ICIiIDogYjsKICAgIH0sIGUucHJvdG90eXBlLmNhY2hlQW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uIChhKSB7CiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYSwgdGhpcy5hbmltYXRpb25OYW1lKGEpKTsKICAgIH0sIGUucHJvdG90eXBlLmNhY2hlZEFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuZ2V0KGEpOwogICAgfSwgZS5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsZWQgPSAhMDsKICAgIH0sIGUucHJvdG90eXBlLnNjcm9sbENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYTsKICAgICAgcmV0dXJuICF0aGlzLnNjcm9sbGVkIHx8ICh0aGlzLnNjcm9sbGVkID0gITEsIHRoaXMuYm94ZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGIsIGMsIGQsIGU7CgogICAgICAgIGZvciAoZCA9IHRoaXMuYm94ZXMsIGUgPSBbXSwgYiA9IDAsIGMgPSBkLmxlbmd0aDsgYyA+IGI7IGIrKykgewogICAgICAgICAgYSA9IGRbYl0sIGEgJiYgKHRoaXMuaXNWaXNpYmxlKGEpID8gdGhpcy5zaG93KGEpIDogZS5wdXNoKGEpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBlOwogICAgICB9LmNhbGwodGhpcyksIHRoaXMuYm94ZXMubGVuZ3RoIHx8IHRoaXMuY29uZmlnLmxpdmUpID8gdm9pZCAwIDogdGhpcy5zdG9wKCk7CiAgICB9LCBlLnByb3RvdHlwZS5vZmZzZXRUb3AgPSBmdW5jdGlvbiAoYSkgewogICAgICBmb3IgKHZhciBiOyB2b2lkIDAgPT09IGEub2Zmc2V0VG9wOykgewogICAgICAgIGEgPSBhLnBhcmVudE5vZGU7CiAgICAgIH0KCiAgICAgIGZvciAoYiA9IGEub2Zmc2V0VG9wOyBhID0gYS5vZmZzZXRQYXJlbnQ7KSB7CiAgICAgICAgYiArPSBhLm9mZnNldFRvcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGI7CiAgICB9LCBlLnByb3RvdHlwZS5pc1Zpc2libGUgPSBmdW5jdGlvbiAoYSkgewogICAgICB2YXIgYiwgYywgZCwgZSwgZjsKICAgICAgcmV0dXJuIGMgPSBhLmdldEF0dHJpYnV0ZSgiZGF0YS13b3ctb2Zmc2V0IikgfHwgdGhpcy5jb25maWcub2Zmc2V0LCBmID0gdGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyICYmIHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgfHwgd2luZG93LnBhZ2VZT2Zmc2V0LCBlID0gZiArIE1hdGgubWluKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsIHRoaXMudXRpbCgpLmlubmVySGVpZ2h0KCkpIC0gYywgZCA9IHRoaXMub2Zmc2V0VG9wKGEpLCBiID0gZCArIGEuY2xpZW50SGVpZ2h0LCBlID49IGQgJiYgYiA+PSBmOwogICAgfSwgZS5wcm90b3R5cGUudXRpbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5fdXRpbCA/IHRoaXMuX3V0aWwgOiB0aGlzLl91dGlsID0gbmV3IGIoKTsKICAgIH0sIGUucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gIXRoaXMuY29uZmlnLm1vYmlsZSAmJiB0aGlzLnV0aWwoKS5pc01vYmlsZShuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgIH0sIGU7CiAgfSgpOwp9KS5jYWxsKHRoaXMpOwooZnVuY3Rpb24gKCkgewogIHZhciBDT1VOVF9GUkFNRVJBVEUsCiAgICAgIENPVU5UX01TX1BFUl9GUkFNRSwKICAgICAgRElHSVRfRk9STUFULAogICAgICBESUdJVF9IVE1MLAogICAgICBESUdJVF9TUEVFREJPT1NULAogICAgICBEVVJBVElPTiwKICAgICAgRk9STUFUX01BUktfSFRNTCwKICAgICAgRk9STUFUX1BBUlNFUiwKICAgICAgRlJBTUVSQVRFLAogICAgICBGUkFNRVNfUEVSX1ZBTFVFLAogICAgICBNU19QRVJfRlJBTUUsCiAgICAgIE11dGF0aW9uT2JzZXJ2ZXIsCiAgICAgIE9kb21ldGVyLAogICAgICBSSUJCT05fSFRNTCwKICAgICAgVFJBTlNJVElPTl9FTkRfRVZFTlRTLAogICAgICBUUkFOU0lUSU9OX1NVUFBPUlQsCiAgICAgIFZBTFVFX0hUTUwsCiAgICAgIGFkZENsYXNzLAogICAgICBjcmVhdGVGcm9tSFRNTCwKICAgICAgZnJhY3Rpb25hbFBhcnQsCiAgICAgIG5vdywKICAgICAgcmVtb3ZlQ2xhc3MsCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSwKICAgICAgcm91bmQsCiAgICAgIHRyYW5zaXRpb25DaGVja1N0eWxlcywKICAgICAgdHJpZ2dlciwKICAgICAgdHJ1bmNhdGUsCiAgICAgIHdyYXBKUXVlcnksCiAgICAgIF9qUXVlcnlXcmFwcGVkLAogICAgICBfb2xkLAogICAgICBfcmVmLAogICAgICBfcmVmMSwKICAgICAgX19zbGljZSA9IFtdLnNsaWNlOwoKICBWQUxVRV9IVE1MID0gJzxzcGFuIGNsYXNzPSJvZG9tZXRlci12YWx1ZSI+PC9zcGFuPic7CiAgUklCQk9OX0hUTUwgPSAnPHNwYW4gY2xhc3M9Im9kb21ldGVyLXJpYmJvbiI+PHNwYW4gY2xhc3M9Im9kb21ldGVyLXJpYmJvbi1pbm5lciI+JyArIFZBTFVFX0hUTUwgKyAnPC9zcGFuPjwvc3Bhbj4nOwogIERJR0lUX0hUTUwgPSAnPHNwYW4gY2xhc3M9Im9kb21ldGVyLWRpZ2l0Ij48c3BhbiBjbGFzcz0ib2RvbWV0ZXItZGlnaXQtc3BhY2VyIj44PC9zcGFuPjxzcGFuIGNsYXNzPSJvZG9tZXRlci1kaWdpdC1pbm5lciI+JyArIFJJQkJPTl9IVE1MICsgJzwvc3Bhbj48L3NwYW4+JzsKICBGT1JNQVRfTUFSS19IVE1MID0gJzxzcGFuIGNsYXNzPSJvZG9tZXRlci1mb3JtYXR0aW5nLW1hcmsiPjwvc3Bhbj4nOwogIERJR0lUX0ZPUk1BVCA9ICcoLGRkZCkuZGQnOwogIEZPUk1BVF9QQVJTRVIgPSAvXlwoPyhbXildKilcKT8oPzooLikoZCspKT8kLzsKICBGUkFNRVJBVEUgPSAzMDsKICBEVVJBVElPTiA9IDIwMDA7CiAgQ09VTlRfRlJBTUVSQVRFID0gMjA7CiAgRlJBTUVTX1BFUl9WQUxVRSA9IDI7CiAgRElHSVRfU1BFRURCT09TVCA9IC41OwogIE1TX1BFUl9GUkFNRSA9IDEwMDAgLyBGUkFNRVJBVEU7CiAgQ09VTlRfTVNfUEVSX0ZSQU1FID0gMTAwMCAvIENPVU5UX0ZSQU1FUkFURTsKICBUUkFOU0lUSU9OX0VORF9FVkVOVFMgPSAndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kIE1TVHJhbnNpdGlvbkVuZCc7CiAgdHJhbnNpdGlvbkNoZWNrU3R5bGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jykuc3R5bGU7CiAgVFJBTlNJVElPTl9TVVBQT1JUID0gdHJhbnNpdGlvbkNoZWNrU3R5bGVzLnRyYW5zaXRpb24gIT0gbnVsbCB8fCB0cmFuc2l0aW9uQ2hlY2tTdHlsZXMud2Via2l0VHJhbnNpdGlvbiAhPSBudWxsIHx8IHRyYW5zaXRpb25DaGVja1N0eWxlcy5tb3pUcmFuc2l0aW9uICE9IG51bGwgfHwgdHJhbnNpdGlvbkNoZWNrU3R5bGVzLm9UcmFuc2l0aW9uICE9IG51bGw7CiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lOwogIE11dGF0aW9uT2JzZXJ2ZXIgPSB3aW5kb3cuTXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fCB3aW5kb3cuTW96TXV0YXRpb25PYnNlcnZlcjsKCiAgY3JlYXRlRnJvbUhUTUwgPSBmdW5jdGlvbiBjcmVhdGVGcm9tSFRNTChodG1sKSB7CiAgICB2YXIgZWw7CiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgZWwuaW5uZXJIVE1MID0gaHRtbDsKICAgIHJldHVybiBlbC5jaGlsZHJlblswXTsKICB9OwoKICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBuYW1lKSB7CiAgICByZXR1cm4gZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZS5zcGxpdCgnICcpLmpvaW4oJ3wnKSArICIoIHwkKSIsICdnaScpLCAnICcpOwogIH07CgogIGFkZENsYXNzID0gZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIG5hbWUpIHsKICAgIHJlbW92ZUNsYXNzKGVsLCBuYW1lKTsKICAgIHJldHVybiBlbC5jbGFzc05hbWUgKz0gIiAiICsgbmFtZTsKICB9OwoKICB0cmlnZ2VyID0gZnVuY3Rpb24gdHJpZ2dlcihlbCwgbmFtZSkgewogICAgdmFyIGV2dDsKCiAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQgIT0gbnVsbCkgewogICAgICBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpOwogICAgICBldnQuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpOwogICAgICByZXR1cm4gZWwuZGlzcGF0Y2hFdmVudChldnQpOwogICAgfQogIH07CgogIG5vdyA9IGZ1bmN0aW9uIG5vdygpIHsKICAgIHZhciBfcmVmLCBfcmVmMTsKCiAgICByZXR1cm4gKF9yZWYgPSAoX3JlZjEgPSB3aW5kb3cucGVyZm9ybWFuY2UpICE9IG51bGwgPyB0eXBlb2YgX3JlZjEubm93ID09PSAiZnVuY3Rpb24iID8gX3JlZjEubm93KCkgOiB2b2lkIDAgOiB2b2lkIDApICE9IG51bGwgPyBfcmVmIDogK25ldyBEYXRlKCk7CiAgfTsKCiAgcm91bmQgPSBmdW5jdGlvbiByb3VuZCh2YWwsIHByZWNpc2lvbikgewogICAgaWYgKHByZWNpc2lvbiA9PSBudWxsKSB7CiAgICAgIHByZWNpc2lvbiA9IDA7CiAgICB9CgogICAgaWYgKCFwcmVjaXNpb24pIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsKTsKICAgIH0KCiAgICB2YWwgKj0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7CiAgICB2YWwgKz0gMC41OwogICAgdmFsID0gTWF0aC5mbG9vcih2YWwpOwogICAgcmV0dXJuIHZhbCAvPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTsKICB9OwoKICB0cnVuY2F0ZSA9IGZ1bmN0aW9uIHRydW5jYXRlKHZhbCkgewogICAgaWYgKHZhbCA8IDApIHsKICAgICAgcmV0dXJuIE1hdGguY2VpbCh2YWwpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIE1hdGguZmxvb3IodmFsKTsKICAgIH0KICB9OwoKICBmcmFjdGlvbmFsUGFydCA9IGZ1bmN0aW9uIGZyYWN0aW9uYWxQYXJ0KHZhbCkgewogICAgcmV0dXJuIHZhbCAtIHJvdW5kKHZhbCk7CiAgfTsKCiAgX2pRdWVyeVdyYXBwZWQgPSBmYWxzZTsKICAod3JhcEpRdWVyeSA9IGZ1bmN0aW9uIHdyYXBKUXVlcnkoKSB7CiAgICB2YXIgcHJvcGVydHksIF9pLCBfbGVuLCBfcmVmLCBfcmVzdWx0czsKCiAgICBpZiAoX2pRdWVyeVdyYXBwZWQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh3aW5kb3cualF1ZXJ5ICE9IG51bGwpIHsKICAgICAgX2pRdWVyeVdyYXBwZWQgPSB0cnVlOwogICAgICBfcmVmID0gWydodG1sJywgJ3RleHQnXTsKICAgICAgX3Jlc3VsdHMgPSBbXTsKCiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIHByb3BlcnR5ID0gX3JlZltfaV07CgogICAgICAgIF9yZXN1bHRzLnB1c2goZnVuY3Rpb24gKHByb3BlcnR5KSB7CiAgICAgICAgICB2YXIgb2xkOwogICAgICAgICAgb2xkID0gd2luZG93LmpRdWVyeS5mbltwcm9wZXJ0eV07CiAgICAgICAgICByZXR1cm4gd2luZG93LmpRdWVyeS5mbltwcm9wZXJ0eV0gPSBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgICAgIHZhciBfcmVmMTsKCiAgICAgICAgICAgIGlmICh2YWwgPT0gbnVsbCB8fCAoKF9yZWYxID0gdGhpc1swXSkgIT0gbnVsbCA/IF9yZWYxLm9kb21ldGVyIDogdm9pZCAwKSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9sZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gdGhpc1swXS5vZG9tZXRlci51cGRhdGUodmFsKTsKICAgICAgICAgIH07CiAgICAgICAgfShwcm9wZXJ0eSkpOwogICAgICB9CgogICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICB9CiAgfSkoKTsKICBzZXRUaW1lb3V0KHdyYXBKUXVlcnksIDApOwoKICBPZG9tZXRlciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIE9kb21ldGVyKG9wdGlvbnMpIHsKICAgICAgdmFyIGUsCiAgICAgICAgICBrLAogICAgICAgICAgcHJvcGVydHksCiAgICAgICAgICB2LAogICAgICAgICAgX2Jhc2UsCiAgICAgICAgICBfaSwKICAgICAgICAgIF9sZW4sCiAgICAgICAgICBfcmVmLAogICAgICAgICAgX3JlZjEsCiAgICAgICAgICBfcmVmMiwKICAgICAgICAgIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgIHRoaXMuZWwgPSB0aGlzLm9wdGlvbnMuZWw7CgogICAgICBpZiAodGhpcy5lbC5vZG9tZXRlciAhPSBudWxsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZWwub2RvbWV0ZXI7CiAgICAgIH0KCiAgICAgIHRoaXMuZWwub2RvbWV0ZXIgPSB0aGlzOwogICAgICBfcmVmID0gT2RvbWV0ZXIub3B0aW9uczsKCiAgICAgIGZvciAoayBpbiBfcmVmKSB7CiAgICAgICAgdiA9IF9yZWZba107CgogICAgICAgIGlmICh0aGlzLm9wdGlvbnNba10gPT0gbnVsbCkgewogICAgICAgICAgdGhpcy5vcHRpb25zW2tdID0gdjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICgoX2Jhc2UgPSB0aGlzLm9wdGlvbnMpLmR1cmF0aW9uID09IG51bGwpIHsKICAgICAgICBfYmFzZS5kdXJhdGlvbiA9IERVUkFUSU9OOwogICAgICB9CgogICAgICB0aGlzLk1BWF9WQUxVRVMgPSB0aGlzLm9wdGlvbnMuZHVyYXRpb24gLyBNU19QRVJfRlJBTUUgLyBGUkFNRVNfUEVSX1ZBTFVFIHwgMDsKICAgICAgdGhpcy5yZXNldEZvcm1hdCgpOwogICAgICB0aGlzLnZhbHVlID0gdGhpcy5jbGVhblZhbHVlKChfcmVmMSA9IHRoaXMub3B0aW9ucy52YWx1ZSkgIT0gbnVsbCA/IF9yZWYxIDogJycpOwogICAgICB0aGlzLnJlbmRlckluc2lkZSgpOwogICAgICB0aGlzLnJlbmRlcigpOwoKICAgICAgdHJ5IHsKICAgICAgICBfcmVmMiA9IFsnaW5uZXJIVE1MJywgJ2lubmVyVGV4dCcsICd0ZXh0Q29udGVudCddOwoKICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYyLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgICBwcm9wZXJ0eSA9IF9yZWYyW19pXTsKCiAgICAgICAgICBpZiAodGhpcy5lbFtwcm9wZXJ0eV0gIT0gbnVsbCkgewogICAgICAgICAgICAoZnVuY3Rpb24gKHByb3BlcnR5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcy5lbCwgcHJvcGVydHksIHsKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjM7CgogICAgICAgICAgICAgICAgICBpZiAocHJvcGVydHkgPT09ICdpbm5lckhUTUwnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmluc2lkZS5vdXRlckhUTUw7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChfcmVmMyA9IF90aGlzLmluc2lkZS5pbm5lclRleHQpICE9IG51bGwgPyBfcmVmMyA6IF90aGlzLmluc2lkZS50ZXh0Q29udGVudDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudXBkYXRlKHZhbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pKHByb3BlcnR5KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKF9lcnJvcikgewogICAgICAgIGUgPSBfZXJyb3I7CiAgICAgICAgdGhpcy53YXRjaEZvck11dGF0aW9ucygpOwogICAgICB9CgogICAgICB0aGlzOwogICAgfQoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5yZW5kZXJJbnNpZGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuaW5zaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIHRoaXMuaW5zaWRlLmNsYXNzTmFtZSA9ICdvZG9tZXRlci1pbnNpZGUnOwogICAgICB0aGlzLmVsLmlubmVySFRNTCA9ICcnOwogICAgICByZXR1cm4gdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLmluc2lkZSk7CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS53YXRjaEZvck11dGF0aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUsCiAgICAgICAgICBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoTXV0YXRpb25PYnNlcnZlciA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIGlmICh0aGlzLm9ic2VydmVyID09IG51bGwpIHsKICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7CiAgICAgICAgICAgIHZhciBuZXdWYWw7CiAgICAgICAgICAgIG5ld1ZhbCA9IF90aGlzLmVsLmlubmVyVGV4dDsKCiAgICAgICAgICAgIF90aGlzLnJlbmRlckluc2lkZSgpOwoKICAgICAgICAgICAgX3RoaXMucmVuZGVyKF90aGlzLnZhbHVlKTsKCiAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGUobmV3VmFsKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy53YXRjaE11dGF0aW9ucyA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRXYXRjaGluZ011dGF0aW9ucygpOwogICAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgICBlID0gX2Vycm9yOwogICAgICB9CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5zdGFydFdhdGNoaW5nTXV0YXRpb25zID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy53YXRjaE11dGF0aW9ucykgewogICAgICAgIHJldHVybiB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5lbCwgewogICAgICAgICAgY2hpbGRMaXN0OiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH07CgogICAgT2RvbWV0ZXIucHJvdG90eXBlLnN0b3BXYXRjaGluZ011dGF0aW9ucyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWY7CgogICAgICByZXR1cm4gKF9yZWYgPSB0aGlzLm9ic2VydmVyKSAhPSBudWxsID8gX3JlZi5kaXNjb25uZWN0KCkgOiB2b2lkIDA7CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5jbGVhblZhbHVlID0gZnVuY3Rpb24gKHZhbCkgewogICAgICB2YXIgX3JlZjsKCiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykgewogICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKChfcmVmID0gdGhpcy5mb3JtYXQucmFkaXgpICE9IG51bGwgPyBfcmVmIDogJy4nLCAnPHJhZGl4PicpOwogICAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKC9bLixdL2csICcnKTsKICAgICAgICB2YWwgPSB2YWwucmVwbGFjZSgnPHJhZGl4PicsICcuJyk7CiAgICAgICAgdmFsID0gcGFyc2VGbG9hdCh2YWwsIDEwKSB8fCAwOwogICAgICB9CgogICAgICByZXR1cm4gcm91bmQodmFsLCB0aGlzLmZvcm1hdC5wcmVjaXNpb24pOwogICAgfTsKCiAgICBPZG9tZXRlci5wcm90b3R5cGUuYmluZFRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBldmVudCwKICAgICAgICAgIHJlbmRlckVucXVldWVkLAogICAgICAgICAgX2ksCiAgICAgICAgICBfbGVuLAogICAgICAgICAgX3JlZiwKICAgICAgICAgIF9yZXN1bHRzLAogICAgICAgICAgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbkVuZEJvdW5kKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnRyYW5zaXRpb25FbmRCb3VuZCA9IHRydWU7CiAgICAgIHJlbmRlckVucXVldWVkID0gZmFsc2U7CiAgICAgIF9yZWYgPSBUUkFOU0lUSU9OX0VORF9FVkVOVFMuc3BsaXQoJyAnKTsKICAgICAgX3Jlc3VsdHMgPSBbXTsKCiAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICAgIGV2ZW50ID0gX3JlZltfaV07CgogICAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAocmVuZGVyRW5xdWV1ZWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgcmVuZGVyRW5xdWV1ZWQgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLnJlbmRlcigpOwoKICAgICAgICAgICAgcmVuZGVyRW5xdWV1ZWQgPSBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXIoX3RoaXMuZWwsICdvZG9tZXRlcmRvbmUnKTsKICAgICAgICAgIH0sIDApOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSwgZmFsc2UpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgfTsKCiAgICBPZG9tZXRlci5wcm90b3R5cGUucmVzZXRGb3JtYXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBmb3JtYXQsIGZyYWN0aW9uYWwsIHBhcnNlZCwgcHJlY2lzaW9uLCByYWRpeCwgcmVwZWF0aW5nLCBfcmVmLCBfcmVmMTsKCiAgICAgIGZvcm1hdCA9IChfcmVmID0gdGhpcy5vcHRpb25zLmZvcm1hdCkgIT0gbnVsbCA/IF9yZWYgOiBESUdJVF9GT1JNQVQ7CiAgICAgIGZvcm1hdCB8fCAoZm9ybWF0ID0gJ2QnKTsKICAgICAgcGFyc2VkID0gRk9STUFUX1BBUlNFUi5leGVjKGZvcm1hdCk7CgogICAgICBpZiAoIXBhcnNlZCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiT2RvbWV0ZXI6IFVucGFyc2FibGUgZGlnaXQgZm9ybWF0Iik7CiAgICAgIH0KCiAgICAgIF9yZWYxID0gcGFyc2VkLnNsaWNlKDEsIDQpLCByZXBlYXRpbmcgPSBfcmVmMVswXSwgcmFkaXggPSBfcmVmMVsxXSwgZnJhY3Rpb25hbCA9IF9yZWYxWzJdOwogICAgICBwcmVjaXNpb24gPSAoZnJhY3Rpb25hbCAhPSBudWxsID8gZnJhY3Rpb25hbC5sZW5ndGggOiB2b2lkIDApIHx8IDA7CiAgICAgIHJldHVybiB0aGlzLmZvcm1hdCA9IHsKICAgICAgICByZXBlYXRpbmc6IHJlcGVhdGluZywKICAgICAgICByYWRpeDogcmFkaXgsCiAgICAgICAgcHJlY2lzaW9uOiBwcmVjaXNpb24KICAgICAgfTsKICAgIH07CgogICAgT2RvbWV0ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB2YXIgY2xhc3NlcywgY2xzLCBtYXRjaCwgbmV3Q2xhc3NlcywgdGhlbWUsIF9pLCBfbGVuOwoKICAgICAgaWYgKHZhbHVlID09IG51bGwpIHsKICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgIH0KCiAgICAgIHRoaXMuc3RvcFdhdGNoaW5nTXV0YXRpb25zKCk7CiAgICAgIHRoaXMucmVzZXRGb3JtYXQoKTsKICAgICAgdGhpcy5pbnNpZGUuaW5uZXJIVE1MID0gJyc7CiAgICAgIHRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lOwogICAgICBjbGFzc2VzID0gdGhpcy5lbC5jbGFzc05hbWUuc3BsaXQoJyAnKTsKICAgICAgbmV3Q2xhc3NlcyA9IFtdOwoKICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBjbGFzc2VzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgY2xzID0gY2xhc3Nlc1tfaV07CgogICAgICAgIGlmICghY2xzLmxlbmd0aCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBpZiAobWF0Y2ggPSAvXm9kb21ldGVyLXRoZW1lLSguKykkLy5leGVjKGNscykpIHsKICAgICAgICAgIHRoZW1lID0gbWF0Y2hbMV07CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIGlmICgvXm9kb21ldGVyKC18JCkvLnRlc3QoY2xzKSkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBuZXdDbGFzc2VzLnB1c2goY2xzKTsKICAgICAgfQoKICAgICAgbmV3Q2xhc3Nlcy5wdXNoKCdvZG9tZXRlcicpOwoKICAgICAgaWYgKCFUUkFOU0lUSU9OX1NVUFBPUlQpIHsKICAgICAgICBuZXdDbGFzc2VzLnB1c2goJ29kb21ldGVyLW5vLXRyYW5zaXRpb25zJyk7CiAgICAgIH0KCiAgICAgIGlmICh0aGVtZSkgewogICAgICAgIG5ld0NsYXNzZXMucHVzaCgib2RvbWV0ZXItdGhlbWUtIiArIHRoZW1lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXdDbGFzc2VzLnB1c2goIm9kb21ldGVyLWF1dG8tdGhlbWUiKTsKICAgICAgfQoKICAgICAgdGhpcy5lbC5jbGFzc05hbWUgPSBuZXdDbGFzc2VzLmpvaW4oJyAnKTsKICAgICAgdGhpcy5yaWJib25zID0ge307CiAgICAgIHRoaXMuZm9ybWF0RGlnaXRzKHZhbHVlKTsKICAgICAgcmV0dXJuIHRoaXMuc3RhcnRXYXRjaGluZ011dGF0aW9ucygpOwogICAgfTsKCiAgICBPZG9tZXRlci5wcm90b3R5cGUuZm9ybWF0RGlnaXRzID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHZhciBkaWdpdCwgdmFsdWVEaWdpdCwgdmFsdWVTdHJpbmcsIHdob2xlUGFydCwgX2ksIF9qLCBfbGVuLCBfbGVuMSwgX3JlZiwgX3JlZjE7CgogICAgICB0aGlzLmRpZ2l0cyA9IFtdOwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5mb3JtYXRGdW5jdGlvbikgewogICAgICAgIHZhbHVlU3RyaW5nID0gdGhpcy5vcHRpb25zLmZvcm1hdEZ1bmN0aW9uKHZhbHVlKTsKICAgICAgICBfcmVmID0gdmFsdWVTdHJpbmcuc3BsaXQoJycpLnJldmVyc2UoKTsKCiAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBfcmVmLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgICAgICB2YWx1ZURpZ2l0ID0gX3JlZltfaV07CgogICAgICAgICAgaWYgKHZhbHVlRGlnaXQubWF0Y2goLzAtOS8pKSB7CiAgICAgICAgICAgIGRpZ2l0ID0gdGhpcy5yZW5kZXJEaWdpdCgpOwogICAgICAgICAgICBkaWdpdC5xdWVyeVNlbGVjdG9yKCcub2RvbWV0ZXItdmFsdWUnKS5pbm5lckhUTUwgPSB2YWx1ZURpZ2l0OwogICAgICAgICAgICB0aGlzLmRpZ2l0cy5wdXNoKGRpZ2l0KTsKICAgICAgICAgICAgdGhpcy5pbnNlcnREaWdpdChkaWdpdCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmFkZFNwYWNlcih2YWx1ZURpZ2l0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2hvbGVQYXJ0ID0gIXRoaXMuZm9ybWF0LnByZWNpc2lvbiB8fCAhZnJhY3Rpb25hbFBhcnQodmFsdWUpIHx8IGZhbHNlOwogICAgICAgIF9yZWYxID0gdmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnJykucmV2ZXJzZSgpOwoKICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMS5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHsKICAgICAgICAgIGRpZ2l0ID0gX3JlZjFbX2pdOwoKICAgICAgICAgIGlmIChkaWdpdCA9PT0gJy4nKSB7CiAgICAgICAgICAgIHdob2xlUGFydCA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5hZGREaWdpdChkaWdpdCwgd2hvbGVQYXJ0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgT2RvbWV0ZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgICB2YXIgZGlmZiwKICAgICAgICAgIF90aGlzID0gdGhpczsKCiAgICAgIG5ld1ZhbHVlID0gdGhpcy5jbGVhblZhbHVlKG5ld1ZhbHVlKTsKCiAgICAgIGlmICghKGRpZmYgPSBuZXdWYWx1ZSAtIHRoaXMudmFsdWUpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCAnb2RvbWV0ZXItYW5pbWF0aW5nLXVwIG9kb21ldGVyLWFuaW1hdGluZy1kb3duIG9kb21ldGVyLWFuaW1hdGluZycpOwoKICAgICAgaWYgKGRpZmYgPiAwKSB7CiAgICAgICAgYWRkQ2xhc3ModGhpcy5lbCwgJ29kb21ldGVyLWFuaW1hdGluZy11cCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGFkZENsYXNzKHRoaXMuZWwsICdvZG9tZXRlci1hbmltYXRpbmctZG93bicpOwogICAgICB9CgogICAgICB0aGlzLnN0b3BXYXRjaGluZ011dGF0aW9ucygpOwogICAgICB0aGlzLmFuaW1hdGUobmV3VmFsdWUpOwogICAgICB0aGlzLnN0YXJ0V2F0Y2hpbmdNdXRhdGlvbnMoKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMuZWwub2Zmc2V0SGVpZ2h0OwogICAgICAgIHJldHVybiBhZGRDbGFzcyhfdGhpcy5lbCwgJ29kb21ldGVyLWFuaW1hdGluZycpOwogICAgICB9LCAwKTsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTsKICAgIH07CgogICAgT2RvbWV0ZXIucHJvdG90eXBlLnJlbmRlckRpZ2l0ID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gY3JlYXRlRnJvbUhUTUwoRElHSVRfSFRNTCk7CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5pbnNlcnREaWdpdCA9IGZ1bmN0aW9uIChkaWdpdCwgYmVmb3JlKSB7CiAgICAgIGlmIChiZWZvcmUgIT0gbnVsbCkgewogICAgICAgIHJldHVybiB0aGlzLmluc2lkZS5pbnNlcnRCZWZvcmUoZGlnaXQsIGJlZm9yZSk7CiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaW5zaWRlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgIHJldHVybiB0aGlzLmluc2lkZS5hcHBlbmRDaGlsZChkaWdpdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5zaWRlLmluc2VydEJlZm9yZShkaWdpdCwgdGhpcy5pbnNpZGUuY2hpbGRyZW5bMF0pOwogICAgICB9CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5hZGRTcGFjZXIgPSBmdW5jdGlvbiAoY2hyLCBiZWZvcmUsIGV4dHJhQ2xhc3NlcykgewogICAgICB2YXIgc3BhY2VyOwogICAgICBzcGFjZXIgPSBjcmVhdGVGcm9tSFRNTChGT1JNQVRfTUFSS19IVE1MKTsKICAgICAgc3BhY2VyLmlubmVySFRNTCA9IGNocjsKCiAgICAgIGlmIChleHRyYUNsYXNzZXMpIHsKICAgICAgICBhZGRDbGFzcyhzcGFjZXIsIGV4dHJhQ2xhc3Nlcyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmluc2VydERpZ2l0KHNwYWNlciwgYmVmb3JlKTsKICAgIH07CgogICAgT2RvbWV0ZXIucHJvdG90eXBlLmFkZERpZ2l0ID0gZnVuY3Rpb24gKHZhbHVlLCByZXBlYXRpbmcpIHsKICAgICAgdmFyIGNociwgZGlnaXQsIHJlc2V0dGVkLCBfcmVmOwoKICAgICAgaWYgKHJlcGVhdGluZyA9PSBudWxsKSB7CiAgICAgICAgcmVwZWF0aW5nID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHZhbHVlID09PSAnLScpIHsKICAgICAgICByZXR1cm4gdGhpcy5hZGRTcGFjZXIodmFsdWUsIG51bGwsICdvZG9tZXRlci1uZWdhdGlvbi1tYXJrJyk7CiAgICAgIH0KCiAgICAgIGlmICh2YWx1ZSA9PT0gJy4nKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWRkU3BhY2VyKChfcmVmID0gdGhpcy5mb3JtYXQucmFkaXgpICE9IG51bGwgPyBfcmVmIDogJy4nLCBudWxsLCAnb2RvbWV0ZXItcmFkaXgtbWFyaycpOwogICAgICB9CgogICAgICBpZiAocmVwZWF0aW5nKSB7CiAgICAgICAgcmVzZXR0ZWQgPSBmYWxzZTsKCiAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgIGlmICghdGhpcy5mb3JtYXQucmVwZWF0aW5nLmxlbmd0aCkgewogICAgICAgICAgICBpZiAocmVzZXR0ZWQpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkJhZCBvZG9tZXRlciBmb3JtYXQgd2l0aG91dCBkaWdpdHMiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1hdCgpOwogICAgICAgICAgICByZXNldHRlZCA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY2hyID0gdGhpcy5mb3JtYXQucmVwZWF0aW5nW3RoaXMuZm9ybWF0LnJlcGVhdGluZy5sZW5ndGggLSAxXTsKICAgICAgICAgIHRoaXMuZm9ybWF0LnJlcGVhdGluZyA9IHRoaXMuZm9ybWF0LnJlcGVhdGluZy5zdWJzdHJpbmcoMCwgdGhpcy5mb3JtYXQucmVwZWF0aW5nLmxlbmd0aCAtIDEpOwoKICAgICAgICAgIGlmIChjaHIgPT09ICdkJykgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmFkZFNwYWNlcihjaHIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZGlnaXQgPSB0aGlzLnJlbmRlckRpZ2l0KCk7CiAgICAgIGRpZ2l0LnF1ZXJ5U2VsZWN0b3IoJy5vZG9tZXRlci12YWx1ZScpLmlubmVySFRNTCA9IHZhbHVlOwogICAgICB0aGlzLmRpZ2l0cy5wdXNoKGRpZ2l0KTsKICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0RGlnaXQoZGlnaXQpOwogICAgfTsKCiAgICBPZG9tZXRlci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgICBpZiAoIVRSQU5TSVRJT05fU1VQUE9SVCB8fCB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uID09PSAnY291bnQnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZUNvdW50KG5ld1ZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRlU2xpZGUobmV3VmFsdWUpOwogICAgICB9CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5hbmltYXRlQ291bnQgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHsKICAgICAgdmFyIGN1ciwKICAgICAgICAgIGRpZmYsCiAgICAgICAgICBsYXN0LAogICAgICAgICAgc3RhcnQsCiAgICAgICAgICBfdGljaywKICAgICAgICAgIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghKGRpZmYgPSArbmV3VmFsdWUgLSB0aGlzLnZhbHVlKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3RhcnQgPSBsYXN0ID0gbm93KCk7CiAgICAgIGN1ciA9IHRoaXMudmFsdWU7CiAgICAgIHJldHVybiAoX3RpY2sgPSBmdW5jdGlvbiB0aWNrKCkgewogICAgICAgIHZhciBkZWx0YSwgZGlzdCwgZnJhY3Rpb247CgogICAgICAgIGlmIChub3coKSAtIHN0YXJ0ID4gX3RoaXMub3B0aW9ucy5kdXJhdGlvbikgewogICAgICAgICAgX3RoaXMudmFsdWUgPSBuZXdWYWx1ZTsKCiAgICAgICAgICBfdGhpcy5yZW5kZXIoKTsKCiAgICAgICAgICB0cmlnZ2VyKF90aGlzLmVsLCAnb2RvbWV0ZXJkb25lJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBkZWx0YSA9IG5vdygpIC0gbGFzdDsKCiAgICAgICAgaWYgKGRlbHRhID4gQ09VTlRfTVNfUEVSX0ZSQU1FKSB7CiAgICAgICAgICBsYXN0ID0gbm93KCk7CiAgICAgICAgICBmcmFjdGlvbiA9IGRlbHRhIC8gX3RoaXMub3B0aW9ucy5kdXJhdGlvbjsKICAgICAgICAgIGRpc3QgPSBkaWZmICogZnJhY3Rpb247CiAgICAgICAgICBjdXIgKz0gZGlzdDsKCiAgICAgICAgICBfdGhpcy5yZW5kZXIoTWF0aC5yb3VuZChjdXIpKTsKICAgICAgICB9CgogICAgICAgIGlmIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgIT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZShfdGljayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KF90aWNrLCBDT1VOVF9NU19QRVJfRlJBTUUpOwogICAgICAgIH0KICAgICAgfSkoKTsKICAgIH07CgogICAgT2RvbWV0ZXIucHJvdG90eXBlLmdldERpZ2l0Q291bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpLCBtYXgsIHZhbHVlLCB2YWx1ZXMsIF9pLCBfbGVuOwoKICAgICAgdmFsdWVzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTsKCiAgICAgIGZvciAoaSA9IF9pID0gMCwgX2xlbiA9IHZhbHVlcy5sZW5ndGg7IF9pIDwgX2xlbjsgaSA9ICsrX2kpIHsKICAgICAgICB2YWx1ZSA9IHZhbHVlc1tpXTsKICAgICAgICB2YWx1ZXNbaV0gPSBNYXRoLmFicyh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIG1heCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHZhbHVlcyk7CiAgICAgIHJldHVybiBNYXRoLmNlaWwoTWF0aC5sb2cobWF4ICsgMSkgLyBNYXRoLmxvZygxMCkpOwogICAgfTsKCiAgICBPZG9tZXRlci5wcm90b3R5cGUuZ2V0RnJhY3Rpb25hbERpZ2l0Q291bnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpLCBwYXJzZXIsIHBhcnRzLCB2YWx1ZSwgdmFsdWVzLCBfaSwgX2xlbjsKCiAgICAgIHZhbHVlcyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107CiAgICAgIHBhcnNlciA9IC9eXC0/XGQqXC4oXGQqPykwKiQvOwoKICAgICAgZm9yIChpID0gX2kgPSAwLCBfbGVuID0gdmFsdWVzLmxlbmd0aDsgX2kgPCBfbGVuOyBpID0gKytfaSkgewogICAgICAgIHZhbHVlID0gdmFsdWVzW2ldOwogICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlLnRvU3RyaW5nKCk7CiAgICAgICAgcGFydHMgPSBwYXJzZXIuZXhlYyh2YWx1ZXNbaV0pOwoKICAgICAgICBpZiAocGFydHMgPT0gbnVsbCkgewogICAgICAgICAgdmFsdWVzW2ldID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFsdWVzW2ldID0gcGFydHNbMV0ubGVuZ3RoOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KE1hdGgsIHZhbHVlcyk7CiAgICB9OwoKICAgIE9kb21ldGVyLnByb3RvdHlwZS5yZXNldERpZ2l0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5kaWdpdHMgPSBbXTsKICAgICAgdGhpcy5yaWJib25zID0gW107CiAgICAgIHRoaXMuaW5zaWRlLmlubmVySFRNTCA9ICcnOwogICAgICByZXR1cm4gdGhpcy5yZXNldEZvcm1hdCgpOwogICAgfTsKCiAgICBPZG9tZXRlci5wcm90b3R5cGUuYW5pbWF0ZVNsaWRlID0gZnVuY3Rpb24gKG5ld1ZhbHVlKSB7CiAgICAgIHZhciBib29zdGVkLCBjdXIsIGRpZmYsIGRpZ2l0Q291bnQsIGRpZ2l0cywgZGlzdCwgZW5kLCBmcmFjdGlvbmFsQ291bnQsIGZyYW1lLCBmcmFtZXMsIGksIGluY3IsIGosIG1hcmssIG51bUVsLCBvbGRWYWx1ZSwgc3RhcnQsIF9iYXNlLCBfaSwgX2osIF9rLCBfbCwgX2xlbiwgX2xlbjEsIF9sZW4yLCBfbSwgX3JlZiwgX3Jlc3VsdHM7CgogICAgICBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7CiAgICAgIGZyYWN0aW9uYWxDb3VudCA9IHRoaXMuZ2V0RnJhY3Rpb25hbERpZ2l0Q291bnQob2xkVmFsdWUsIG5ld1ZhbHVlKTsKCiAgICAgIGlmIChmcmFjdGlvbmFsQ291bnQpIHsKICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlICogTWF0aC5wb3coMTAsIGZyYWN0aW9uYWxDb3VudCk7CiAgICAgICAgb2xkVmFsdWUgPSBvbGRWYWx1ZSAqIE1hdGgucG93KDEwLCBmcmFjdGlvbmFsQ291bnQpOwogICAgICB9CgogICAgICBpZiAoIShkaWZmID0gbmV3VmFsdWUgLSBvbGRWYWx1ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuYmluZFRyYW5zaXRpb25FbmQoKTsKICAgICAgZGlnaXRDb3VudCA9IHRoaXMuZ2V0RGlnaXRDb3VudChvbGRWYWx1ZSwgbmV3VmFsdWUpOwogICAgICBkaWdpdHMgPSBbXTsKICAgICAgYm9vc3RlZCA9IDA7CgogICAgICBmb3IgKGkgPSBfaSA9IDA7IDAgPD0gZGlnaXRDb3VudCA/IF9pIDwgZGlnaXRDb3VudCA6IF9pID4gZGlnaXRDb3VudDsgaSA9IDAgPD0gZGlnaXRDb3VudCA/ICsrX2kgOiAtLV9pKSB7CiAgICAgICAgc3RhcnQgPSB0cnVuY2F0ZShvbGRWYWx1ZSAvIE1hdGgucG93KDEwLCBkaWdpdENvdW50IC0gaSAtIDEpKTsKICAgICAgICBlbmQgPSB0cnVuY2F0ZShuZXdWYWx1ZSAvIE1hdGgucG93KDEwLCBkaWdpdENvdW50IC0gaSAtIDEpKTsKICAgICAgICBkaXN0ID0gZW5kIC0gc3RhcnQ7CgogICAgICAgIGlmIChNYXRoLmFicyhkaXN0KSA+IHRoaXMuTUFYX1ZBTFVFUykgewogICAgICAgICAgZnJhbWVzID0gW107CiAgICAgICAgICBpbmNyID0gZGlzdCAvICh0aGlzLk1BWF9WQUxVRVMgKyB0aGlzLk1BWF9WQUxVRVMgKiBib29zdGVkICogRElHSVRfU1BFRURCT09TVCk7CiAgICAgICAgICBjdXIgPSBzdGFydDsKCiAgICAgICAgICB3aGlsZSAoZGlzdCA+IDAgJiYgY3VyIDwgZW5kIHx8IGRpc3QgPCAwICYmIGN1ciA+IGVuZCkgewogICAgICAgICAgICBmcmFtZXMucHVzaChNYXRoLnJvdW5kKGN1cikpOwogICAgICAgICAgICBjdXIgKz0gaW5jcjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZnJhbWVzW2ZyYW1lcy5sZW5ndGggLSAxXSAhPT0gZW5kKSB7CiAgICAgICAgICAgIGZyYW1lcy5wdXNoKGVuZCk7CiAgICAgICAgICB9CgogICAgICAgICAgYm9vc3RlZCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmcmFtZXMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF9yZXN1bHRzID0gW107CgogICAgICAgICAgICBmb3IgKHZhciBfaiA9IHN0YXJ0OyBzdGFydCA8PSBlbmQgPyBfaiA8PSBlbmQgOiBfaiA+PSBlbmQ7IHN0YXJ0IDw9IGVuZCA/IF9qKysgOiBfai0tKSB7CiAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaChfaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfcmVzdWx0czsKICAgICAgICAgIH0uYXBwbHkodGhpcyk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGkgPSBfayA9IDAsIF9sZW4gPSBmcmFtZXMubGVuZ3RoOyBfayA8IF9sZW47IGkgPSArK19rKSB7CiAgICAgICAgICBmcmFtZSA9IGZyYW1lc1tpXTsKICAgICAgICAgIGZyYW1lc1tpXSA9IE1hdGguYWJzKGZyYW1lICUgMTApOwogICAgICAgIH0KCiAgICAgICAgZGlnaXRzLnB1c2goZnJhbWVzKTsKICAgICAgfQoKICAgICAgdGhpcy5yZXNldERpZ2l0cygpOwogICAgICBfcmVmID0gZGlnaXRzLnJldmVyc2UoKTsKCiAgICAgIGZvciAoaSA9IF9sID0gMCwgX2xlbjEgPSBfcmVmLmxlbmd0aDsgX2wgPCBfbGVuMTsgaSA9ICsrX2wpIHsKICAgICAgICBmcmFtZXMgPSBfcmVmW2ldOwoKICAgICAgICBpZiAoIXRoaXMuZGlnaXRzW2ldKSB7CiAgICAgICAgICB0aGlzLmFkZERpZ2l0KCcgJywgaSA+PSBmcmFjdGlvbmFsQ291bnQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKChfYmFzZSA9IHRoaXMucmliYm9ucylbaV0gPT0gbnVsbCkgewogICAgICAgICAgX2Jhc2VbaV0gPSB0aGlzLmRpZ2l0c1tpXS5xdWVyeVNlbGVjdG9yKCcub2RvbWV0ZXItcmliYm9uLWlubmVyJyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnJpYmJvbnNbaV0uaW5uZXJIVE1MID0gJyc7CgogICAgICAgIGlmIChkaWZmIDwgMCkgewogICAgICAgICAgZnJhbWVzID0gZnJhbWVzLnJldmVyc2UoKTsKICAgICAgICB9CgogICAgICAgIGZvciAoaiA9IF9tID0gMCwgX2xlbjIgPSBmcmFtZXMubGVuZ3RoOyBfbSA8IF9sZW4yOyBqID0gKytfbSkgewogICAgICAgICAgZnJhbWUgPSBmcmFtZXNbal07CiAgICAgICAgICBudW1FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgbnVtRWwuY2xhc3NOYW1lID0gJ29kb21ldGVyLXZhbHVlJzsKICAgICAgICAgIG51bUVsLmlubmVySFRNTCA9IGZyYW1lOwogICAgICAgICAgdGhpcy5yaWJib25zW2ldLmFwcGVuZENoaWxkKG51bUVsKTsKCiAgICAgICAgICBpZiAoaiA9PT0gZnJhbWVzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgYWRkQ2xhc3MobnVtRWwsICdvZG9tZXRlci1sYXN0LXZhbHVlJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGogPT09IDApIHsKICAgICAgICAgICAgYWRkQ2xhc3MobnVtRWwsICdvZG9tZXRlci1maXJzdC12YWx1ZScpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHN0YXJ0IDwgMCkgewogICAgICAgIHRoaXMuYWRkRGlnaXQoJy0nKTsKICAgICAgfQoKICAgICAgbWFyayA9IHRoaXMuaW5zaWRlLnF1ZXJ5U2VsZWN0b3IoJy5vZG9tZXRlci1yYWRpeC1tYXJrJyk7CgogICAgICBpZiAobWFyayAhPSBudWxsKSB7CiAgICAgICAgbWFyay5wYXJlbnQucmVtb3ZlQ2hpbGQobWFyayk7CiAgICAgIH0KCiAgICAgIGlmIChmcmFjdGlvbmFsQ291bnQpIHsKICAgICAgICByZXR1cm4gdGhpcy5hZGRTcGFjZXIodGhpcy5mb3JtYXQucmFkaXgsIHRoaXMuZGlnaXRzW2ZyYWN0aW9uYWxDb3VudCAtIDFdLCAnb2RvbWV0ZXItcmFkaXgtbWFyaycpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiBPZG9tZXRlcjsKICB9KCk7CgogIE9kb21ldGVyLm9wdGlvbnMgPSAoX3JlZiA9IHdpbmRvdy5vZG9tZXRlck9wdGlvbnMpICE9IG51bGwgPyBfcmVmIDoge307CiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICB2YXIgaywgdiwgX2Jhc2UsIF9yZWYxLCBfcmVzdWx0czsKCiAgICBpZiAod2luZG93Lm9kb21ldGVyT3B0aW9ucykgewogICAgICBfcmVmMSA9IHdpbmRvdy5vZG9tZXRlck9wdGlvbnM7CiAgICAgIF9yZXN1bHRzID0gW107CgogICAgICBmb3IgKGsgaW4gX3JlZjEpIHsKICAgICAgICB2ID0gX3JlZjFba107CgogICAgICAgIF9yZXN1bHRzLnB1c2goKF9iYXNlID0gT2RvbWV0ZXIub3B0aW9ucylba10gIT0gbnVsbCA/IChfYmFzZSA9IE9kb21ldGVyLm9wdGlvbnMpW2tdIDogX2Jhc2Vba10gPSB2KTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgfQogIH0sIDApOwoKICBPZG9tZXRlci5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGVsLCBlbGVtZW50cywgX2ksIF9sZW4sIF9yZWYxLCBfcmVzdWx0czsKCiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCA9PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoT2RvbWV0ZXIub3B0aW9ucy5zZWxlY3RvciB8fCAnLm9kb21ldGVyJyk7CiAgICBfcmVzdWx0cyA9IFtdOwoKICAgIGZvciAoX2kgPSAwLCBfbGVuID0gZWxlbWVudHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgZWwgPSBlbGVtZW50c1tfaV07CgogICAgICBfcmVzdWx0cy5wdXNoKGVsLm9kb21ldGVyID0gbmV3IE9kb21ldGVyKHsKICAgICAgICBlbDogZWwsCiAgICAgICAgdmFsdWU6IChfcmVmMSA9IGVsLmlubmVyVGV4dCkgIT0gbnVsbCA/IF9yZWYxIDogZWwudGV4dENvbnRlbnQKICAgICAgfSkpOwogICAgfQoKICAgIHJldHVybiBfcmVzdWx0czsKICB9OwoKICBpZiAoKChfcmVmMSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgIT0gbnVsbCA/IF9yZWYxLmRvU2Nyb2xsIDogdm9pZCAwKSAhPSBudWxsICYmIGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0ICE9IG51bGwpIHsKICAgIF9vbGQgPSBkb2N1bWVudC5vbnJlYWR5c3RhdGVjaGFuZ2U7CgogICAgZG9jdW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyAmJiBPZG9tZXRlci5vcHRpb25zLmF1dG8gIT09IGZhbHNlKSB7CiAgICAgICAgT2RvbWV0ZXIuaW5pdCgpOwogICAgICB9CgogICAgICByZXR1cm4gX29sZCAhPSBudWxsID8gX29sZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogdm9pZCAwOwogICAgfTsKICB9IGVsc2UgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKE9kb21ldGVyLm9wdGlvbnMuYXV0byAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gT2RvbWV0ZXIuaW5pdCgpOwogICAgICB9CiAgICB9LCBmYWxzZSk7CiAgfQoKICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7CiAgICBkZWZpbmUoWydqcXVlcnknXSwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gT2RvbWV0ZXI7CiAgICB9KTsKICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAidW5kZWZpbmVkIiAmJiBleHBvcnRzICE9PSBudWxsKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IE9kb21ldGVyOwogIH0gZWxzZSB7CiAgICB3aW5kb3cuT2RvbWV0ZXIgPSBPZG9tZXRlcjsKICB9Cn0pLmNhbGwodGhpcyk7Ci8qISBNYWduaWZpYyBQb3B1cCAtIHYxLjAuMSAtIDIwMTUtMTItMzAKKiBodHRwOi8vZGltc2VtZW5vdi5jb20vcGx1Z2lucy9tYWduaWZpYy1wb3B1cC8KKiBDb3B5cmlnaHQgKGMpIDIwMTUgRG1pdHJ5IFNlbWVub3Y7ICovCgohZnVuY3Rpb24gKGEpIHsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbImpxdWVyeSJdLCBhKSA6IGEoIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyByZXF1aXJlKCJqcXVlcnkiKSA6IHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvKTsKfShmdW5jdGlvbiAoYSkgewogIHZhciBiLAogICAgICBjLAogICAgICBkLAogICAgICBlLAogICAgICBmLAogICAgICBnLAogICAgICBoID0gIkNsb3NlIiwKICAgICAgaSA9ICJCZWZvcmVDbG9zZSIsCiAgICAgIGogPSAiQWZ0ZXJDbG9zZSIsCiAgICAgIGsgPSAiQmVmb3JlQXBwZW5kIiwKICAgICAgbCA9ICJNYXJrdXBQYXJzZSIsCiAgICAgIG0gPSAiT3BlbiIsCiAgICAgIG4gPSAiQ2hhbmdlIiwKICAgICAgbyA9ICJtZnAiLAogICAgICBwID0gIi4iICsgbywKICAgICAgcSA9ICJtZnAtcmVhZHkiLAogICAgICByID0gIm1mcC1yZW1vdmluZyIsCiAgICAgIHMgPSAibWZwLXByZXZlbnQtY2xvc2UiLAogICAgICB0ID0gZnVuY3Rpb24gdCgpIHt9LAogICAgICB1ID0gISF3aW5kb3cualF1ZXJ5LAogICAgICB2ID0gYSh3aW5kb3cpLAogICAgICB3ID0gZnVuY3Rpb24gdyhhLCBjKSB7CiAgICBiLmV2Lm9uKG8gKyBhICsgcCwgYyk7CiAgfSwKICAgICAgeCA9IGZ1bmN0aW9uIHgoYiwgYywgZCwgZSkgewogICAgdmFyIGYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIHJldHVybiBmLmNsYXNzTmFtZSA9ICJtZnAtIiArIGIsIGQgJiYgKGYuaW5uZXJIVE1MID0gZCksIGUgPyBjICYmIGMuYXBwZW5kQ2hpbGQoZikgOiAoZiA9IGEoZiksIGMgJiYgZi5hcHBlbmRUbyhjKSksIGY7CiAgfSwKICAgICAgeSA9IGZ1bmN0aW9uIHkoYywgZCkgewogICAgYi5ldi50cmlnZ2VySGFuZGxlcihvICsgYywgZCksIGIuc3QuY2FsbGJhY2tzICYmIChjID0gYy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIGMuc2xpY2UoMSksIGIuc3QuY2FsbGJhY2tzW2NdICYmIGIuc3QuY2FsbGJhY2tzW2NdLmFwcGx5KGIsIGEuaXNBcnJheShkKSA/IGQgOiBbZF0pKTsKICB9LAogICAgICB6ID0gZnVuY3Rpb24geihjKSB7CiAgICByZXR1cm4gYyA9PT0gZyAmJiBiLmN1cnJUZW1wbGF0ZS5jbG9zZUJ0biB8fCAoYi5jdXJyVGVtcGxhdGUuY2xvc2VCdG4gPSBhKGIuc3QuY2xvc2VNYXJrdXAucmVwbGFjZSgiJXRpdGxlJSIsIGIuc3QudENsb3NlKSksIGcgPSBjKSwgYi5jdXJyVGVtcGxhdGUuY2xvc2VCdG47CiAgfSwKICAgICAgQSA9IGZ1bmN0aW9uIEEoKSB7CiAgICBhLm1hZ25pZmljUG9wdXAuaW5zdGFuY2UgfHwgKGIgPSBuZXcgdCgpLCBiLmluaXQoKSwgYS5tYWduaWZpY1BvcHVwLmluc3RhbmNlID0gYik7CiAgfSwKICAgICAgQiA9IGZ1bmN0aW9uIEIoKSB7CiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKS5zdHlsZSwKICAgICAgICBiID0gWyJtcyIsICJPIiwgIk1veiIsICJXZWJraXQiXTsKICAgIGlmICh2b2lkIDAgIT09IGEudHJhbnNpdGlvbikgcmV0dXJuICEwOwoKICAgIGZvciAoOyBiLmxlbmd0aDspIHsKICAgICAgaWYgKGIucG9wKCkgKyAiVHJhbnNpdGlvbiIgaW4gYSkgcmV0dXJuICEwOwogICAgfQoKICAgIHJldHVybiAhMTsKICB9OwoKICB0LnByb3RvdHlwZSA9IHsKICAgIGNvbnN0cnVjdG9yOiB0LAogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgdmFyIGMgPSBuYXZpZ2F0b3IuYXBwVmVyc2lvbjsKICAgICAgYi5pc0lFNyA9IC0xICE9PSBjLmluZGV4T2YoIk1TSUUgNy4iKSwgYi5pc0lFOCA9IC0xICE9PSBjLmluZGV4T2YoIk1TSUUgOC4iKSwgYi5pc0xvd0lFID0gYi5pc0lFNyB8fCBiLmlzSUU4LCBiLmlzQW5kcm9pZCA9IC9hbmRyb2lkL2dpLnRlc3QoYyksIGIuaXNJT1MgPSAvaXBob25lfGlwYWR8aXBvZC9naS50ZXN0KGMpLCBiLnN1cHBvcnRzVHJhbnNpdGlvbiA9IEIoKSwgYi5wcm9iYWJseU1vYmlsZSA9IGIuaXNBbmRyb2lkIHx8IGIuaXNJT1MgfHwgLyhPcGVyYSBNaW5pKXxLaW5kbGV8d2ViT1N8QmxhY2tCZXJyeXwoT3BlcmEgTW9iaSl8KFdpbmRvd3MgUGhvbmUpfElFTW9iaWxlL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSwgZCA9IGEoZG9jdW1lbnQpLCBiLnBvcHVwc0NhY2hlID0ge307CiAgICB9LAogICAgb3BlbjogZnVuY3Rpb24gb3BlbihjKSB7CiAgICAgIHZhciBlOwoKICAgICAgaWYgKGMuaXNPYmogPT09ICExKSB7CiAgICAgICAgYi5pdGVtcyA9IGMuaXRlbXMudG9BcnJheSgpLCBiLmluZGV4ID0gMDsKICAgICAgICB2YXIgZywKICAgICAgICAgICAgaCA9IGMuaXRlbXM7CgogICAgICAgIGZvciAoZSA9IDA7IGUgPCBoLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICBpZiAoZyA9IGhbZV0sIGcucGFyc2VkICYmIChnID0gZy5lbFswXSksIGcgPT09IGMuZWxbMF0pIHsKICAgICAgICAgICAgYi5pbmRleCA9IGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGIuaXRlbXMgPSBhLmlzQXJyYXkoYy5pdGVtcykgPyBjLml0ZW1zIDogW2MuaXRlbXNdLCBiLmluZGV4ID0gYy5pbmRleCB8fCAwOwoKICAgICAgaWYgKGIuaXNPcGVuKSByZXR1cm4gdm9pZCBiLnVwZGF0ZUl0ZW1IVE1MKCk7CiAgICAgIGIudHlwZXMgPSBbXSwgZiA9ICIiLCBjLm1haW5FbCAmJiBjLm1haW5FbC5sZW5ndGggPyBiLmV2ID0gYy5tYWluRWwuZXEoMCkgOiBiLmV2ID0gZCwgYy5rZXkgPyAoYi5wb3B1cHNDYWNoZVtjLmtleV0gfHwgKGIucG9wdXBzQ2FjaGVbYy5rZXldID0ge30pLCBiLmN1cnJUZW1wbGF0ZSA9IGIucG9wdXBzQ2FjaGVbYy5rZXldKSA6IGIuY3VyclRlbXBsYXRlID0ge30sIGIuc3QgPSBhLmV4dGVuZCghMCwge30sIGEubWFnbmlmaWNQb3B1cC5kZWZhdWx0cywgYyksIGIuZml4ZWRDb250ZW50UG9zID0gImF1dG8iID09PSBiLnN0LmZpeGVkQ29udGVudFBvcyA/ICFiLnByb2JhYmx5TW9iaWxlIDogYi5zdC5maXhlZENvbnRlbnRQb3MsIGIuc3QubW9kYWwgJiYgKGIuc3QuY2xvc2VPbkNvbnRlbnRDbGljayA9ICExLCBiLnN0LmNsb3NlT25CZ0NsaWNrID0gITEsIGIuc3Quc2hvd0Nsb3NlQnRuID0gITEsIGIuc3QuZW5hYmxlRXNjYXBlS2V5ID0gITEpLCBiLmJnT3ZlcmxheSB8fCAoYi5iZ092ZXJsYXkgPSB4KCJiZyIpLm9uKCJjbGljayIgKyBwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgYi5jbG9zZSgpOwogICAgICB9KSwgYi53cmFwID0geCgid3JhcCIpLmF0dHIoInRhYmluZGV4IiwgLTEpLm9uKCJjbGljayIgKyBwLCBmdW5jdGlvbiAoYSkgewogICAgICAgIGIuX2NoZWNrSWZDbG9zZShhLnRhcmdldCkgJiYgYi5jbG9zZSgpOwogICAgICB9KSwgYi5jb250YWluZXIgPSB4KCJjb250YWluZXIiLCBiLndyYXApKSwgYi5jb250ZW50Q29udGFpbmVyID0geCgiY29udGVudCIpLCBiLnN0LnByZWxvYWRlciAmJiAoYi5wcmVsb2FkZXIgPSB4KCJwcmVsb2FkZXIiLCBiLmNvbnRhaW5lciwgYi5zdC50TG9hZGluZykpOwogICAgICB2YXIgaSA9IGEubWFnbmlmaWNQb3B1cC5tb2R1bGVzOwoKICAgICAgZm9yIChlID0gMDsgZSA8IGkubGVuZ3RoOyBlKyspIHsKICAgICAgICB2YXIgaiA9IGlbZV07CiAgICAgICAgaiA9IGouY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBqLnNsaWNlKDEpLCBiWyJpbml0IiArIGpdLmNhbGwoYik7CiAgICAgIH0KCiAgICAgIHkoIkJlZm9yZU9wZW4iKSwgYi5zdC5zaG93Q2xvc2VCdG4gJiYgKGIuc3QuY2xvc2VCdG5JbnNpZGUgPyAodyhsLCBmdW5jdGlvbiAoYSwgYiwgYywgZCkgewogICAgICAgIGMuY2xvc2VfcmVwbGFjZVdpdGggPSB6KGQudHlwZSk7CiAgICAgIH0pLCBmICs9ICIgbWZwLWNsb3NlLWJ0bi1pbiIpIDogYi53cmFwLmFwcGVuZCh6KCkpKSwgYi5zdC5hbGlnblRvcCAmJiAoZiArPSAiIG1mcC1hbGlnbi10b3AiKSwgYi5maXhlZENvbnRlbnRQb3MgPyBiLndyYXAuY3NzKHsKICAgICAgICBvdmVyZmxvdzogYi5zdC5vdmVyZmxvd1ksCiAgICAgICAgb3ZlcmZsb3dYOiAiaGlkZGVuIiwKICAgICAgICBvdmVyZmxvd1k6IGIuc3Qub3ZlcmZsb3dZCiAgICAgIH0pIDogYi53cmFwLmNzcyh7CiAgICAgICAgdG9wOiB2LnNjcm9sbFRvcCgpLAogICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiCiAgICAgIH0pLCAoYi5zdC5maXhlZEJnUG9zID09PSAhMSB8fCAiYXV0byIgPT09IGIuc3QuZml4ZWRCZ1BvcyAmJiAhYi5maXhlZENvbnRlbnRQb3MpICYmIGIuYmdPdmVybGF5LmNzcyh7CiAgICAgICAgaGVpZ2h0OiBkLmhlaWdodCgpLAogICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiCiAgICAgIH0pLCBiLnN0LmVuYWJsZUVzY2FwZUtleSAmJiBkLm9uKCJrZXl1cCIgKyBwLCBmdW5jdGlvbiAoYSkgewogICAgICAgIDI3ID09PSBhLmtleUNvZGUgJiYgYi5jbG9zZSgpOwogICAgICB9KSwgdi5vbigicmVzaXplIiArIHAsIGZ1bmN0aW9uICgpIHsKICAgICAgICBiLnVwZGF0ZVNpemUoKTsKICAgICAgfSksIGIuc3QuY2xvc2VPbkNvbnRlbnRDbGljayB8fCAoZiArPSAiIG1mcC1hdXRvLWN1cnNvciIpLCBmICYmIGIud3JhcC5hZGRDbGFzcyhmKTsKICAgICAgdmFyIGsgPSBiLndIID0gdi5oZWlnaHQoKSwKICAgICAgICAgIG4gPSB7fTsKCiAgICAgIGlmIChiLmZpeGVkQ29udGVudFBvcyAmJiBiLl9oYXNTY3JvbGxCYXIoaykpIHsKICAgICAgICB2YXIgbyA9IGIuX2dldFNjcm9sbGJhclNpemUoKTsKCiAgICAgICAgbyAmJiAobi5tYXJnaW5SaWdodCA9IG8pOwogICAgICB9CgogICAgICBiLmZpeGVkQ29udGVudFBvcyAmJiAoYi5pc0lFNyA/IGEoImJvZHksIGh0bWwiKS5jc3MoIm92ZXJmbG93IiwgImhpZGRlbiIpIDogbi5vdmVyZmxvdyA9ICJoaWRkZW4iKTsKICAgICAgdmFyIHIgPSBiLnN0Lm1haW5DbGFzczsKICAgICAgcmV0dXJuIGIuaXNJRTcgJiYgKHIgKz0gIiBtZnAtaWU3IiksIHIgJiYgYi5fYWRkQ2xhc3NUb01GUChyKSwgYi51cGRhdGVJdGVtSFRNTCgpLCB5KCJCdWlsZENvbnRyb2xzIiksIGEoImh0bWwiKS5jc3MobiksIGIuYmdPdmVybGF5LmFkZChiLndyYXApLnByZXBlbmRUbyhiLnN0LnByZXBlbmRUbyB8fCBhKGRvY3VtZW50LmJvZHkpKSwgYi5fbGFzdEZvY3VzZWRFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGIuY29udGVudCA/IChiLl9hZGRDbGFzc1RvTUZQKHEpLCBiLl9zZXRGb2N1cygpKSA6IGIuYmdPdmVybGF5LmFkZENsYXNzKHEpLCBkLm9uKCJmb2N1c2luIiArIHAsIGIuX29uRm9jdXNJbik7CiAgICAgIH0sIDE2KSwgYi5pc09wZW4gPSAhMCwgYi51cGRhdGVTaXplKGspLCB5KG0pLCBjOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgYi5pc09wZW4gJiYgKHkoaSksIGIuaXNPcGVuID0gITEsIGIuc3QucmVtb3ZhbERlbGF5ICYmICFiLmlzTG93SUUgJiYgYi5zdXBwb3J0c1RyYW5zaXRpb24gPyAoYi5fYWRkQ2xhc3NUb01GUChyKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgYi5fY2xvc2UoKTsKICAgICAgfSwgYi5zdC5yZW1vdmFsRGVsYXkpKSA6IGIuX2Nsb3NlKCkpOwogICAgfSwKICAgIF9jbG9zZTogZnVuY3Rpb24gX2Nsb3NlKCkgewogICAgICB5KGgpOwogICAgICB2YXIgYyA9IHIgKyAiICIgKyBxICsgIiAiOwoKICAgICAgaWYgKGIuYmdPdmVybGF5LmRldGFjaCgpLCBiLndyYXAuZGV0YWNoKCksIGIuY29udGFpbmVyLmVtcHR5KCksIGIuc3QubWFpbkNsYXNzICYmIChjICs9IGIuc3QubWFpbkNsYXNzICsgIiAiKSwgYi5fcmVtb3ZlQ2xhc3NGcm9tTUZQKGMpLCBiLmZpeGVkQ29udGVudFBvcykgewogICAgICAgIHZhciBlID0gewogICAgICAgICAgbWFyZ2luUmlnaHQ6ICIiCiAgICAgICAgfTsKICAgICAgICBiLmlzSUU3ID8gYSgiYm9keSwgaHRtbCIpLmNzcygib3ZlcmZsb3ciLCAiIikgOiBlLm92ZXJmbG93ID0gIiIsIGEoImh0bWwiKS5jc3MoZSk7CiAgICAgIH0KCiAgICAgIGQub2ZmKCJrZXl1cCIgKyBwICsgIiBmb2N1c2luIiArIHApLCBiLmV2Lm9mZihwKSwgYi53cmFwLmF0dHIoImNsYXNzIiwgIm1mcC13cmFwIikucmVtb3ZlQXR0cigic3R5bGUiKSwgYi5iZ092ZXJsYXkuYXR0cigiY2xhc3MiLCAibWZwLWJnIiksIGIuY29udGFpbmVyLmF0dHIoImNsYXNzIiwgIm1mcC1jb250YWluZXIiKSwgIWIuc3Quc2hvd0Nsb3NlQnRuIHx8IGIuc3QuY2xvc2VCdG5JbnNpZGUgJiYgYi5jdXJyVGVtcGxhdGVbYi5jdXJySXRlbS50eXBlXSAhPT0gITAgfHwgYi5jdXJyVGVtcGxhdGUuY2xvc2VCdG4gJiYgYi5jdXJyVGVtcGxhdGUuY2xvc2VCdG4uZGV0YWNoKCksIGIuc3QuYXV0b0ZvY3VzTGFzdCAmJiBiLl9sYXN0Rm9jdXNlZEVsICYmIGEoYi5fbGFzdEZvY3VzZWRFbCkuZm9jdXMoKSwgYi5jdXJySXRlbSA9IG51bGwsIGIuY29udGVudCA9IG51bGwsIGIuY3VyclRlbXBsYXRlID0gbnVsbCwgYi5wcmV2SGVpZ2h0ID0gMCwgeShqKTsKICAgIH0sCiAgICB1cGRhdGVTaXplOiBmdW5jdGlvbiB1cGRhdGVTaXplKGEpIHsKICAgICAgaWYgKGIuaXNJT1MpIHsKICAgICAgICB2YXIgYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAvIHdpbmRvdy5pbm5lcldpZHRoLAogICAgICAgICAgICBkID0gd2luZG93LmlubmVySGVpZ2h0ICogYzsKICAgICAgICBiLndyYXAuY3NzKCJoZWlnaHQiLCBkKSwgYi53SCA9IGQ7CiAgICAgIH0gZWxzZSBiLndIID0gYSB8fCB2LmhlaWdodCgpOwoKICAgICAgYi5maXhlZENvbnRlbnRQb3MgfHwgYi53cmFwLmNzcygiaGVpZ2h0IiwgYi53SCksIHkoIlJlc2l6ZSIpOwogICAgfSwKICAgIHVwZGF0ZUl0ZW1IVE1MOiBmdW5jdGlvbiB1cGRhdGVJdGVtSFRNTCgpIHsKICAgICAgdmFyIGMgPSBiLml0ZW1zW2IuaW5kZXhdOwogICAgICBiLmNvbnRlbnRDb250YWluZXIuZGV0YWNoKCksIGIuY29udGVudCAmJiBiLmNvbnRlbnQuZGV0YWNoKCksIGMucGFyc2VkIHx8IChjID0gYi5wYXJzZUVsKGIuaW5kZXgpKTsKICAgICAgdmFyIGQgPSBjLnR5cGU7CgogICAgICBpZiAoeSgiQmVmb3JlQ2hhbmdlIiwgW2IuY3Vyckl0ZW0gPyBiLmN1cnJJdGVtLnR5cGUgOiAiIiwgZF0pLCBiLmN1cnJJdGVtID0gYywgIWIuY3VyclRlbXBsYXRlW2RdKSB7CiAgICAgICAgdmFyIGYgPSBiLnN0W2RdID8gYi5zdFtkXS5tYXJrdXAgOiAhMTsKICAgICAgICB5KCJGaXJzdE1hcmt1cFBhcnNlIiwgZiksIGYgPyBiLmN1cnJUZW1wbGF0ZVtkXSA9IGEoZikgOiBiLmN1cnJUZW1wbGF0ZVtkXSA9ICEwOwogICAgICB9CgogICAgICBlICYmIGUgIT09IGMudHlwZSAmJiBiLmNvbnRhaW5lci5yZW1vdmVDbGFzcygibWZwLSIgKyBlICsgIi1ob2xkZXIiKTsKICAgICAgdmFyIGcgPSBiWyJnZXQiICsgZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGQuc2xpY2UoMSldKGMsIGIuY3VyclRlbXBsYXRlW2RdKTsKICAgICAgYi5hcHBlbmRDb250ZW50KGcsIGQpLCBjLnByZWxvYWRlZCA9ICEwLCB5KG4sIGMpLCBlID0gYy50eXBlLCBiLmNvbnRhaW5lci5wcmVwZW5kKGIuY29udGVudENvbnRhaW5lciksIHkoIkFmdGVyQ2hhbmdlIik7CiAgICB9LAogICAgYXBwZW5kQ29udGVudDogZnVuY3Rpb24gYXBwZW5kQ29udGVudChhLCBjKSB7CiAgICAgIGIuY29udGVudCA9IGEsIGEgPyBiLnN0LnNob3dDbG9zZUJ0biAmJiBiLnN0LmNsb3NlQnRuSW5zaWRlICYmIGIuY3VyclRlbXBsYXRlW2NdID09PSAhMCA/IGIuY29udGVudC5maW5kKCIubWZwLWNsb3NlIikubGVuZ3RoIHx8IGIuY29udGVudC5hcHBlbmQoeigpKSA6IGIuY29udGVudCA9IGEgOiBiLmNvbnRlbnQgPSAiIiwgeShrKSwgYi5jb250YWluZXIuYWRkQ2xhc3MoIm1mcC0iICsgYyArICItaG9sZGVyIiksIGIuY29udGVudENvbnRhaW5lci5hcHBlbmQoYi5jb250ZW50KTsKICAgIH0sCiAgICBwYXJzZUVsOiBmdW5jdGlvbiBwYXJzZUVsKGMpIHsKICAgICAgdmFyIGQsCiAgICAgICAgICBlID0gYi5pdGVtc1tjXTsKCiAgICAgIGlmIChlLnRhZ05hbWUgPyBlID0gewogICAgICAgIGVsOiBhKGUpCiAgICAgIH0gOiAoZCA9IGUudHlwZSwgZSA9IHsKICAgICAgICBkYXRhOiBlLAogICAgICAgIHNyYzogZS5zcmMKICAgICAgfSksIGUuZWwpIHsKICAgICAgICBmb3IgKHZhciBmID0gYi50eXBlcywgZyA9IDA7IGcgPCBmLmxlbmd0aDsgZysrKSB7CiAgICAgICAgICBpZiAoZS5lbC5oYXNDbGFzcygibWZwLSIgKyBmW2ddKSkgewogICAgICAgICAgICBkID0gZltnXTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBlLnNyYyA9IGUuZWwuYXR0cigiZGF0YS1tZnAtc3JjIiksIGUuc3JjIHx8IChlLnNyYyA9IGUuZWwuYXR0cigiaHJlZiIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGUudHlwZSA9IGQgfHwgYi5zdC50eXBlIHx8ICJpbmxpbmUiLCBlLmluZGV4ID0gYywgZS5wYXJzZWQgPSAhMCwgYi5pdGVtc1tjXSA9IGUsIHkoIkVsZW1lbnRQYXJzZSIsIGUpLCBiLml0ZW1zW2NdOwogICAgfSwKICAgIGFkZEdyb3VwOiBmdW5jdGlvbiBhZGRHcm91cChhLCBjKSB7CiAgICAgIHZhciBkID0gZnVuY3Rpb24gZChfZCkgewogICAgICAgIF9kLm1mcEVsID0gdGhpcywgYi5fb3BlbkNsaWNrKF9kLCBhLCBjKTsKICAgICAgfTsKCiAgICAgIGMgfHwgKGMgPSB7fSk7CiAgICAgIHZhciBlID0gImNsaWNrLm1hZ25pZmljUG9wdXAiOwogICAgICBjLm1haW5FbCA9IGEsIGMuaXRlbXMgPyAoYy5pc09iaiA9ICEwLCBhLm9mZihlKS5vbihlLCBkKSkgOiAoYy5pc09iaiA9ICExLCBjLmRlbGVnYXRlID8gYS5vZmYoZSkub24oZSwgYy5kZWxlZ2F0ZSwgZCkgOiAoYy5pdGVtcyA9IGEsIGEub2ZmKGUpLm9uKGUsIGQpKSk7CiAgICB9LAogICAgX29wZW5DbGljazogZnVuY3Rpb24gX29wZW5DbGljayhjLCBkLCBlKSB7CiAgICAgIHZhciBmID0gdm9pZCAwICE9PSBlLm1pZENsaWNrID8gZS5taWRDbGljayA6IGEubWFnbmlmaWNQb3B1cC5kZWZhdWx0cy5taWRDbGljazsKCiAgICAgIGlmIChmIHx8ICEoMiA9PT0gYy53aGljaCB8fCBjLmN0cmxLZXkgfHwgYy5tZXRhS2V5IHx8IGMuYWx0S2V5IHx8IGMuc2hpZnRLZXkpKSB7CiAgICAgICAgdmFyIGcgPSB2b2lkIDAgIT09IGUuZGlzYWJsZU9uID8gZS5kaXNhYmxlT24gOiBhLm1hZ25pZmljUG9wdXAuZGVmYXVsdHMuZGlzYWJsZU9uOwogICAgICAgIGlmIChnKSBpZiAoYS5pc0Z1bmN0aW9uKGcpKSB7CiAgICAgICAgICBpZiAoIWcuY2FsbChiKSkgcmV0dXJuICEwOwogICAgICAgIH0gZWxzZSBpZiAodi53aWR0aCgpIDwgZykgcmV0dXJuICEwOwogICAgICAgIGMudHlwZSAmJiAoYy5wcmV2ZW50RGVmYXVsdCgpLCBiLmlzT3BlbiAmJiBjLnN0b3BQcm9wYWdhdGlvbigpKSwgZS5lbCA9IGEoYy5tZnBFbCksIGUuZGVsZWdhdGUgJiYgKGUuaXRlbXMgPSBkLmZpbmQoZS5kZWxlZ2F0ZSkpLCBiLm9wZW4oZSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVTdGF0dXM6IGZ1bmN0aW9uIHVwZGF0ZVN0YXR1cyhhLCBkKSB7CiAgICAgIGlmIChiLnByZWxvYWRlcikgewogICAgICAgIGMgIT09IGEgJiYgYi5jb250YWluZXIucmVtb3ZlQ2xhc3MoIm1mcC1zLSIgKyBjKSwgZCB8fCAibG9hZGluZyIgIT09IGEgfHwgKGQgPSBiLnN0LnRMb2FkaW5nKTsKICAgICAgICB2YXIgZSA9IHsKICAgICAgICAgIHN0YXR1czogYSwKICAgICAgICAgIHRleHQ6IGQKICAgICAgICB9OwogICAgICAgIHkoIlVwZGF0ZVN0YXR1cyIsIGUpLCBhID0gZS5zdGF0dXMsIGQgPSBlLnRleHQsIGIucHJlbG9hZGVyLmh0bWwoZCksIGIucHJlbG9hZGVyLmZpbmQoImEiKS5vbigiY2xpY2siLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKICAgICAgICB9KSwgYi5jb250YWluZXIuYWRkQ2xhc3MoIm1mcC1zLSIgKyBhKSwgYyA9IGE7CiAgICAgIH0KICAgIH0sCiAgICBfY2hlY2tJZkNsb3NlOiBmdW5jdGlvbiBfY2hlY2tJZkNsb3NlKGMpIHsKICAgICAgaWYgKCFhKGMpLmhhc0NsYXNzKHMpKSB7CiAgICAgICAgdmFyIGQgPSBiLnN0LmNsb3NlT25Db250ZW50Q2xpY2ssCiAgICAgICAgICAgIGUgPSBiLnN0LmNsb3NlT25CZ0NsaWNrOwogICAgICAgIGlmIChkICYmIGUpIHJldHVybiAhMDsKICAgICAgICBpZiAoIWIuY29udGVudCB8fCBhKGMpLmhhc0NsYXNzKCJtZnAtY2xvc2UiKSB8fCBiLnByZWxvYWRlciAmJiBjID09PSBiLnByZWxvYWRlclswXSkgcmV0dXJuICEwOwoKICAgICAgICBpZiAoYyA9PT0gYi5jb250ZW50WzBdIHx8IGEuY29udGFpbnMoYi5jb250ZW50WzBdLCBjKSkgewogICAgICAgICAgaWYgKGQpIHJldHVybiAhMDsKICAgICAgICB9IGVsc2UgaWYgKGUgJiYgYS5jb250YWlucyhkb2N1bWVudCwgYykpIHJldHVybiAhMDsKCiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9LAogICAgX2FkZENsYXNzVG9NRlA6IGZ1bmN0aW9uIF9hZGRDbGFzc1RvTUZQKGEpIHsKICAgICAgYi5iZ092ZXJsYXkuYWRkQ2xhc3MoYSksIGIud3JhcC5hZGRDbGFzcyhhKTsKICAgIH0sCiAgICBfcmVtb3ZlQ2xhc3NGcm9tTUZQOiBmdW5jdGlvbiBfcmVtb3ZlQ2xhc3NGcm9tTUZQKGEpIHsKICAgICAgdGhpcy5iZ092ZXJsYXkucmVtb3ZlQ2xhc3MoYSksIGIud3JhcC5yZW1vdmVDbGFzcyhhKTsKICAgIH0sCiAgICBfaGFzU2Nyb2xsQmFyOiBmdW5jdGlvbiBfaGFzU2Nyb2xsQmFyKGEpIHsKICAgICAgcmV0dXJuIChiLmlzSUU3ID8gZC5oZWlnaHQoKSA6IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KSA+IChhIHx8IHYuaGVpZ2h0KCkpOwogICAgfSwKICAgIF9zZXRGb2N1czogZnVuY3Rpb24gX3NldEZvY3VzKCkgewogICAgICAoYi5zdC5mb2N1cyA/IGIuY29udGVudC5maW5kKGIuc3QuZm9jdXMpLmVxKDApIDogYi53cmFwKS5mb2N1cygpOwogICAgfSwKICAgIF9vbkZvY3VzSW46IGZ1bmN0aW9uIF9vbkZvY3VzSW4oYykgewogICAgICByZXR1cm4gYy50YXJnZXQgPT09IGIud3JhcFswXSB8fCBhLmNvbnRhaW5zKGIud3JhcFswXSwgYy50YXJnZXQpID8gdm9pZCAwIDogKGIuX3NldEZvY3VzKCksICExKTsKICAgIH0sCiAgICBfcGFyc2VNYXJrdXA6IGZ1bmN0aW9uIF9wYXJzZU1hcmt1cChiLCBjLCBkKSB7CiAgICAgIHZhciBlOwogICAgICBkLmRhdGEgJiYgKGMgPSBhLmV4dGVuZChkLmRhdGEsIGMpKSwgeShsLCBbYiwgYywgZF0pLCBhLmVhY2goYywgZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgICBpZiAodm9pZCAwID09PSBjIHx8IGMgPT09ICExKSByZXR1cm4gITA7CgogICAgICAgIGlmIChlID0gYS5zcGxpdCgiXyIpLCBlLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHZhciBkID0gYi5maW5kKHAgKyAiLSIgKyBlWzBdKTsKCiAgICAgICAgICBpZiAoZC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHZhciBmID0gZVsxXTsKICAgICAgICAgICAgInJlcGxhY2VXaXRoIiA9PT0gZiA/IGRbMF0gIT09IGNbMF0gJiYgZC5yZXBsYWNlV2l0aChjKSA6ICJpbWciID09PSBmID8gZC5pcygiaW1nIikgPyBkLmF0dHIoInNyYyIsIGMpIDogZC5yZXBsYWNlV2l0aCgnPGltZyBzcmM9IicgKyBjICsgJyIgY2xhc3M9IicgKyBkLmF0dHIoImNsYXNzIikgKyAnIiAvPicpIDogZC5hdHRyKGVbMV0sIGMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBiLmZpbmQocCArICItIiArIGEpLmh0bWwoYyk7CiAgICAgIH0pOwogICAgfSwKICAgIF9nZXRTY3JvbGxiYXJTaXplOiBmdW5jdGlvbiBfZ2V0U2Nyb2xsYmFyU2l6ZSgpIHsKICAgICAgaWYgKHZvaWQgMCA9PT0gYi5zY3JvbGxiYXJTaXplKSB7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgICAgICBhLnN0eWxlLmNzc1RleHQgPSAid2lkdGg6IDk5cHg7IGhlaWdodDogOTlweDsgb3ZlcmZsb3c6IHNjcm9sbDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IC05OTk5cHg7IiwgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKSwgYi5zY3JvbGxiYXJTaXplID0gYS5vZmZzZXRXaWR0aCAtIGEuY2xpZW50V2lkdGgsIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBiLnNjcm9sbGJhclNpemU7CiAgICB9CiAgfSwgYS5tYWduaWZpY1BvcHVwID0gewogICAgaW5zdGFuY2U6IG51bGwsCiAgICBwcm90bzogdC5wcm90b3R5cGUsCiAgICBtb2R1bGVzOiBbXSwKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oYiwgYykgewogICAgICByZXR1cm4gQSgpLCBiID0gYiA/IGEuZXh0ZW5kKCEwLCB7fSwgYikgOiB7fSwgYi5pc09iaiA9ICEwLCBiLmluZGV4ID0gYyB8fCAwLCB0aGlzLmluc3RhbmNlLm9wZW4oYik7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICByZXR1cm4gYS5tYWduaWZpY1BvcHVwLmluc3RhbmNlICYmIGEubWFnbmlmaWNQb3B1cC5pbnN0YW5jZS5jbG9zZSgpOwogICAgfSwKICAgIHJlZ2lzdGVyTW9kdWxlOiBmdW5jdGlvbiByZWdpc3Rlck1vZHVsZShiLCBjKSB7CiAgICAgIGMub3B0aW9ucyAmJiAoYS5tYWduaWZpY1BvcHVwLmRlZmF1bHRzW2JdID0gYy5vcHRpb25zKSwgYS5leHRlbmQodGhpcy5wcm90bywgYy5wcm90byksIHRoaXMubW9kdWxlcy5wdXNoKGIpOwogICAgfSwKICAgIGRlZmF1bHRzOiB7CiAgICAgIGRpc2FibGVPbjogMCwKICAgICAga2V5OiBudWxsLAogICAgICBtaWRDbGljazogITEsCiAgICAgIG1haW5DbGFzczogIiIsCiAgICAgIHByZWxvYWRlcjogITAsCiAgICAgIGZvY3VzOiAiIiwKICAgICAgY2xvc2VPbkNvbnRlbnRDbGljazogITEsCiAgICAgIGNsb3NlT25CZ0NsaWNrOiAhMCwKICAgICAgY2xvc2VCdG5JbnNpZGU6ICEwLAogICAgICBzaG93Q2xvc2VCdG46ICEwLAogICAgICBlbmFibGVFc2NhcGVLZXk6ICEwLAogICAgICBtb2RhbDogITEsCiAgICAgIGFsaWduVG9wOiAhMSwKICAgICAgcmVtb3ZhbERlbGF5OiAwLAogICAgICBwcmVwZW5kVG86IG51bGwsCiAgICAgIGZpeGVkQ29udGVudFBvczogImF1dG8iLAogICAgICBmaXhlZEJnUG9zOiAiYXV0byIsCiAgICAgIG92ZXJmbG93WTogImF1dG8iLAogICAgICBjbG9zZU1hcmt1cDogJzxidXR0b24gdGl0bGU9IiV0aXRsZSUiIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im1mcC1jbG9zZSI+JiMyMTU7PC9idXR0b24+JywKICAgICAgdENsb3NlOiAiQ2xvc2UgKEVzYykiLAogICAgICB0TG9hZGluZzogIkxvYWRpbmcuLi4iLAogICAgICBhdXRvRm9jdXNMYXN0OiAhMAogICAgfQogIH0sIGEuZm4ubWFnbmlmaWNQb3B1cCA9IGZ1bmN0aW9uIChjKSB7CiAgICBBKCk7CiAgICB2YXIgZCA9IGEodGhpcyk7CiAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGMpIHsKICAgICAgaWYgKCJvcGVuIiA9PT0gYykgewogICAgICAgIHZhciBlLAogICAgICAgICAgICBmID0gdSA/IGQuZGF0YSgibWFnbmlmaWNQb3B1cCIpIDogZFswXS5tYWduaWZpY1BvcHVwLAogICAgICAgICAgICBnID0gcGFyc2VJbnQoYXJndW1lbnRzWzFdLCAxMCkgfHwgMDsKICAgICAgICBmLml0ZW1zID8gZSA9IGYuaXRlbXNbZ10gOiAoZSA9IGQsIGYuZGVsZWdhdGUgJiYgKGUgPSBlLmZpbmQoZi5kZWxlZ2F0ZSkpLCBlID0gZS5lcShnKSksIGIuX29wZW5DbGljayh7CiAgICAgICAgICBtZnBFbDogZQogICAgICAgIH0sIGQsIGYpOwogICAgICB9IGVsc2UgYi5pc09wZW4gJiYgYltjXS5hcHBseShiLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsKICAgIH0gZWxzZSBjID0gYS5leHRlbmQoITAsIHt9LCBjKSwgdSA/IGQuZGF0YSgibWFnbmlmaWNQb3B1cCIsIGMpIDogZFswXS5tYWduaWZpY1BvcHVwID0gYywgYi5hZGRHcm91cChkLCBjKTsKICAgIHJldHVybiBkOwogIH07CgogIHZhciBDLAogICAgICBELAogICAgICBFLAogICAgICBGID0gImlubGluZSIsCiAgICAgIEcgPSBmdW5jdGlvbiBHKCkgewogICAgRSAmJiAoRC5hZnRlcihFLmFkZENsYXNzKEMpKS5kZXRhY2goKSwgRSA9IG51bGwpOwogIH07CgogIGEubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShGLCB7CiAgICBvcHRpb25zOiB7CiAgICAgIGhpZGRlbkNsYXNzOiAiaGlkZSIsCiAgICAgIG1hcmt1cDogIiIsCiAgICAgIHROb3RGb3VuZDogIkNvbnRlbnQgbm90IGZvdW5kIgogICAgfSwKICAgIHByb3RvOiB7CiAgICAgIGluaXRJbmxpbmU6IGZ1bmN0aW9uIGluaXRJbmxpbmUoKSB7CiAgICAgICAgYi50eXBlcy5wdXNoKEYpLCB3KGggKyAiLiIgKyBGLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBHKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGdldElubGluZTogZnVuY3Rpb24gZ2V0SW5saW5lKGMsIGQpIHsKICAgICAgICBpZiAoRygpLCBjLnNyYykgewogICAgICAgICAgdmFyIGUgPSBiLnN0LmlubGluZSwKICAgICAgICAgICAgICBmID0gYShjLnNyYyk7CgogICAgICAgICAgaWYgKGYubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBnID0gZlswXS5wYXJlbnROb2RlOwogICAgICAgICAgICBnICYmIGcudGFnTmFtZSAmJiAoRCB8fCAoQyA9IGUuaGlkZGVuQ2xhc3MsIEQgPSB4KEMpLCBDID0gIm1mcC0iICsgQyksIEUgPSBmLmFmdGVyKEQpLmRldGFjaCgpLnJlbW92ZUNsYXNzKEMpKSwgYi51cGRhdGVTdGF0dXMoInJlYWR5Iik7CiAgICAgICAgICB9IGVsc2UgYi51cGRhdGVTdGF0dXMoImVycm9yIiwgZS50Tm90Rm91bmQpLCBmID0gYSgiPGRpdj4iKTsKCiAgICAgICAgICByZXR1cm4gYy5pbmxpbmVFbGVtZW50ID0gZiwgZjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBiLnVwZGF0ZVN0YXR1cygicmVhZHkiKSwgYi5fcGFyc2VNYXJrdXAoZCwge30sIGMpLCBkOwogICAgICB9CiAgICB9CiAgfSk7CgogIHZhciBILAogICAgICBJID0gImFqYXgiLAogICAgICBKID0gZnVuY3Rpb24gSigpIHsKICAgIEggJiYgYShkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhIKTsKICB9LAogICAgICBLID0gZnVuY3Rpb24gSygpIHsKICAgIEooKSwgYi5yZXEgJiYgYi5yZXEuYWJvcnQoKTsKICB9OwoKICBhLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoSSwgewogICAgb3B0aW9uczogewogICAgICBzZXR0aW5nczogbnVsbCwKICAgICAgY3Vyc29yOiAibWZwLWFqYXgtY3VyIiwKICAgICAgdEVycm9yOiAnPGEgaHJlZj0iJXVybCUiPlRoZSBjb250ZW50PC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLicKICAgIH0sCiAgICBwcm90bzogewogICAgICBpbml0QWpheDogZnVuY3Rpb24gaW5pdEFqYXgoKSB7CiAgICAgICAgYi50eXBlcy5wdXNoKEkpLCBIID0gYi5zdC5hamF4LmN1cnNvciwgdyhoICsgIi4iICsgSSwgSyksIHcoIkJlZm9yZUNoYW5nZS4iICsgSSwgSyk7CiAgICAgIH0sCiAgICAgIGdldEFqYXg6IGZ1bmN0aW9uIGdldEFqYXgoYykgewogICAgICAgIEggJiYgYShkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhIKSwgYi51cGRhdGVTdGF0dXMoImxvYWRpbmciKTsKICAgICAgICB2YXIgZCA9IGEuZXh0ZW5kKHsKICAgICAgICAgIHVybDogYy5zcmMsCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGQsIGUsIGYpIHsKICAgICAgICAgICAgdmFyIGcgPSB7CiAgICAgICAgICAgICAgZGF0YTogZCwKICAgICAgICAgICAgICB4aHI6IGYKICAgICAgICAgICAgfTsKICAgICAgICAgICAgeSgiUGFyc2VBamF4IiwgZyksIGIuYXBwZW5kQ29udGVudChhKGcuZGF0YSksIEkpLCBjLmZpbmlzaGVkID0gITAsIEooKSwgYi5fc2V0Rm9jdXMoKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgYi53cmFwLmFkZENsYXNzKHEpOwogICAgICAgICAgICB9LCAxNiksIGIudXBkYXRlU3RhdHVzKCJyZWFkeSIpLCB5KCJBamF4Q29udGVudEFkZGVkIik7CiAgICAgICAgICB9LAogICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKCkgewogICAgICAgICAgICBKKCksIGMuZmluaXNoZWQgPSBjLmxvYWRFcnJvciA9ICEwLCBiLnVwZGF0ZVN0YXR1cygiZXJyb3IiLCBiLnN0LmFqYXgudEVycm9yLnJlcGxhY2UoIiV1cmwlIiwgYy5zcmMpKTsKICAgICAgICAgIH0KICAgICAgICB9LCBiLnN0LmFqYXguc2V0dGluZ3MpOwogICAgICAgIHJldHVybiBiLnJlcSA9IGEuYWpheChkKSwgIiI7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgdmFyIEwsCiAgICAgIE0gPSBmdW5jdGlvbiBNKGMpIHsKICAgIGlmIChjLmRhdGEgJiYgdm9pZCAwICE9PSBjLmRhdGEudGl0bGUpIHJldHVybiBjLmRhdGEudGl0bGU7CiAgICB2YXIgZCA9IGIuc3QuaW1hZ2UudGl0bGVTcmM7CgogICAgaWYgKGQpIHsKICAgICAgaWYgKGEuaXNGdW5jdGlvbihkKSkgcmV0dXJuIGQuY2FsbChiLCBjKTsKICAgICAgaWYgKGMuZWwpIHJldHVybiBjLmVsLmF0dHIoZCkgfHwgIiI7CiAgICB9CgogICAgcmV0dXJuICIiOwogIH07CgogIGEubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZSgiaW1hZ2UiLCB7CiAgICBvcHRpb25zOiB7CiAgICAgIG1hcmt1cDogJzxkaXYgY2xhc3M9Im1mcC1maWd1cmUiPjxkaXYgY2xhc3M9Im1mcC1jbG9zZSI+PC9kaXY+PGZpZ3VyZT48ZGl2IGNsYXNzPSJtZnAtaW1nIj48L2Rpdj48ZmlnY2FwdGlvbj48ZGl2IGNsYXNzPSJtZnAtYm90dG9tLWJhciI+PGRpdiBjbGFzcz0ibWZwLXRpdGxlIj48L2Rpdj48ZGl2IGNsYXNzPSJtZnAtY291bnRlciI+PC9kaXY+PC9kaXY+PC9maWdjYXB0aW9uPjwvZmlndXJlPjwvZGl2PicsCiAgICAgIGN1cnNvcjogIm1mcC16b29tLW91dC1jdXIiLAogICAgICB0aXRsZVNyYzogInRpdGxlIiwKICAgICAgdmVydGljYWxGaXQ6ICEwLAogICAgICB0RXJyb3I6ICc8YSBocmVmPSIldXJsJSI+VGhlIGltYWdlPC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLicKICAgIH0sCiAgICBwcm90bzogewogICAgICBpbml0SW1hZ2U6IGZ1bmN0aW9uIGluaXRJbWFnZSgpIHsKICAgICAgICB2YXIgYyA9IGIuc3QuaW1hZ2UsCiAgICAgICAgICAgIGQgPSAiLmltYWdlIjsKICAgICAgICBiLnR5cGVzLnB1c2goImltYWdlIiksIHcobSArIGQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICJpbWFnZSIgPT09IGIuY3Vyckl0ZW0udHlwZSAmJiBjLmN1cnNvciAmJiBhKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKGMuY3Vyc29yKTsKICAgICAgICB9KSwgdyhoICsgZCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgYy5jdXJzb3IgJiYgYShkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhjLmN1cnNvciksIHYub2ZmKCJyZXNpemUiICsgcCk7CiAgICAgICAgfSksIHcoIlJlc2l6ZSIgKyBkLCBiLnJlc2l6ZUltYWdlKSwgYi5pc0xvd0lFICYmIHcoIkFmdGVyQ2hhbmdlIiwgYi5yZXNpemVJbWFnZSk7CiAgICAgIH0sCiAgICAgIHJlc2l6ZUltYWdlOiBmdW5jdGlvbiByZXNpemVJbWFnZSgpIHsKICAgICAgICB2YXIgYSA9IGIuY3Vyckl0ZW07CgogICAgICAgIGlmIChhICYmIGEuaW1nICYmIGIuc3QuaW1hZ2UudmVydGljYWxGaXQpIHsKICAgICAgICAgIHZhciBjID0gMDsKICAgICAgICAgIGIuaXNMb3dJRSAmJiAoYyA9IHBhcnNlSW50KGEuaW1nLmNzcygicGFkZGluZy10b3AiKSwgMTApICsgcGFyc2VJbnQoYS5pbWcuY3NzKCJwYWRkaW5nLWJvdHRvbSIpLCAxMCkpLCBhLmltZy5jc3MoIm1heC1oZWlnaHQiLCBiLndIIC0gYyk7CiAgICAgICAgfQogICAgICB9LAogICAgICBfb25JbWFnZUhhc1NpemU6IGZ1bmN0aW9uIF9vbkltYWdlSGFzU2l6ZShhKSB7CiAgICAgICAgYS5pbWcgJiYgKGEuaGFzU2l6ZSA9ICEwLCBMICYmIGNsZWFySW50ZXJ2YWwoTCksIGEuaXNDaGVja2luZ0ltZ1NpemUgPSAhMSwgeSgiSW1hZ2VIYXNTaXplIiwgYSksIGEuaW1nSGlkZGVuICYmIChiLmNvbnRlbnQgJiYgYi5jb250ZW50LnJlbW92ZUNsYXNzKCJtZnAtbG9hZGluZyIpLCBhLmltZ0hpZGRlbiA9ICExKSk7CiAgICAgIH0sCiAgICAgIGZpbmRJbWFnZVNpemU6IGZ1bmN0aW9uIGZpbmRJbWFnZVNpemUoYSkgewogICAgICAgIHZhciBjID0gMCwKICAgICAgICAgICAgZCA9IGEuaW1nWzBdLAogICAgICAgICAgICBlID0gZnVuY3Rpb24gZShmKSB7CiAgICAgICAgICBMICYmIGNsZWFySW50ZXJ2YWwoTCksIEwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBkLm5hdHVyYWxXaWR0aCA+IDAgPyB2b2lkIGIuX29uSW1hZ2VIYXNTaXplKGEpIDogKGMgPiAyMDAgJiYgY2xlYXJJbnRlcnZhbChMKSwgYysrLCB2b2lkICgzID09PSBjID8gZSgxMCkgOiA0MCA9PT0gYyA/IGUoNTApIDogMTAwID09PSBjICYmIGUoNTAwKSkpOwogICAgICAgICAgfSwgZik7CiAgICAgICAgfTsKCiAgICAgICAgZSgxKTsKICAgICAgfSwKICAgICAgZ2V0SW1hZ2U6IGZ1bmN0aW9uIGdldEltYWdlKGMsIGQpIHsKICAgICAgICB2YXIgZSA9IDAsCiAgICAgICAgICAgIGYgPSBmdW5jdGlvbiBmKCkgewogICAgICAgICAgYyAmJiAoYy5pbWdbMF0uY29tcGxldGUgPyAoYy5pbWcub2ZmKCIubWZwbG9hZGVyIiksIGMgPT09IGIuY3Vyckl0ZW0gJiYgKGIuX29uSW1hZ2VIYXNTaXplKGMpLCBiLnVwZGF0ZVN0YXR1cygicmVhZHkiKSksIGMuaGFzU2l6ZSA9ICEwLCBjLmxvYWRlZCA9ICEwLCB5KCJJbWFnZUxvYWRDb21wbGV0ZSIpKSA6IChlKyssIDIwMCA+IGUgPyBzZXRUaW1lb3V0KGYsIDEwMCkgOiBnKCkpKTsKICAgICAgICB9LAogICAgICAgICAgICBnID0gZnVuY3Rpb24gZygpIHsKICAgICAgICAgIGMgJiYgKGMuaW1nLm9mZigiLm1mcGxvYWRlciIpLCBjID09PSBiLmN1cnJJdGVtICYmIChiLl9vbkltYWdlSGFzU2l6ZShjKSwgYi51cGRhdGVTdGF0dXMoImVycm9yIiwgaC50RXJyb3IucmVwbGFjZSgiJXVybCUiLCBjLnNyYykpKSwgYy5oYXNTaXplID0gITAsIGMubG9hZGVkID0gITAsIGMubG9hZEVycm9yID0gITApOwogICAgICAgIH0sCiAgICAgICAgICAgIGggPSBiLnN0LmltYWdlLAogICAgICAgICAgICBpID0gZC5maW5kKCIubWZwLWltZyIpOwoKICAgICAgICBpZiAoaS5sZW5ndGgpIHsKICAgICAgICAgIHZhciBqID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CiAgICAgICAgICBqLmNsYXNzTmFtZSA9ICJtZnAtaW1nIiwgYy5lbCAmJiBjLmVsLmZpbmQoImltZyIpLmxlbmd0aCAmJiAoai5hbHQgPSBjLmVsLmZpbmQoImltZyIpLmF0dHIoImFsdCIpKSwgYy5pbWcgPSBhKGopLm9uKCJsb2FkLm1mcGxvYWRlciIsIGYpLm9uKCJlcnJvci5tZnBsb2FkZXIiLCBnKSwgai5zcmMgPSBjLnNyYywgaS5pcygiaW1nIikgJiYgKGMuaW1nID0gYy5pbWcuY2xvbmUoKSksIGogPSBjLmltZ1swXSwgai5uYXR1cmFsV2lkdGggPiAwID8gYy5oYXNTaXplID0gITAgOiBqLndpZHRoIHx8IChjLmhhc1NpemUgPSAhMSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYi5fcGFyc2VNYXJrdXAoZCwgewogICAgICAgICAgdGl0bGU6IE0oYyksCiAgICAgICAgICBpbWdfcmVwbGFjZVdpdGg6IGMuaW1nCiAgICAgICAgfSwgYyksIGIucmVzaXplSW1hZ2UoKSwgYy5oYXNTaXplID8gKEwgJiYgY2xlYXJJbnRlcnZhbChMKSwgYy5sb2FkRXJyb3IgPyAoZC5hZGRDbGFzcygibWZwLWxvYWRpbmciKSwgYi51cGRhdGVTdGF0dXMoImVycm9yIiwgaC50RXJyb3IucmVwbGFjZSgiJXVybCUiLCBjLnNyYykpKSA6IChkLnJlbW92ZUNsYXNzKCJtZnAtbG9hZGluZyIpLCBiLnVwZGF0ZVN0YXR1cygicmVhZHkiKSksIGQpIDogKGIudXBkYXRlU3RhdHVzKCJsb2FkaW5nIiksIGMubG9hZGluZyA9ICEwLCBjLmhhc1NpemUgfHwgKGMuaW1nSGlkZGVuID0gITAsIGQuYWRkQ2xhc3MoIm1mcC1sb2FkaW5nIiksIGIuZmluZEltYWdlU2l6ZShjKSksIGQpOwogICAgICB9CiAgICB9CiAgfSk7CgogIHZhciBOLAogICAgICBPID0gZnVuY3Rpb24gTygpIHsKICAgIHJldHVybiB2b2lkIDAgPT09IE4gJiYgKE4gPSB2b2lkIDAgIT09IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKS5zdHlsZS5Nb3pUcmFuc2Zvcm0pLCBOOwogIH07CgogIGEubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZSgiem9vbSIsIHsKICAgIG9wdGlvbnM6IHsKICAgICAgZW5hYmxlZDogITEsCiAgICAgIGVhc2luZzogImVhc2UtaW4tb3V0IiwKICAgICAgZHVyYXRpb246IDMwMCwKICAgICAgb3BlbmVyOiBmdW5jdGlvbiBvcGVuZXIoYSkgewogICAgICAgIHJldHVybiBhLmlzKCJpbWciKSA/IGEgOiBhLmZpbmQoImltZyIpOwogICAgICB9CiAgICB9LAogICAgcHJvdG86IHsKICAgICAgaW5pdFpvb206IGZ1bmN0aW9uIGluaXRab29tKCkgewogICAgICAgIHZhciBhLAogICAgICAgICAgICBjID0gYi5zdC56b29tLAogICAgICAgICAgICBkID0gIi56b29tIjsKCiAgICAgICAgaWYgKGMuZW5hYmxlZCAmJiBiLnN1cHBvcnRzVHJhbnNpdGlvbikgewogICAgICAgICAgdmFyIGUsCiAgICAgICAgICAgICAgZiwKICAgICAgICAgICAgICBnID0gYy5kdXJhdGlvbiwKICAgICAgICAgICAgICBqID0gZnVuY3Rpb24gaihhKSB7CiAgICAgICAgICAgIHZhciBiID0gYS5jbG9uZSgpLnJlbW92ZUF0dHIoInN0eWxlIikucmVtb3ZlQXR0cigiY2xhc3MiKS5hZGRDbGFzcygibWZwLWFuaW1hdGVkLWltYWdlIiksCiAgICAgICAgICAgICAgICBkID0gImFsbCAiICsgYy5kdXJhdGlvbiAvIDFlMyArICJzICIgKyBjLmVhc2luZywKICAgICAgICAgICAgICAgIGUgPSB7CiAgICAgICAgICAgICAgcG9zaXRpb246ICJmaXhlZCIsCiAgICAgICAgICAgICAgekluZGV4OiA5OTk5LAogICAgICAgICAgICAgIGxlZnQ6IDAsCiAgICAgICAgICAgICAgdG9wOiAwLAogICAgICAgICAgICAgICItd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHkiOiAiaGlkZGVuIgogICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZiA9ICJ0cmFuc2l0aW9uIjsKICAgICAgICAgICAgcmV0dXJuIGVbIi13ZWJraXQtIiArIGZdID0gZVsiLW1vei0iICsgZl0gPSBlWyItby0iICsgZl0gPSBlW2ZdID0gZCwgYi5jc3MoZSksIGI7CiAgICAgICAgICB9LAogICAgICAgICAgICAgIGsgPSBmdW5jdGlvbiBrKCkgewogICAgICAgICAgICBiLmNvbnRlbnQuY3NzKCJ2aXNpYmlsaXR5IiwgInZpc2libGUiKTsKICAgICAgICAgIH07CgogICAgICAgICAgdygiQnVpbGRDb250cm9scyIgKyBkLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChiLl9hbGxvd1pvb20oKSkgewogICAgICAgICAgICAgIGlmIChjbGVhclRpbWVvdXQoZSksIGIuY29udGVudC5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIiksIGEgPSBiLl9nZXRJdGVtVG9ab29tKCksICFhKSByZXR1cm4gdm9pZCBrKCk7CiAgICAgICAgICAgICAgZiA9IGooYSksIGYuY3NzKGIuX2dldE9mZnNldCgpKSwgYi53cmFwLmFwcGVuZChmKSwgZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgZi5jc3MoYi5fZ2V0T2Zmc2V0KCEwKSksIGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgaygpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBmLnJlbW92ZSgpLCBhID0gZiA9IG51bGwsIHkoIlpvb21BbmltYXRpb25FbmRlZCIpOwogICAgICAgICAgICAgICAgICB9LCAxNik7CiAgICAgICAgICAgICAgICB9LCBnKTsKICAgICAgICAgICAgICB9LCAxNik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLCB3KGkgKyBkLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChiLl9hbGxvd1pvb20oKSkgewogICAgICAgICAgICAgIGlmIChjbGVhclRpbWVvdXQoZSksIGIuc3QucmVtb3ZhbERlbGF5ID0gZywgIWEpIHsKICAgICAgICAgICAgICAgIGlmIChhID0gYi5fZ2V0SXRlbVRvWm9vbSgpLCAhYSkgcmV0dXJuOwogICAgICAgICAgICAgICAgZiA9IGooYSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmLmNzcyhiLl9nZXRPZmZzZXQoITApKSwgYi53cmFwLmFwcGVuZChmKSwgYi5jb250ZW50LmNzcygidmlzaWJpbGl0eSIsICJoaWRkZW4iKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBmLmNzcyhiLl9nZXRPZmZzZXQoKSk7CiAgICAgICAgICAgICAgfSwgMTYpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSwgdyhoICsgZCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBiLl9hbGxvd1pvb20oKSAmJiAoaygpLCBmICYmIGYucmVtb3ZlKCksIGEgPSBudWxsKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgX2FsbG93Wm9vbTogZnVuY3Rpb24gX2FsbG93Wm9vbSgpIHsKICAgICAgICByZXR1cm4gImltYWdlIiA9PT0gYi5jdXJySXRlbS50eXBlOwogICAgICB9LAogICAgICBfZ2V0SXRlbVRvWm9vbTogZnVuY3Rpb24gX2dldEl0ZW1Ub1pvb20oKSB7CiAgICAgICAgcmV0dXJuIGIuY3Vyckl0ZW0uaGFzU2l6ZSA/IGIuY3Vyckl0ZW0uaW1nIDogITE7CiAgICAgIH0sCiAgICAgIF9nZXRPZmZzZXQ6IGZ1bmN0aW9uIF9nZXRPZmZzZXQoYykgewogICAgICAgIHZhciBkOwogICAgICAgIGQgPSBjID8gYi5jdXJySXRlbS5pbWcgOiBiLnN0Lnpvb20ub3BlbmVyKGIuY3Vyckl0ZW0uZWwgfHwgYi5jdXJySXRlbSk7CiAgICAgICAgdmFyIGUgPSBkLm9mZnNldCgpLAogICAgICAgICAgICBmID0gcGFyc2VJbnQoZC5jc3MoInBhZGRpbmctdG9wIiksIDEwKSwKICAgICAgICAgICAgZyA9IHBhcnNlSW50KGQuY3NzKCJwYWRkaW5nLWJvdHRvbSIpLCAxMCk7CiAgICAgICAgZS50b3AgLT0gYSh3aW5kb3cpLnNjcm9sbFRvcCgpIC0gZjsKICAgICAgICB2YXIgaCA9IHsKICAgICAgICAgIHdpZHRoOiBkLndpZHRoKCksCiAgICAgICAgICBoZWlnaHQ6ICh1ID8gZC5pbm5lckhlaWdodCgpIDogZFswXS5vZmZzZXRIZWlnaHQpIC0gZyAtIGYKICAgICAgICB9OwogICAgICAgIHJldHVybiBPKCkgPyBoWyItbW96LXRyYW5zZm9ybSJdID0gaC50cmFuc2Zvcm0gPSAidHJhbnNsYXRlKCIgKyBlLmxlZnQgKyAicHgsIiArIGUudG9wICsgInB4KSIgOiAoaC5sZWZ0ID0gZS5sZWZ0LCBoLnRvcCA9IGUudG9wKSwgaDsKICAgICAgfQogICAgfQogIH0pOwoKICB2YXIgUCA9ICJpZnJhbWUiLAogICAgICBRID0gIi8vYWJvdXQ6YmxhbmsiLAogICAgICBSID0gZnVuY3Rpb24gUihhKSB7CiAgICBpZiAoYi5jdXJyVGVtcGxhdGVbUF0pIHsKICAgICAgdmFyIGMgPSBiLmN1cnJUZW1wbGF0ZVtQXS5maW5kKCJpZnJhbWUiKTsKICAgICAgYy5sZW5ndGggJiYgKGEgfHwgKGNbMF0uc3JjID0gUSksIGIuaXNJRTggJiYgYy5jc3MoImRpc3BsYXkiLCBhID8gImJsb2NrIiA6ICJub25lIikpOwogICAgfQogIH07CgogIGEubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShQLCB7CiAgICBvcHRpb25zOiB7CiAgICAgIG1hcmt1cDogJzxkaXYgY2xhc3M9Im1mcC1pZnJhbWUtc2NhbGVyIj48ZGl2IGNsYXNzPSJtZnAtY2xvc2UiPjwvZGl2PjxpZnJhbWUgY2xhc3M9Im1mcC1pZnJhbWUiIHNyYz0iLy9hYm91dDpibGFuayIgZnJhbWVib3JkZXI9IjAiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT48L2Rpdj4nLAogICAgICBzcmNBY3Rpb246ICJpZnJhbWVfc3JjIiwKICAgICAgcGF0dGVybnM6IHsKICAgICAgICB5b3V0dWJlOiB7CiAgICAgICAgICBpbmRleDogInlvdXR1YmUuY29tIiwKICAgICAgICAgIGlkOiAidj0iLAogICAgICAgICAgc3JjOiAiLy93d3cueW91dHViZS5jb20vZW1iZWQvJWlkJT9hdXRvcGxheT0xIgogICAgICAgIH0sCiAgICAgICAgdmltZW86IHsKICAgICAgICAgIGluZGV4OiAidmltZW8uY29tLyIsCiAgICAgICAgICBpZDogIi8iLAogICAgICAgICAgc3JjOiAiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyVpZCU/YXV0b3BsYXk9MSIKICAgICAgICB9LAogICAgICAgIGdtYXBzOiB7CiAgICAgICAgICBpbmRleDogIi8vbWFwcy5nb29nbGUuIiwKICAgICAgICAgIHNyYzogIiVpZCUmb3V0cHV0PWVtYmVkIgogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHByb3RvOiB7CiAgICAgIGluaXRJZnJhbWU6IGZ1bmN0aW9uIGluaXRJZnJhbWUoKSB7CiAgICAgICAgYi50eXBlcy5wdXNoKFApLCB3KCJCZWZvcmVDaGFuZ2UiLCBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICAgICAgYiAhPT0gYyAmJiAoYiA9PT0gUCA/IFIoKSA6IGMgPT09IFAgJiYgUighMCkpOwogICAgICAgIH0pLCB3KGggKyAiLiIgKyBQLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBSKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGdldElmcmFtZTogZnVuY3Rpb24gZ2V0SWZyYW1lKGMsIGQpIHsKICAgICAgICB2YXIgZSA9IGMuc3JjLAogICAgICAgICAgICBmID0gYi5zdC5pZnJhbWU7CiAgICAgICAgYS5lYWNoKGYucGF0dGVybnMsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBlLmluZGV4T2YodGhpcy5pbmRleCkgPiAtMSA/ICh0aGlzLmlkICYmIChlID0gInN0cmluZyIgPT0gdHlwZW9mIHRoaXMuaWQgPyBlLnN1YnN0cihlLmxhc3RJbmRleE9mKHRoaXMuaWQpICsgdGhpcy5pZC5sZW5ndGgsIGUubGVuZ3RoKSA6IHRoaXMuaWQuY2FsbCh0aGlzLCBlKSksIGUgPSB0aGlzLnNyYy5yZXBsYWNlKCIlaWQlIiwgZSksICExKSA6IHZvaWQgMDsKICAgICAgICB9KTsKICAgICAgICB2YXIgZyA9IHt9OwogICAgICAgIHJldHVybiBmLnNyY0FjdGlvbiAmJiAoZ1tmLnNyY0FjdGlvbl0gPSBlKSwgYi5fcGFyc2VNYXJrdXAoZCwgZywgYyksIGIudXBkYXRlU3RhdHVzKCJyZWFkeSIpLCBkOwogICAgICB9CiAgICB9CiAgfSk7CgogIHZhciBTID0gZnVuY3Rpb24gUyhhKSB7CiAgICB2YXIgYyA9IGIuaXRlbXMubGVuZ3RoOwogICAgcmV0dXJuIGEgPiBjIC0gMSA/IGEgLSBjIDogMCA+IGEgPyBjICsgYSA6IGE7CiAgfSwKICAgICAgVCA9IGZ1bmN0aW9uIFQoYSwgYiwgYykgewogICAgcmV0dXJuIGEucmVwbGFjZSgvJWN1cnIlL2dpLCBiICsgMSkucmVwbGFjZSgvJXRvdGFsJS9naSwgYyk7CiAgfTsKCiAgYS5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKCJnYWxsZXJ5IiwgewogICAgb3B0aW9uczogewogICAgICBlbmFibGVkOiAhMSwKICAgICAgYXJyb3dNYXJrdXA6ICc8YnV0dG9uIHRpdGxlPSIldGl0bGUlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJtZnAtYXJyb3cgbWZwLWFycm93LSVkaXIlIj48L2J1dHRvbj4nLAogICAgICBwcmVsb2FkOiBbMCwgMl0sCiAgICAgIG5hdmlnYXRlQnlJbWdDbGljazogITAsCiAgICAgIGFycm93czogITAsCiAgICAgIHRQcmV2OiAiUHJldmlvdXMgKExlZnQgYXJyb3cga2V5KSIsCiAgICAgIHROZXh0OiAiTmV4dCAoUmlnaHQgYXJyb3cga2V5KSIsCiAgICAgIHRDb3VudGVyOiAiJWN1cnIlIG9mICV0b3RhbCUiCiAgICB9LAogICAgcHJvdG86IHsKICAgICAgaW5pdEdhbGxlcnk6IGZ1bmN0aW9uIGluaXRHYWxsZXJ5KCkgewogICAgICAgIHZhciBjID0gYi5zdC5nYWxsZXJ5LAogICAgICAgICAgICBlID0gIi5tZnAtZ2FsbGVyeSIsCiAgICAgICAgICAgIGcgPSBCb29sZWFuKGEuZm4ubWZwRmFzdENsaWNrKTsKICAgICAgICByZXR1cm4gYi5kaXJlY3Rpb24gPSAhMCwgYyAmJiBjLmVuYWJsZWQgPyAoZiArPSAiIG1mcC1nYWxsZXJ5IiwgdyhtICsgZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgYy5uYXZpZ2F0ZUJ5SW1nQ2xpY2sgJiYgYi53cmFwLm9uKCJjbGljayIgKyBlLCAiLm1mcC1pbWciLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBiLml0ZW1zLmxlbmd0aCA+IDEgPyAoYi5uZXh0KCksICExKSA6IHZvaWQgMDsKICAgICAgICAgIH0pLCBkLm9uKCJrZXlkb3duIiArIGUsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIDM3ID09PSBhLmtleUNvZGUgPyBiLnByZXYoKSA6IDM5ID09PSBhLmtleUNvZGUgJiYgYi5uZXh0KCk7CiAgICAgICAgICB9KTsKICAgICAgICB9KSwgdygiVXBkYXRlU3RhdHVzIiArIGUsIGZ1bmN0aW9uIChhLCBjKSB7CiAgICAgICAgICBjLnRleHQgJiYgKGMudGV4dCA9IFQoYy50ZXh0LCBiLmN1cnJJdGVtLmluZGV4LCBiLml0ZW1zLmxlbmd0aCkpOwogICAgICAgIH0pLCB3KGwgKyBlLCBmdW5jdGlvbiAoYSwgZCwgZSwgZikgewogICAgICAgICAgdmFyIGcgPSBiLml0ZW1zLmxlbmd0aDsKICAgICAgICAgIGUuY291bnRlciA9IGcgPiAxID8gVChjLnRDb3VudGVyLCBmLmluZGV4LCBnKSA6ICIiOwogICAgICAgIH0pLCB3KCJCdWlsZENvbnRyb2xzIiArIGUsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChiLml0ZW1zLmxlbmd0aCA+IDEgJiYgYy5hcnJvd3MgJiYgIWIuYXJyb3dMZWZ0KSB7CiAgICAgICAgICAgIHZhciBkID0gYy5hcnJvd01hcmt1cCwKICAgICAgICAgICAgICAgIGUgPSBiLmFycm93TGVmdCA9IGEoZC5yZXBsYWNlKC8ldGl0bGUlL2dpLCBjLnRQcmV2KS5yZXBsYWNlKC8lZGlyJS9naSwgImxlZnQiKSkuYWRkQ2xhc3MocyksCiAgICAgICAgICAgICAgICBmID0gYi5hcnJvd1JpZ2h0ID0gYShkLnJlcGxhY2UoLyV0aXRsZSUvZ2ksIGMudE5leHQpLnJlcGxhY2UoLyVkaXIlL2dpLCAicmlnaHQiKSkuYWRkQ2xhc3MocyksCiAgICAgICAgICAgICAgICBoID0gZyA/ICJtZnBGYXN0Q2xpY2siIDogImNsaWNrIjsKICAgICAgICAgICAgZVtoXShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgYi5wcmV2KCk7CiAgICAgICAgICAgIH0pLCBmW2hdKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBiLm5leHQoKTsKICAgICAgICAgICAgfSksIGIuaXNJRTcgJiYgKHgoImIiLCBlWzBdLCAhMSwgITApLCB4KCJhIiwgZVswXSwgITEsICEwKSwgeCgiYiIsIGZbMF0sICExLCAhMCksIHgoImEiLCBmWzBdLCAhMSwgITApKSwgYi5jb250YWluZXIuYXBwZW5kKGUuYWRkKGYpKTsKICAgICAgICAgIH0KICAgICAgICB9KSwgdyhuICsgZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgYi5fcHJlbG9hZFRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KGIuX3ByZWxvYWRUaW1lb3V0KSwgYi5fcHJlbG9hZFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYi5wcmVsb2FkTmVhcmJ5SW1hZ2VzKCksIGIuX3ByZWxvYWRUaW1lb3V0ID0gbnVsbDsKICAgICAgICAgIH0sIDE2KTsKICAgICAgICB9KSwgdm9pZCB3KGggKyBlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBkLm9mZihlKSwgYi53cmFwLm9mZigiY2xpY2siICsgZSksIGIuYXJyb3dMZWZ0ICYmIGcgJiYgYi5hcnJvd0xlZnQuYWRkKGIuYXJyb3dSaWdodCkuZGVzdHJveU1mcEZhc3RDbGljaygpLCBiLmFycm93UmlnaHQgPSBiLmFycm93TGVmdCA9IG51bGw7CiAgICAgICAgfSkpIDogITE7CiAgICAgIH0sCiAgICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgICAgYi5kaXJlY3Rpb24gPSAhMCwgYi5pbmRleCA9IFMoYi5pbmRleCArIDEpLCBiLnVwZGF0ZUl0ZW1IVE1MKCk7CiAgICAgIH0sCiAgICAgIHByZXY6IGZ1bmN0aW9uIHByZXYoKSB7CiAgICAgICAgYi5kaXJlY3Rpb24gPSAhMSwgYi5pbmRleCA9IFMoYi5pbmRleCAtIDEpLCBiLnVwZGF0ZUl0ZW1IVE1MKCk7CiAgICAgIH0sCiAgICAgIGdvVG86IGZ1bmN0aW9uIGdvVG8oYSkgewogICAgICAgIGIuZGlyZWN0aW9uID0gYSA+PSBiLmluZGV4LCBiLmluZGV4ID0gYSwgYi51cGRhdGVJdGVtSFRNTCgpOwogICAgICB9LAogICAgICBwcmVsb2FkTmVhcmJ5SW1hZ2VzOiBmdW5jdGlvbiBwcmVsb2FkTmVhcmJ5SW1hZ2VzKCkgewogICAgICAgIHZhciBhLAogICAgICAgICAgICBjID0gYi5zdC5nYWxsZXJ5LnByZWxvYWQsCiAgICAgICAgICAgIGQgPSBNYXRoLm1pbihjWzBdLCBiLml0ZW1zLmxlbmd0aCksCiAgICAgICAgICAgIGUgPSBNYXRoLm1pbihjWzFdLCBiLml0ZW1zLmxlbmd0aCk7CgogICAgICAgIGZvciAoYSA9IDE7IGEgPD0gKGIuZGlyZWN0aW9uID8gZSA6IGQpOyBhKyspIHsKICAgICAgICAgIGIuX3ByZWxvYWRJdGVtKGIuaW5kZXggKyBhKTsKICAgICAgICB9CgogICAgICAgIGZvciAoYSA9IDE7IGEgPD0gKGIuZGlyZWN0aW9uID8gZCA6IGUpOyBhKyspIHsKICAgICAgICAgIGIuX3ByZWxvYWRJdGVtKGIuaW5kZXggLSBhKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIF9wcmVsb2FkSXRlbTogZnVuY3Rpb24gX3ByZWxvYWRJdGVtKGMpIHsKICAgICAgICBpZiAoYyA9IFMoYyksICFiLml0ZW1zW2NdLnByZWxvYWRlZCkgewogICAgICAgICAgdmFyIGQgPSBiLml0ZW1zW2NdOwogICAgICAgICAgZC5wYXJzZWQgfHwgKGQgPSBiLnBhcnNlRWwoYykpLCB5KCJMYXp5TG9hZCIsIGQpLCAiaW1hZ2UiID09PSBkLnR5cGUgJiYgKGQuaW1nID0gYSgnPGltZyBjbGFzcz0ibWZwLWltZyIgLz4nKS5vbigibG9hZC5tZnBsb2FkZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGQuaGFzU2l6ZSA9ICEwOwogICAgICAgICAgfSkub24oImVycm9yLm1mcGxvYWRlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZC5oYXNTaXplID0gITAsIGQubG9hZEVycm9yID0gITAsIHkoIkxhenlMb2FkRXJyb3IiLCBkKTsKICAgICAgICAgIH0pLmF0dHIoInNyYyIsIGQuc3JjKSksIGQucHJlbG9hZGVkID0gITA7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSk7CiAgdmFyIFUgPSAicmV0aW5hIjsKICBhLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoVSwgewogICAgb3B0aW9uczogewogICAgICByZXBsYWNlU3JjOiBmdW5jdGlvbiByZXBsYWNlU3JjKGEpIHsKICAgICAgICByZXR1cm4gYS5zcmMucmVwbGFjZSgvXC5cdyskLywgZnVuY3Rpb24gKGEpIHsKICAgICAgICAgIHJldHVybiAiQDJ4IiArIGE7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHJhdGlvOiAxCiAgICB9LAogICAgcHJvdG86IHsKICAgICAgaW5pdFJldGluYTogZnVuY3Rpb24gaW5pdFJldGluYSgpIHsKICAgICAgICBpZiAod2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxKSB7CiAgICAgICAgICB2YXIgYSA9IGIuc3QucmV0aW5hLAogICAgICAgICAgICAgIGMgPSBhLnJhdGlvOwogICAgICAgICAgYyA9IGlzTmFOKGMpID8gYygpIDogYywgYyA+IDEgJiYgKHcoIkltYWdlSGFzU2l6ZS4iICsgVSwgZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgYi5pbWcuY3NzKHsKICAgICAgICAgICAgICAibWF4LXdpZHRoIjogYi5pbWdbMF0ubmF0dXJhbFdpZHRoIC8gYywKICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSksIHcoIkVsZW1lbnRQYXJzZS4iICsgVSwgZnVuY3Rpb24gKGIsIGQpIHsKICAgICAgICAgICAgZC5zcmMgPSBhLnJlcGxhY2VTcmMoZCwgYyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSksIGZ1bmN0aW9uICgpIHsKICAgIHZhciBiID0gMWUzLAogICAgICAgIGMgPSAib250b3VjaHN0YXJ0IiBpbiB3aW5kb3csCiAgICAgICAgZCA9IGZ1bmN0aW9uIGQoKSB7CiAgICAgIHYub2ZmKCJ0b3VjaG1vdmUiICsgZiArICIgdG91Y2hlbmQiICsgZik7CiAgICB9LAogICAgICAgIGUgPSAibWZwRmFzdENsaWNrIiwKICAgICAgICBmID0gIi4iICsgZTsKCiAgICBhLmZuLm1mcEZhc3RDbGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBhKHRoaXMpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBnLAogICAgICAgICAgICBoID0gYSh0aGlzKTsKCiAgICAgICAgaWYgKGMpIHsKICAgICAgICAgIHZhciBpLCBqLCBrLCBsLCBtLCBuOwogICAgICAgICAgaC5vbigidG91Y2hzdGFydCIgKyBmLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICBsID0gITEsIG4gPSAxLCBtID0gYS5vcmlnaW5hbEV2ZW50ID8gYS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gOiBhLnRvdWNoZXNbMF0sIGogPSBtLmNsaWVudFgsIGsgPSBtLmNsaWVudFksIHYub24oInRvdWNobW92ZSIgKyBmLCBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgIG0gPSBhLm9yaWdpbmFsRXZlbnQgPyBhLm9yaWdpbmFsRXZlbnQudG91Y2hlcyA6IGEudG91Y2hlcywgbiA9IG0ubGVuZ3RoLCBtID0gbVswXSwgKE1hdGguYWJzKG0uY2xpZW50WCAtIGopID4gMTAgfHwgTWF0aC5hYnMobS5jbGllbnRZIC0gaykgPiAxMCkgJiYgKGwgPSAhMCwgZCgpKTsKICAgICAgICAgICAgfSkub24oInRvdWNoZW5kIiArIGYsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgZCgpLCBsIHx8IG4gPiAxIHx8IChnID0gITAsIGEucHJldmVudERlZmF1bHQoKSwgY2xlYXJUaW1lb3V0KGkpLCBpID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBnID0gITE7CiAgICAgICAgICAgICAgfSwgYiksIGUoKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBoLm9uKCJjbGljayIgKyBmLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBnIHx8IGUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LCBhLmZuLmRlc3Ryb3lNZnBGYXN0Q2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGEodGhpcykub2ZmKCJ0b3VjaHN0YXJ0IiArIGYgKyAiIGNsaWNrIiArIGYpLCBjICYmIHYub2ZmKCJ0b3VjaG1vdmUiICsgZiArICIgdG91Y2hlbmQiICsgZik7CiAgICB9OwogIH0oKSwgQSgpOwp9KTsgLy8gTk9USUNFISEgRE8gTk9UIFVTRSBBTlkgT0YgVEhJUyBKQVZBU0NSSVBUCi8vIElUJ1MgSlVTVCBKVU5LIEZPUiBPVVIgRE9DUyEKLy8gKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCgovKiEKICogQ29weXJpZ2h0IDIwMTQtMjAxNSBUd2l0dGVyLCBJbmMuCiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBDcmVhdGl2ZSBDb21tb25zIEF0dHJpYnV0aW9uIDMuMCBVbnBvcnRlZCBMaWNlbnNlLiBGb3IKICogZGV0YWlscywgc2VlIGh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS8zLjAvLgogKi8KLy8gSW50ZW5kZWQgdG8gcHJldmVudCBmYWxzZS1wb3NpdGl2ZSBidWcgcmVwb3J0cyBhYm91dCBCb290c3RyYXAgbm90IHdvcmtpbmcgcHJvcGVybHkgaW4gb2xkIHZlcnNpb25zIG9mIElFIGR1ZSB0byBmb2xrcyB0ZXN0aW5nIHVzaW5nIElFJ3MgdW5yZWxpYWJsZSBlbXVsYXRpb24gbW9kZXMuCgooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgZnVuY3Rpb24gZW11bGF0ZWRJRU1ham9yVmVyc2lvbigpIHsKICAgIHZhciBncm91cHMgPSAvTVNJRSAoWzAtOS5dKykvLmV4ZWMod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpOwoKICAgIGlmIChncm91cHMgPT09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgdmFyIGllVmVyc2lvbk51bSA9IHBhcnNlSW50KGdyb3Vwc1sxXSwgMTApOwogICAgdmFyIGllTWFqb3JWZXJzaW9uID0gTWF0aC5mbG9vcihpZVZlcnNpb25OdW0pOwogICAgcmV0dXJuIGllTWFqb3JWZXJzaW9uOwogIH0KCiAgZnVuY3Rpb24gYWN0dWFsTm9uRW11bGF0ZWRJRU1ham9yVmVyc2lvbigpIHsKICAgIC8vIERldGVjdHMgdGhlIGFjdHVhbCB2ZXJzaW9uIG9mIElFIGluIHVzZSwgZXZlbiBpZiBpdCdzIGluIGFuIG9sZGVyLUlFIGVtdWxhdGlvbiBtb2RlLgogICAgLy8gSUUgSmF2YVNjcmlwdCBjb25kaXRpb25hbCBjb21waWxhdGlvbiBkb2NzOiBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9saWJyYXJ5LzEyMWh6dGszJTI4dj12cy45NCUyOS5hc3B4CiAgICAvLyBAY2Nfb24gZG9jczogaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vbGlicmFyeS84a2E5MGsyZSUyOHY9dnMuOTQlMjkuYXNweAogICAgdmFyIGpzY3JpcHRWZXJzaW9uID0gbmV3IEZ1bmN0aW9uKCcvKkBjY19vbiByZXR1cm4gQF9qc2NyaXB0X3ZlcnNpb247IEAqLycpKCk7IC8vIGpzaGludCBpZ25vcmU6bGluZQoKICAgIGlmIChqc2NyaXB0VmVyc2lvbiA9PT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiAxMTsgLy8gSUUxMSsgbm90IGluIGVtdWxhdGlvbiBtb2RlCiAgICB9CgogICAgaWYgKGpzY3JpcHRWZXJzaW9uIDwgOSkgewogICAgICByZXR1cm4gODsgLy8gSUU4IChvciBsb3dlcjsgaGF2ZW4ndCB0ZXN0ZWQgb24gSUU8OCkKICAgIH0KCiAgICByZXR1cm4ganNjcmlwdFZlcnNpb247IC8vIElFOSBvciBJRTEwIGluIGFueSBtb2RlLCBvciBJRTExIGluIG5vbi1JRTExIG1vZGUKICB9CgogIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50OwoKICBpZiAodWEuaW5kZXhPZignT3BlcmEnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ1ByZXN0bycpID4gLTEpIHsKICAgIHJldHVybjsgLy8gT3BlcmEsIHdoaWNoIG1pZ2h0IHByZXRlbmQgdG8gYmUgSUUKICB9CgogIHZhciBlbXVsYXRlZCA9IGVtdWxhdGVkSUVNYWpvclZlcnNpb24oKTsKCiAgaWYgKGVtdWxhdGVkID09PSBudWxsKSB7CiAgICByZXR1cm47IC8vIE5vdCBJRQogIH0KCiAgdmFyIG5vbkVtdWxhdGVkID0gYWN0dWFsTm9uRW11bGF0ZWRJRU1ham9yVmVyc2lvbigpOwoKICBpZiAoZW11bGF0ZWQgIT09IG5vbkVtdWxhdGVkKSB7CiAgICB3aW5kb3cuYWxlcnQoJ1dBUk5JTkc6IFlvdSBhcHBlYXIgdG8gYmUgdXNpbmcgSUUnICsgbm9uRW11bGF0ZWQgKyAnIGluIElFJyArIGVtdWxhdGVkICsgJyBlbXVsYXRpb24gbW9kZS5cbklFIGVtdWxhdGlvbiBtb2RlcyBjYW4gYmVoYXZlIHNpZ25pZmljYW50bHkgZGlmZmVyZW50bHkgZnJvbSBBQ1RVQUwgb2xkZXIgdmVyc2lvbnMgb2YgSUUuXG5QTEVBU0UgRE9OXCdUIEZJTEUgQk9PVFNUUkFQIEJVR1MgYmFzZWQgb24gdGVzdGluZyBpbiBJRSBlbXVsYXRpb24gbW9kZXMhJyk7CiAgfQp9KSgpOwovKiEKICogSUUxMCB2aWV3cG9ydCBoYWNrIGZvciBTdXJmYWNlL2Rlc2t0b3AgV2luZG93cyA4IGJ1ZwogKiBDb3B5cmlnaHQgMjAxNC0yMDE1IFR3aXR0ZXIsIEluYy4KICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSkKICovCi8vIFNlZSB0aGUgR2V0dGluZyBTdGFydGVkIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb246Ci8vIGh0dHA6Ly9nZXRib290c3RyYXAuY29tL2dldHRpbmctc3RhcnRlZC8jc3VwcG9ydC1pZTEwLXdpZHRoCgoKKGZ1bmN0aW9uICgpIHsKICAndXNlIHN0cmljdCc7CgogIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9JRU1vYmlsZVwvMTBcLjAvKSkgewogICAgdmFyIG1zVmlld3BvcnRTdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBtc1ZpZXdwb3J0U3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0AtbXMtdmlld3BvcnR7d2lkdGg6YXV0byFpbXBvcnRhbnR9JykpOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZCcpLmFwcGVuZENoaWxkKG1zVmlld3BvcnRTdHlsZSk7CiAgfQp9KSgpOwoKdmFyIEhvbGRlciA9IEhvbGRlciB8fCB7fTsKIWZ1bmN0aW9uIChlLCB0KSB7CiAgZnVuY3Rpb24gbihlLCB0KSB7CiAgICB2YXIgbiA9ICJjb21wbGV0ZSIsCiAgICAgICAgaSA9ICJyZWFkeXN0YXRlY2hhbmdlIiwKICAgICAgICBvID0gITEsCiAgICAgICAgYSA9IG8sCiAgICAgICAgciA9ICEwLAogICAgICAgIHMgPSBlLmRvY3VtZW50LAogICAgICAgIGQgPSBzLmRvY3VtZW50RWxlbWVudCwKICAgICAgICBsID0gcy5hZGRFdmVudExpc3RlbmVyID8gImFkZEV2ZW50TGlzdGVuZXIiIDogImF0dGFjaEV2ZW50IiwKICAgICAgICB1ID0gcy5hZGRFdmVudExpc3RlbmVyID8gInJlbW92ZUV2ZW50TGlzdGVuZXIiIDogImRldGFjaEV2ZW50IiwKICAgICAgICBoID0gcy5hZGRFdmVudExpc3RlbmVyID8gIiIgOiAib24iLAogICAgICAgIGMgPSBmdW5jdGlvbiBjKHIpIHsKICAgICAgKHIudHlwZSAhPSBpIHx8IHMucmVhZHlTdGF0ZSA9PSBuKSAmJiAoKCJsb2FkIiA9PSByLnR5cGUgPyBlIDogcylbdV0oaCArIHIudHlwZSwgYywgbyksICFhICYmIChhID0gITApICYmIHQuY2FsbChlLCBudWxsKSk7CiAgICB9LAogICAgICAgIGcgPSBmdW5jdGlvbiBnKCkgewogICAgICB0cnkgewogICAgICAgIGQuZG9TY3JvbGwoImxlZnQiKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGcsIDUwKSwgdm9pZCAwOwogICAgICB9CgogICAgICBjKCJwb2xsIik7CiAgICB9OwoKICAgIGlmIChzLnJlYWR5U3RhdGUgPT0gbikgdC5jYWxsKGUsICJsYXp5Iik7ZWxzZSB7CiAgICAgIGlmIChzLmNyZWF0ZUV2ZW50T2JqZWN0ICYmIGQuZG9TY3JvbGwpIHsKICAgICAgICB0cnkgewogICAgICAgICAgciA9ICFlLmZyYW1lRWxlbWVudDsKICAgICAgICB9IGNhdGNoIChmKSB7fQoKICAgICAgICByICYmIGcoKTsKICAgICAgfQoKICAgICAgc1tsXShoICsgIkRPTUNvbnRlbnRMb2FkZWQiLCBjLCBvKSwgc1tsXShoICsgaSwgYywgbyksIGVbbF0oaCArICJsb2FkIiwgYywgbyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpKGUpIHsKICAgIGUgPSBlLm1hdGNoKC9eKFxXKT8oLiopLyk7CiAgICB2YXIgdCA9IGRvY3VtZW50WyJnZXRFbGVtZW50IiArIChlWzFdID8gIiMiID09IGVbMV0gPyAiQnlJZCIgOiAic0J5Q2xhc3NOYW1lIiA6ICJzQnlUYWdOYW1lIildKGVbMl0pLAogICAgICAgIG4gPSBbXTsKICAgIHJldHVybiBudWxsICE9PSB0ICYmIChuID0gdC5sZW5ndGggPyB0IDogMCA9PT0gdC5sZW5ndGggPyB0IDogW3RdKSwgbjsKICB9CgogIGZ1bmN0aW9uIG8oZSwgdCkgewogICAgdmFyIG4gPSB7fTsKCiAgICBmb3IgKHZhciBpIGluIGUpIHsKICAgICAgZS5oYXNPd25Qcm9wZXJ0eShpKSAmJiAobltpXSA9IGVbaV0pOwogICAgfQoKICAgIGZvciAodmFyIGkgaW4gdCkgewogICAgICB0Lmhhc093blByb3BlcnR5KGkpICYmIChuW2ldID0gdFtpXSk7CiAgICB9CgogICAgcmV0dXJuIG47CiAgfQoKICBmdW5jdGlvbiBhKGUsIHQsIG4pIHsKICAgIHQgPSBwYXJzZUludCh0LCAxMCksIGUgPSBwYXJzZUludChlLCAxMCk7CiAgICB2YXIgaSA9IE1hdGgubWF4KHQsIGUpLAogICAgICAgIG8gPSBNYXRoLm1pbih0LCBlKSwKICAgICAgICBhID0gMSAvIDEyLAogICAgICAgIHIgPSBNYXRoLm1pbiguNzUgKiBvLCAuNzUgKiBpICogYSk7CiAgICByZXR1cm4gewogICAgICBoZWlnaHQ6IE1hdGgucm91bmQoTWF0aC5tYXgobi5zaXplLCByKSkKICAgIH07CiAgfQoKICBmdW5jdGlvbiByKGUpIHsKICAgIHZhciB0ID0gZS5jdHgsCiAgICAgICAgbiA9IGUuZGltZW5zaW9ucywKICAgICAgICBpID0gZS50ZW1wbGF0ZSwKICAgICAgICBvID0gZS5yYXRpbywKICAgICAgICByID0gZS5ob2xkZXIsCiAgICAgICAgcyA9ICJsaXRlcmFsIiA9PSByLnRleHRtb2RlLAogICAgICAgIGQgPSAiZXhhY3QiID09IHIudGV4dG1vZGUsCiAgICAgICAgbCA9IGEobi53aWR0aCwgbi5oZWlnaHQsIGkpLAogICAgICAgIHUgPSBsLmhlaWdodCwKICAgICAgICBoID0gbi53aWR0aCAqIG8sCiAgICAgICAgYyA9IG4uaGVpZ2h0ICogbywKICAgICAgICBmID0gaS5mb250ID8gaS5mb250IDogInNhbnMtc2VyaWYiOwogICAgZy53aWR0aCA9IGgsIGcuaGVpZ2h0ID0gYywgdC50ZXh0QWxpZ24gPSAiY2VudGVyIiwgdC50ZXh0QmFzZWxpbmUgPSAibWlkZGxlIiwgdC5maWxsU3R5bGUgPSBpLmJhY2tncm91bmQsIHQuZmlsbFJlY3QoMCwgMCwgaCwgYyksIHQuZmlsbFN0eWxlID0gaS5mb3JlZ3JvdW5kLCB0LmZvbnQgPSAiYm9sZCAiICsgdSArICJweCAiICsgZjsKICAgIHZhciBtID0gaS50ZXh0ID8gaS50ZXh0IDogTWF0aC5mbG9vcihuLndpZHRoKSArICJ4IiArIE1hdGguZmxvb3Iobi5oZWlnaHQpOwoKICAgIGlmIChzKSB7CiAgICAgIHZhciBuID0gci5kaW1lbnNpb25zOwogICAgICBtID0gbi53aWR0aCArICJ4IiArIG4uaGVpZ2h0OwogICAgfSBlbHNlIGlmIChkICYmIHIuZXhhY3RfZGltZW5zaW9ucykgewogICAgICB2YXIgbiA9IHIuZXhhY3RfZGltZW5zaW9uczsKICAgICAgbSA9IE1hdGguZmxvb3Iobi53aWR0aCkgKyAieCIgKyBNYXRoLmZsb29yKG4uaGVpZ2h0KTsKICAgIH0KCiAgICB2YXIgeCA9IHQubWVhc3VyZVRleHQobSkud2lkdGg7CiAgICByZXR1cm4geCAvIGggPj0gLjc1ICYmICh1ID0gTWF0aC5mbG9vciguNzUgKiB1ICogKGggLyB4KSkpLCB0LmZvbnQgPSAiYm9sZCAiICsgdSAqIG8gKyAicHggIiArIGYsIHQuZmlsbFRleHQobSwgaCAvIDIsIGMgLyAyLCBoKSwgZy50b0RhdGFVUkwoImltYWdlL3BuZyIpOwogIH0KCiAgZnVuY3Rpb24gcyhlLCB0LCBuLCBpKSB7CiAgICB2YXIgYSA9IG4uZGltZW5zaW9ucywKICAgICAgICBzID0gbi50aGVtZSwKICAgICAgICBkID0gbi50ZXh0ID8gZGVjb2RlVVJJQ29tcG9uZW50KG4udGV4dCkgOiBuLnRleHQsCiAgICAgICAgdSA9IGEud2lkdGggKyAieCIgKyBhLmhlaWdodDsKICAgIHMgPSBkID8gbyhzLCB7CiAgICAgIHRleHQ6IGQKICAgIH0pIDogcywgcyA9IG4uZm9udCA/IG8ocywgewogICAgICBmb250OiBuLmZvbnQKICAgIH0pIDogcywgdC5zZXRBdHRyaWJ1dGUoImRhdGEtc3JjIiwgaSksIG4udGhlbWUgPSBzLCB0LmhvbGRlcl9kYXRhID0gbiwgImltYWdlIiA9PSBlID8gKHQuc2V0QXR0cmlidXRlKCJhbHQiLCBkID8gZCA6IHMudGV4dCA/IHMudGV4dCArICIgWyIgKyB1ICsgIl0iIDogdSksIChjIHx8ICFuLmF1dG8pICYmICh0LnN0eWxlLndpZHRoID0gYS53aWR0aCArICJweCIsIHQuc3R5bGUuaGVpZ2h0ID0gYS5oZWlnaHQgKyAicHgiKSwgYyA/IHQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcy5iYWNrZ3JvdW5kIDogKHQuc2V0QXR0cmlidXRlKCJzcmMiLCByKHsKICAgICAgY3R4OiBwLAogICAgICBkaW1lbnNpb25zOiBhLAogICAgICB0ZW1wbGF0ZTogcywKICAgICAgcmF0aW86IHksCiAgICAgIGhvbGRlcjogbgogICAgfSkpLCBuLnRleHRtb2RlICYmICJleGFjdCIgPT0gbi50ZXh0bW9kZSAmJiAoeC5wdXNoKHQpLCBsKHQpKSkpIDogImJhY2tncm91bmQiID09IGUgPyBjIHx8ICh0LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9ICJ1cmwoIiArIHIoewogICAgICBjdHg6IHAsCiAgICAgIGRpbWVuc2lvbnM6IGEsCiAgICAgIHRlbXBsYXRlOiBzLAogICAgICByYXRpbzogeSwKICAgICAgaG9sZGVyOiBuCiAgICB9KSArICIpIiwgdC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZSA9IGEud2lkdGggKyAicHggIiArIGEuaGVpZ2h0ICsgInB4IikgOiAiZmx1aWQiID09IGUgJiYgKHQuc2V0QXR0cmlidXRlKCJhbHQiLCBkID8gZCA6IHMudGV4dCA/IHMudGV4dCArICIgWyIgKyB1ICsgIl0iIDogdSksIHQuc3R5bGUuaGVpZ2h0ID0gIiUiID09IGEuaGVpZ2h0LnNsaWNlKC0xKSA/IGEuaGVpZ2h0IDogYS5oZWlnaHQgKyAicHgiLCB0LnN0eWxlLndpZHRoID0gIiUiID09IGEud2lkdGguc2xpY2UoLTEpID8gYS53aWR0aCA6IGEud2lkdGggKyAicHgiLCAoImlubGluZSIgPT0gdC5zdHlsZS5kaXNwbGF5IHx8ICIiID09PSB0LnN0eWxlLmRpc3BsYXkgfHwgIm5vbmUiID09IHQuc3R5bGUuZGlzcGxheSkgJiYgKHQuc3R5bGUuZGlzcGxheSA9ICJibG9jayIpLCBjID8gdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzLmJhY2tncm91bmQgOiAoeC5wdXNoKHQpLCBsKHQpKSk7CiAgfQoKICBmdW5jdGlvbiBkKGUsIHQpIHsKICAgIHZhciBuID0gewogICAgICBoZWlnaHQ6IGUuY2xpZW50SGVpZ2h0LAogICAgICB3aWR0aDogZS5jbGllbnRXaWR0aAogICAgfTsKCiAgICBpZiAoIW4uaGVpZ2h0ICYmICFuLndpZHRoKSB7CiAgICAgIGlmIChlLmhhc0F0dHJpYnV0ZSgiZGF0YS1ob2xkZXItaW52aXNpYmxlIikpIHRocm93IG5ldyBFcnJvcigiSG9sZGVyOiBwbGFjZWhvbGRlciBpcyBub3QgdmlzaWJsZSIpOwogICAgICByZXR1cm4gZS5zZXRBdHRyaWJ1dGUoImRhdGEtaG9sZGVyLWludmlzaWJsZSIsICEwKSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgdC5jYWxsKHRoaXMsIGUpOwogICAgICB9LCAxKSwgbnVsbDsKICAgIH0KCiAgICByZXR1cm4gZS5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtaG9sZGVyLWludmlzaWJsZSIpLCBuOwogIH0KCiAgZnVuY3Rpb24gbChlKSB7CiAgICB2YXIgdDsKICAgIHQgPSBudWxsID09IGUubm9kZVR5cGUgPyB4IDogW2VdOwoKICAgIGZvciAodmFyIG4gaW4gdCkgewogICAgICBpZiAodC5oYXNPd25Qcm9wZXJ0eShuKSkgewogICAgICAgIHZhciBpID0gdFtuXTsKCiAgICAgICAgaWYgKGkuaG9sZGVyX2RhdGEpIHsKICAgICAgICAgIHZhciBvID0gaS5ob2xkZXJfZGF0YSwKICAgICAgICAgICAgICBhID0gZChpLCBsKTsKICAgICAgICAgIGEgJiYgKG8uZmx1aWQgJiYgaS5zZXRBdHRyaWJ1dGUoInNyYyIsIHIoewogICAgICAgICAgICBjdHg6IHAsCiAgICAgICAgICAgIGRpbWVuc2lvbnM6IGEsCiAgICAgICAgICAgIHRlbXBsYXRlOiBvLnRoZW1lLAogICAgICAgICAgICByYXRpbzogeSwKICAgICAgICAgICAgaG9sZGVyOiBvCiAgICAgICAgICB9KSksIG8udGV4dG1vZGUgJiYgImV4YWN0IiA9PSBvLnRleHRtb2RlICYmIChvLmV4YWN0X2RpbWVuc2lvbnMgPSBhLCBpLnNldEF0dHJpYnV0ZSgic3JjIiwgcih7CiAgICAgICAgICAgIGN0eDogcCwKICAgICAgICAgICAgZGltZW5zaW9uczogby5kaW1lbnNpb25zLAogICAgICAgICAgICB0ZW1wbGF0ZTogby50aGVtZSwKICAgICAgICAgICAgcmF0aW86IHksCiAgICAgICAgICAgIGhvbGRlcjogbwogICAgICAgICAgfSkpKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiB1KHQsIG4pIHsKICAgIHZhciBpID0gewogICAgICB0aGVtZTogbyh2LnRoZW1lcy5ncmF5LCB7fSkKICAgIH0sCiAgICAgICAgYSA9ICExOwoKICAgIGZvciAoc2wgPSB0Lmxlbmd0aCwgaiA9IDA7IHNsID4gajsgaisrKSB7CiAgICAgIHZhciByID0gdFtqXTsKICAgICAgZS5mbGFncy5kaW1lbnNpb25zLm1hdGNoKHIpID8gKGEgPSAhMCwgaS5kaW1lbnNpb25zID0gZS5mbGFncy5kaW1lbnNpb25zLm91dHB1dChyKSkgOiBlLmZsYWdzLmZsdWlkLm1hdGNoKHIpID8gKGEgPSAhMCwgaS5kaW1lbnNpb25zID0gZS5mbGFncy5mbHVpZC5vdXRwdXQociksIGkuZmx1aWQgPSAhMCkgOiBlLmZsYWdzLnRleHRtb2RlLm1hdGNoKHIpID8gaS50ZXh0bW9kZSA9IGUuZmxhZ3MudGV4dG1vZGUub3V0cHV0KHIpIDogZS5mbGFncy5jb2xvcnMubWF0Y2gocikgPyBpLnRoZW1lID0gZS5mbGFncy5jb2xvcnMub3V0cHV0KHIpIDogbi50aGVtZXNbcl0gPyBuLnRoZW1lcy5oYXNPd25Qcm9wZXJ0eShyKSAmJiAoaS50aGVtZSA9IG8obi50aGVtZXNbcl0sIHt9KSkgOiBlLmZsYWdzLmZvbnQubWF0Y2gocikgPyBpLmZvbnQgPSBlLmZsYWdzLmZvbnQub3V0cHV0KHIpIDogZS5mbGFncy5hdXRvLm1hdGNoKHIpID8gaS5hdXRvID0gITAgOiBlLmZsYWdzLnRleHQubWF0Y2gocikgJiYgKGkudGV4dCA9IGUuZmxhZ3MudGV4dC5vdXRwdXQocikpOwogICAgfQoKICAgIHJldHVybiBhID8gaSA6ICExOwogIH0KCiAgdmFyIGggPSAhMSwKICAgICAgYyA9ICExLAogICAgICBnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksCiAgICAgIGYgPSAxLAogICAgICBtID0gMSwKICAgICAgeCA9IFtdOwogIGlmIChnLmdldENvbnRleHQpIHsKICAgIGlmIChnLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikuaW5kZXhPZigiZGF0YTppbWFnZS9wbmciKSA8IDApIGMgPSAhMDtlbHNlIHZhciBwID0gZy5nZXRDb250ZXh0KCIyZCIpOwogIH0gZWxzZSBjID0gITA7CiAgYyB8fCAoZiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDEsIG0gPSBwLndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgcC5tb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IHAubXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IHAub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHwgcC5iYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IDEpOwogIHZhciB5ID0gZiAvIG0sCiAgICAgIHYgPSB7CiAgICBkb21haW46ICJob2xkZXIuanMiLAogICAgaW1hZ2VzOiAiaW1nIiwKICAgIGJnbm9kZXM6ICIuaG9sZGVyanMiLAogICAgdGhlbWVzOiB7CiAgICAgIGdyYXk6IHsKICAgICAgICBiYWNrZ3JvdW5kOiAiI2VlZSIsCiAgICAgICAgZm9yZWdyb3VuZDogIiNhYWEiLAogICAgICAgIHNpemU6IDEyCiAgICAgIH0sCiAgICAgIHNvY2lhbDogewogICAgICAgIGJhY2tncm91bmQ6ICIjM2E1YTk3IiwKICAgICAgICBmb3JlZ3JvdW5kOiAiI2ZmZiIsCiAgICAgICAgc2l6ZTogMTIKICAgICAgfSwKICAgICAgaW5kdXN0cmlhbDogewogICAgICAgIGJhY2tncm91bmQ6ICIjNDM0QTUyIiwKICAgICAgICBmb3JlZ3JvdW5kOiAiI0MyRjIwMCIsCiAgICAgICAgc2l6ZTogMTIKICAgICAgfSwKICAgICAgc2t5OiB7CiAgICAgICAgYmFja2dyb3VuZDogIiMwRDhGREIiLAogICAgICAgIGZvcmVncm91bmQ6ICIjZmZmIiwKICAgICAgICBzaXplOiAxMgogICAgICB9LAogICAgICB2aW5lOiB7CiAgICAgICAgYmFja2dyb3VuZDogIiMzOURCQUMiLAogICAgICAgIGZvcmVncm91bmQ6ICIjMUUyOTJDIiwKICAgICAgICBzaXplOiAxMgogICAgICB9LAogICAgICBsYXZhOiB7CiAgICAgICAgYmFja2dyb3VuZDogIiNGODU5MUEiLAogICAgICAgIGZvcmVncm91bmQ6ICIjMUMyODQ2IiwKICAgICAgICBzaXplOiAxMgogICAgICB9CiAgICB9LAogICAgc3R5bGVzaGVldDogIiIKICB9OwogIGUuZmxhZ3MgPSB7CiAgICBkaW1lbnNpb25zOiB7CiAgICAgIHJlZ2V4OiAvXihcZCspeChcZCspJC8sCiAgICAgIG91dHB1dDogZnVuY3Rpb24gb3V0cHV0KGUpIHsKICAgICAgICB2YXIgdCA9IHRoaXMucmVnZXguZXhlYyhlKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6ICt0WzFdLAogICAgICAgICAgaGVpZ2h0OiArdFsyXQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICBmbHVpZDogewogICAgICByZWdleDogL14oWzAtOSVdKyl4KFswLTklXSspJC8sCiAgICAgIG91dHB1dDogZnVuY3Rpb24gb3V0cHV0KGUpIHsKICAgICAgICB2YXIgdCA9IHRoaXMucmVnZXguZXhlYyhlKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6IHRbMV0sCiAgICAgICAgICBoZWlnaHQ6IHRbMl0KICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgY29sb3JzOiB7CiAgICAgIHJlZ2V4OiAvIyhbMC05YS1mXXszLH0pXDojKFswLTlhLWZdezMsfSkvaSwKICAgICAgb3V0cHV0OiBmdW5jdGlvbiBvdXRwdXQoZSkgewogICAgICAgIHZhciB0ID0gdGhpcy5yZWdleC5leGVjKGUpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBzaXplOiB2LnRoZW1lcy5ncmF5LnNpemUsCiAgICAgICAgICBmb3JlZ3JvdW5kOiAiIyIgKyB0WzJdLAogICAgICAgICAgYmFja2dyb3VuZDogIiMiICsgdFsxXQogICAgICAgIH07CiAgICAgIH0KICAgIH0sCiAgICB0ZXh0OiB7CiAgICAgIHJlZ2V4OiAvdGV4dFw6KC4qKS8sCiAgICAgIG91dHB1dDogZnVuY3Rpb24gb3V0cHV0KGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWdleC5leGVjKGUpWzFdOwogICAgICB9CiAgICB9LAogICAgZm9udDogewogICAgICByZWdleDogL2ZvbnRcOiguKikvLAogICAgICBvdXRwdXQ6IGZ1bmN0aW9uIG91dHB1dChlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVnZXguZXhlYyhlKVsxXTsKICAgICAgfQogICAgfSwKICAgIGF1dG86IHsKICAgICAgcmVnZXg6IC9eYXV0byQvCiAgICB9LAogICAgdGV4dG1vZGU6IHsKICAgICAgcmVnZXg6IC90ZXh0bW9kZVw6KC4qKS8sCiAgICAgIG91dHB1dDogZnVuY3Rpb24gb3V0cHV0KGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWdleC5leGVjKGUpWzFdOwogICAgICB9CiAgICB9CiAgfSwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSB8fCAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCwKICAgICAgICBuLAogICAgICAgIGksCiAgICAgICAgbyA9IGRvY3VtZW50LAogICAgICAgIGEgPSBbXTsKICAgIGlmIChvLnF1ZXJ5U2VsZWN0b3JBbGwpIHJldHVybiBvLnF1ZXJ5U2VsZWN0b3JBbGwoIi4iICsgZSk7CiAgICBpZiAoby5ldmFsdWF0ZSkgZm9yIChuID0gIi4vLypbY29udGFpbnMoY29uY2F0KCcgJywgQGNsYXNzLCAnICcpLCAnICIgKyBlICsgIiAnKV0iLCB0ID0gby5ldmFsdWF0ZShuLCBvLCBudWxsLCAwLCBudWxsKTsgaSA9IHQuaXRlcmF0ZU5leHQoKTspIHsKICAgICAgYS5wdXNoKGkpOwogICAgfSBlbHNlIGZvciAodCA9IG8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSwgbiA9IG5ldyBSZWdFeHAoIihefFxccykiICsgZSArICIoXFxzfCQpIiksIGkgPSAwOyBpIDwgdC5sZW5ndGg7IGkrKykgewogICAgICBuLnRlc3QodFtpXS5jbGFzc05hbWUpICYmIGEucHVzaCh0W2ldKTsKICAgIH0KICAgIHJldHVybiBhOwogIH0pLCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSB8fCAod2luZG93LmdldENvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIHRoaXMuZWwgPSBlLCB0aGlzLmdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgbiA9IC8oXC0oW2Etel0pezF9KS9nOwogICAgICByZXR1cm4gImZsb2F0IiA9PSB0ICYmICh0ID0gInN0eWxlRmxvYXQiKSwgbi50ZXN0KHQpICYmICh0ID0gdC5yZXBsYWNlKG4sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzWzJdLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0pKSwgZS5jdXJyZW50U3R5bGVbdF0gPyBlLmN1cnJlbnRTdHlsZVt0XSA6IG51bGw7CiAgICB9LCB0aGlzOwogIH0pLCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5IHx8IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5ID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciB0ID0gdGhpcy5fX3Byb3RvX18gfHwgdGhpcy5jb25zdHJ1Y3Rvci5wcm90b3R5cGU7CiAgICByZXR1cm4gZSBpbiB0aGlzICYmICghKGUgaW4gdCkgfHwgdFtlXSAhPT0gdGhpc1tlXSk7CiAgfSk7CgogIGZvciAodmFyIHcgaW4gZS5mbGFncykgewogICAgZS5mbGFncy5oYXNPd25Qcm9wZXJ0eSh3KSAmJiAoZS5mbGFnc1t3XS5tYXRjaCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLm1hdGNoKHRoaXMucmVnZXgpOwogICAgfSk7CiAgfQoKICBlLmFkZF90aGVtZSA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICByZXR1cm4gbnVsbCAhPSB0ICYmIG51bGwgIT0gbiAmJiAodi50aGVtZXNbdF0gPSBuKSwgZTsKICB9LCBlLmFkZF9pbWFnZSA9IGZ1bmN0aW9uICh0LCBuKSB7CiAgICB2YXIgbyA9IGkobik7CiAgICBpZiAoby5sZW5ndGgpIGZvciAodmFyIGEgPSAwLCByID0gby5sZW5ndGg7IHIgPiBhOyBhKyspIHsKICAgICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKICAgICAgcy5zZXRBdHRyaWJ1dGUoImRhdGEtc3JjIiwgdCksIG9bYV0uYXBwZW5kQ2hpbGQocyk7CiAgICB9CiAgICByZXR1cm4gZTsKICB9LCBlLnJ1biA9IGZ1bmN0aW9uICh0KSB7CiAgICBoID0gITA7CiAgICB2YXIgbiA9IG8odiwgdCksCiAgICAgICAgYSA9IFtdLAogICAgICAgIHIgPSBbXSwKICAgICAgICBkID0gW107CgogICAgZm9yICgic3RyaW5nIiA9PSB0eXBlb2Ygbi5pbWFnZXMgPyByID0gaShuLmltYWdlcykgOiB3aW5kb3cuTm9kZUxpc3QgJiYgbi5pbWFnZXMgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZUxpc3QgPyByID0gbi5pbWFnZXMgOiB3aW5kb3cuTm9kZSAmJiBuLmltYWdlcyBpbnN0YW5jZW9mIHdpbmRvdy5Ob2RlICYmIChyID0gW24uaW1hZ2VzXSksICJzdHJpbmciID09IHR5cGVvZiBuLmJnbm9kZXMgPyBkID0gaShuLmJnbm9kZXMpIDogd2luZG93Lk5vZGVMaXN0ICYmIG4uZWxlbWVudHMgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZUxpc3QgPyBkID0gbi5iZ25vZGVzIDogd2luZG93Lk5vZGUgJiYgbi5iZ25vZGVzIGluc3RhbmNlb2Ygd2luZG93Lk5vZGUgJiYgKGQgPSBbbi5iZ25vZGVzXSksIGYgPSAwLCBnID0gci5sZW5ndGg7IGcgPiBmOyBmKyspIHsKICAgICAgYS5wdXNoKHJbZl0pOwogICAgfQoKICAgIHZhciBsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhvbGRlcmpzLXN0eWxlIik7CiAgICBsIHx8IChsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSwgbC5zZXRBdHRyaWJ1dGUoImlkIiwgImhvbGRlcmpzLXN0eWxlIiksIGwudHlwZSA9ICJ0ZXh0L2NzcyIsIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQobCkpLCBuLm5vY3NzIHx8IChsLnN0eWxlU2hlZXQgPyBsLnN0eWxlU2hlZXQuY3NzVGV4dCArPSBuLnN0eWxlc2hlZXQgOiBsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4uc3R5bGVzaGVldCkpKTsKCiAgICBmb3IgKHZhciBjID0gbmV3IFJlZ0V4cChuLmRvbWFpbiArICcvKC4qPykiP1xcKScpLCBnID0gZC5sZW5ndGgsIGYgPSAwOyBnID4gZjsgZisrKSB7CiAgICAgIHZhciBtID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZFtmXSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZSgiYmFja2dyb3VuZC1pbWFnZSIpLAogICAgICAgICAgeCA9IG0ubWF0Y2goYyksCiAgICAgICAgICBwID0gZFtmXS5nZXRBdHRyaWJ1dGUoImRhdGEtYmFja2dyb3VuZC1zcmMiKTsKCiAgICAgIGlmICh4KSB7CiAgICAgICAgdmFyIHkgPSB1KHhbMV0uc3BsaXQoIi8iKSwgbik7CiAgICAgICAgeSAmJiBzKCJiYWNrZ3JvdW5kIiwgZFtmXSwgeSwgbSk7CiAgICAgIH0gZWxzZSBpZiAobnVsbCAhPSBwKSB7CiAgICAgICAgdmFyIHkgPSB1KHAuc3Vic3RyKHAubGFzdEluZGV4T2Yobi5kb21haW4pICsgbi5kb21haW4ubGVuZ3RoICsgMSkuc3BsaXQoIi8iKSwgbik7CiAgICAgICAgeSAmJiBzKCJiYWNrZ3JvdW5kIiwgZFtmXSwgeSwgbSk7CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGcgPSBhLmxlbmd0aCwgZiA9IDA7IGcgPiBmOyBmKyspIHsKICAgICAgdmFyIHcsIGI7CiAgICAgIGIgPSB3ID0gbSA9IG51bGw7CgogICAgICB0cnkgewogICAgICAgIGIgPSBhW2ZdLmdldEF0dHJpYnV0ZSgic3JjIiksIGF0dHJfZGF0YXNyYyA9IGFbZl0uZ2V0QXR0cmlidXRlKCJkYXRhLXNyYyIpOwogICAgICB9IGNhdGNoIChrKSB7fQoKICAgICAgaWYgKG51bGwgPT0gYXR0cl9kYXRhc3JjICYmIGIgJiYgYi5pbmRleE9mKG4uZG9tYWluKSA+PSAwID8gbSA9IGIgOiBhdHRyX2RhdGFzcmMgJiYgYXR0cl9kYXRhc3JjLmluZGV4T2Yobi5kb21haW4pID49IDAgJiYgKG0gPSBhdHRyX2RhdGFzcmMpLCBtKSB7CiAgICAgICAgdmFyIHkgPSB1KG0uc3Vic3RyKG0ubGFzdEluZGV4T2Yobi5kb21haW4pICsgbi5kb21haW4ubGVuZ3RoICsgMSkuc3BsaXQoIi8iKSwgbik7CiAgICAgICAgeSAmJiAoeS5mbHVpZCA/IHMoImZsdWlkIiwgYVtmXSwgeSwgbSkgOiBzKCJpbWFnZSIsIGFbZl0sIHksIG0pKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBlOwogIH0sIG4odCwgZnVuY3Rpb24gKCkgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPyAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGwsICExKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIiwgbCwgITEpKSA6IHdpbmRvdy5hdHRhY2hFdmVudCgib25yZXNpemUiLCBsKSwgaCB8fCBlLnJ1bigpOwogIH0pLCAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCAmJiBkZWZpbmUoW10sIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBlOwogIH0pOwp9KEhvbGRlciwgd2luZG93KTsKLyoKCkhvbGRlciAtIDIuMiAtIGNsaWVudCBzaWRlIGltYWdlIHBsYWNlaG9sZGVycwooYykgMjAxMi0yMDEzIEl2YW4gTWFsb3BpbnNreSAvIGh0dHA6Ly9pbXNreS5jbwoKUHJvdmlkZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgpDb21tZXJjaWFsIHVzZSByZXF1aXJlcyBhdHRyaWJ1dGlvbi4KCiovCgp2YXIgSG9sZGVyID0gSG9sZGVyIHx8IHt9OwoKKGZ1bmN0aW9uIChhcHAsIHdpbikgewogIHZhciBwcmVlbXB0ZWQgPSBmYWxzZSwKICAgICAgZmFsbGJhY2sgPSBmYWxzZSwKICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgdmFyIGRwciA9IDEsCiAgICAgIGJzciA9IDE7CiAgdmFyIHJlc2l6YWJsZV9pbWFnZXMgPSBbXTsKCiAgaWYgKCFjYW52YXMuZ2V0Q29udGV4dCkgewogICAgZmFsbGJhY2sgPSB0cnVlOwogIH0gZWxzZSB7CiAgICBpZiAoY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikuaW5kZXhPZigiZGF0YTppbWFnZS9wbmciKSA8IDApIHsKICAgICAgLy9BbmRyb2lkIGRvZXNuJ3Qgc3VwcG9ydCBkYXRhIFVSSQogICAgICBmYWxsYmFjayA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CiAgICB9CiAgfQoKICBpZiAoIWZhbGxiYWNrKSB7CiAgICBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxLCBic3IgPSBjdHgud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBjdHgubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBjdHgubXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5vQmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBjdHguYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCAxOwogIH0KCiAgdmFyIHJhdGlvID0gZHByIC8gYnNyOwogIHZhciBzZXR0aW5ncyA9IHsKICAgIGRvbWFpbjogImhvbGRlci5qcyIsCiAgICBpbWFnZXM6ICJpbWciLAogICAgYmdub2RlczogIi5ob2xkZXJqcyIsCiAgICB0aGVtZXM6IHsKICAgICAgImdyYXkiOiB7CiAgICAgICAgYmFja2dyb3VuZDogIiNlZWUiLAogICAgICAgIGZvcmVncm91bmQ6ICIjYWFhIiwKICAgICAgICBzaXplOiAxMgogICAgICB9LAogICAgICAic29jaWFsIjogewogICAgICAgIGJhY2tncm91bmQ6ICIjM2E1YTk3IiwKICAgICAgICBmb3JlZ3JvdW5kOiAiI2ZmZiIsCiAgICAgICAgc2l6ZTogMTIKICAgICAgfSwKICAgICAgImluZHVzdHJpYWwiOiB7CiAgICAgICAgYmFja2dyb3VuZDogIiM0MzRBNTIiLAogICAgICAgIGZvcmVncm91bmQ6ICIjQzJGMjAwIiwKICAgICAgICBzaXplOiAxMgogICAgICB9LAogICAgICAic2t5IjogewogICAgICAgIGJhY2tncm91bmQ6ICIjMEQ4RkRCIiwKICAgICAgICBmb3JlZ3JvdW5kOiAiI2ZmZiIsCiAgICAgICAgc2l6ZTogMTIKICAgICAgfSwKICAgICAgInZpbmUiOiB7CiAgICAgICAgYmFja2dyb3VuZDogIiMzOURCQUMiLAogICAgICAgIGZvcmVncm91bmQ6ICIjMUUyOTJDIiwKICAgICAgICBzaXplOiAxMgogICAgICB9LAogICAgICAibGF2YSI6IHsKICAgICAgICBiYWNrZ3JvdW5kOiAiI0Y4NTkxQSIsCiAgICAgICAgZm9yZWdyb3VuZDogIiMxQzI4NDYiLAogICAgICAgIHNpemU6IDEyCiAgICAgIH0KICAgIH0sCiAgICBzdHlsZXNoZWV0OiAiIgogIH07CiAgYXBwLmZsYWdzID0gewogICAgZGltZW5zaW9uczogewogICAgICByZWdleDogL14oXGQrKXgoXGQrKSQvLAogICAgICBvdXRwdXQ6IGZ1bmN0aW9uIG91dHB1dCh2YWwpIHsKICAgICAgICB2YXIgZXhlYyA9IHRoaXMucmVnZXguZXhlYyh2YWwpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3aWR0aDogK2V4ZWNbMV0sCiAgICAgICAgICBoZWlnaHQ6ICtleGVjWzJdCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGZsdWlkOiB7CiAgICAgIHJlZ2V4OiAvXihbMC05JV0rKXgoWzAtOSVdKykkLywKICAgICAgb3V0cHV0OiBmdW5jdGlvbiBvdXRwdXQodmFsKSB7CiAgICAgICAgdmFyIGV4ZWMgPSB0aGlzLnJlZ2V4LmV4ZWModmFsKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgd2lkdGg6IGV4ZWNbMV0sCiAgICAgICAgICBoZWlnaHQ6IGV4ZWNbMl0KICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgY29sb3JzOiB7CiAgICAgIHJlZ2V4OiAvIyhbMC05YS1mXXszLH0pXDojKFswLTlhLWZdezMsfSkvaSwKICAgICAgb3V0cHV0OiBmdW5jdGlvbiBvdXRwdXQodmFsKSB7CiAgICAgICAgdmFyIGV4ZWMgPSB0aGlzLnJlZ2V4LmV4ZWModmFsKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgc2l6ZTogc2V0dGluZ3MudGhlbWVzLmdyYXkuc2l6ZSwKICAgICAgICAgIGZvcmVncm91bmQ6ICIjIiArIGV4ZWNbMl0sCiAgICAgICAgICBiYWNrZ3JvdW5kOiAiIyIgKyBleGVjWzFdCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHRleHQ6IHsKICAgICAgcmVnZXg6IC90ZXh0XDooLiopLywKICAgICAgb3V0cHV0OiBmdW5jdGlvbiBvdXRwdXQodmFsKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVnZXguZXhlYyh2YWwpWzFdOwogICAgICB9CiAgICB9LAogICAgZm9udDogewogICAgICByZWdleDogL2ZvbnRcOiguKikvLAogICAgICBvdXRwdXQ6IGZ1bmN0aW9uIG91dHB1dCh2YWwpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWdleC5leGVjKHZhbClbMV07CiAgICAgIH0KICAgIH0sCiAgICBhdXRvOiB7CiAgICAgIHJlZ2V4OiAvXmF1dG8kLwogICAgfSwKICAgIHRleHRtb2RlOiB7CiAgICAgIHJlZ2V4OiAvdGV4dG1vZGVcOiguKikvLAogICAgICBvdXRwdXQ6IGZ1bmN0aW9uIG91dHB1dCh2YWwpIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWdleC5leGVjKHZhbClbMV07CiAgICAgIH0KICAgIH0KICB9OyAvL2dldEVsZW1lbnRzQnlDbGFzc05hbWUgcG9seWZpbGwKCiAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSB8fCAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCA9IGRvY3VtZW50LAogICAgICAgIG4sCiAgICAgICAgciwKICAgICAgICBpLAogICAgICAgIHMgPSBbXTsKICAgIGlmICh0LnF1ZXJ5U2VsZWN0b3JBbGwpIHJldHVybiB0LnF1ZXJ5U2VsZWN0b3JBbGwoIi4iICsgZSk7CgogICAgaWYgKHQuZXZhbHVhdGUpIHsKICAgICAgciA9ICIuLy8qW2NvbnRhaW5zKGNvbmNhdCgnICcsIEBjbGFzcywgJyAnKSwgJyAiICsgZSArICIgJyldIiwgbiA9IHQuZXZhbHVhdGUociwgdCwgbnVsbCwgMCwgbnVsbCk7CgogICAgICB3aGlsZSAoaSA9IG4uaXRlcmF0ZU5leHQoKSkgewogICAgICAgIHMucHVzaChpKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgbiA9IHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSwgciA9IG5ldyBSZWdFeHAoIihefFxccykiICsgZSArICIoXFxzfCQpIik7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykgewogICAgICAgIHIudGVzdChuW2ldLmNsYXNzTmFtZSkgJiYgcy5wdXNoKG5baV0pOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHM7CiAgfSk7IC8vZ2V0Q29tcHV0ZWRTdHlsZSBwb2x5ZmlsbAoKICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSB8fCAod2luZG93LmdldENvbXB1dGVkU3R5bGUgPSBmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIHRoaXMuZWwgPSBlLCB0aGlzLmdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgbiA9IC8oXC0oW2Etel0pezF9KS9nOwogICAgICByZXR1cm4gdCA9PSAiZmxvYXQiICYmICh0ID0gInN0eWxlRmxvYXQiKSwgbi50ZXN0KHQpICYmICh0ID0gdC5yZXBsYWNlKG4sIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzWzJdLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0pKSwgZS5jdXJyZW50U3R5bGVbdF0gPyBlLmN1cnJlbnRTdHlsZVt0XSA6IG51bGw7CiAgICB9LCB0aGlzOwogIH0pOyAvL2h0dHA6Ly9qYXZhc2NyaXB0Lm53Ym94LmNvbS9Db250ZW50TG9hZGVkIGJ5IERpZWdvIFBlcmluaSB3aXRoIG1vZGlmaWNhdGlvbnMKCiAgZnVuY3Rpb24gY29udGVudExvYWRlZChuLCB0KSB7CiAgICB2YXIgbCA9ICJjb21wbGV0ZSIsCiAgICAgICAgcyA9ICJyZWFkeXN0YXRlY2hhbmdlIiwKICAgICAgICB1ID0gITEsCiAgICAgICAgaCA9IHUsCiAgICAgICAgYyA9ICEwLAogICAgICAgIGkgPSBuLmRvY3VtZW50LAogICAgICAgIGEgPSBpLmRvY3VtZW50RWxlbWVudCwKICAgICAgICBlID0gaS5hZGRFdmVudExpc3RlbmVyID8gImFkZEV2ZW50TGlzdGVuZXIiIDogImF0dGFjaEV2ZW50IiwKICAgICAgICB2ID0gaS5hZGRFdmVudExpc3RlbmVyID8gInJlbW92ZUV2ZW50TGlzdGVuZXIiIDogImRldGFjaEV2ZW50IiwKICAgICAgICBmID0gaS5hZGRFdmVudExpc3RlbmVyID8gIiIgOiAib24iLAogICAgICAgIHIgPSBmdW5jdGlvbiByKGUpIHsKICAgICAgKGUudHlwZSAhPSBzIHx8IGkucmVhZHlTdGF0ZSA9PSBsKSAmJiAoKGUudHlwZSA9PSAibG9hZCIgPyBuIDogaSlbdl0oZiArIGUudHlwZSwgciwgdSksICFoICYmIChoID0gITApICYmIHQuY2FsbChuLCBudWxsKSk7CiAgICB9LAogICAgICAgIG8gPSBmdW5jdGlvbiBvKCkgewogICAgICB0cnkgewogICAgICAgIGEuZG9TY3JvbGwoImxlZnQiKTsKICAgICAgfSBjYXRjaCAobikgewogICAgICAgIHNldFRpbWVvdXQobywgNTApOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcigicG9sbCIpOwogICAgfTsKCiAgICBpZiAoaS5yZWFkeVN0YXRlID09IGwpIHQuY2FsbChuLCAibGF6eSIpO2Vsc2UgewogICAgICBpZiAoaS5jcmVhdGVFdmVudE9iamVjdCAmJiBhLmRvU2Nyb2xsKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGMgPSAhbi5mcmFtZUVsZW1lbnQ7CiAgICAgICAgfSBjYXRjaCAoeSkge30KCiAgICAgICAgYyAmJiBvKCk7CiAgICAgIH0KCiAgICAgIGlbZV0oZiArICJET01Db250ZW50TG9hZGVkIiwgciwgdSksIGlbZV0oZiArIHMsIHIsIHUpLCBuW2VdKGYgKyAibG9hZCIsIHIsIHUpOwogICAgfQogIH0gLy9odHRwczovL2dpc3QuZ2l0aHViLmNvbS85OTEwNTcgYnkgSmVkIFNjaG1pZHQgd2l0aCBtb2RpZmljYXRpb25zCgoKICBmdW5jdGlvbiBzZWxlY3RvcihhKSB7CiAgICBhID0gYS5tYXRjaCgvXihcVyk/KC4qKS8pOwogICAgdmFyIGIgPSBkb2N1bWVudFsiZ2V0RWxlbWVudCIgKyAoYVsxXSA/IGFbMV0gPT0gIiMiID8gIkJ5SWQiIDogInNCeUNsYXNzTmFtZSIgOiAic0J5VGFnTmFtZSIpXShhWzJdKTsKICAgIHZhciByZXQgPSBbXTsKICAgIGIgIT09IG51bGwgJiYgKGIubGVuZ3RoID8gcmV0ID0gYiA6IGIubGVuZ3RoID09PSAwID8gcmV0ID0gYiA6IHJldCA9IFtiXSk7CiAgICByZXR1cm4gcmV0OwogIH0gLy9zaGFsbG93IG9iamVjdCBwcm9wZXJ0eSBleHRlbmQKCgogIGZ1bmN0aW9uIGV4dGVuZChhLCBiKSB7CiAgICB2YXIgYyA9IHt9OwoKICAgIGZvciAodmFyIGkgaW4gYSkgewogICAgICBpZiAoYS5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgIGNbaV0gPSBhW2ldOwogICAgICB9CiAgICB9CgogICAgZm9yICh2YXIgaSBpbiBiKSB7CiAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGkpKSB7CiAgICAgICAgY1tpXSA9IGJbaV07CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYzsKICB9IC8vaGFzT3duUHJvcGVydHkgcG9seWZpbGwKCgogIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSkKICAgIC8qanNoaW50IC1XMDAxLCAtVzEwMyAqLwogICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSA9IGZ1bmN0aW9uIChwcm9wKSB7CiAgICAgIHZhciBwcm90byA9IHRoaXMuX19wcm90b19fIHx8IHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlOwogICAgICByZXR1cm4gcHJvcCBpbiB0aGlzICYmICghKHByb3AgaW4gcHJvdG8pIHx8IHByb3RvW3Byb3BdICE9PSB0aGlzW3Byb3BdKTsKICAgIH07CiAgLypqc2hpbnQgK1cwMDEsICtXMTAzICovCgogIGZ1bmN0aW9uIHRleHRfc2l6ZSh3aWR0aCwgaGVpZ2h0LCB0ZW1wbGF0ZSkgewogICAgaGVpZ2h0ID0gcGFyc2VJbnQoaGVpZ2h0LCAxMCk7CiAgICB3aWR0aCA9IHBhcnNlSW50KHdpZHRoLCAxMCk7CiAgICB2YXIgYmlnU2lkZSA9IE1hdGgubWF4KGhlaWdodCwgd2lkdGgpOwogICAgdmFyIHNtYWxsU2lkZSA9IE1hdGgubWluKGhlaWdodCwgd2lkdGgpOwogICAgdmFyIHNjYWxlID0gMSAvIDEyOwogICAgdmFyIG5ld0hlaWdodCA9IE1hdGgubWluKHNtYWxsU2lkZSAqIDAuNzUsIDAuNzUgKiBiaWdTaWRlICogc2NhbGUpOwogICAgcmV0dXJuIHsKICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKE1hdGgubWF4KHRlbXBsYXRlLnNpemUsIG5ld0hlaWdodCkpCiAgICB9OwogIH0KCiAgZnVuY3Rpb24gZHJhdyhhcmdzKSB7CiAgICB2YXIgY3R4ID0gYXJncy5jdHg7CiAgICB2YXIgZGltZW5zaW9ucyA9IGFyZ3MuZGltZW5zaW9uczsKICAgIHZhciB0ZW1wbGF0ZSA9IGFyZ3MudGVtcGxhdGU7CiAgICB2YXIgcmF0aW8gPSBhcmdzLnJhdGlvOwogICAgdmFyIGhvbGRlciA9IGFyZ3MuaG9sZGVyOwogICAgdmFyIGxpdGVyYWwgPSBob2xkZXIudGV4dG1vZGUgPT0gImxpdGVyYWwiOwogICAgdmFyIGV4YWN0ID0gaG9sZGVyLnRleHRtb2RlID09ICJleGFjdCI7CiAgICB2YXIgdHMgPSB0ZXh0X3NpemUoZGltZW5zaW9ucy53aWR0aCwgZGltZW5zaW9ucy5oZWlnaHQsIHRlbXBsYXRlKTsKICAgIHZhciB0ZXh0X2hlaWdodCA9IHRzLmhlaWdodDsKICAgIHZhciB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGggKiByYXRpbywKICAgICAgICBoZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodCAqIHJhdGlvOwogICAgdmFyIGZvbnQgPSB0ZW1wbGF0ZS5mb250ID8gdGVtcGxhdGUuZm9udCA6ICJzYW5zLXNlcmlmIjsKICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDsKICAgIGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAibWlkZGxlIjsKICAgIGN0eC5maWxsU3R5bGUgPSB0ZW1wbGF0ZS5iYWNrZ3JvdW5kOwogICAgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgY3R4LmZpbGxTdHlsZSA9IHRlbXBsYXRlLmZvcmVncm91bmQ7CiAgICBjdHguZm9udCA9ICJib2xkICIgKyB0ZXh0X2hlaWdodCArICJweCAiICsgZm9udDsKICAgIHZhciB0ZXh0ID0gdGVtcGxhdGUudGV4dCA/IHRlbXBsYXRlLnRleHQgOiBNYXRoLmZsb29yKGRpbWVuc2lvbnMud2lkdGgpICsgIngiICsgTWF0aC5mbG9vcihkaW1lbnNpb25zLmhlaWdodCk7CgogICAgaWYgKGxpdGVyYWwpIHsKICAgICAgdmFyIGRpbWVuc2lvbnMgPSBob2xkZXIuZGltZW5zaW9uczsKICAgICAgdGV4dCA9IGRpbWVuc2lvbnMud2lkdGggKyAieCIgKyBkaW1lbnNpb25zLmhlaWdodDsKICAgIH0gZWxzZSBpZiAoZXhhY3QgJiYgaG9sZGVyLmV4YWN0X2RpbWVuc2lvbnMpIHsKICAgICAgdmFyIGRpbWVuc2lvbnMgPSBob2xkZXIuZXhhY3RfZGltZW5zaW9uczsKICAgICAgdGV4dCA9IE1hdGguZmxvb3IoZGltZW5zaW9ucy53aWR0aCkgKyAieCIgKyBNYXRoLmZsb29yKGRpbWVuc2lvbnMuaGVpZ2h0KTsKICAgIH0KCiAgICB2YXIgdGV4dF93aWR0aCA9IGN0eC5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aDsKCiAgICBpZiAodGV4dF93aWR0aCAvIHdpZHRoID49IDAuNzUpIHsKICAgICAgdGV4dF9oZWlnaHQgPSBNYXRoLmZsb29yKHRleHRfaGVpZ2h0ICogMC43NSAqICh3aWR0aCAvIHRleHRfd2lkdGgpKTsKICAgIH0gLy9SZXNldHRpbmcgZm9udCBzaXplIGlmIG5lY2Vzc2FyeQoKCiAgICBjdHguZm9udCA9ICJib2xkICIgKyB0ZXh0X2hlaWdodCAqIHJhdGlvICsgInB4ICIgKyBmb250OwogICAgY3R4LmZpbGxUZXh0KHRleHQsIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgd2lkdGgpOwogICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpOwogIH0KCiAgZnVuY3Rpb24gcmVuZGVyKG1vZGUsIGVsLCBob2xkZXIsIHNyYykgewogICAgdmFyIGRpbWVuc2lvbnMgPSBob2xkZXIuZGltZW5zaW9ucywKICAgICAgICB0aGVtZSA9IGhvbGRlci50aGVtZSwKICAgICAgICB0ZXh0ID0gaG9sZGVyLnRleHQgPyBkZWNvZGVVUklDb21wb25lbnQoaG9sZGVyLnRleHQpIDogaG9sZGVyLnRleHQ7CiAgICB2YXIgZGltZW5zaW9uc19jYXB0aW9uID0gZGltZW5zaW9ucy53aWR0aCArICJ4IiArIGRpbWVuc2lvbnMuaGVpZ2h0OwogICAgdGhlbWUgPSB0ZXh0ID8gZXh0ZW5kKHRoZW1lLCB7CiAgICAgIHRleHQ6IHRleHQKICAgIH0pIDogdGhlbWU7CiAgICB0aGVtZSA9IGhvbGRlci5mb250ID8gZXh0ZW5kKHRoZW1lLCB7CiAgICAgIGZvbnQ6IGhvbGRlci5mb250CiAgICB9KSA6IHRoZW1lOwogICAgZWwuc2V0QXR0cmlidXRlKCJkYXRhLXNyYyIsIHNyYyk7CiAgICBob2xkZXIudGhlbWUgPSB0aGVtZTsKICAgIGVsLmhvbGRlcl9kYXRhID0gaG9sZGVyOwoKICAgIGlmIChtb2RlID09ICJpbWFnZSIpIHsKICAgICAgZWwuc2V0QXR0cmlidXRlKCJhbHQiLCB0ZXh0ID8gdGV4dCA6IHRoZW1lLnRleHQgPyB0aGVtZS50ZXh0ICsgIiBbIiArIGRpbWVuc2lvbnNfY2FwdGlvbiArICJdIiA6IGRpbWVuc2lvbnNfY2FwdGlvbik7CgogICAgICBpZiAoZmFsbGJhY2sgfHwgIWhvbGRlci5hdXRvKSB7CiAgICAgICAgZWwuc3R5bGUud2lkdGggPSBkaW1lbnNpb25zLndpZHRoICsgInB4IjsKICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodCArICJweCI7CiAgICAgIH0KCiAgICAgIGlmIChmYWxsYmFjaykgewogICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoZW1lLmJhY2tncm91bmQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCJzcmMiLCBkcmF3KHsKICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgZGltZW5zaW9uczogZGltZW5zaW9ucywKICAgICAgICAgIHRlbXBsYXRlOiB0aGVtZSwKICAgICAgICAgIHJhdGlvOiByYXRpbywKICAgICAgICAgIGhvbGRlcjogaG9sZGVyCiAgICAgICAgfSkpOwoKICAgICAgICBpZiAoaG9sZGVyLnRleHRtb2RlICYmIGhvbGRlci50ZXh0bW9kZSA9PSAiZXhhY3QiKSB7CiAgICAgICAgICByZXNpemFibGVfaW1hZ2VzLnB1c2goZWwpOwogICAgICAgICAgcmVzaXphYmxlX3VwZGF0ZShlbCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKG1vZGUgPT0gImJhY2tncm91bmQiKSB7CiAgICAgIGlmICghZmFsbGJhY2spIHsKICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAidXJsKCIgKyBkcmF3KHsKICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgZGltZW5zaW9uczogZGltZW5zaW9ucywKICAgICAgICAgIHRlbXBsYXRlOiB0aGVtZSwKICAgICAgICAgIHJhdGlvOiByYXRpbywKICAgICAgICAgIGhvbGRlcjogaG9sZGVyCiAgICAgICAgfSkgKyAiKSI7CiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZFNpemUgPSBkaW1lbnNpb25zLndpZHRoICsgInB4ICIgKyBkaW1lbnNpb25zLmhlaWdodCArICJweCI7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAobW9kZSA9PSAiZmx1aWQiKSB7CiAgICAgIGVsLnNldEF0dHJpYnV0ZSgiYWx0IiwgdGV4dCA/IHRleHQgOiB0aGVtZS50ZXh0ID8gdGhlbWUudGV4dCArICIgWyIgKyBkaW1lbnNpb25zX2NhcHRpb24gKyAiXSIgOiBkaW1lbnNpb25zX2NhcHRpb24pOwoKICAgICAgaWYgKGRpbWVuc2lvbnMuaGVpZ2h0LnNsaWNlKC0xKSA9PSAiJSIpIHsKICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodDsKICAgICAgfSBlbHNlIHsKICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSBkaW1lbnNpb25zLmhlaWdodCArICJweCI7CiAgICAgIH0KCiAgICAgIGlmIChkaW1lbnNpb25zLndpZHRoLnNsaWNlKC0xKSA9PSAiJSIpIHsKICAgICAgICBlbC5zdHlsZS53aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc3R5bGUud2lkdGggPSBkaW1lbnNpb25zLndpZHRoICsgInB4IjsKICAgICAgfQoKICAgICAgaWYgKGVsLnN0eWxlLmRpc3BsYXkgPT0gImlubGluZSIgfHwgZWwuc3R5bGUuZGlzcGxheSA9PT0gIiIgfHwgZWwuc3R5bGUuZGlzcGxheSA9PSAibm9uZSIpIHsKICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgfQoKICAgICAgaWYgKGZhbGxiYWNrKSB7CiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhlbWUuYmFja2dyb3VuZDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXNpemFibGVfaW1hZ2VzLnB1c2goZWwpOwogICAgICAgIHJlc2l6YWJsZV91cGRhdGUoZWwpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkaW1lbnNpb25fY2hlY2soZWwsIGNhbGxiYWNrKSB7CiAgICB2YXIgZGltZW5zaW9ucyA9IHsKICAgICAgaGVpZ2h0OiBlbC5jbGllbnRIZWlnaHQsCiAgICAgIHdpZHRoOiBlbC5jbGllbnRXaWR0aAogICAgfTsKCiAgICBpZiAoIWRpbWVuc2lvbnMuaGVpZ2h0ICYmICFkaW1lbnNpb25zLndpZHRoKSB7CiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoImRhdGEtaG9sZGVyLWludmlzaWJsZSIpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJIb2xkZXI6IHBsYWNlaG9sZGVyIGlzIG5vdCB2aXNpYmxlIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCJkYXRhLWhvbGRlci1pbnZpc2libGUiLCB0cnVlKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywgZWwpOwogICAgICAgIH0sIDEpOwogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoImRhdGEtaG9sZGVyLWludmlzaWJsZSIpOwogICAgfQoKICAgIHJldHVybiBkaW1lbnNpb25zOwogIH0KCiAgZnVuY3Rpb24gcmVzaXphYmxlX3VwZGF0ZShlbGVtZW50KSB7CiAgICB2YXIgaW1hZ2VzOwoKICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09IG51bGwpIHsKICAgICAgaW1hZ2VzID0gcmVzaXphYmxlX2ltYWdlczsKICAgIH0gZWxzZSB7CiAgICAgIGltYWdlcyA9IFtlbGVtZW50XTsKICAgIH0KCiAgICBmb3IgKHZhciBpIGluIGltYWdlcykgewogICAgICBpZiAoIWltYWdlcy5oYXNPd25Qcm9wZXJ0eShpKSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICB2YXIgZWwgPSBpbWFnZXNbaV07CgogICAgICBpZiAoZWwuaG9sZGVyX2RhdGEpIHsKICAgICAgICB2YXIgaG9sZGVyID0gZWwuaG9sZGVyX2RhdGE7CiAgICAgICAgdmFyIGRpbWVuc2lvbnMgPSBkaW1lbnNpb25fY2hlY2soZWwsIHJlc2l6YWJsZV91cGRhdGUpOwoKICAgICAgICBpZiAoZGltZW5zaW9ucykgewogICAgICAgICAgaWYgKGhvbGRlci5mbHVpZCkgewogICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoInNyYyIsIGRyYXcoewogICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgIGRpbWVuc2lvbnM6IGRpbWVuc2lvbnMsCiAgICAgICAgICAgICAgdGVtcGxhdGU6IGhvbGRlci50aGVtZSwKICAgICAgICAgICAgICByYXRpbzogcmF0aW8sCiAgICAgICAgICAgICAgaG9sZGVyOiBob2xkZXIKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChob2xkZXIudGV4dG1vZGUgJiYgaG9sZGVyLnRleHRtb2RlID09ICJleGFjdCIpIHsKICAgICAgICAgICAgaG9sZGVyLmV4YWN0X2RpbWVuc2lvbnMgPSBkaW1lbnNpb25zOwogICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoInNyYyIsIGRyYXcoewogICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgIGRpbWVuc2lvbnM6IGhvbGRlci5kaW1lbnNpb25zLAogICAgICAgICAgICAgIHRlbXBsYXRlOiBob2xkZXIudGhlbWUsCiAgICAgICAgICAgICAgcmF0aW86IHJhdGlvLAogICAgICAgICAgICAgIGhvbGRlcjogaG9sZGVyCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHBhcnNlX2ZsYWdzKGZsYWdzLCBvcHRpb25zKSB7CiAgICB2YXIgcmV0ID0gewogICAgICB0aGVtZTogZXh0ZW5kKHNldHRpbmdzLnRoZW1lcy5ncmF5LCB7fSkKICAgIH07CiAgICB2YXIgcmVuZGVyID0gZmFsc2U7CgogICAgZm9yIChzbCA9IGZsYWdzLmxlbmd0aCwgaiA9IDA7IGogPCBzbDsgaisrKSB7CiAgICAgIHZhciBmbGFnID0gZmxhZ3Nbal07CgogICAgICBpZiAoYXBwLmZsYWdzLmRpbWVuc2lvbnMubWF0Y2goZmxhZykpIHsKICAgICAgICByZW5kZXIgPSB0cnVlOwogICAgICAgIHJldC5kaW1lbnNpb25zID0gYXBwLmZsYWdzLmRpbWVuc2lvbnMub3V0cHV0KGZsYWcpOwogICAgICB9IGVsc2UgaWYgKGFwcC5mbGFncy5mbHVpZC5tYXRjaChmbGFnKSkgewogICAgICAgIHJlbmRlciA9IHRydWU7CiAgICAgICAgcmV0LmRpbWVuc2lvbnMgPSBhcHAuZmxhZ3MuZmx1aWQub3V0cHV0KGZsYWcpOwogICAgICAgIHJldC5mbHVpZCA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoYXBwLmZsYWdzLnRleHRtb2RlLm1hdGNoKGZsYWcpKSB7CiAgICAgICAgcmV0LnRleHRtb2RlID0gYXBwLmZsYWdzLnRleHRtb2RlLm91dHB1dChmbGFnKTsKICAgICAgfSBlbHNlIGlmIChhcHAuZmxhZ3MuY29sb3JzLm1hdGNoKGZsYWcpKSB7CiAgICAgICAgcmV0LnRoZW1lID0gYXBwLmZsYWdzLmNvbG9ycy5vdXRwdXQoZmxhZyk7CiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy50aGVtZXNbZmxhZ10pIHsKICAgICAgICAvL0lmIGEgdGhlbWUgaXMgc3BlY2lmaWVkLCBpdCB3aWxsIG92ZXJyaWRlIGN1c3RvbSBjb2xvcnMKICAgICAgICBpZiAob3B0aW9ucy50aGVtZXMuaGFzT3duUHJvcGVydHkoZmxhZykpIHsKICAgICAgICAgIHJldC50aGVtZSA9IGV4dGVuZChvcHRpb25zLnRoZW1lc1tmbGFnXSwge30pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChhcHAuZmxhZ3MuZm9udC5tYXRjaChmbGFnKSkgewogICAgICAgIHJldC5mb250ID0gYXBwLmZsYWdzLmZvbnQub3V0cHV0KGZsYWcpOwogICAgICB9IGVsc2UgaWYgKGFwcC5mbGFncy5hdXRvLm1hdGNoKGZsYWcpKSB7CiAgICAgICAgcmV0LmF1dG8gPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGFwcC5mbGFncy50ZXh0Lm1hdGNoKGZsYWcpKSB7CiAgICAgICAgcmV0LnRleHQgPSBhcHAuZmxhZ3MudGV4dC5vdXRwdXQoZmxhZyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVuZGVyID8gcmV0IDogZmFsc2U7CiAgfQoKICBmb3IgKHZhciBmbGFnIGluIGFwcC5mbGFncykgewogICAgaWYgKCFhcHAuZmxhZ3MuaGFzT3duUHJvcGVydHkoZmxhZykpIGNvbnRpbnVlOwoKICAgIGFwcC5mbGFnc1tmbGFnXS5tYXRjaCA9IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbC5tYXRjaCh0aGlzLnJlZ2V4KTsKICAgIH07CiAgfQoKICBhcHAuYWRkX3RoZW1lID0gZnVuY3Rpb24gKG5hbWUsIHRoZW1lKSB7CiAgICBuYW1lICE9IG51bGwgJiYgdGhlbWUgIT0gbnVsbCAmJiAoc2V0dGluZ3MudGhlbWVzW25hbWVdID0gdGhlbWUpOwogICAgcmV0dXJuIGFwcDsKICB9OwoKICBhcHAuYWRkX2ltYWdlID0gZnVuY3Rpb24gKHNyYywgZWwpIHsKICAgIHZhciBub2RlID0gc2VsZWN0b3IoZWwpOwoKICAgIGlmIChub2RlLmxlbmd0aCkgewogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwogICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoImRhdGEtc3JjIiwgc3JjKTsKICAgICAgICBub2RlW2ldLmFwcGVuZENoaWxkKGltZyk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYXBwOwogIH07CgogIGFwcC5ydW4gPSBmdW5jdGlvbiAobykgewogICAgcHJlZW1wdGVkID0gdHJ1ZTsKICAgIHZhciBvcHRpb25zID0gZXh0ZW5kKHNldHRpbmdzLCBvKSwKICAgICAgICBpbWFnZXMgPSBbXSwKICAgICAgICBpbWFnZU5vZGVzID0gW10sCiAgICAgICAgYmdub2RlcyA9IFtdOwoKICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pbWFnZXMgPT0gInN0cmluZyIpIHsKICAgICAgaW1hZ2VOb2RlcyA9IHNlbGVjdG9yKG9wdGlvbnMuaW1hZ2VzKTsKICAgIH0gZWxzZSBpZiAod2luZG93Lk5vZGVMaXN0ICYmIG9wdGlvbnMuaW1hZ2VzIGluc3RhbmNlb2Ygd2luZG93Lk5vZGVMaXN0KSB7CiAgICAgIGltYWdlTm9kZXMgPSBvcHRpb25zLmltYWdlczsKICAgIH0gZWxzZSBpZiAod2luZG93Lk5vZGUgJiYgb3B0aW9ucy5pbWFnZXMgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZSkgewogICAgICBpbWFnZU5vZGVzID0gW29wdGlvbnMuaW1hZ2VzXTsKICAgIH0KCiAgICBpZiAodHlwZW9mIG9wdGlvbnMuYmdub2RlcyA9PSAic3RyaW5nIikgewogICAgICBiZ25vZGVzID0gc2VsZWN0b3Iob3B0aW9ucy5iZ25vZGVzKTsKICAgIH0gZWxzZSBpZiAod2luZG93Lk5vZGVMaXN0ICYmIG9wdGlvbnMuZWxlbWVudHMgaW5zdGFuY2VvZiB3aW5kb3cuTm9kZUxpc3QpIHsKICAgICAgYmdub2RlcyA9IG9wdGlvbnMuYmdub2RlczsKICAgIH0gZWxzZSBpZiAod2luZG93Lk5vZGUgJiYgb3B0aW9ucy5iZ25vZGVzIGluc3RhbmNlb2Ygd2luZG93Lk5vZGUpIHsKICAgICAgYmdub2RlcyA9IFtvcHRpb25zLmJnbm9kZXNdOwogICAgfQoKICAgIGZvciAoaSA9IDAsIGwgPSBpbWFnZU5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBpbWFnZXMucHVzaChpbWFnZU5vZGVzW2ldKTsKICAgIH0KCiAgICB2YXIgaG9sZGVyY3NzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhvbGRlcmpzLXN0eWxlIik7CgogICAgaWYgKCFob2xkZXJjc3MpIHsKICAgICAgaG9sZGVyY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgaG9sZGVyY3NzLnNldEF0dHJpYnV0ZSgiaWQiLCAiaG9sZGVyanMtc3R5bGUiKTsKICAgICAgaG9sZGVyY3NzLnR5cGUgPSAidGV4dC9jc3MiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGhvbGRlcmNzcyk7CiAgICB9CgogICAgaWYgKCFvcHRpb25zLm5vY3NzKSB7CiAgICAgIGlmIChob2xkZXJjc3Muc3R5bGVTaGVldCkgewogICAgICAgIGhvbGRlcmNzcy5zdHlsZVNoZWV0LmNzc1RleHQgKz0gb3B0aW9ucy5zdHlsZXNoZWV0OwogICAgICB9IGVsc2UgewogICAgICAgIGhvbGRlcmNzcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcHRpb25zLnN0eWxlc2hlZXQpKTsKICAgICAgfQogICAgfQoKICAgIHZhciBjc3NyZWdleCA9IG5ldyBSZWdFeHAob3B0aW9ucy5kb21haW4gKyAiXC8oLio/KVwiP1xcKSIpOwoKICAgIGZvciAodmFyIGwgPSBiZ25vZGVzLmxlbmd0aCwgaSA9IDA7IGkgPCBsOyBpKyspIHsKICAgICAgdmFyIHNyYyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGJnbm9kZXNbaV0sIG51bGwpLmdldFByb3BlcnR5VmFsdWUoImJhY2tncm91bmQtaW1hZ2UiKTsKICAgICAgdmFyIGZsYWdzID0gc3JjLm1hdGNoKGNzc3JlZ2V4KTsKICAgICAgdmFyIGJnc3JjID0gYmdub2Rlc1tpXS5nZXRBdHRyaWJ1dGUoImRhdGEtYmFja2dyb3VuZC1zcmMiKTsKCiAgICAgIGlmIChmbGFncykgewogICAgICAgIHZhciBob2xkZXIgPSBwYXJzZV9mbGFncyhmbGFnc1sxXS5zcGxpdCgiLyIpLCBvcHRpb25zKTsKCiAgICAgICAgaWYgKGhvbGRlcikgewogICAgICAgICAgcmVuZGVyKCJiYWNrZ3JvdW5kIiwgYmdub2Rlc1tpXSwgaG9sZGVyLCBzcmMpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChiZ3NyYyAhPSBudWxsKSB7CiAgICAgICAgdmFyIGhvbGRlciA9IHBhcnNlX2ZsYWdzKGJnc3JjLnN1YnN0cihiZ3NyYy5sYXN0SW5kZXhPZihvcHRpb25zLmRvbWFpbikgKyBvcHRpb25zLmRvbWFpbi5sZW5ndGggKyAxKS5zcGxpdCgiLyIpLCBvcHRpb25zKTsKCiAgICAgICAgaWYgKGhvbGRlcikgewogICAgICAgICAgcmVuZGVyKCJiYWNrZ3JvdW5kIiwgYmdub2Rlc1tpXSwgaG9sZGVyLCBzcmMpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZvciAobCA9IGltYWdlcy5sZW5ndGgsIGkgPSAwOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZhciBhdHRyX2RhdGFfc3JjLCBhdHRyX3NyYzsKICAgICAgYXR0cl9zcmMgPSBhdHRyX2RhdGFfc3JjID0gc3JjID0gbnVsbDsKCiAgICAgIHRyeSB7CiAgICAgICAgYXR0cl9zcmMgPSBpbWFnZXNbaV0uZ2V0QXR0cmlidXRlKCJzcmMiKTsKICAgICAgICBhdHRyX2RhdGFzcmMgPSBpbWFnZXNbaV0uZ2V0QXR0cmlidXRlKCJkYXRhLXNyYyIpOwogICAgICB9IGNhdGNoIChlKSB7fQoKICAgICAgaWYgKGF0dHJfZGF0YXNyYyA9PSBudWxsICYmICEhYXR0cl9zcmMgJiYgYXR0cl9zcmMuaW5kZXhPZihvcHRpb25zLmRvbWFpbikgPj0gMCkgewogICAgICAgIHNyYyA9IGF0dHJfc3JjOwogICAgICB9IGVsc2UgaWYgKCEhYXR0cl9kYXRhc3JjICYmIGF0dHJfZGF0YXNyYy5pbmRleE9mKG9wdGlvbnMuZG9tYWluKSA+PSAwKSB7CiAgICAgICAgc3JjID0gYXR0cl9kYXRhc3JjOwogICAgICB9CgogICAgICBpZiAoc3JjKSB7CiAgICAgICAgdmFyIGhvbGRlciA9IHBhcnNlX2ZsYWdzKHNyYy5zdWJzdHIoc3JjLmxhc3RJbmRleE9mKG9wdGlvbnMuZG9tYWluKSArIG9wdGlvbnMuZG9tYWluLmxlbmd0aCArIDEpLnNwbGl0KCIvIiksIG9wdGlvbnMpOwoKICAgICAgICBpZiAoaG9sZGVyKSB7CiAgICAgICAgICBpZiAoaG9sZGVyLmZsdWlkKSB7CiAgICAgICAgICAgIHJlbmRlcigiZmx1aWQiLCBpbWFnZXNbaV0sIGhvbGRlciwgc3JjKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlbmRlcigiaW1hZ2UiLCBpbWFnZXNbaV0sIGhvbGRlciwgc3JjKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gYXBwOwogIH07CgogIGNvbnRlbnRMb2FkZWQod2luLCBmdW5jdGlvbiAoKSB7CiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHJlc2l6YWJsZV91cGRhdGUsIGZhbHNlKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9yaWVudGF0aW9uY2hhbmdlIiwgcmVzaXphYmxlX3VwZGF0ZSwgZmFsc2UpOwogICAgfSBlbHNlIHsKICAgICAgd2luZG93LmF0dGFjaEV2ZW50KCJvbnJlc2l6ZSIsIHJlc2l6YWJsZV91cGRhdGUpOwogICAgfQoKICAgIHByZWVtcHRlZCB8fCBhcHAucnVuKCk7CiAgfSk7CgogIGlmICh0eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQpIHsKICAgIGRlZmluZShbXSwgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gYXBwOwogICAgfSk7CiAgfQp9KShIb2xkZXIsIHdpbmRvdyk7CgohZnVuY3Rpb24gKG4sIHIpIHsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShyKSA6ICJvYmplY3QiID09ICh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID8gbW9kdWxlLmV4cG9ydHMgPSByKCkgOiBuLnRyYW5zZm9ybWljb25zID0gcigpOwp9KHRoaXMgfHwgd2luZG93LCBmdW5jdGlvbiAoKSB7CiAgInVzZSBzdHJpY3QiOwoKICB2YXIgbiA9IHt9LAogICAgICByID0gInRjb24tdHJhbnNmb3JtIiwKICAgICAgdCA9IHsKICAgIHRyYW5zZm9ybTogWyJjbGljayJdLAogICAgcmV2ZXJ0OiBbImNsaWNrIl0KICB9LAogICAgICBlID0gZnVuY3Rpb24gZShuKSB7CiAgICByZXR1cm4gInN0cmluZyIgPT0gdHlwZW9mIG4gPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG4pKSA6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBuIHx8IG4gaW5zdGFuY2VvZiBBcnJheSA/IG4gOiBbbl07CiAgfSwKICAgICAgbyA9IGZ1bmN0aW9uIG8obikgewogICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBuID8gbi50b0xvd2VyQ2FzZSgpLnNwbGl0KCIgIikgOiBuOwogIH0sCiAgICAgIGYgPSBmdW5jdGlvbiBmKG4sIHIsIF9mKSB7CiAgICB2YXIgYyA9IChfZiA/ICJyZW1vdmUiIDogImFkZCIpICsgIkV2ZW50TGlzdGVuZXIiLAogICAgICAgIHUgPSBlKG4pLAogICAgICAgIHMgPSB1Lmxlbmd0aCwKICAgICAgICBhID0ge307CgogICAgZm9yICh2YXIgbCBpbiB0KSB7CiAgICAgIGFbbF0gPSByICYmIHJbbF0gPyBvKHJbbF0pIDogdFtsXTsKICAgIH0KCiAgICBmb3IgKDsgcy0tOykgewogICAgICBmb3IgKHZhciBkIGluIGEpIHsKICAgICAgICBmb3IgKHZhciB2ID0gYVtkXS5sZW5ndGg7IHYtLTspIHsKICAgICAgICAgIHVbc11bY10oYVtkXVt2XSwgaSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICAgICAgaSA9IGZ1bmN0aW9uIGkocikgewogICAgbi50b2dnbGUoci5jdXJyZW50VGFyZ2V0KTsKICB9OwoKICByZXR1cm4gbi5hZGQgPSBmdW5jdGlvbiAociwgdCkgewogICAgcmV0dXJuIGYociwgdCksIG47CiAgfSwgbi5yZW1vdmUgPSBmdW5jdGlvbiAociwgdCkgewogICAgcmV0dXJuIGYociwgdCwgITApLCBuOwogIH0sIG4udHJhbnNmb3JtID0gZnVuY3Rpb24gKHQpIHsKICAgIHJldHVybiBlKHQpLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgbi5jbGFzc0xpc3QuYWRkKHIpOwogICAgfSksIG47CiAgfSwgbi5yZXZlcnQgPSBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuIGUodCkuZm9yRWFjaChmdW5jdGlvbiAobikgewogICAgICBuLmNsYXNzTGlzdC5yZW1vdmUocik7CiAgICB9KSwgbjsKICB9LCBuLnRvZ2dsZSA9IGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gZSh0KS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgIG5bdC5jbGFzc0xpc3QuY29udGFpbnMocikgPyAicmV2ZXJ0IiA6ICJ0cmFuc2Zvcm0iXSh0KTsKICAgIH0pLCBuOwogIH0sIG47Cn0pOyAvL3RyYW5zZm9ybWljb25zLmFkZCgnLnRjb24nKTsKCi8qIFBBQ0UgKi8KCi8qISBwYWNlIDAuNS42ICovCgooZnVuY3Rpb24gKCkgewogIHZhciBBamF4TW9uaXRvciwKICAgICAgQmFyLAogICAgICBEb2N1bWVudE1vbml0b3IsCiAgICAgIEVsZW1lbnRNb25pdG9yLAogICAgICBFbGVtZW50VHJhY2tlciwKICAgICAgRXZlbnRMYWdNb25pdG9yLAogICAgICBFdmVudGVkLAogICAgICBFdmVudHMsCiAgICAgIE5vVGFyZ2V0RXJyb3IsCiAgICAgIFJlcXVlc3RJbnRlcmNlcHQsCiAgICAgIFNPVVJDRV9LRVlTLAogICAgICBTY2FsZXIsCiAgICAgIFNvY2tldFJlcXVlc3RUcmFja2VyLAogICAgICBYSFJSZXF1ZXN0VHJhY2tlciwKICAgICAgYW5pbWF0aW9uLAogICAgICBhdmdBbXBsaXR1ZGUsCiAgICAgIGJhciwKICAgICAgY2FuY2VsQW5pbWF0aW9uLAogICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSwKICAgICAgZGVmYXVsdE9wdGlvbnMsCiAgICAgIF9leHRlbmQsCiAgICAgIGV4dGVuZE5hdGl2ZSwKICAgICAgZ2V0RnJvbURPTSwKICAgICAgZ2V0SW50ZXJjZXB0LAogICAgICBoYW5kbGVQdXNoU3RhdGUsCiAgICAgIGlnbm9yZVN0YWNrLAogICAgICBpbml0LAogICAgICBub3csCiAgICAgIG9wdGlvbnMsCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSwKICAgICAgcmVzdWx0LAogICAgICBydW5BbmltYXRpb24sCiAgICAgIHNjYWxlcnMsCiAgICAgIHNob3VsZFRyYWNrLAogICAgICBzb3VyY2UsCiAgICAgIHNvdXJjZXMsCiAgICAgIHVuaVNjYWxlciwKICAgICAgX1dlYlNvY2tldCwKICAgICAgX1hEb21haW5SZXF1ZXN0LAogICAgICBfWE1MSHR0cFJlcXVlc3QsCiAgICAgIF9pLAogICAgICBfaW50ZXJjZXB0LAogICAgICBfbGVuLAogICAgICBfcHVzaFN0YXRlLAogICAgICBfcmVmLAogICAgICBfcmVmMSwKICAgICAgX3JlcGxhY2VTdGF0ZSwKICAgICAgX19zbGljZSA9IFtdLnNsaWNlLAogICAgICBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSwKICAgICAgX19leHRlbmRzID0gZnVuY3Rpb24gX19leHRlbmRzKGNoaWxkLCBwYXJlbnQpIHsKICAgIGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsKICAgICAgaWYgKF9faGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOwogICAgfQoKICAgIGZ1bmN0aW9uIGN0b3IoKSB7CiAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsKICAgIH0KCiAgICBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7CiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOwogICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsKICAgIHJldHVybiBjaGlsZDsKICB9LAogICAgICBfX2luZGV4T2YgPSBbXS5pbmRleE9mIHx8IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH07CgogIGRlZmF1bHRPcHRpb25zID0gewogICAgY2F0Y2h1cFRpbWU6IDUwMCwKICAgIGluaXRpYWxSYXRlOiAuMDMsCiAgICBtaW5UaW1lOiA1MDAsCiAgICBnaG9zdFRpbWU6IDUwMCwKICAgIG1heFByb2dyZXNzUGVyRnJhbWU6IDEwLAogICAgZWFzZUZhY3RvcjogMS4yNSwKICAgIHN0YXJ0T25QYWdlTG9hZDogdHJ1ZSwKICAgIHJlc3RhcnRPblB1c2hTdGF0ZTogdHJ1ZSwKICAgIHJlc3RhcnRPblJlcXVlc3RBZnRlcjogNTAwLAogICAgdGFyZ2V0OiAnLnByZWxvYWRlcicsCiAgICBlbGVtZW50czogewogICAgICBjaGVja0ludGVydmFsOiAxMDAsCiAgICAgIHNlbGVjdG9yczogWycucHJlbG9hZGVyJ10KICAgIH0sCiAgICBldmVudExhZzogewogICAgICBtaW5TYW1wbGVzOiAxMCwKICAgICAgc2FtcGxlQ291bnQ6IDMsCiAgICAgIGxhZ1RocmVzaG9sZDogMwogICAgfSwKICAgIGFqYXg6IGZhbHNlCiAgfTsKCiAgbm93ID0gZnVuY3Rpb24gbm93KCkgewogICAgdmFyIF9yZWY7CgogICAgcmV0dXJuIChfcmVmID0gdHlwZW9mIHBlcmZvcm1hbmNlICE9PSAidW5kZWZpbmVkIiAmJiBwZXJmb3JtYW5jZSAhPT0gbnVsbCA/IHR5cGVvZiBwZXJmb3JtYW5jZS5ub3cgPT09ICJmdW5jdGlvbiIgPyBwZXJmb3JtYW5jZS5ub3coKSA6IHZvaWQgMCA6IHZvaWQgMCkgIT0gbnVsbCA/IF9yZWYgOiArbmV3IERhdGUoKTsKICB9OwoKICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7CiAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lOwoKICBpZiAocmVxdWVzdEFuaW1hdGlvbkZyYW1lID09IG51bGwpIHsKICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIHJlcXVlc3RBbmltYXRpb25GcmFtZShmbikgewogICAgICByZXR1cm4gc2V0VGltZW91dChmbiwgNTApOwogICAgfTsKCiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKSB7CiAgICAgIHJldHVybiBjbGVhclRpbWVvdXQoaWQpOwogICAgfTsKICB9CgogIHJ1bkFuaW1hdGlvbiA9IGZ1bmN0aW9uIHJ1bkFuaW1hdGlvbihmbikgewogICAgdmFyIGxhc3QsIF90aWNrMjsKCiAgICBsYXN0ID0gbm93KCk7CgogICAgX3RpY2syID0gZnVuY3Rpb24gdGljaygpIHsKICAgICAgdmFyIGRpZmY7CiAgICAgIGRpZmYgPSBub3coKSAtIGxhc3Q7CgogICAgICBpZiAoZGlmZiA+PSAzMykgewogICAgICAgIGxhc3QgPSBub3coKTsKICAgICAgICByZXR1cm4gZm4oZGlmZiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHJlcXVlc3RBbmltYXRpb25GcmFtZShfdGljazIpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBzZXRUaW1lb3V0KF90aWNrMiwgMzMgLSBkaWZmKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gX3RpY2syKCk7CiAgfTsKCiAgcmVzdWx0ID0gZnVuY3Rpb24gcmVzdWx0KCkgewogICAgdmFyIGFyZ3MsIGtleSwgb2JqOwogICAgb2JqID0gYXJndW1lbnRzWzBdLCBrZXkgPSBhcmd1bWVudHNbMV0sIGFyZ3MgPSAzIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSA6IFtdOwoKICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIG9ialtrZXldLmFwcGx5KG9iaiwgYXJncyk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gb2JqW2tleV07CiAgICB9CiAgfTsKCiAgX2V4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZCgpIHsKICAgIHZhciBrZXksIG91dCwgc291cmNlLCBzb3VyY2VzLCB2YWwsIF9pLCBfbGVuOwoKICAgIG91dCA9IGFyZ3VtZW50c1swXSwgc291cmNlcyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107CgogICAgZm9yIChfaSA9IDAsIF9sZW4gPSBzb3VyY2VzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7CiAgICAgIHNvdXJjZSA9IHNvdXJjZXNbX2ldOwoKICAgICAgaWYgKHNvdXJjZSkgewogICAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkgewogICAgICAgICAgaWYgKCFfX2hhc1Byb3AuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOwogICAgICAgICAgdmFsID0gc291cmNlW2tleV07CgogICAgICAgICAgaWYgKG91dFtrZXldICE9IG51bGwgJiYgX3R5cGVvZihvdXRba2V5XSkgPT09ICdvYmplY3QnICYmIHZhbCAhPSBudWxsICYmIF90eXBlb2YodmFsKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgX2V4dGVuZChvdXRba2V5XSwgdmFsKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG91dFtrZXldID0gdmFsOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHJldHVybiBvdXQ7CiAgfTsKCiAgYXZnQW1wbGl0dWRlID0gZnVuY3Rpb24gYXZnQW1wbGl0dWRlKGFycikgewogICAgdmFyIGNvdW50LCBzdW0sIHYsIF9pLCBfbGVuOwoKICAgIHN1bSA9IGNvdW50ID0gMDsKCiAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGFyci5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgICB2ID0gYXJyW19pXTsKICAgICAgc3VtICs9IE1hdGguYWJzKHYpOwogICAgICBjb3VudCsrOwogICAgfQoKICAgIHJldHVybiBzdW0gLyBjb3VudDsKICB9OwoKICBnZXRGcm9tRE9NID0gZnVuY3Rpb24gZ2V0RnJvbURPTShrZXksIGpzb24pIHsKICAgIHZhciBkYXRhLCBlLCBlbDsKCiAgICBpZiAoa2V5ID09IG51bGwpIHsKICAgICAga2V5ID0gJ29wdGlvbnMnOwogICAgfQoKICAgIGlmIChqc29uID09IG51bGwpIHsKICAgICAganNvbiA9IHRydWU7CiAgICB9CgogICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1wYWNlLSIgKyBrZXkgKyAiXSIpOwoKICAgIGlmICghZWwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGRhdGEgPSBlbC5nZXRBdHRyaWJ1dGUoImRhdGEtcGFjZS0iICsga2V5KTsKCiAgICBpZiAoIWpzb24pIHsKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9CgogICAgdHJ5IHsKICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSk7CiAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgZSA9IF9lcnJvcjsKICAgICAgcmV0dXJuIHR5cGVvZiBjb25zb2xlICE9PSAidW5kZWZpbmVkIiAmJiBjb25zb2xlICE9PSBudWxsID8gY29uc29sZS5lcnJvcigiRXJyb3IgcGFyc2luZyBpbmxpbmUgcGFjZSBvcHRpb25zIiwgZSkgOiB2b2lkIDA7CiAgICB9CiAgfTsKCiAgRXZlbnRlZCA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEV2ZW50ZWQoKSB7fQoKICAgIEV2ZW50ZWQucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCBjdHgsIG9uY2UpIHsKICAgICAgdmFyIF9iYXNlOwoKICAgICAgaWYgKG9uY2UgPT0gbnVsbCkgewogICAgICAgIG9uY2UgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuYmluZGluZ3MgPT0gbnVsbCkgewogICAgICAgIHRoaXMuYmluZGluZ3MgPSB7fTsKICAgICAgfQoKICAgICAgaWYgKChfYmFzZSA9IHRoaXMuYmluZGluZ3MpW2V2ZW50XSA9PSBudWxsKSB7CiAgICAgICAgX2Jhc2VbZXZlbnRdID0gW107CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmJpbmRpbmdzW2V2ZW50XS5wdXNoKHsKICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLAogICAgICAgIGN0eDogY3R4LAogICAgICAgIG9uY2U6IG9uY2UKICAgICAgfSk7CiAgICB9OwoKICAgIEV2ZW50ZWQucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIGN0eCkgewogICAgICByZXR1cm4gdGhpcy5vbihldmVudCwgaGFuZGxlciwgY3R4LCB0cnVlKTsKICAgIH07CgogICAgRXZlbnRlZC5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyKSB7CiAgICAgIHZhciBpLCBfcmVmLCBfcmVzdWx0czsKCiAgICAgIGlmICgoKF9yZWYgPSB0aGlzLmJpbmRpbmdzKSAhPSBudWxsID8gX3JlZltldmVudF0gOiB2b2lkIDApID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChoYW5kbGVyID09IG51bGwpIHsKICAgICAgICByZXR1cm4gZGVsZXRlIHRoaXMuYmluZGluZ3NbZXZlbnRdOwogICAgICB9IGVsc2UgewogICAgICAgIGkgPSAwOwogICAgICAgIF9yZXN1bHRzID0gW107CgogICAgICAgIHdoaWxlIChpIDwgdGhpcy5iaW5kaW5nc1tldmVudF0ubGVuZ3RoKSB7CiAgICAgICAgICBpZiAodGhpcy5iaW5kaW5nc1tldmVudF1baV0uaGFuZGxlciA9PT0gaGFuZGxlcikgewogICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGkrKyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICAgIH0KICAgIH07CgogICAgRXZlbnRlZC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGFyZ3MsIGN0eCwgZXZlbnQsIGhhbmRsZXIsIGksIG9uY2UsIF9yZWYsIF9yZWYxLCBfcmVzdWx0czsKCiAgICAgIGV2ZW50ID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTsKCiAgICAgIGlmICgoX3JlZiA9IHRoaXMuYmluZGluZ3MpICE9IG51bGwgPyBfcmVmW2V2ZW50XSA6IHZvaWQgMCkgewogICAgICAgIGkgPSAwOwogICAgICAgIF9yZXN1bHRzID0gW107CgogICAgICAgIHdoaWxlIChpIDwgdGhpcy5iaW5kaW5nc1tldmVudF0ubGVuZ3RoKSB7CiAgICAgICAgICBfcmVmMSA9IHRoaXMuYmluZGluZ3NbZXZlbnRdW2ldLCBoYW5kbGVyID0gX3JlZjEuaGFuZGxlciwgY3R4ID0gX3JlZjEuY3R4LCBvbmNlID0gX3JlZjEub25jZTsKICAgICAgICAgIGhhbmRsZXIuYXBwbHkoY3R4ICE9IG51bGwgPyBjdHggOiB0aGlzLCBhcmdzKTsKCiAgICAgICAgICBpZiAob25jZSkgewogICAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRoaXMuYmluZGluZ3NbZXZlbnRdLnNwbGljZShpLCAxKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfcmVzdWx0cy5wdXNoKGkrKyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gX3Jlc3VsdHM7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIEV2ZW50ZWQ7CiAgfSgpOwoKICBpZiAod2luZG93LlBhY2UgPT0gbnVsbCkgewogICAgd2luZG93LlBhY2UgPSB7fTsKICB9CgogIF9leHRlbmQoUGFjZSwgRXZlbnRlZC5wcm90b3R5cGUpOwoKICBvcHRpb25zID0gUGFjZS5vcHRpb25zID0gX2V4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIHdpbmRvdy5wYWNlT3B0aW9ucywgZ2V0RnJvbURPTSgpKTsKICBfcmVmID0gWydhamF4JywgJ2RvY3VtZW50JywgJ2V2ZW50TGFnJywgJ2VsZW1lbnRzJ107CgogIGZvciAoX2kgPSAwLCBfbGVuID0gX3JlZi5sZW5ndGg7IF9pIDwgX2xlbjsgX2krKykgewogICAgc291cmNlID0gX3JlZltfaV07CgogICAgaWYgKG9wdGlvbnNbc291cmNlXSA9PT0gdHJ1ZSkgewogICAgICBvcHRpb25zW3NvdXJjZV0gPSBkZWZhdWx0T3B0aW9uc1tzb3VyY2VdOwogICAgfQogIH0KCiAgTm9UYXJnZXRFcnJvciA9IGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgIF9fZXh0ZW5kcyhOb1RhcmdldEVycm9yLCBfc3VwZXIpOwoKICAgIGZ1bmN0aW9uIE5vVGFyZ2V0RXJyb3IoKSB7CiAgICAgIF9yZWYxID0gTm9UYXJnZXRFcnJvci5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgcmV0dXJuIF9yZWYxOwogICAgfQoKICAgIHJldHVybiBOb1RhcmdldEVycm9yOwogIH0oRXJyb3IpOwoKICBCYXIgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBCYXIoKSB7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwOwogICAgfQoKICAgIEJhci5wcm90b3R5cGUuZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHRhcmdldEVsZW1lbnQ7CgogICAgICBpZiAodGhpcy5lbCA9PSBudWxsKSB7CiAgICAgICAgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy50YXJnZXQpOwoKICAgICAgICBpZiAoIXRhcmdldEVsZW1lbnQpIHsKICAgICAgICAgIHRocm93IG5ldyBOb1RhcmdldEVycm9yKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgdGhpcy5lbC5jbGFzc05hbWUgPSAicGFjZSBwYWNlLWFjdGl2ZSI7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTmFtZS5yZXBsYWNlKCdwYWNlLWRvbmUnLCAnJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgKz0gJyBwYWNlLXJ1bm5pbmcnOwogICAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9InBhY2UtcHJvZ3Jlc3MiPlxuICA8ZGl2IGNsYXNzPSJwYWNlLXByb2dyZXNzLWlubmVyIj48L2Rpdj5cbjwvZGl2PlxuPGRpdiBjbGFzcz0icGFjZS1hY3Rpdml0eSI+PC9kaXY+JzsKCiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuZmlyc3RDaGlsZCAhPSBudWxsKSB7CiAgICAgICAgICB0YXJnZXRFbGVtZW50Lmluc2VydEJlZm9yZSh0aGlzLmVsLCB0YXJnZXRFbGVtZW50LmZpcnN0Q2hpbGQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZWwpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZWw7CiAgICB9OwoKICAgIEJhci5wcm90b3R5cGUuZmluaXNoID0gZnVuY3Rpb24gKCkgewogICAgICAkKCcucHJlbG9hZGVyJykuZmFkZU91dCg1MDApOwogICAgICB2YXIgZWw7CiAgICAgIGVsID0gdGhpcy5nZXRFbGVtZW50KCk7CiAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKCdwYWNlLWFjdGl2ZScsICcnKTsKICAgICAgZWwuY2xhc3NOYW1lICs9ICcgcGFjZS1pbmFjdGl2ZSc7CiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lID0gZG9jdW1lbnQuYm9keS5jbGFzc05hbWUucmVwbGFjZSgncGFjZS1ydW5uaW5nJywgJycpOwogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgKz0gJyBwYWNlLWRvbmUnOwogICAgfTsKCiAgICBCYXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9nKSB7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9nOwogICAgICByZXR1cm4gdGhpcy5yZW5kZXIoKTsKICAgIH07CgogICAgQmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5nZXRFbGVtZW50KCkpOwogICAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgICBOb1RhcmdldEVycm9yID0gX2Vycm9yOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5lbCA9IHZvaWQgMDsKICAgIH07CgogICAgQmFyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlbCwgcHJvZ3Jlc3NTdHI7CgogICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnRhcmdldCkgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgZWwgPSB0aGlzLmdldEVsZW1lbnQoKTsKICAgICAgZWwuY2hpbGRyZW5bMF0uc3R5bGUud2lkdGggPSAiIiArIHRoaXMucHJvZ3Jlc3MgKyAiJSI7CgogICAgICBpZiAoIXRoaXMubGFzdFJlbmRlcmVkUHJvZ3Jlc3MgfHwgdGhpcy5sYXN0UmVuZGVyZWRQcm9ncmVzcyB8IDAgIT09IHRoaXMucHJvZ3Jlc3MgfCAwKSB7CiAgICAgICAgZWwuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdkYXRhLXByb2dyZXNzLXRleHQnLCAiIiArICh0aGlzLnByb2dyZXNzIHwgMCkgKyAiJSIpOwoKICAgICAgICBpZiAodGhpcy5wcm9ncmVzcyA+PSAxMDApIHsKICAgICAgICAgIHByb2dyZXNzU3RyID0gJzk5JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHJvZ3Jlc3NTdHIgPSB0aGlzLnByb2dyZXNzIDwgMTAgPyAiMCIgOiAiIjsKICAgICAgICAgIHByb2dyZXNzU3RyICs9IHRoaXMucHJvZ3Jlc3MgfCAwOwogICAgICAgIH0KCiAgICAgICAgZWwuY2hpbGRyZW5bMF0uc2V0QXR0cmlidXRlKCdkYXRhLXByb2dyZXNzJywgIiIgKyBwcm9ncmVzc1N0cik7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmxhc3RSZW5kZXJlZFByb2dyZXNzID0gdGhpcy5wcm9ncmVzczsKICAgIH07CgogICAgQmFyLnByb3RvdHlwZS5kb25lID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5wcm9ncmVzcyA+PSAxMDA7CiAgICB9OwoKICAgIHJldHVybiBCYXI7CiAgfSgpOwoKICBFdmVudHMgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBFdmVudHMoKSB7CiAgICAgIHRoaXMuYmluZGluZ3MgPSB7fTsKICAgIH0KCiAgICBFdmVudHMucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAobmFtZSwgdmFsKSB7CiAgICAgIHZhciBiaW5kaW5nLCBfaiwgX2xlbjEsIF9yZWYyLCBfcmVzdWx0czsKCiAgICAgIGlmICh0aGlzLmJpbmRpbmdzW25hbWVdICE9IG51bGwpIHsKICAgICAgICBfcmVmMiA9IHRoaXMuYmluZGluZ3NbbmFtZV07CiAgICAgICAgX3Jlc3VsdHMgPSBbXTsKCiAgICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjIubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgICAgICBiaW5kaW5nID0gX3JlZjJbX2pdOwoKICAgICAgICAgIF9yZXN1bHRzLnB1c2goYmluZGluZy5jYWxsKHRoaXMsIHZhbCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgICB9CiAgICB9OwoKICAgIEV2ZW50cy5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAobmFtZSwgZm4pIHsKICAgICAgdmFyIF9iYXNlOwoKICAgICAgaWYgKChfYmFzZSA9IHRoaXMuYmluZGluZ3MpW25hbWVdID09IG51bGwpIHsKICAgICAgICBfYmFzZVtuYW1lXSA9IFtdOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5iaW5kaW5nc1tuYW1lXS5wdXNoKGZuKTsKICAgIH07CgogICAgcmV0dXJuIEV2ZW50czsKICB9KCk7CgogIF9YTUxIdHRwUmVxdWVzdCA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdDsKICBfWERvbWFpblJlcXVlc3QgPSB3aW5kb3cuWERvbWFpblJlcXVlc3Q7CiAgX1dlYlNvY2tldCA9IHdpbmRvdy5XZWJTb2NrZXQ7CgogIGV4dGVuZE5hdGl2ZSA9IGZ1bmN0aW9uIGV4dGVuZE5hdGl2ZSh0bywgZnJvbSkgewogICAgdmFyIGUsIGtleSwgdmFsLCBfcmVzdWx0czsKCiAgICBfcmVzdWx0cyA9IFtdOwoKICAgIGZvciAoa2V5IGluIGZyb20ucHJvdG90eXBlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFsID0gZnJvbS5wcm90b3R5cGVba2V5XTsKCiAgICAgICAgaWYgKHRvW2tleV0gPT0gbnVsbCAmJiB0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHRvW2tleV0gPSB2YWwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfcmVzdWx0cy5wdXNoKHZvaWQgMCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChfZXJyb3IpIHsKICAgICAgICBlID0gX2Vycm9yOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIF9yZXN1bHRzOwogIH07CgogIGlnbm9yZVN0YWNrID0gW107CgogIFBhY2UuaWdub3JlID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGFyZ3MsIGZuLCByZXQ7CiAgICBmbiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IF9fc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107CiAgICBpZ25vcmVTdGFjay51bnNoaWZ0KCdpZ25vcmUnKTsKICAgIHJldCA9IGZuLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgaWdub3JlU3RhY2suc2hpZnQoKTsKICAgIHJldHVybiByZXQ7CiAgfTsKCiAgUGFjZS50cmFjayA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhcmdzLCBmbiwgcmV0OwogICAgZm4gPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBfX3NsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdOwogICAgaWdub3JlU3RhY2sudW5zaGlmdCgndHJhY2snKTsKICAgIHJldCA9IGZuLmFwcGx5KG51bGwsIGFyZ3MpOwogICAgaWdub3JlU3RhY2suc2hpZnQoKTsKICAgIHJldHVybiByZXQ7CiAgfTsKCiAgc2hvdWxkVHJhY2sgPSBmdW5jdGlvbiBzaG91bGRUcmFjayhtZXRob2QpIHsKICAgIHZhciBfcmVmMjsKCiAgICBpZiAobWV0aG9kID09IG51bGwpIHsKICAgICAgbWV0aG9kID0gJ0dFVCc7CiAgICB9CgogICAgaWYgKGlnbm9yZVN0YWNrWzBdID09PSAndHJhY2snKSB7CiAgICAgIHJldHVybiAnZm9yY2UnOwogICAgfQoKICAgIGlmICghaWdub3JlU3RhY2subGVuZ3RoICYmIG9wdGlvbnMuYWpheCkgewogICAgICBpZiAobWV0aG9kID09PSAnc29ja2V0JyAmJiBvcHRpb25zLmFqYXgudHJhY2tXZWJTb2NrZXRzKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAoX3JlZjIgPSBtZXRob2QudG9VcHBlckNhc2UoKSwgX19pbmRleE9mLmNhbGwob3B0aW9ucy5hamF4LnRyYWNrTWV0aG9kcywgX3JlZjIpID49IDApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9OwoKICBSZXF1ZXN0SW50ZXJjZXB0ID0gZnVuY3Rpb24gKF9zdXBlcikgewogICAgX19leHRlbmRzKFJlcXVlc3RJbnRlcmNlcHQsIF9zdXBlcik7CgogICAgZnVuY3Rpb24gUmVxdWVzdEludGVyY2VwdCgpIHsKICAgICAgdmFyIG1vbml0b3JYSFIsCiAgICAgICAgICBfdGhpcyA9IHRoaXM7CgogICAgICBSZXF1ZXN0SW50ZXJjZXB0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoKICAgICAgbW9uaXRvclhIUiA9IGZ1bmN0aW9uIG1vbml0b3JYSFIocmVxKSB7CiAgICAgICAgdmFyIF9vcGVuOwoKICAgICAgICBfb3BlbiA9IHJlcS5vcGVuOwogICAgICAgIHJldHVybiByZXEub3BlbiA9IGZ1bmN0aW9uICh0eXBlLCB1cmwsIGFzeW5jKSB7CiAgICAgICAgICBpZiAoc2hvdWxkVHJhY2sodHlwZSkpIHsKICAgICAgICAgICAgX3RoaXMudHJpZ2dlcigncmVxdWVzdCcsIHsKICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gX29wZW4uYXBwbHkocmVxLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH07CgogICAgICB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgPSBmdW5jdGlvbiAoZmxhZ3MpIHsKICAgICAgICB2YXIgcmVxOwogICAgICAgIHJlcSA9IG5ldyBfWE1MSHR0cFJlcXVlc3QoZmxhZ3MpOwogICAgICAgIG1vbml0b3JYSFIocmVxKTsKICAgICAgICByZXR1cm4gcmVxOwogICAgICB9OwoKICAgICAgZXh0ZW5kTmF0aXZlKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCwgX1hNTEh0dHBSZXF1ZXN0KTsKCiAgICAgIGlmIChfWERvbWFpblJlcXVlc3QgIT0gbnVsbCkgewogICAgICAgIHdpbmRvdy5YRG9tYWluUmVxdWVzdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciByZXE7CiAgICAgICAgICByZXEgPSBuZXcgX1hEb21haW5SZXF1ZXN0KCk7CiAgICAgICAgICBtb25pdG9yWEhSKHJlcSk7CiAgICAgICAgICByZXR1cm4gcmVxOwogICAgICAgIH07CgogICAgICAgIGV4dGVuZE5hdGl2ZSh3aW5kb3cuWERvbWFpblJlcXVlc3QsIF9YRG9tYWluUmVxdWVzdCk7CiAgICAgIH0KCiAgICAgIGlmIChfV2ViU29ja2V0ICE9IG51bGwgJiYgb3B0aW9ucy5hamF4LnRyYWNrV2ViU29ja2V0cykgewogICAgICAgIHdpbmRvdy5XZWJTb2NrZXQgPSBmdW5jdGlvbiAodXJsLCBwcm90b2NvbHMpIHsKICAgICAgICAgIHZhciByZXE7CiAgICAgICAgICByZXEgPSBuZXcgX1dlYlNvY2tldCh1cmwsIHByb3RvY29scyk7CgogICAgICAgICAgaWYgKHNob3VsZFRyYWNrKCdzb2NrZXQnKSkgewogICAgICAgICAgICBfdGhpcy50cmlnZ2VyKCdyZXF1ZXN0JywgewogICAgICAgICAgICAgIHR5cGU6ICdzb2NrZXQnLAogICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgIHByb3RvY29sczogcHJvdG9jb2xzLAogICAgICAgICAgICAgIHJlcXVlc3Q6IHJlcQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcmVxOwogICAgICAgIH07CgogICAgICAgIGV4dGVuZE5hdGl2ZSh3aW5kb3cuV2ViU29ja2V0LCBfV2ViU29ja2V0KTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBSZXF1ZXN0SW50ZXJjZXB0OwogIH0oRXZlbnRzKTsKCiAgX2ludGVyY2VwdCA9IG51bGw7CgogIGdldEludGVyY2VwdCA9IGZ1bmN0aW9uIGdldEludGVyY2VwdCgpIHsKICAgIGlmIChfaW50ZXJjZXB0ID09IG51bGwpIHsKICAgICAgX2ludGVyY2VwdCA9IG5ldyBSZXF1ZXN0SW50ZXJjZXB0KCk7CiAgICB9CgogICAgcmV0dXJuIF9pbnRlcmNlcHQ7CiAgfTsKCiAgZ2V0SW50ZXJjZXB0KCkub24oJ3JlcXVlc3QnLCBmdW5jdGlvbiAoX2FyZykgewogICAgdmFyIGFmdGVyLCBhcmdzLCByZXF1ZXN0LCB0eXBlOwogICAgdHlwZSA9IF9hcmcudHlwZSwgcmVxdWVzdCA9IF9hcmcucmVxdWVzdDsKCiAgICBpZiAoIVBhY2UucnVubmluZyAmJiAob3B0aW9ucy5yZXN0YXJ0T25SZXF1ZXN0QWZ0ZXIgIT09IGZhbHNlIHx8IHNob3VsZFRyYWNrKHR5cGUpID09PSAnZm9yY2UnKSkgewogICAgICBhcmdzID0gYXJndW1lbnRzOwogICAgICBhZnRlciA9IG9wdGlvbnMucmVzdGFydE9uUmVxdWVzdEFmdGVyIHx8IDA7CgogICAgICBpZiAodHlwZW9mIGFmdGVyID09PSAnYm9vbGVhbicpIHsKICAgICAgICBhZnRlciA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc3RpbGxBY3RpdmUsIF9qLCBfbGVuMSwgX3JlZjIsIF9yZWYzLCBfcmVzdWx0czsKCiAgICAgICAgaWYgKHR5cGUgPT09ICdzb2NrZXQnKSB7CiAgICAgICAgICBzdGlsbEFjdGl2ZSA9IHJlcXVlc3QucmVhZHlTdGF0ZSA8IDI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0aWxsQWN0aXZlID0gMCA8IChfcmVmMiA9IHJlcXVlc3QucmVhZHlTdGF0ZSkgJiYgX3JlZjIgPCA0OwogICAgICAgIH0KCiAgICAgICAgaWYgKHN0aWxsQWN0aXZlKSB7CiAgICAgICAgICBQYWNlLnJlc3RhcnQoKTsKICAgICAgICAgIF9yZWYzID0gUGFjZS5zb3VyY2VzOwogICAgICAgICAgX3Jlc3VsdHMgPSBbXTsKCiAgICAgICAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMy5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHsKICAgICAgICAgICAgc291cmNlID0gX3JlZjNbX2pdOwoKICAgICAgICAgICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEFqYXhNb25pdG9yKSB7CiAgICAgICAgICAgICAgc291cmNlLndhdGNoLmFwcGx5KHNvdXJjZSwgYXJncyk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3Jlc3VsdHMucHVzaCh2b2lkIDApOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIF9yZXN1bHRzOwogICAgICAgIH0KICAgICAgfSwgYWZ0ZXIpOwogICAgfQogIH0pOwoKICBBamF4TW9uaXRvciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEFqYXhNb25pdG9yKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5lbGVtZW50cyA9IFtdOwogICAgICBnZXRJbnRlcmNlcHQoKS5vbigncmVxdWVzdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMud2F0Y2guYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0pOwogICAgfQoKICAgIEFqYXhNb25pdG9yLnByb3RvdHlwZS53YXRjaCA9IGZ1bmN0aW9uIChfYXJnKSB7CiAgICAgIHZhciByZXF1ZXN0LCB0cmFja2VyLCB0eXBlOwogICAgICB0eXBlID0gX2FyZy50eXBlLCByZXF1ZXN0ID0gX2FyZy5yZXF1ZXN0OwoKICAgICAgaWYgKHR5cGUgPT09ICdzb2NrZXQnKSB7CiAgICAgICAgdHJhY2tlciA9IG5ldyBTb2NrZXRSZXF1ZXN0VHJhY2tlcihyZXF1ZXN0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0cmFja2VyID0gbmV3IFhIUlJlcXVlc3RUcmFja2VyKHJlcXVlc3QpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5wdXNoKHRyYWNrZXIpOwogICAgfTsKCiAgICByZXR1cm4gQWpheE1vbml0b3I7CiAgfSgpOwoKICBYSFJSZXF1ZXN0VHJhY2tlciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFhIUlJlcXVlc3RUcmFja2VyKHJlcXVlc3QpIHsKICAgICAgdmFyIGV2ZW50LAogICAgICAgICAgc2l6ZSwKICAgICAgICAgIF9qLAogICAgICAgICAgX2xlbjEsCiAgICAgICAgICBfb25yZWFkeXN0YXRlY2hhbmdlLAogICAgICAgICAgX3JlZjIsCiAgICAgICAgICBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnByb2dyZXNzID0gMDsKCiAgICAgIGlmICh3aW5kb3cuUHJvZ3Jlc3NFdmVudCAhPSBudWxsKSB7CiAgICAgICAgc2l6ZSA9IG51bGw7CiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgIGlmIChldnQubGVuZ3RoQ29tcHV0YWJsZSkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMucHJvZ3Jlc3MgPSAxMDAgKiBldnQubG9hZGVkIC8gZXZ0LnRvdGFsOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb2dyZXNzID0gX3RoaXMucHJvZ3Jlc3MgKyAoMTAwIC0gX3RoaXMucHJvZ3Jlc3MpIC8gMjsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBfcmVmMiA9IFsnbG9hZCcsICdhYm9ydCcsICd0aW1lb3V0JywgJ2Vycm9yJ107CgogICAgICAgIGZvciAoX2ogPSAwLCBfbGVuMSA9IF9yZWYyLmxlbmd0aDsgX2ogPCBfbGVuMTsgX2orKykgewogICAgICAgICAgZXZlbnQgPSBfcmVmMltfal07CiAgICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLnByb2dyZXNzID0gMTAwOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIF9vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZTsKCiAgICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgX3JlZjM7CgogICAgICAgICAgaWYgKChfcmVmMyA9IHJlcXVlc3QucmVhZHlTdGF0ZSkgPT09IDAgfHwgX3JlZjMgPT09IDQpIHsKICAgICAgICAgICAgX3RoaXMucHJvZ3Jlc3MgPSAxMDA7CiAgICAgICAgICB9IGVsc2UgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gMykgewogICAgICAgICAgICBfdGhpcy5wcm9ncmVzcyA9IDUwOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0eXBlb2YgX29ucmVhZHlzdGF0ZWNoYW5nZSA9PT0gImZ1bmN0aW9uIiA/IF9vbnJlYWR5c3RhdGVjaGFuZ2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKSA6IHZvaWQgMDsKICAgICAgICB9OwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIFhIUlJlcXVlc3RUcmFja2VyOwogIH0oKTsKCiAgU29ja2V0UmVxdWVzdFRyYWNrZXIgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBTb2NrZXRSZXF1ZXN0VHJhY2tlcihyZXF1ZXN0KSB7CiAgICAgIHZhciBldmVudCwKICAgICAgICAgIF9qLAogICAgICAgICAgX2xlbjEsCiAgICAgICAgICBfcmVmMiwKICAgICAgICAgIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwOwogICAgICBfcmVmMiA9IFsnZXJyb3InLCAnb3BlbiddOwoKICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjIubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgICAgZXZlbnQgPSBfcmVmMltfal07CiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMucHJvZ3Jlc3MgPSAxMDA7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gU29ja2V0UmVxdWVzdFRyYWNrZXI7CiAgfSgpOwoKICBFbGVtZW50TW9uaXRvciA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIEVsZW1lbnRNb25pdG9yKG9wdGlvbnMpIHsKICAgICAgdmFyIHNlbGVjdG9yLCBfaiwgX2xlbjEsIF9yZWYyOwoKICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5lbGVtZW50cyA9IFtdOwoKICAgICAgaWYgKG9wdGlvbnMuc2VsZWN0b3JzID09IG51bGwpIHsKICAgICAgICBvcHRpb25zLnNlbGVjdG9ycyA9IFtdOwogICAgICB9CgogICAgICBfcmVmMiA9IG9wdGlvbnMuc2VsZWN0b3JzOwoKICAgICAgZm9yIChfaiA9IDAsIF9sZW4xID0gX3JlZjIubGVuZ3RoOyBfaiA8IF9sZW4xOyBfaisrKSB7CiAgICAgICAgc2VsZWN0b3IgPSBfcmVmMltfal07CiAgICAgICAgdGhpcy5lbGVtZW50cy5wdXNoKG5ldyBFbGVtZW50VHJhY2tlcihzZWxlY3RvcikpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIEVsZW1lbnRNb25pdG9yOwogIH0oKTsKCiAgRWxlbWVudFRyYWNrZXIgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBFbGVtZW50VHJhY2tlcihzZWxlY3RvcikgewogICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwOwogICAgICB0aGlzLmNoZWNrKCk7CiAgICB9CgogICAgRWxlbWVudFRyYWNrZXIucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5zZWxlY3RvcikpIHsKICAgICAgICByZXR1cm4gdGhpcy5kb25lKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzLmNoZWNrKCk7CiAgICAgICAgfSwgb3B0aW9ucy5lbGVtZW50cy5jaGVja0ludGVydmFsKTsKICAgICAgfQogICAgfTsKCiAgICBFbGVtZW50VHJhY2tlci5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MgPSAxMDA7CiAgICB9OwoKICAgIHJldHVybiBFbGVtZW50VHJhY2tlcjsKICB9KCk7CgogIERvY3VtZW50TW9uaXRvciA9IGZ1bmN0aW9uICgpIHsKICAgIERvY3VtZW50TW9uaXRvci5wcm90b3R5cGUuc3RhdGVzID0gewogICAgICBsb2FkaW5nOiAwLAogICAgICBpbnRlcmFjdGl2ZTogNTAsCiAgICAgIGNvbXBsZXRlOiAxMDAKICAgIH07CgogICAgZnVuY3Rpb24gRG9jdW1lbnRNb25pdG9yKCkgewogICAgICB2YXIgX29ucmVhZHlzdGF0ZWNoYW5nZSwKICAgICAgICAgIF9yZWYyLAogICAgICAgICAgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5wcm9ncmVzcyA9IChfcmVmMiA9IHRoaXMuc3RhdGVzW2RvY3VtZW50LnJlYWR5U3RhdGVdKSAhPSBudWxsID8gX3JlZjIgOiAxMDA7CiAgICAgIF9vbnJlYWR5c3RhdGVjaGFuZ2UgPSBkb2N1bWVudC5vbnJlYWR5c3RhdGVjaGFuZ2U7CgogICAgICBkb2N1bWVudC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLnN0YXRlc1tkb2N1bWVudC5yZWFkeVN0YXRlXSAhPSBudWxsKSB7CiAgICAgICAgICBfdGhpcy5wcm9ncmVzcyA9IF90aGlzLnN0YXRlc1tkb2N1bWVudC5yZWFkeVN0YXRlXTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0eXBlb2YgX29ucmVhZHlzdGF0ZWNoYW5nZSA9PT0gImZ1bmN0aW9uIiA/IF9vbnJlYWR5c3RhdGVjaGFuZ2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKSA6IHZvaWQgMDsKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gRG9jdW1lbnRNb25pdG9yOwogIH0oKTsKCiAgRXZlbnRMYWdNb25pdG9yID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gRXZlbnRMYWdNb25pdG9yKCkgewogICAgICB2YXIgYXZnLAogICAgICAgICAgaW50ZXJ2YWwsCiAgICAgICAgICBsYXN0LAogICAgICAgICAgcG9pbnRzLAogICAgICAgICAgc2FtcGxlcywKICAgICAgICAgIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwOwogICAgICBhdmcgPSAwOwogICAgICBzYW1wbGVzID0gW107CiAgICAgIHBvaW50cyA9IDA7CiAgICAgIGxhc3QgPSBub3coKTsKICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGRpZmY7CiAgICAgICAgZGlmZiA9IG5vdygpIC0gbGFzdCAtIDUwOwogICAgICAgIGxhc3QgPSBub3coKTsKICAgICAgICBzYW1wbGVzLnB1c2goZGlmZik7CgogICAgICAgIGlmIChzYW1wbGVzLmxlbmd0aCA+IG9wdGlvbnMuZXZlbnRMYWcuc2FtcGxlQ291bnQpIHsKICAgICAgICAgIHNhbXBsZXMuc2hpZnQoKTsKICAgICAgICB9CgogICAgICAgIGF2ZyA9IGF2Z0FtcGxpdHVkZShzYW1wbGVzKTsKCiAgICAgICAgaWYgKCsrcG9pbnRzID49IG9wdGlvbnMuZXZlbnRMYWcubWluU2FtcGxlcyAmJiBhdmcgPCBvcHRpb25zLmV2ZW50TGFnLmxhZ1RocmVzaG9sZCkgewogICAgICAgICAgX3RoaXMucHJvZ3Jlc3MgPSAxMDA7CiAgICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9ncmVzcyA9IDEwMCAqICgzIC8gKGF2ZyArIDMpKTsKICAgICAgICB9CiAgICAgIH0sIDUwKTsKICAgIH0KCiAgICByZXR1cm4gRXZlbnRMYWdNb25pdG9yOwogIH0oKTsKCiAgU2NhbGVyID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gU2NhbGVyKHNvdXJjZSkgewogICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTsKICAgICAgdGhpcy5sYXN0ID0gdGhpcy5zaW5jZUxhc3RVcGRhdGUgPSAwOwogICAgICB0aGlzLnJhdGUgPSBvcHRpb25zLmluaXRpYWxSYXRlOwogICAgICB0aGlzLmNhdGNodXAgPSAwOwogICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5sYXN0UHJvZ3Jlc3MgPSAwOwoKICAgICAgaWYgKHRoaXMuc291cmNlICE9IG51bGwpIHsKICAgICAgICB0aGlzLnByb2dyZXNzID0gcmVzdWx0KHRoaXMuc291cmNlLCAncHJvZ3Jlc3MnKTsKICAgICAgfQogICAgfQoKICAgIFNjYWxlci5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uIChmcmFtZVRpbWUsIHZhbCkgewogICAgICB2YXIgc2NhbGluZzsKCiAgICAgIGlmICh2YWwgPT0gbnVsbCkgewogICAgICAgIHZhbCA9IHJlc3VsdCh0aGlzLnNvdXJjZSwgJ3Byb2dyZXNzJyk7CiAgICAgIH0KCiAgICAgIGlmICh2YWwgPj0gMTAwKSB7CiAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHZhbCA9PT0gdGhpcy5sYXN0KSB7CiAgICAgICAgdGhpcy5zaW5jZUxhc3RVcGRhdGUgKz0gZnJhbWVUaW1lOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLnNpbmNlTGFzdFVwZGF0ZSkgewogICAgICAgICAgdGhpcy5yYXRlID0gKHZhbCAtIHRoaXMubGFzdCkgLyB0aGlzLnNpbmNlTGFzdFVwZGF0ZTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY2F0Y2h1cCA9ICh2YWwgLSB0aGlzLnByb2dyZXNzKSAvIG9wdGlvbnMuY2F0Y2h1cFRpbWU7CiAgICAgICAgdGhpcy5zaW5jZUxhc3RVcGRhdGUgPSAwOwogICAgICAgIHRoaXMubGFzdCA9IHZhbDsKICAgICAgfQoKICAgICAgaWYgKHZhbCA+IHRoaXMucHJvZ3Jlc3MpIHsKICAgICAgICB0aGlzLnByb2dyZXNzICs9IHRoaXMuY2F0Y2h1cCAqIGZyYW1lVGltZTsKICAgICAgfQoKICAgICAgc2NhbGluZyA9IDEgLSBNYXRoLnBvdyh0aGlzLnByb2dyZXNzIC8gMTAwLCBvcHRpb25zLmVhc2VGYWN0b3IpOwogICAgICB0aGlzLnByb2dyZXNzICs9IHNjYWxpbmcgKiB0aGlzLnJhdGUgKiBmcmFtZVRpbWU7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSBNYXRoLm1pbih0aGlzLmxhc3RQcm9ncmVzcyArIG9wdGlvbnMubWF4UHJvZ3Jlc3NQZXJGcmFtZSwgdGhpcy5wcm9ncmVzcyk7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSBNYXRoLm1heCgwLCB0aGlzLnByb2dyZXNzKTsKICAgICAgdGhpcy5wcm9ncmVzcyA9IE1hdGgubWluKDEwMCwgdGhpcy5wcm9ncmVzcyk7CiAgICAgIHRoaXMubGFzdFByb2dyZXNzID0gdGhpcy5wcm9ncmVzczsKICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3M7CiAgICB9OwoKICAgIHJldHVybiBTY2FsZXI7CiAgfSgpOwoKICBzb3VyY2VzID0gbnVsbDsKICBzY2FsZXJzID0gbnVsbDsKICBiYXIgPSBudWxsOwogIHVuaVNjYWxlciA9IG51bGw7CiAgYW5pbWF0aW9uID0gbnVsbDsKICBjYW5jZWxBbmltYXRpb24gPSBudWxsOwogIFBhY2UucnVubmluZyA9IGZhbHNlOwoKICBoYW5kbGVQdXNoU3RhdGUgPSBmdW5jdGlvbiBoYW5kbGVQdXNoU3RhdGUoKSB7CiAgICBpZiAob3B0aW9ucy5yZXN0YXJ0T25QdXNoU3RhdGUpIHsKICAgICAgcmV0dXJuIFBhY2UucmVzdGFydCgpOwogICAgfQogIH07CgogIGlmICh3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUgIT0gbnVsbCkgewogICAgX3B1c2hTdGF0ZSA9IHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTsKCiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGhhbmRsZVB1c2hTdGF0ZSgpOwogICAgICByZXR1cm4gX3B1c2hTdGF0ZS5hcHBseSh3aW5kb3cuaGlzdG9yeSwgYXJndW1lbnRzKTsKICAgIH07CiAgfQoKICBpZiAod2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlICE9IG51bGwpIHsKICAgIF9yZXBsYWNlU3RhdGUgPSB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGU7CgogICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlID0gZnVuY3Rpb24gKCkgewogICAgICBoYW5kbGVQdXNoU3RhdGUoKTsKICAgICAgcmV0dXJuIF9yZXBsYWNlU3RhdGUuYXBwbHkod2luZG93Lmhpc3RvcnksIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KCiAgU09VUkNFX0tFWVMgPSB7CiAgICBhamF4OiBBamF4TW9uaXRvciwKICAgIGVsZW1lbnRzOiBFbGVtZW50TW9uaXRvciwKICAgIGRvY3VtZW50OiBEb2N1bWVudE1vbml0b3IsCiAgICBldmVudExhZzogRXZlbnRMYWdNb25pdG9yCiAgfTsKICAoaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7CiAgICB2YXIgdHlwZSwgX2osIF9rLCBfbGVuMSwgX2xlbjIsIF9yZWYyLCBfcmVmMywgX3JlZjQ7CgogICAgUGFjZS5zb3VyY2VzID0gc291cmNlcyA9IFtdOwogICAgX3JlZjIgPSBbJ2FqYXgnLCAnZWxlbWVudHMnLCAnZG9jdW1lbnQnLCAnZXZlbnRMYWcnXTsKCiAgICBmb3IgKF9qID0gMCwgX2xlbjEgPSBfcmVmMi5sZW5ndGg7IF9qIDwgX2xlbjE7IF9qKyspIHsKICAgICAgdHlwZSA9IF9yZWYyW19qXTsKCiAgICAgIGlmIChvcHRpb25zW3R5cGVdICE9PSBmYWxzZSkgewogICAgICAgIHNvdXJjZXMucHVzaChuZXcgU09VUkNFX0tFWVNbdHlwZV0ob3B0aW9uc1t0eXBlXSkpOwogICAgICB9CiAgICB9CgogICAgX3JlZjQgPSAoX3JlZjMgPSBvcHRpb25zLmV4dHJhU291cmNlcykgIT0gbnVsbCA/IF9yZWYzIDogW107CgogICAgZm9yIChfayA9IDAsIF9sZW4yID0gX3JlZjQubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7CiAgICAgIHNvdXJjZSA9IF9yZWY0W19rXTsKICAgICAgc291cmNlcy5wdXNoKG5ldyBzb3VyY2Uob3B0aW9ucykpOwogICAgfQoKICAgIFBhY2UuYmFyID0gYmFyID0gbmV3IEJhcigpOwogICAgc2NhbGVycyA9IFtdOwogICAgcmV0dXJuIHVuaVNjYWxlciA9IG5ldyBTY2FsZXIoKTsKICB9KSgpOwoKICBQYWNlLnN0b3AgPSBmdW5jdGlvbiAoKSB7CiAgICBQYWNlLnRyaWdnZXIoJ3N0b3AnKTsKICAgIFBhY2UucnVubmluZyA9IGZhbHNlOwogICAgYmFyLmRlc3Ryb3koKTsKICAgIGNhbmNlbEFuaW1hdGlvbiA9IHRydWU7CgogICAgaWYgKGFuaW1hdGlvbiAhPSBudWxsKSB7CiAgICAgIGlmICh0eXBlb2YgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb24pOwogICAgICB9CgogICAgICBhbmltYXRpb24gPSBudWxsOwogICAgfQoKICAgIHJldHVybiBpbml0KCk7CiAgfTsKCiAgUGFjZS5yZXN0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgUGFjZS50cmlnZ2VyKCdyZXN0YXJ0Jyk7CiAgICBQYWNlLnN0b3AoKTsKICAgIHJldHVybiBQYWNlLnN0YXJ0KCk7CiAgfTsKCiAgUGFjZS5nbyA9IGZ1bmN0aW9uICgpIHsKICAgIFBhY2UucnVubmluZyA9IHRydWU7CiAgICBiYXIucmVuZGVyKCk7CiAgICBjYW5jZWxBbmltYXRpb24gPSBmYWxzZTsKICAgIHJldHVybiBhbmltYXRpb24gPSBydW5BbmltYXRpb24oZnVuY3Rpb24gKGZyYW1lVGltZSwgZW5xdWV1ZU5leHRGcmFtZSkgewogICAgICB2YXIgYXZnLCBjb3VudCwgZG9uZSwgZWxlbWVudCwgZWxlbWVudHMsIGksIGosIHJlbWFpbmluZywgc2NhbGVyLCBzY2FsZXJMaXN0LCBzdGFydCwgc3VtLCBfaiwgX2ssIF9sZW4xLCBfbGVuMiwgX3JlZjI7CgogICAgICByZW1haW5pbmcgPSAxMDAgLSBiYXIucHJvZ3Jlc3M7CiAgICAgIGNvdW50ID0gc3VtID0gMDsKICAgICAgZG9uZSA9IHRydWU7CgogICAgICBmb3IgKGkgPSBfaiA9IDAsIF9sZW4xID0gc291cmNlcy5sZW5ndGg7IF9qIDwgX2xlbjE7IGkgPSArK19qKSB7CiAgICAgICAgc291cmNlID0gc291cmNlc1tpXTsKICAgICAgICBzY2FsZXJMaXN0ID0gc2NhbGVyc1tpXSAhPSBudWxsID8gc2NhbGVyc1tpXSA6IHNjYWxlcnNbaV0gPSBbXTsKICAgICAgICBlbGVtZW50cyA9IChfcmVmMiA9IHNvdXJjZS5lbGVtZW50cykgIT0gbnVsbCA/IF9yZWYyIDogW3NvdXJjZV07CgogICAgICAgIGZvciAoaiA9IF9rID0gMCwgX2xlbjIgPSBlbGVtZW50cy5sZW5ndGg7IF9rIDwgX2xlbjI7IGogPSArK19rKSB7CiAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudHNbal07CiAgICAgICAgICBzY2FsZXIgPSBzY2FsZXJMaXN0W2pdICE9IG51bGwgPyBzY2FsZXJMaXN0W2pdIDogc2NhbGVyTGlzdFtqXSA9IG5ldyBTY2FsZXIoZWxlbWVudCk7CiAgICAgICAgICBkb25lICY9IHNjYWxlci5kb25lOwoKICAgICAgICAgIGlmIChzY2FsZXIuZG9uZSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgc3VtICs9IHNjYWxlci50aWNrKGZyYW1lVGltZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBhdmcgPSBzdW0gLyBjb3VudDsKICAgICAgYmFyLnVwZGF0ZSh1bmlTY2FsZXIudGljayhmcmFtZVRpbWUsIGF2ZykpOwogICAgICBzdGFydCA9IG5vdygpOwoKICAgICAgaWYgKGJhci5kb25lKCkgfHwgZG9uZSB8fCBjYW5jZWxBbmltYXRpb24pIHsKICAgICAgICBiYXIudXBkYXRlKDEwMCk7CiAgICAgICAgUGFjZS50cmlnZ2VyKCdkb25lJyk7CiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgYmFyLmZpbmlzaCgpOwogICAgICAgICAgUGFjZS5ydW5uaW5nID0gZmFsc2U7CiAgICAgICAgICByZXR1cm4gUGFjZS50cmlnZ2VyKCdoaWRlJyk7CiAgICAgICAgfSwgTWF0aC5tYXgob3B0aW9ucy5naG9zdFRpbWUsIE1hdGgubWluKG9wdGlvbnMubWluVGltZSwgbm93KCkgLSBzdGFydCkpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZW5xdWV1ZU5leHRGcmFtZSgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBQYWNlLnN0YXJ0ID0gZnVuY3Rpb24gKF9vcHRpb25zKSB7CiAgICBfZXh0ZW5kKG9wdGlvbnMsIF9vcHRpb25zKTsKCiAgICBQYWNlLnJ1bm5pbmcgPSB0cnVlOwoKICAgIHRyeSB7CiAgICAgIGJhci5yZW5kZXIoKTsKICAgIH0gY2F0Y2ggKF9lcnJvcikgewogICAgICBOb1RhcmdldEVycm9yID0gX2Vycm9yOwogICAgfQoKICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhY2UnKSkgewogICAgICByZXR1cm4gc2V0VGltZW91dChQYWNlLnN0YXJ0LCA1MCk7CiAgICB9IGVsc2UgewogICAgICBQYWNlLnRyaWdnZXIoJ3N0YXJ0Jyk7CiAgICAgIHJldHVybiBQYWNlLmdvKCk7CiAgICB9CiAgfTsKCiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgewogICAgZGVmaW5lKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIFBhY2U7CiAgICB9KTsKICB9IGVsc2UgaWYgKCh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID09PSAnb2JqZWN0JykgewogICAgbW9kdWxlLmV4cG9ydHMgPSBQYWNlOwogIH0gZWxzZSB7CiAgICBpZiAob3B0aW9ucy5zdGFydE9uUGFnZUxvYWQpIHsKICAgICAgUGFjZS5zdGFydCgpOwogICAgfQogIH0KfSkuY2FsbCh0aGlzKTsKLyoqCioganF1ZXJ5Lm1hdGNoSGVpZ2h0LW1pbi5qcyB2MC41LjEKKiBodHRwOi8vYnJtLmlvL2pxdWVyeS1tYXRjaC1oZWlnaHQvCiogTGljZW5zZTogTUlUCiovCgooZnVuY3Rpb24gKGIpIHsKICBiLmZuLm1hdGNoSGVpZ2h0ID0gZnVuY3Rpb24gKGEpIHsKICAgIGlmICgxID49IHRoaXMubGVuZ3RoKSByZXR1cm4gdGhpczsKICAgIGEgPSAidW5kZWZpbmVkIiAhPT0gdHlwZW9mIGEgPyBhIDogITA7CgogICAgYi5mbi5tYXRjaEhlaWdodC5fZ3JvdXBzLnB1c2goewogICAgICBlbGVtZW50czogdGhpcywKICAgICAgYnlSb3c6IGEKICAgIH0pOwoKICAgIGIuZm4ubWF0Y2hIZWlnaHQuX2FwcGx5KHRoaXMsIGEpOwoKICAgIHJldHVybiB0aGlzOwogIH07CgogIGIuZm4ubWF0Y2hIZWlnaHQuX2FwcGx5ID0gZnVuY3Rpb24gKGEsIGQpIHsKICAgIHZhciBjID0gYihhKSwKICAgICAgICBlID0gW2NdOwogICAgZCAmJiAoYy5jc3MoewogICAgICBkaXNwbGF5OiAiYmxvY2siLAogICAgICAicGFkZGluZy10b3AiOiAiMCIsCiAgICAgICJwYWRkaW5nLWJvdHRvbSI6ICIwIiwKICAgICAgImJvcmRlci10b3AiOiAiMCIsCiAgICAgICJib3JkZXItYm90dG9tIjogIjAiLAogICAgICBoZWlnaHQ6ICIxMDBweCIKICAgIH0pLCBlID0gayhjKSwgYy5jc3MoewogICAgICBkaXNwbGF5OiAiIiwKICAgICAgInBhZGRpbmctdG9wIjogIiIsCiAgICAgICJwYWRkaW5nLWJvdHRvbSI6ICIiLAogICAgICAiYm9yZGVyLXRvcCI6ICIiLAogICAgICAiYm9yZGVyLWJvdHRvbSI6ICIiLAogICAgICBoZWlnaHQ6ICIiCiAgICB9KSk7CiAgICBiLmVhY2goZSwgZnVuY3Rpb24gKGEsIGMpIHsKICAgICAgdmFyIGQgPSBiKGMpLAogICAgICAgICAgZSA9IDA7CiAgICAgIGQuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGEgPSBiKHRoaXMpOwogICAgICAgIGEuY3NzKHsKICAgICAgICAgIGRpc3BsYXk6ICJibG9jayIsCiAgICAgICAgICBoZWlnaHQ6ICIiCiAgICAgICAgfSk7CiAgICAgICAgYS5vdXRlckhlaWdodCghMSkgPiBlICYmIChlID0gYS5vdXRlckhlaWdodCghMSkpOwogICAgICB9KTsKICAgICAgZC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYSA9IGIodGhpcyksCiAgICAgICAgICAgIGMgPSAwOwogICAgICAgICJib3JkZXItYm94IiAhPT0gYS5jc3MoImJveC1zaXppbmciKSAmJiAoYyArPSBmKGEuY3NzKCJib3JkZXItdG9wLXdpZHRoIikpICsgZihhLmNzcygiYm9yZGVyLWJvdHRvbS13aWR0aCIpKSwgYyArPSBmKGEuY3NzKCJwYWRkaW5nLXRvcCIpKSArIGYoYS5jc3MoInBhZGRpbmctYm90dG9tIikpKTsKICAgICAgICBhLmNzcygiaGVpZ2h0IiwgZSAtIGMpOwogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgYi5mbi5tYXRjaEhlaWdodC5fYXBwbHlEYXRhQXBpID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGEgPSB7fTsKICAgIGIoIltkYXRhLW1hdGNoLWhlaWdodF0sIFtkYXRhLW1oXSIpLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgZCA9IGIodGhpcyksCiAgICAgICAgICBjID0gZC5hdHRyKCJkYXRhLW1hdGNoLWhlaWdodCIpOwogICAgICBhW2NdID0gYyBpbiBhID8gYVtjXS5hZGQoZCkgOiBkOwogICAgfSk7CiAgICBiLmVhY2goYSwgZnVuY3Rpb24gKCkgewogICAgICB0aGlzLm1hdGNoSGVpZ2h0KCEwKTsKICAgIH0pOwogIH07CgogIGIuZm4ubWF0Y2hIZWlnaHQuX2dyb3VwcyA9IFtdOwogIHZhciBnID0gLTE7CgogIGIuZm4ubWF0Y2hIZWlnaHQuX3VwZGF0ZSA9IGZ1bmN0aW9uIChhKSB7CiAgICBpZiAoYSAmJiAicmVzaXplIiA9PT0gYS50eXBlKSB7CiAgICAgIGEgPSBiKHdpbmRvdykud2lkdGgoKTsKICAgICAgaWYgKGEgPT09IGcpIHJldHVybjsKICAgICAgZyA9IGE7CiAgICB9CgogICAgYi5lYWNoKGIuZm4ubWF0Y2hIZWlnaHQuX2dyb3VwcywgZnVuY3Rpb24gKCkgewogICAgICBiLmZuLm1hdGNoSGVpZ2h0Ll9hcHBseSh0aGlzLmVsZW1lbnRzLCB0aGlzLmJ5Um93KTsKICAgIH0pOwogIH07CgogIGIoYi5mbi5tYXRjaEhlaWdodC5fYXBwbHlEYXRhQXBpKTsKICBiKHdpbmRvdykuYmluZCgibG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2UiLCBiLmZuLm1hdGNoSGVpZ2h0Ll91cGRhdGUpOwoKICB2YXIgayA9IGZ1bmN0aW9uIGsoYSkgewogICAgdmFyIGQgPSBudWxsLAogICAgICAgIGMgPSBbXTsKICAgIGIoYSkuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhID0gYih0aGlzKSwKICAgICAgICAgIGcgPSBhLm9mZnNldCgpLnRvcCAtIGYoYS5jc3MoIm1hcmdpbi10b3AiKSksCiAgICAgICAgICBoID0gMCA8IGMubGVuZ3RoID8gY1tjLmxlbmd0aCAtIDFdIDogbnVsbDsKICAgICAgbnVsbCA9PT0gaCA/IGMucHVzaChhKSA6IDEgPj0gTWF0aC5mbG9vcihNYXRoLmFicyhkIC0gZykpID8gY1tjLmxlbmd0aCAtIDFdID0gaC5hZGQoYSkgOiBjLnB1c2goYSk7CiAgICAgIGQgPSBnOwogICAgfSk7CiAgICByZXR1cm4gYzsKICB9LAogICAgICBmID0gZnVuY3Rpb24gZihhKSB7CiAgICByZXR1cm4gcGFyc2VGbG9hdChhKSB8fCAwOwogIH07Cn0pKGpRdWVyeSk7Ci8qCioganF1ZXJ5LmdtYXAKKiBWZXJzaW9uIDIuMS41IDIwMTMtMTAtMzAKKiBAcmVxdWlyZXMgalF1ZXJ5ID49IDEuNi4xIG9yIGxhdGVyCioKKiBIb21lcGFnZTogaHR0cDovL2xhYnMubWFyaW8uZWMvanF1ZXJ5LWdtYXAvCiogQXV0aG9yOiBNYXJpbyBFc3RyYWRhIDxtZUBtYXJpby5lYz4KKiBMaWNlbnNlOiBNSVQKKi8KCgooZnVuY3Rpb24gKGUpIHsKICBlLmZuLmdNYXAgPSBmdW5jdGlvbiAodCwgbikgewogICAgc3dpdGNoICh0KSB7CiAgICAgIGNhc2UgImFkZE1hcmtlciI6CiAgICAgICAgcmV0dXJuIGUodGhpcykudHJpZ2dlcigiZ01hcC5hZGRNYXJrZXIiLCBbbi5sYXRpdHVkZSwgbi5sb25naXR1ZGUsIG4uY29udGVudCwgbi5pY29uLCBuLnBvcHVwXSk7CgogICAgICBjYXNlICJjZW50ZXJBdCI6CiAgICAgICAgcmV0dXJuIGUodGhpcykudHJpZ2dlcigiZ01hcC5jZW50ZXJBdCIsIFtuLmxhdGl0dWRlLCBuLmxvbmdpdHVkZSwgbi56b29tXSk7CgogICAgICBjYXNlICJjbGVhck1hcmtlcnMiOgogICAgICAgIHJldHVybiBlKHRoaXMpLnRyaWdnZXIoImdNYXAuY2xlYXJNYXJrZXJzIik7CiAgICB9CgogICAgdmFyIHIgPSBlLmV4dGVuZCh7fSwgZS5mbi5nTWFwLmRlZmF1bHRzLCB0KTsKICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCA9IG5ldyBnb29nbGUubWFwcy5NYXAodGhpcyk7CiAgICAgIGUodGhpcykuZGF0YSgiZ01hcC5yZWZlcmVuY2UiLCB0KTsKICAgICAgdmFyIG4gPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTsKCiAgICAgIGlmIChyLmFkZHJlc3MpIHsKICAgICAgICBuLmdlb2NvZGUoewogICAgICAgICAgYWRkcmVzczogci5hZGRyZXNzCiAgICAgICAgfSwgZnVuY3Rpb24gKGUsIG4pIHsKICAgICAgICAgIGlmIChlICYmIGUubGVuZ3RoKSB7CiAgICAgICAgICAgIHQuc2V0Q2VudGVyKGVbMF0uZ2VvbWV0cnkubG9jYXRpb24pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChyLmxhdGl0dWRlICYmIHIubG9uZ2l0dWRlKSB7CiAgICAgICAgICB0LnNldENlbnRlcihuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHIubGF0aXR1ZGUsIHIubG9uZ2l0dWRlKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChlLmlzQXJyYXkoci5tYXJrZXJzKSAmJiByLm1hcmtlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBpZiAoci5tYXJrZXJzWzBdLmFkZHJlc3MpIHsKICAgICAgICAgICAgICBuLmdlb2NvZGUoewogICAgICAgICAgICAgICAgYWRkcmVzczogci5tYXJrZXJzWzBdLmFkZHJlc3MKICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICAgICAgaWYgKGUgJiYgZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgIHQuc2V0Q2VudGVyKGVbMF0uZ2VvbWV0cnkubG9jYXRpb24pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHQuc2V0Q2VudGVyKG5ldyBnb29nbGUubWFwcy5MYXRMbmcoci5tYXJrZXJzWzBdLmxhdGl0dWRlLCByLm1hcmtlcnNbMF0ubG9uZ2l0dWRlKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHQuc2V0Q2VudGVyKG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMzQuODg1OTMxLCA5Ljg0Mzc1KSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0LnNldFpvb20oci56b29tKTsKICAgICAgdC5zZXRNYXBUeXBlSWQoZ29vZ2xlLm1hcHMuTWFwVHlwZUlkW3IubWFwdHlwZV0pOwogICAgICB2YXIgaSA9IHsKICAgICAgICBzY3JvbGx3aGVlbDogci5zY3JvbGx3aGVlbCwKICAgICAgICBkaXNhYmxlRG91YmxlQ2xpY2tab29tOiAhci5kb3VibGVjbGlja3pvb20sCiAgICAgICAgc3R5bGVzOiByLnN0eWxlcwogICAgICB9OwoKICAgICAgaWYgKHIuY29udHJvbHMgPT09IGZhbHNlKSB7CiAgICAgICAgZS5leHRlbmQoaSwgewogICAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKHIuY29udHJvbHMubGVuZ3RoICE9PSAwKSB7CiAgICAgICAgZS5leHRlbmQoaSwgci5jb250cm9scywgewogICAgICAgICAgZGlzYWJsZURlZmF1bHRVSTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0LnNldE9wdGlvbnMoaSk7CiAgICAgIHZhciBzID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcigpOwogICAgICB2YXIgbzsKICAgICAgdmFyIHU7CiAgICAgIG8gPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VySW1hZ2Uoci5pY29uLmltYWdlKTsKICAgICAgby5zaXplID0gbmV3IGdvb2dsZS5tYXBzLlNpemUoci5pY29uLmljb25zaXplWzBdLCByLmljb24uaWNvbnNpemVbMV0pOwogICAgICBvLmFuY2hvciA9IG5ldyBnb29nbGUubWFwcy5Qb2ludChyLmljb24uaWNvbmFuY2hvclswXSwgci5pY29uLmljb25hbmNob3JbMV0pOwogICAgICBzLnNldEljb24obyk7CgogICAgICBpZiAoci5pY29uLnNoYWRvdykgewogICAgICAgIHUgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VySW1hZ2Uoci5pY29uLnNoYWRvdyk7CiAgICAgICAgdS5zaXplID0gbmV3IGdvb2dsZS5tYXBzLlNpemUoci5pY29uLnNoYWRvd3NpemVbMF0sIHIuaWNvbi5zaGFkb3dzaXplWzFdKTsKICAgICAgICB1LmFuY2hvciA9IG5ldyBnb29nbGUubWFwcy5Qb2ludChyLmljb24uc2hhZG93YW5jaG9yWzBdLCByLmljb24uc2hhZG93YW5jaG9yWzFdKTsKICAgICAgICBzLnNldFNoYWRvdyh1KTsKICAgICAgfQoKICAgICAgZSh0aGlzKS5iaW5kKCJnTWFwLmNlbnRlckF0IiwgZnVuY3Rpb24gKGUsIG4sIHIsIGkpIHsKICAgICAgICBpZiAoaSkgewogICAgICAgICAgdC5zZXRab29tKGkpOwogICAgICAgIH0KCiAgICAgICAgdC5wYW5UbyhuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHBhcnNlRmxvYXQobiksIHBhcnNlRmxvYXQocikpKTsKICAgICAgfSk7CiAgICAgIHZhciBhID0gW107CiAgICAgIGUodGhpcykuYmluZCgiZ01hcC5jbGVhck1hcmtlcnMiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgd2hpbGUgKGFbMF0pIHsKICAgICAgICAgIGEucG9wKCkuc2V0TWFwKG51bGwpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBmOwogICAgICBlKHRoaXMpLmJpbmQoImdNYXAuYWRkTWFya2VyIiwgZnVuY3Rpb24gKGUsIG4sIGksIG8sIHUsIGwpIHsKICAgICAgICB2YXIgYzsKICAgICAgICB2YXIgaDsKICAgICAgICB2YXIgcCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcocGFyc2VGbG9hdChuKSwgcGFyc2VGbG9hdChpKSk7CiAgICAgICAgdmFyIGQgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHsKICAgICAgICAgIHBvc2l0aW9uOiBwCiAgICAgICAgfSk7CgogICAgICAgIGlmICh1KSB7CiAgICAgICAgICBjID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlckltYWdlKHUuaW1hZ2UpOwogICAgICAgICAgYy5zaXplID0gbmV3IGdvb2dsZS5tYXBzLlNpemUodS5pY29uc2l6ZVswXSwgdS5pY29uc2l6ZVsxXSk7CiAgICAgICAgICBjLmFuY2hvciA9IG5ldyBnb29nbGUubWFwcy5Qb2ludCh1Lmljb25hbmNob3JbMF0sIHUuaWNvbmFuY2hvclsxXSk7CiAgICAgICAgICBkLnNldEljb24oYyk7CgogICAgICAgICAgaWYgKHUuc2hhZG93KSB7CiAgICAgICAgICAgIGggPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VySW1hZ2UodS5zaGFkb3cpOwogICAgICAgICAgICBoLnNpemUgPSBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSh1LnNoYWRvd3NpemVbMF0sIHUuc2hhZG93c2l6ZVsxXSk7CiAgICAgICAgICAgIGguYW5jaG9yID0gbmV3IGdvb2dsZS5tYXBzLlBvaW50KHUuc2hhZG93YW5jaG9yWzBdLCB1LnNoYWRvd2FuY2hvclsxXSk7CiAgICAgICAgICAgIHMuc2V0U2hhZG93KGgpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkLnNldEljb24ocy5nZXRJY29uKCkpOwogICAgICAgICAgZC5zZXRTaGFkb3cocy5nZXRTaGFkb3coKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAobykgewogICAgICAgICAgaWYgKG8gPT09ICJfbGF0bG5nIikgewogICAgICAgICAgICBvID0gbiArICIsICIgKyBpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciB2ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coewogICAgICAgICAgICBjb250ZW50OiByLmh0bWxfcHJlcGVuZCArIG8gKyByLmh0bWxfYXBwZW5kCiAgICAgICAgICB9KTsKICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKGQsICJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaWYgKGYpIHsKICAgICAgICAgICAgICBmLmNsb3NlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHYub3Blbih0LCBkKTsKICAgICAgICAgICAgZiA9IHY7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAobCkgewogICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lck9uY2UodCwgInRpbGVzbG9hZGVkIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHYub3Blbih0LCBkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBkLnNldE1hcCh0KTsKICAgICAgICBhLnB1c2goZCk7CiAgICAgIH0pOwogICAgICB2YXIgbDsKICAgICAgdmFyIGMgPSB0aGlzOwoKICAgICAgdmFyIGggPSBmdW5jdGlvbiBoKHQpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG4sIHIpIHsKICAgICAgICAgIGlmIChuICYmIG4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICBlKGMpLnRyaWdnZXIoImdNYXAuYWRkTWFya2VyIiwgW25bMF0uZ2VvbWV0cnkubG9jYXRpb24ubGF0KCksIG5bMF0uZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksIHQuaHRtbCwgdC5pY29uLCB0LnBvcHVwXSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfTsKCiAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgci5tYXJrZXJzLmxlbmd0aDsgcCsrKSB7CiAgICAgICAgbCA9IHIubWFya2Vyc1twXTsKCiAgICAgICAgaWYgKGwuYWRkcmVzcykgewogICAgICAgICAgaWYgKGwuaHRtbCA9PT0gIl9hZGRyZXNzIikgewogICAgICAgICAgICBsLmh0bWwgPSBsLmFkZHJlc3M7CiAgICAgICAgICB9CgogICAgICAgICAgbi5nZW9jb2RlKHsKICAgICAgICAgICAgYWRkcmVzczogbC5hZGRyZXNzCiAgICAgICAgICB9LCBoKGwpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZSh0aGlzKS50cmlnZ2VyKCJnTWFwLmFkZE1hcmtlciIsIFtsLmxhdGl0dWRlLCBsLmxvbmdpdHVkZSwgbC5odG1sLCBsLmljb24sIGwucG9wdXBdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogIH07CgogIGUuZm4uZ01hcC5kZWZhdWx0cyA9IHsKICAgIGFkZHJlc3M6ICIiLAogICAgbGF0aXR1ZGU6IDAsCiAgICBsb25naXR1ZGU6IDAsCiAgICB6b29tOiAxLAogICAgbWFya2VyczogW10sCiAgICBjb250cm9sczogW10sCiAgICBzY3JvbGx3aGVlbDogZmFsc2UsCiAgICBkb3VibGVjbGlja3pvb206IHRydWUsCiAgICBtYXB0eXBlOiAiUk9BRE1BUCIsCiAgICBodG1sX3ByZXBlbmQ6ICc8ZGl2IGNsYXNzPSJnbWFwX21hcmtlciI+JywKICAgIGh0bWxfYXBwZW5kOiAiPC9kaXY+IiwKICAgIGljb246IHsKICAgICAgaW1hZ2U6ICJodHRwOi8vd3d3Lmdvb2dsZS5jb20vbWFwZmlsZXMvbWFya2VyLnBuZyIsCiAgICAgIHNoYWRvdzogImh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9tYXBmaWxlcy9zaGFkb3c1MC5wbmciLAogICAgICBpY29uc2l6ZTogWzIwLCAzNF0sCiAgICAgIHNoYWRvd3NpemU6IFszNywgMzRdLAogICAgICBpY29uYW5jaG9yOiBbOSwgMzRdLAogICAgICBzaGFkb3dhbmNob3I6IFs2LCAzNF0KICAgIH0KICB9Owp9KShqUXVlcnkpOwoKalF1ZXJ5LmVhc2luZ1sianN3aW5nIl0gPSBqUXVlcnkuZWFzaW5nWyJzd2luZyJdOwpqUXVlcnkuZXh0ZW5kKGpRdWVyeS5lYXNpbmcsIHsKICBkZWY6ICJlYXNlT3V0UXVhZCIsCiAgc3dpbmc6IGZ1bmN0aW9uIHN3aW5nKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiBqUXVlcnkuZWFzaW5nW2pRdWVyeS5lYXNpbmcuZGVmXShlLCB0LCBuLCByLCBpKTsKICB9LAogIGVhc2VJblF1YWQ6IGZ1bmN0aW9uIGVhc2VJblF1YWQoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHIgKiAodCAvPSBpKSAqIHQgKyBuOwogIH0sCiAgZWFzZU91dFF1YWQ6IGZ1bmN0aW9uIGVhc2VPdXRRdWFkKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiAtciAqICh0IC89IGkpICogKHQgLSAyKSArIG47CiAgfSwKICBlYXNlSW5PdXRRdWFkOiBmdW5jdGlvbiBlYXNlSW5PdXRRdWFkKGUsIHQsIG4sIHIsIGkpIHsKICAgIGlmICgodCAvPSBpIC8gMikgPCAxKSByZXR1cm4gciAvIDIgKiB0ICogdCArIG47CiAgICByZXR1cm4gLXIgLyAyICogKC0tdCAqICh0IC0gMikgLSAxKSArIG47CiAgfSwKICBlYXNlSW5DdWJpYzogZnVuY3Rpb24gZWFzZUluQ3ViaWMoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHIgKiAodCAvPSBpKSAqIHQgKiB0ICsgbjsKICB9LAogIGVhc2VPdXRDdWJpYzogZnVuY3Rpb24gZWFzZU91dEN1YmljKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiByICogKCh0ID0gdCAvIGkgLSAxKSAqIHQgKiB0ICsgMSkgKyBuOwogIH0sCiAgZWFzZUluT3V0Q3ViaWM6IGZ1bmN0aW9uIGVhc2VJbk91dEN1YmljKGUsIHQsIG4sIHIsIGkpIHsKICAgIGlmICgodCAvPSBpIC8gMikgPCAxKSByZXR1cm4gciAvIDIgKiB0ICogdCAqIHQgKyBuOwogICAgcmV0dXJuIHIgLyAyICogKCh0IC09IDIpICogdCAqIHQgKyAyKSArIG47CiAgfSwKICBlYXNlSW5RdWFydDogZnVuY3Rpb24gZWFzZUluUXVhcnQoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHIgKiAodCAvPSBpKSAqIHQgKiB0ICogdCArIG47CiAgfSwKICBlYXNlT3V0UXVhcnQ6IGZ1bmN0aW9uIGVhc2VPdXRRdWFydChlLCB0LCBuLCByLCBpKSB7CiAgICByZXR1cm4gLXIgKiAoKHQgPSB0IC8gaSAtIDEpICogdCAqIHQgKiB0IC0gMSkgKyBuOwogIH0sCiAgZWFzZUluT3V0UXVhcnQ6IGZ1bmN0aW9uIGVhc2VJbk91dFF1YXJ0KGUsIHQsIG4sIHIsIGkpIHsKICAgIGlmICgodCAvPSBpIC8gMikgPCAxKSByZXR1cm4gciAvIDIgKiB0ICogdCAqIHQgKiB0ICsgbjsKICAgIHJldHVybiAtciAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgLSAyKSArIG47CiAgfSwKICBlYXNlSW5RdWludDogZnVuY3Rpb24gZWFzZUluUXVpbnQoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHIgKiAodCAvPSBpKSAqIHQgKiB0ICogdCAqIHQgKyBuOwogIH0sCiAgZWFzZU91dFF1aW50OiBmdW5jdGlvbiBlYXNlT3V0UXVpbnQoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHIgKiAoKHQgPSB0IC8gaSAtIDEpICogdCAqIHQgKiB0ICogdCArIDEpICsgbjsKICB9LAogIGVhc2VJbk91dFF1aW50OiBmdW5jdGlvbiBlYXNlSW5PdXRRdWludChlLCB0LCBuLCByLCBpKSB7CiAgICBpZiAoKHQgLz0gaSAvIDIpIDwgMSkgcmV0dXJuIHIgLyAyICogdCAqIHQgKiB0ICogdCAqIHQgKyBuOwogICAgcmV0dXJuIHIgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0ICogdCArIDIpICsgbjsKICB9LAogIGVhc2VJblNpbmU6IGZ1bmN0aW9uIGVhc2VJblNpbmUoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIC1yICogTWF0aC5jb3ModCAvIGkgKiAoTWF0aC5QSSAvIDIpKSArIHIgKyBuOwogIH0sCiAgZWFzZU91dFNpbmU6IGZ1bmN0aW9uIGVhc2VPdXRTaW5lKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiByICogTWF0aC5zaW4odCAvIGkgKiAoTWF0aC5QSSAvIDIpKSArIG47CiAgfSwKICBlYXNlSW5PdXRTaW5lOiBmdW5jdGlvbiBlYXNlSW5PdXRTaW5lKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiAtciAvIDIgKiAoTWF0aC5jb3MoTWF0aC5QSSAqIHQgLyBpKSAtIDEpICsgbjsKICB9LAogIGVhc2VJbkV4cG86IGZ1bmN0aW9uIGVhc2VJbkV4cG8oZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHQgPT0gMCA/IG4gOiByICogTWF0aC5wb3coMiwgMTAgKiAodCAvIGkgLSAxKSkgKyBuOwogIH0sCiAgZWFzZU91dEV4cG86IGZ1bmN0aW9uIGVhc2VPdXRFeHBvKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiB0ID09IGkgPyBuICsgciA6IHIgKiAoLU1hdGgucG93KDIsIC0xMCAqIHQgLyBpKSArIDEpICsgbjsKICB9LAogIGVhc2VJbk91dEV4cG86IGZ1bmN0aW9uIGVhc2VJbk91dEV4cG8oZSwgdCwgbiwgciwgaSkgewogICAgaWYgKHQgPT0gMCkgcmV0dXJuIG47CiAgICBpZiAodCA9PSBpKSByZXR1cm4gbiArIHI7CiAgICBpZiAoKHQgLz0gaSAvIDIpIDwgMSkgcmV0dXJuIHIgLyAyICogTWF0aC5wb3coMiwgMTAgKiAodCAtIDEpKSArIG47CiAgICByZXR1cm4gciAvIDIgKiAoLU1hdGgucG93KDIsIC0xMCAqIC0tdCkgKyAyKSArIG47CiAgfSwKICBlYXNlSW5DaXJjOiBmdW5jdGlvbiBlYXNlSW5DaXJjKGUsIHQsIG4sIHIsIGkpIHsKICAgIHJldHVybiAtciAqIChNYXRoLnNxcnQoMSAtICh0IC89IGkpICogdCkgLSAxKSArIG47CiAgfSwKICBlYXNlT3V0Q2lyYzogZnVuY3Rpb24gZWFzZU91dENpcmMoZSwgdCwgbiwgciwgaSkgewogICAgcmV0dXJuIHIgKiBNYXRoLnNxcnQoMSAtICh0ID0gdCAvIGkgLSAxKSAqIHQpICsgbjsKICB9LAogIGVhc2VJbk91dENpcmM6IGZ1bmN0aW9uIGVhc2VJbk91dENpcmMoZSwgdCwgbiwgciwgaSkgewogICAgaWYgKCh0IC89IGkgLyAyKSA8IDEpIHJldHVybiAtciAvIDIgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSArIG47CiAgICByZXR1cm4gciAvIDIgKiAoTWF0aC5zcXJ0KDEgLSAodCAtPSAyKSAqIHQpICsgMSkgKyBuOwogIH0sCiAgZWFzZUluRWxhc3RpYzogZnVuY3Rpb24gZWFzZUluRWxhc3RpYyhlLCB0LCBuLCByLCBpKSB7CiAgICB2YXIgcyA9IDEuNzAxNTg7CiAgICB2YXIgbyA9IDA7CiAgICB2YXIgdSA9IHI7CiAgICBpZiAodCA9PSAwKSByZXR1cm4gbjsKICAgIGlmICgodCAvPSBpKSA9PSAxKSByZXR1cm4gbiArIHI7CiAgICBpZiAoIW8pIG8gPSBpICogLjM7CgogICAgaWYgKHUgPCBNYXRoLmFicyhyKSkgewogICAgICB1ID0gcjsKICAgICAgdmFyIHMgPSBvIC8gNDsKICAgIH0gZWxzZSB2YXIgcyA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyB1KTsKCiAgICByZXR1cm4gLSh1ICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGkgLSBzKSAqIDIgKiBNYXRoLlBJIC8gbykpICsgbjsKICB9LAogIGVhc2VPdXRFbGFzdGljOiBmdW5jdGlvbiBlYXNlT3V0RWxhc3RpYyhlLCB0LCBuLCByLCBpKSB7CiAgICB2YXIgcyA9IDEuNzAxNTg7CiAgICB2YXIgbyA9IDA7CiAgICB2YXIgdSA9IHI7CiAgICBpZiAodCA9PSAwKSByZXR1cm4gbjsKICAgIGlmICgodCAvPSBpKSA9PSAxKSByZXR1cm4gbiArIHI7CiAgICBpZiAoIW8pIG8gPSBpICogLjM7CgogICAgaWYgKHUgPCBNYXRoLmFicyhyKSkgewogICAgICB1ID0gcjsKICAgICAgdmFyIHMgPSBvIC8gNDsKICAgIH0gZWxzZSB2YXIgcyA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyB1KTsKCiAgICByZXR1cm4gdSAqIE1hdGgucG93KDIsIC0xMCAqIHQpICogTWF0aC5zaW4oKHQgKiBpIC0gcykgKiAyICogTWF0aC5QSSAvIG8pICsgciArIG47CiAgfSwKICBlYXNlSW5PdXRFbGFzdGljOiBmdW5jdGlvbiBlYXNlSW5PdXRFbGFzdGljKGUsIHQsIG4sIHIsIGkpIHsKICAgIHZhciBzID0gMS43MDE1ODsKICAgIHZhciBvID0gMDsKICAgIHZhciB1ID0gcjsKICAgIGlmICh0ID09IDApIHJldHVybiBuOwogICAgaWYgKCh0IC89IGkgLyAyKSA9PSAyKSByZXR1cm4gbiArIHI7CiAgICBpZiAoIW8pIG8gPSBpICogLjMgKiAxLjU7CgogICAgaWYgKHUgPCBNYXRoLmFicyhyKSkgewogICAgICB1ID0gcjsKICAgICAgdmFyIHMgPSBvIC8gNDsKICAgIH0gZWxzZSB2YXIgcyA9IG8gLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKHIgLyB1KTsKCiAgICBpZiAodCA8IDEpIHJldHVybiAtLjUgKiB1ICogTWF0aC5wb3coMiwgMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGkgLSBzKSAqIDIgKiBNYXRoLlBJIC8gbykgKyBuOwogICAgcmV0dXJuIHUgKiBNYXRoLnBvdygyLCAtMTAgKiAodCAtPSAxKSkgKiBNYXRoLnNpbigodCAqIGkgLSBzKSAqIDIgKiBNYXRoLlBJIC8gbykgKiAuNSArIHIgKyBuOwogIH0sCiAgZWFzZUluQmFjazogZnVuY3Rpb24gZWFzZUluQmFjayhlLCB0LCBuLCByLCBpLCBzKSB7CiAgICBpZiAocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4OwogICAgcmV0dXJuIHIgKiAodCAvPSBpKSAqIHQgKiAoKHMgKyAxKSAqIHQgLSBzKSArIG47CiAgfSwKICBlYXNlT3V0QmFjazogZnVuY3Rpb24gZWFzZU91dEJhY2soZSwgdCwgbiwgciwgaSwgcykgewogICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODsKICAgIHJldHVybiByICogKCh0ID0gdCAvIGkgLSAxKSAqIHQgKiAoKHMgKyAxKSAqIHQgKyBzKSArIDEpICsgbjsKICB9LAogIGVhc2VJbk91dEJhY2s6IGZ1bmN0aW9uIGVhc2VJbk91dEJhY2soZSwgdCwgbiwgciwgaSwgcykgewogICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODsKICAgIGlmICgodCAvPSBpIC8gMikgPCAxKSByZXR1cm4gciAvIDIgKiB0ICogdCAqICgoKHMgKj0gMS41MjUpICsgMSkgKiB0IC0gcykgKyBuOwogICAgcmV0dXJuIHIgLyAyICogKCh0IC09IDIpICogdCAqICgoKHMgKj0gMS41MjUpICsgMSkgKiB0ICsgcykgKyAyKSArIG47CiAgfSwKICBlYXNlSW5Cb3VuY2U6IGZ1bmN0aW9uIGVhc2VJbkJvdW5jZShlLCB0LCBuLCByLCBpKSB7CiAgICByZXR1cm4gciAtIGpRdWVyeS5lYXNpbmcuZWFzZU91dEJvdW5jZShlLCBpIC0gdCwgMCwgciwgaSkgKyBuOwogIH0sCiAgZWFzZU91dEJvdW5jZTogZnVuY3Rpb24gZWFzZU91dEJvdW5jZShlLCB0LCBuLCByLCBpKSB7CiAgICBpZiAoKHQgLz0gaSkgPCAxIC8gMi43NSkgewogICAgICByZXR1cm4gciAqIDcuNTYyNSAqIHQgKiB0ICsgbjsKICAgIH0gZWxzZSBpZiAodCA8IDIgLyAyLjc1KSB7CiAgICAgIHJldHVybiByICogKDcuNTYyNSAqICh0IC09IDEuNSAvIDIuNzUpICogdCArIC43NSkgKyBuOwogICAgfSBlbHNlIGlmICh0IDwgMi41IC8gMi43NSkgewogICAgICByZXR1cm4gciAqICg3LjU2MjUgKiAodCAtPSAyLjI1IC8gMi43NSkgKiB0ICsgLjkzNzUpICsgbjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiByICogKDcuNTYyNSAqICh0IC09IDIuNjI1IC8gMi43NSkgKiB0ICsgLjk4NDM3NSkgKyBuOwogICAgfQogIH0sCiAgZWFzZUluT3V0Qm91bmNlOiBmdW5jdGlvbiBlYXNlSW5PdXRCb3VuY2UoZSwgdCwgbiwgciwgaSkgewogICAgaWYgKHQgPCBpIC8gMikgcmV0dXJuIGpRdWVyeS5lYXNpbmcuZWFzZUluQm91bmNlKGUsIHQgKiAyLCAwLCByLCBpKSAqIC41ICsgbjsKICAgIHJldHVybiBqUXVlcnkuZWFzaW5nLmVhc2VPdXRCb3VuY2UoZSwgdCAqIDIgLSBpLCAwLCByLCBpKSAqIC41ICsgciAqIC41ICsgbjsKICB9Cn0pOwovKiEgQmFja3N0cmV0Y2ggLSB2Mi4wLjQgLSAyMDEzLTA2LTE5CiogaHR0cDovL3Nyb2JiaW4uY29tL2pxdWVyeS1wbHVnaW5zL2JhY2tzdHJldGNoLwoqIENvcHlyaWdodCAoYykgMjAxMyBTY290dCBSb2JiaW47IExpY2Vuc2VkIE1JVCAqLwoKKGZ1bmN0aW9uIChhLCBkLCBwKSB7CiAgYS5mbi5iYWNrc3RyZXRjaCA9IGZ1bmN0aW9uIChjLCBiKSB7CiAgICAoYyA9PT0gcCB8fCAwID09PSBjLmxlbmd0aCkgJiYgYS5lcnJvcigiTm8gaW1hZ2VzIHdlcmUgc3VwcGxpZWQgZm9yIEJhY2tzdHJldGNoIik7CiAgICAwID09PSBhKGQpLnNjcm9sbFRvcCgpICYmIGQuc2Nyb2xsVG8oMCwgMCk7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGQgPSBhKHRoaXMpLAogICAgICAgICAgZyA9IGQuZGF0YSgiYmFja3N0cmV0Y2giKTsKCiAgICAgIGlmIChnKSB7CiAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBjICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGdbY10pIHsKICAgICAgICAgIGdbY10oYik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBiID0gYS5leHRlbmQoZy5vcHRpb25zLCBiKTsKICAgICAgICBnLmRlc3Ryb3koITApOwogICAgICB9CgogICAgICBnID0gbmV3IHEodGhpcywgYywgYik7CiAgICAgIGQuZGF0YSgiYmFja3N0cmV0Y2giLCBnKTsKICAgIH0pOwogIH07CgogIGEuYmFja3N0cmV0Y2ggPSBmdW5jdGlvbiAoYywgYikgewogICAgcmV0dXJuIGEoImJvZHkiKS5iYWNrc3RyZXRjaChjLCBiKS5kYXRhKCJiYWNrc3RyZXRjaCIpOwogIH07CgogIGEuZXhwclsiOiJdLmJhY2tzdHJldGNoID0gZnVuY3Rpb24gKGMpIHsKICAgIHJldHVybiBhKGMpLmRhdGEoImJhY2tzdHJldGNoIikgIT09IHA7CiAgfTsKCiAgYS5mbi5iYWNrc3RyZXRjaC5kZWZhdWx0cyA9IHsKICAgIGNlbnRlcmVkWDogITAsCiAgICBjZW50ZXJlZFk6ICEwLAogICAgZHVyYXRpb246IDVFMywKICAgIGZhZGU6IDAKICB9OwoKICB2YXIgciA9IHsKICAgIGxlZnQ6IDAsCiAgICB0b3A6IDAsCiAgICBvdmVyZmxvdzogImhpZGRlbiIsCiAgICBtYXJnaW46IDAsCiAgICBwYWRkaW5nOiAwLAogICAgaGVpZ2h0OiAiMTAwJSIsCiAgICB3aWR0aDogIjEwMCUiLAogICAgekluZGV4OiAtOTk5OTk5CiAgfSwKICAgICAgcyA9IHsKICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLAogICAgZGlzcGxheTogIm5vbmUiLAogICAgbWFyZ2luOiAwLAogICAgcGFkZGluZzogMCwKICAgIGJvcmRlcjogIm5vbmUiLAogICAgd2lkdGg6ICJhdXRvIiwKICAgIGhlaWdodDogImF1dG8iLAogICAgbWF4SGVpZ2h0OiAibm9uZSIsCiAgICBtYXhXaWR0aDogIm5vbmUiLAogICAgekluZGV4OiAtOTk5OTk5CiAgfSwKICAgICAgcSA9IGZ1bmN0aW9uIHEoYywgYiwgZSkgewogICAgdGhpcy5vcHRpb25zID0gYS5leHRlbmQoe30sIGEuZm4uYmFja3N0cmV0Y2guZGVmYXVsdHMsIGUgfHwge30pOwogICAgdGhpcy5pbWFnZXMgPSBhLmlzQXJyYXkoYikgPyBiIDogW2JdOwogICAgYS5lYWNoKHRoaXMuaW1hZ2VzLCBmdW5jdGlvbiAoKSB7CiAgICAgIGEoIjxpbWcgLz4iKVswXS5zcmMgPSB0aGlzOwogICAgfSk7CiAgICB0aGlzLmlzQm9keSA9IGMgPT09IGRvY3VtZW50LmJvZHk7CiAgICB0aGlzLiRjb250YWluZXIgPSBhKGMpOwogICAgdGhpcy4kcm9vdCA9IHRoaXMuaXNCb2R5ID8gbCA/IGEoZCkgOiBhKGRvY3VtZW50KSA6IHRoaXMuJGNvbnRhaW5lcjsKICAgIGMgPSB0aGlzLiRjb250YWluZXIuY2hpbGRyZW4oIi5iYWNrc3RyZXRjaCIpLmZpcnN0KCk7CiAgICB0aGlzLiR3cmFwID0gYy5sZW5ndGggPyBjIDogYSgnPGRpdiBjbGFzcz0iYmFja3N0cmV0Y2giPjwvZGl2PicpLmNzcyhyKS5hcHBlbmRUbyh0aGlzLiRjb250YWluZXIpOwogICAgdGhpcy5pc0JvZHkgfHwgKGMgPSB0aGlzLiRjb250YWluZXIuY3NzKCJwb3NpdGlvbiIpLCBiID0gdGhpcy4kY29udGFpbmVyLmNzcygiekluZGV4IiksIHRoaXMuJGNvbnRhaW5lci5jc3MoewogICAgICBwb3NpdGlvbjogInN0YXRpYyIgPT09IGMgPyAicmVsYXRpdmUiIDogYywKICAgICAgekluZGV4OiAiYXV0byIgPT09IGIgPyAwIDogYiwKICAgICAgYmFja2dyb3VuZDogIm5vbmUiCiAgICB9KSwgdGhpcy4kd3JhcC5jc3MoewogICAgICB6SW5kZXg6IC05OTk5OTgKICAgIH0pKTsKICAgIHRoaXMuJHdyYXAuY3NzKHsKICAgICAgcG9zaXRpb246IHRoaXMuaXNCb2R5ICYmIGwgPyAiZml4ZWQiIDogImFic29sdXRlIgogICAgfSk7CiAgICB0aGlzLmluZGV4ID0gMDsKICAgIHRoaXMuc2hvdyh0aGlzLmluZGV4KTsKICAgIGEoZCkub24oInJlc2l6ZS5iYWNrc3RyZXRjaCIsIGEucHJveHkodGhpcy5yZXNpemUsIHRoaXMpKS5vbigib3JpZW50YXRpb25jaGFuZ2UuYmFja3N0cmV0Y2giLCBhLnByb3h5KGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5pc0JvZHkgJiYgMCA9PT0gZC5wYWdlWU9mZnNldCAmJiAoZC5zY3JvbGxUbygwLCAxKSwgdGhpcy5yZXNpemUoKSk7CiAgICB9LCB0aGlzKSk7CiAgfTsKCiAgcS5wcm90b3R5cGUgPSB7CiAgICByZXNpemU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgYSA9IHsKICAgICAgICAgIGxlZnQ6IDAsCiAgICAgICAgICB0b3A6IDAKICAgICAgICB9LAogICAgICAgICAgICBiID0gdGhpcy5pc0JvZHkgPyB0aGlzLiRyb290LndpZHRoKCkgOiB0aGlzLiRyb290LmlubmVyV2lkdGgoKSwKICAgICAgICAgICAgZSA9IGIsCiAgICAgICAgICAgIGcgPSB0aGlzLmlzQm9keSA/IGQuaW5uZXJIZWlnaHQgPyBkLmlubmVySGVpZ2h0IDogdGhpcy4kcm9vdC5oZWlnaHQoKSA6IHRoaXMuJHJvb3QuaW5uZXJIZWlnaHQoKSwKICAgICAgICAgICAgaiA9IGUgLyB0aGlzLiRpbWcuZGF0YSgicmF0aW8iKSwKICAgICAgICAgICAgZjsKICAgICAgICBqID49IGcgPyAoZiA9IChqIC0gZykgLyAyLCB0aGlzLm9wdGlvbnMuY2VudGVyZWRZICYmIChhLnRvcCA9ICItIiArIGYgKyAicHgiKSkgOiAoaiA9IGcsIGUgPSBqICogdGhpcy4kaW1nLmRhdGEoInJhdGlvIiksIGYgPSAoZSAtIGIpIC8gMiwgdGhpcy5vcHRpb25zLmNlbnRlcmVkWCAmJiAoYS5sZWZ0ID0gIi0iICsgZiArICJweCIpKTsKICAgICAgICB0aGlzLiR3cmFwLmNzcyh7CiAgICAgICAgICB3aWR0aDogYiwKICAgICAgICAgIGhlaWdodDogZwogICAgICAgIH0pLmZpbmQoImltZzpub3QoLmRlbGV0ZWFibGUpIikuY3NzKHsKICAgICAgICAgIHdpZHRoOiBlLAogICAgICAgICAgaGVpZ2h0OiBqCiAgICAgICAgfSkuY3NzKGEpOwogICAgICB9IGNhdGNoIChoKSB7fQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24gc2hvdyhjKSB7CiAgICAgIGlmICghKE1hdGguYWJzKGMpID4gdGhpcy5pbWFnZXMubGVuZ3RoIC0gMSkpIHsKICAgICAgICB2YXIgYiA9IHRoaXMsCiAgICAgICAgICAgIGUgPSBiLiR3cmFwLmZpbmQoImltZyIpLmFkZENsYXNzKCJkZWxldGVhYmxlIiksCiAgICAgICAgICAgIGQgPSB7CiAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBiLiRjb250YWluZXJbMF0KICAgICAgICB9OwogICAgICAgIGIuJGNvbnRhaW5lci50cmlnZ2VyKGEuRXZlbnQoImJhY2tzdHJldGNoLmJlZm9yZSIsIGQpLCBbYiwgY10pOwogICAgICAgIHRoaXMuaW5kZXggPSBjOwogICAgICAgIGNsZWFySW50ZXJ2YWwoYi5pbnRlcnZhbCk7CiAgICAgICAgYi4kaW1nID0gYSgiPGltZyAvPiIpLmNzcyhzKS5iaW5kKCJsb2FkIiwgZnVuY3Rpb24gKGYpIHsKICAgICAgICAgIHZhciBoID0gdGhpcy53aWR0aCB8fCBhKGYudGFyZ2V0KS53aWR0aCgpOwogICAgICAgICAgZiA9IHRoaXMuaGVpZ2h0IHx8IGEoZi50YXJnZXQpLmhlaWdodCgpOwogICAgICAgICAgYSh0aGlzKS5kYXRhKCJyYXRpbyIsIGggLyBmKTsKICAgICAgICAgIGEodGhpcykuZmFkZUluKGIub3B0aW9ucy5zcGVlZCB8fCBiLm9wdGlvbnMuZmFkZSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICBlLnJlbW92ZSgpOwogICAgICAgICAgICBiLnBhdXNlZCB8fCBiLmN5Y2xlKCk7CiAgICAgICAgICAgIGEoWyJhZnRlciIsICJzaG93Il0pLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGIuJGNvbnRhaW5lci50cmlnZ2VyKGEuRXZlbnQoImJhY2tzdHJldGNoLiIgKyB0aGlzLCBkKSwgW2IsIGNdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIGIucmVzaXplKCk7CiAgICAgICAgfSkuYXBwZW5kVG8oYi4kd3JhcCk7CiAgICAgICAgYi4kaW1nLmF0dHIoInNyYyIsIGIuaW1hZ2VzW2NdKTsKICAgICAgICByZXR1cm4gYjsKICAgICAgfQogICAgfSwKICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNob3codGhpcy5pbmRleCA8IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEgPyB0aGlzLmluZGV4ICsgMSA6IDApOwogICAgfSwKICAgIHByZXY6IGZ1bmN0aW9uIHByZXYoKSB7CiAgICAgIHJldHVybiB0aGlzLnNob3coMCA9PT0gdGhpcy5pbmRleCA/IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEgOiB0aGlzLmluZGV4IC0gMSk7CiAgICB9LAogICAgcGF1c2U6IGZ1bmN0aW9uIHBhdXNlKCkgewogICAgICB0aGlzLnBhdXNlZCA9ICEwOwogICAgICByZXR1cm4gdGhpczsKICAgIH0sCiAgICByZXN1bWU6IGZ1bmN0aW9uIHJlc3VtZSgpIHsKICAgICAgdGhpcy5wYXVzZWQgPSAhMTsKICAgICAgdGhpcy5uZXh0KCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIGN5Y2xlOiBmdW5jdGlvbiBjeWNsZSgpIHsKICAgICAgMSA8IHRoaXMuaW1hZ2VzLmxlbmd0aCAmJiAoY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSwgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKGEucHJveHkoZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMucGF1c2VkIHx8IHRoaXMubmV4dCgpOwogICAgICB9LCB0aGlzKSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uKSk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koYykgewogICAgICBhKGQpLm9mZigicmVzaXplLmJhY2tzdHJldGNoIG9yaWVudGF0aW9uY2hhbmdlLmJhY2tzdHJldGNoIik7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7CiAgICAgIGMgfHwgdGhpcy4kd3JhcC5yZW1vdmUoKTsKICAgICAgdGhpcy4kY29udGFpbmVyLnJlbW92ZURhdGEoImJhY2tzdHJldGNoIik7CiAgICB9CiAgfTsKICB2YXIgbCwKICAgICAgZiA9IG5hdmlnYXRvci51c2VyQWdlbnQsCiAgICAgIG0gPSBuYXZpZ2F0b3IucGxhdGZvcm0sCiAgICAgIGUgPSBmLm1hdGNoKC9BcHBsZVdlYktpdFwvKFswLTldKykvKSwKICAgICAgZSA9ICEhZSAmJiBlWzFdLAogICAgICBoID0gZi5tYXRjaCgvRmVubmVjXC8oWzAtOV0rKS8pLAogICAgICBoID0gISFoICYmIGhbMV0sCiAgICAgIG4gPSBmLm1hdGNoKC9PcGVyYSBNb2JpXC8oWzAtOV0rKS8pLAogICAgICB0ID0gISFuICYmIG5bMV0sCiAgICAgIGsgPSBmLm1hdGNoKC9NU0lFIChbMC05XSspLyksCiAgICAgIGsgPSAhIWsgJiYga1sxXTsKICBsID0gISgoLTEgPCBtLmluZGV4T2YoImlQaG9uZSIpIHx8IC0xIDwgbS5pbmRleE9mKCJpUGFkIikgfHwgLTEgPCBtLmluZGV4T2YoImlQb2QiKSkgJiYgZSAmJiA1MzQgPiBlIHx8IGQub3BlcmFtaW5pICYmICJbb2JqZWN0IE9wZXJhTWluaV0iID09PSB7fS50b1N0cmluZy5jYWxsKGQub3BlcmFtaW5pKSB8fCBuICYmIDc0NTggPiB0IHx8IC0xIDwgZi5pbmRleE9mKCJBbmRyb2lkIikgJiYgZSAmJiA1MzMgPiBlIHx8IGggJiYgNiA+IGggfHwgInBhbG1HZXRSZXNvdXJjZSIgaW4gZCAmJiBlICYmIDUzNCA+IGUgfHwgLTEgPCBmLmluZGV4T2YoIk1lZUdvIikgJiYgLTEgPCBmLmluZGV4T2YoIk5va2lhQnJvd3Nlci84LjUuMCIpIHx8IGsgJiYgNiA+PSBrKTsKfSkoalF1ZXJ5LCB3aW5kb3cpOwovKmdsb2JhbCBqUXVlcnkgKi8KCi8qIQoqIEZsZXhWZXJ0aWNhbENlbnRlci5qcyAxLjAKKgoqIENvcHlyaWdodCAyMDExLCBQYXVsIFNwcmFuZ2VycyBodHRwOi8vcGF1bHNwcmFuZ2Vycy5jb20KKiBSZWxlYXNlZCB1bmRlciB0aGUgV1RGUEwgbGljZW5zZQoqIGh0dHA6Ly9zYW0uem95Lm9yZy93dGZwbC8KKgoqIERhdGU6IEZyaSBPY3QgMjggMTk6MTI6MDAgMjAxMSArMDEwMAoqLwoKCihmdW5jdGlvbiAoJCkgewogICQuZm4uZmxleFZlcnRpY2FsQ2VudGVyID0gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKHsKICAgICAgY3NzQXR0cmlidXRlOiAnbWFyZ2luLXRvcCcsCiAgICAgIC8vIHRoZSBhdHRyaWJ1dGUgdG8gYXBwbHkgdGhlIGNhbGN1bGF0ZWQgdmFsdWUgdG8KICAgICAgdmVydGljYWxPZmZzZXQ6IDAsCiAgICAgIC8vIHRoZSBudW1iZXIgb2YgcGl4ZWxzIHRvIG9mZnNldCB0aGUgdmVydGljYWwgYWxpZ25tZW50IGJ5CiAgICAgIHBhcmVudFNlbGVjdG9yOiBudWxsLAogICAgICAvLyBhIHNlbGVjdG9yIHJlcHJlc2VudGluZyB0aGUgcGFyZW50IHRvIHZlcnRpY2FsbHkgY2VudGVyIHRoaXMgZWxlbWVudCB3aXRoaW4KICAgICAgZGVib3VuY2VUaW1lb3V0OiAyNSwKICAgICAgLy8gYSBkZWZhdWx0IGRlYm91bmNlIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzCiAgICAgIGRlZmVyVGlsV2luZG93TG9hZDogZmFsc2UgLy8gaWYgdHJ1ZSwgbm90aGluZyB3aWxsIHRha2UgZWZmZWN0IHVudGlsIHRoZSAkKHdpbmRvdykubG9hZCBldmVudAoKICAgIH0sIG9wdGlvbnMgfHwge30pOwogICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7IC8vIHN0b3JlIHRoZSBvYmplY3QKCiAgICAgIHZhciBkZWJvdW5jZTsgLy8gcmVjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIHRvIHRoZSB0b3Agb2YgdGhlIGVsZW1lbnQgdG8ga2VlcCBpdCBjZW50ZXJlZAoKICAgICAgdmFyIHJlc2l6ZXIgPSBmdW5jdGlvbiByZXNpemVyKCkgewogICAgICAgIHZhciBwYXJlbnRIZWlnaHQgPSBzZXR0aW5ncy5wYXJlbnRTZWxlY3RvciAmJiAkdGhpcy5wYXJlbnRzKHNldHRpbmdzLnBhcmVudFNlbGVjdG9yKS5sZW5ndGggPyAkdGhpcy5wYXJlbnRzKHNldHRpbmdzLnBhcmVudFNlbGVjdG9yKS5maXJzdCgpLmhlaWdodCgpIDogJHRoaXMucGFyZW50KCkuaGVpZ2h0KCk7CiAgICAgICAgJHRoaXMuY3NzKHNldHRpbmdzLmNzc0F0dHJpYnV0ZSwgKHBhcmVudEhlaWdodCAtICR0aGlzLmhlaWdodCgpKSAvIDIgKyBwYXJzZUludChzZXR0aW5ncy52ZXJ0aWNhbE9mZnNldCkpOwoKICAgICAgICBpZiAoc2V0dGluZ3MuY29tcGxldGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgc2V0dGluZ3MuY29tcGxldGUoKTsKICAgICAgICB9CiAgICAgIH07IC8vIENhbGwgb24gcmVzaXplLiBPcGVyYSBkZWJvdW5jZXMgdGhlaXIgcmVzaXplIGJ5IGRlZmF1bHQuCgoKICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGRlYm91bmNlKTsKICAgICAgICBkZWJvdW5jZSA9IHNldFRpbWVvdXQocmVzaXplciwgc2V0dGluZ3MuZGVib3VuY2VUaW1lb3V0KTsKICAgICAgfSk7CgogICAgICBpZiAoIXNldHRpbmdzLmRlZmVyVGlsV2luZG93TG9hZCkgewogICAgICAgIC8vIGNhbGwgaXQgb25jZSwgaW1tZWRpYXRlbHkuCiAgICAgICAgcmVzaXplcigpOwogICAgICB9IC8vIENhbGwgYWdhaW4gdG8gc2V0IGFmdGVyIHdpbmRvdyAoZnJhbWVzLCBpbWFnZXMsIGV0YykgbG9hZHMuCgoKICAgICAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24gKCkgewogICAgICAgIHJlc2l6ZXIoKTsKICAgICAgfSk7CiAgICB9KTsKICB9Owp9KShqUXVlcnkpOwovKmpzaGludCBicm93c2VyOnRydWUgKi8KCi8qIQoqIEZpdFZpZHMgMS4xCioKKiBDb3B5cmlnaHQgMjAxMywgQ2hyaXMgQ295aWVyIC0gaHR0cDovL2Nzcy10cmlja3MuY29tICsgRGF2ZSBSdXBlcnQgLSBodHRwOi8vZGF2ZXJ1cGVydC5jb20KKiBDcmVkaXQgdG8gVGhpZXJyeSBLb2JsZW50eiAtIGh0dHA6Ly93d3cuYWxpc3RhcGFydC5jb20vYXJ0aWNsZXMvY3JlYXRpbmctaW50cmluc2ljLXJhdGlvcy1mb3ItdmlkZW8vCiogUmVsZWFzZWQgdW5kZXIgdGhlIFdURlBMIGxpY2Vuc2UgLSBodHRwOi8vc2FtLnpveS5vcmcvd3RmcGwvCioKKi8KCgo7CgooZnVuY3Rpb24gKCQpIHsKICAndXNlIHN0cmljdCc7CgogICQuZm4uZml0VmlkcyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7CiAgICB2YXIgc2V0dGluZ3MgPSB7CiAgICAgIGN1c3RvbVNlbGVjdG9yOiBudWxsLAogICAgICBpZ25vcmU6IG51bGwKICAgIH07CgogICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZml0LXZpZHMtc3R5bGUnKSkgewogICAgICAvLyBhcHBlbmRTdHlsZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS90b2RkbW90dG8vZmx1aWR2aWRzL2Jsb2IvbWFzdGVyL2Rpc3QvZmx1aWR2aWRzLmpzCiAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdOwogICAgICB2YXIgY3NzID0gJy5mbHVpZC13aWR0aC12aWRlby13cmFwcGVye3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzowO30uZmx1aWQtd2lkdGgtdmlkZW8td3JhcHBlciBpZnJhbWUsLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXIgb2JqZWN0LC5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyIGVtYmVkIHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt9JzsKICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBkaXYuaW5uZXJIVE1MID0gJzxwPng8L3A+PHN0eWxlIGlkPSJmaXQtdmlkcy1zdHlsZSI+JyArIGNzcyArICc8L3N0eWxlPic7CiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoZGl2LmNoaWxkTm9kZXNbMV0pOwogICAgfQoKICAgIGlmIChvcHRpb25zKSB7CiAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHNlbGVjdG9ycyA9IFsnaWZyYW1lW3NyYyo9InBsYXllci52aW1lby5jb20iXScsICdpZnJhbWVbc3JjKj0ieW91dHViZS5jb20iXScsICdpZnJhbWVbc3JjKj0ieW91dHViZS1ub2Nvb2tpZS5jb20iXScsICdpZnJhbWVbc3JjKj0ia2lja3N0YXJ0ZXIuY29tIl1bc3JjKj0idmlkZW8uaHRtbCJdJywgJ29iamVjdCcsICdlbWJlZCddOwoKICAgICAgaWYgKHNldHRpbmdzLmN1c3RvbVNlbGVjdG9yKSB7CiAgICAgICAgc2VsZWN0b3JzLnB1c2goc2V0dGluZ3MuY3VzdG9tU2VsZWN0b3IpOwogICAgICB9CgogICAgICB2YXIgaWdub3JlTGlzdCA9ICcuZml0dmlkc2lnbm9yZSc7CgogICAgICBpZiAoc2V0dGluZ3MuaWdub3JlKSB7CiAgICAgICAgaWdub3JlTGlzdCA9IGlnbm9yZUxpc3QgKyAnLCAnICsgc2V0dGluZ3MuaWdub3JlOwogICAgICB9CgogICAgICB2YXIgJGFsbFZpZGVvcyA9ICQodGhpcykuZmluZChzZWxlY3RvcnMuam9pbignLCcpKTsKICAgICAgJGFsbFZpZGVvcyA9ICRhbGxWaWRlb3Mubm90KCdvYmplY3Qgb2JqZWN0Jyk7IC8vIFN3Zk9iaiBjb25mbGljdCBwYXRjaAoKICAgICAgJGFsbFZpZGVvcyA9ICRhbGxWaWRlb3Mubm90KGlnbm9yZUxpc3QpOyAvLyBEaXNhYmxlIEZpdFZpZHMgb24gdGhpcyB2aWRlby4KCiAgICAgICRhbGxWaWRlb3MuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTsKCiAgICAgICAgaWYgKCR0aGlzLnBhcmVudHMoaWdub3JlTGlzdCkubGVuZ3RoID4gMCkgewogICAgICAgICAgcmV0dXJuOyAvLyBEaXNhYmxlIEZpdFZpZHMgb24gdGhpcyB2aWRlby4KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2VtYmVkJyAmJiAkdGhpcy5wYXJlbnQoJ29iamVjdCcpLmxlbmd0aCB8fCAkdGhpcy5wYXJlbnQoJy5mbHVpZC13aWR0aC12aWRlby13cmFwcGVyJykubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoISR0aGlzLmNzcygnaGVpZ2h0JykgJiYgISR0aGlzLmNzcygnd2lkdGgnKSAmJiAoaXNOYU4oJHRoaXMuYXR0cignaGVpZ2h0JykpIHx8IGlzTmFOKCR0aGlzLmF0dHIoJ3dpZHRoJykpKSkgewogICAgICAgICAgJHRoaXMuYXR0cignaGVpZ2h0JywgOSk7CiAgICAgICAgICAkdGhpcy5hdHRyKCd3aWR0aCcsIDE2KTsKICAgICAgICB9CgogICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ29iamVjdCcgfHwgJHRoaXMuYXR0cignaGVpZ2h0JykgJiYgIWlzTmFOKHBhcnNlSW50KCR0aGlzLmF0dHIoJ2hlaWdodCcpLCAxMCkpID8gcGFyc2VJbnQoJHRoaXMuYXR0cignaGVpZ2h0JyksIDEwKSA6ICR0aGlzLmhlaWdodCgpLAogICAgICAgICAgICB3aWR0aCA9ICFpc05hTihwYXJzZUludCgkdGhpcy5hdHRyKCd3aWR0aCcpLCAxMCkpID8gcGFyc2VJbnQoJHRoaXMuYXR0cignd2lkdGgnKSwgMTApIDogJHRoaXMud2lkdGgoKSwKICAgICAgICAgICAgYXNwZWN0UmF0aW8gPSBoZWlnaHQgLyB3aWR0aDsKCiAgICAgICAgaWYgKCEkdGhpcy5hdHRyKCduYW1lJykpIHsKICAgICAgICAgIHZhciB2aWRlb05hbWUgPSAnZml0dmlkJyArICQuZm4uZml0Vmlkcy5fY291bnQ7CiAgICAgICAgICAkdGhpcy5hdHRyKCduYW1lJywgdmlkZW9OYW1lKTsKICAgICAgICAgICQuZm4uZml0Vmlkcy5fY291bnQrKzsKICAgICAgICB9CgogICAgICAgICR0aGlzLndyYXAoJzxkaXYgY2xhc3M9ImZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXIiPjwvZGl2PicpLnBhcmVudCgnLmZsdWlkLXdpZHRoLXZpZGVvLXdyYXBwZXInKS5jc3MoJ3BhZGRpbmctdG9wJywgYXNwZWN0UmF0aW8gKiAxMDAgKyAnJScpOwogICAgICAgICR0aGlzLnJlbW92ZUF0dHIoJ2hlaWdodCcpLnJlbW92ZUF0dHIoJ3dpZHRoJyk7CiAgICAgIH0pOwogICAgfSk7CiAgfTsgLy8gSW50ZXJuYWwgY291bnRlciBmb3IgdW5pcXVlIHZpZGVvIG5hbWVzLgoKCiAgJC5mbi5maXRWaWRzLl9jb3VudCA9IDA7IC8vIFdvcmtzIHdpdGggZWl0aGVyIGpRdWVyeSBvciBaZXB0bwp9KSh3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0byk7Ci8qIQogKiBJc290b3BlIFBBQ0tBR0VEIHYyLjIuMAogKgogKiBMaWNlbnNlZCBHUEx2MyBmb3Igb3BlbiBzb3VyY2UgdXNlCiAqIG9yIElzb3RvcGUgQ29tbWVyY2lhbCBMaWNlbnNlIGZvciBjb21tZXJjaWFsIHVzZQogKgogKiBodHRwOi8vaXNvdG9wZS5tZXRhZml6enkuY28KICogQ29weXJpZ2h0IDIwMTUgTWV0YWZpenp5CiAqLwoKCiFmdW5jdGlvbiAoYSkgewogIGZ1bmN0aW9uIGIoKSB7fQoKICBmdW5jdGlvbiBjKGEpIHsKICAgIGZ1bmN0aW9uIGMoYikgewogICAgICBiLnByb3RvdHlwZS5vcHRpb24gfHwgKGIucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChiKSB7CiAgICAgICAgYS5pc1BsYWluT2JqZWN0KGIpICYmICh0aGlzLm9wdGlvbnMgPSBhLmV4dGVuZCghMCwgdGhpcy5vcHRpb25zLCBiKSk7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGUoYiwgYykgewogICAgICBhLmZuW2JdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHsKICAgICAgICAgIGZvciAodmFyIGcgPSBkLmNhbGwoYXJndW1lbnRzLCAxKSwgaCA9IDAsIGkgPSB0aGlzLmxlbmd0aDsgaSA+IGg7IGgrKykgewogICAgICAgICAgICB2YXIgaiA9IHRoaXNbaF0sCiAgICAgICAgICAgICAgICBrID0gYS5kYXRhKGosIGIpOwogICAgICAgICAgICBpZiAoaykgewogICAgICAgICAgICAgIGlmIChhLmlzRnVuY3Rpb24oa1tlXSkgJiYgIl8iICE9PSBlLmNoYXJBdCgwKSkgewogICAgICAgICAgICAgICAgdmFyIGwgPSBrW2VdLmFwcGx5KGssIGcpOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbCkgcmV0dXJuIGw7CiAgICAgICAgICAgICAgfSBlbHNlIGYoIm5vIHN1Y2ggbWV0aG9kICciICsgZSArICInIGZvciAiICsgYiArICIgaW5zdGFuY2UiKTsKICAgICAgICAgICAgfSBlbHNlIGYoImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gIiArIGIgKyAiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBhdHRlbXB0ZWQgdG8gY2FsbCAnIiArIGUgKyAiJyIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZCA9IGEuZGF0YSh0aGlzLCBiKTsKICAgICAgICAgIGQgPyAoZC5vcHRpb24oZSksIGQuX2luaXQoKSkgOiAoZCA9IG5ldyBjKHRoaXMsIGUpLCBhLmRhdGEodGhpcywgYiwgZCkpOwogICAgICAgIH0pOwogICAgICB9OwogICAgfQoKICAgIGlmIChhKSB7CiAgICAgIHZhciBmID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIGNvbnNvbGUgPyBiIDogZnVuY3Rpb24gKGEpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGEpOwogICAgICB9OwogICAgICByZXR1cm4gYS5icmlkZ2V0ID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICBjKGIpLCBlKGEsIGIpOwogICAgICB9LCBhLmJyaWRnZXQ7CiAgICB9CiAgfQoKICB2YXIgZCA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgianF1ZXJ5LWJyaWRnZXQvanF1ZXJ5LmJyaWRnZXQiLCBbImpxdWVyeSJdLCBjKSA6IGMoIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyByZXF1aXJlKCJqcXVlcnkiKSA6IGEualF1ZXJ5KTsKfSh3aW5kb3cpLCBmdW5jdGlvbiAoYSkgewogIGZ1bmN0aW9uIGIoYikgewogICAgdmFyIGMgPSBhLmV2ZW50OwogICAgcmV0dXJuIGMudGFyZ2V0ID0gYy50YXJnZXQgfHwgYy5zcmNFbGVtZW50IHx8IGIsIGM7CiAgfQoKICB2YXIgYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwKICAgICAgZCA9IGZ1bmN0aW9uIGQoKSB7fTsKCiAgYy5hZGRFdmVudExpc3RlbmVyID8gZCA9IGZ1bmN0aW9uIGQoYSwgYiwgYykgewogICAgYS5hZGRFdmVudExpc3RlbmVyKGIsIGMsICExKTsKICB9IDogYy5hdHRhY2hFdmVudCAmJiAoZCA9IGZ1bmN0aW9uIGQoYSwgYywgX2QyKSB7CiAgICBhW2MgKyBfZDJdID0gX2QyLmhhbmRsZUV2ZW50ID8gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYyA9IGIoYSk7CgogICAgICBfZDIuaGFuZGxlRXZlbnQuY2FsbChfZDIsIGMpOwogICAgfSA6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGMgPSBiKGEpOwoKICAgICAgX2QyLmNhbGwoYSwgYyk7CiAgICB9LCBhLmF0dGFjaEV2ZW50KCJvbiIgKyBjLCBhW2MgKyBfZDJdKTsKICB9KTsKCiAgdmFyIGUgPSBmdW5jdGlvbiBlKCkge307CgogIGMucmVtb3ZlRXZlbnRMaXN0ZW5lciA/IGUgPSBmdW5jdGlvbiBlKGEsIGIsIGMpIHsKICAgIGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLCBjLCAhMSk7CiAgfSA6IGMuZGV0YWNoRXZlbnQgJiYgKGUgPSBmdW5jdGlvbiBlKGEsIGIsIGMpIHsKICAgIGEuZGV0YWNoRXZlbnQoIm9uIiArIGIsIGFbYiArIGNdKTsKCiAgICB0cnkgewogICAgICBkZWxldGUgYVtiICsgY107CiAgICB9IGNhdGNoIChkKSB7CiAgICAgIGFbYiArIGNdID0gdm9pZCAwOwogICAgfQogIH0pOwogIHZhciBmID0gewogICAgYmluZDogZCwKICAgIHVuYmluZDogZQogIH07CiAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoImV2ZW50aWUvZXZlbnRpZSIsIGYpIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGYgOiBhLmV2ZW50aWUgPSBmOwp9KHdpbmRvdyksIGZ1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIGEoKSB7fQoKICBmdW5jdGlvbiBiKGEsIGIpIHsKICAgIGZvciAodmFyIGMgPSBhLmxlbmd0aDsgYy0tOykgewogICAgICBpZiAoYVtjXS5saXN0ZW5lciA9PT0gYikgcmV0dXJuIGM7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH0KCiAgZnVuY3Rpb24gYyhhKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpc1thXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9CgogIHZhciBkID0gYS5wcm90b3R5cGUsCiAgICAgIGUgPSB0aGlzLAogICAgICBmID0gZS5FdmVudEVtaXR0ZXI7CiAgZC5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIsCiAgICAgICAgYywKICAgICAgICBkID0gdGhpcy5fZ2V0RXZlbnRzKCk7CgogICAgaWYgKGEgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgICAgYiA9IHt9OwoKICAgICAgZm9yIChjIGluIGQpIHsKICAgICAgICBkLmhhc093blByb3BlcnR5KGMpICYmIGEudGVzdChjKSAmJiAoYltjXSA9IGRbY10pOwogICAgICB9CiAgICB9IGVsc2UgYiA9IGRbYV0gfHwgKGRbYV0gPSBbXSk7CgogICAgcmV0dXJuIGI7CiAgfSwgZC5mbGF0dGVuTGlzdGVuZXJzID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiLAogICAgICAgIGMgPSBbXTsKCiAgICBmb3IgKGIgPSAwOyBiIDwgYS5sZW5ndGg7IGIgKz0gMSkgewogICAgICBjLnB1c2goYVtiXS5saXN0ZW5lcik7CiAgICB9CgogICAgcmV0dXJuIGM7CiAgfSwgZC5nZXRMaXN0ZW5lcnNBc09iamVjdCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiwKICAgICAgICBjID0gdGhpcy5nZXRMaXN0ZW5lcnMoYSk7CiAgICByZXR1cm4gYyBpbnN0YW5jZW9mIEFycmF5ICYmIChiID0ge30sIGJbYV0gPSBjKSwgYiB8fCBjOwogIH0sIGQuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoYSwgYykgewogICAgdmFyIGQsCiAgICAgICAgZSA9IHRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoYSksCiAgICAgICAgZiA9ICJvYmplY3QiID09IF90eXBlb2YoYyk7CgogICAgZm9yIChkIGluIGUpIHsKICAgICAgZS5oYXNPd25Qcm9wZXJ0eShkKSAmJiAtMSA9PT0gYihlW2RdLCBjKSAmJiBlW2RdLnB1c2goZiA/IGMgOiB7CiAgICAgICAgbGlzdGVuZXI6IGMsCiAgICAgICAgb25jZTogITEKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwgZC5vbiA9IGMoImFkZExpc3RlbmVyIiksIGQuYWRkT25jZUxpc3RlbmVyID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiB0aGlzLmFkZExpc3RlbmVyKGEsIHsKICAgICAgbGlzdGVuZXI6IGIsCiAgICAgIG9uY2U6ICEwCiAgICB9KTsKICB9LCBkLm9uY2UgPSBjKCJhZGRPbmNlTGlzdGVuZXIiKSwgZC5kZWZpbmVFdmVudCA9IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gdGhpcy5nZXRMaXN0ZW5lcnMoYSksIHRoaXM7CiAgfSwgZC5kZWZpbmVFdmVudHMgPSBmdW5jdGlvbiAoYSkgewogICAgZm9yICh2YXIgYiA9IDA7IGIgPCBhLmxlbmd0aDsgYiArPSAxKSB7CiAgICAgIHRoaXMuZGVmaW5lRXZlbnQoYVtiXSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwgZC5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIChhLCBjKSB7CiAgICB2YXIgZCwKICAgICAgICBlLAogICAgICAgIGYgPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGEpOwoKICAgIGZvciAoZSBpbiBmKSB7CiAgICAgIGYuaGFzT3duUHJvcGVydHkoZSkgJiYgKGQgPSBiKGZbZV0sIGMpLCAtMSAhPT0gZCAmJiBmW2VdLnNwbGljZShkLCAxKSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwgZC5vZmYgPSBjKCJyZW1vdmVMaXN0ZW5lciIpLCBkLmFkZExpc3RlbmVycyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCExLCBhLCBiKTsKICB9LCBkLnJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLCBhLCBiKTsKICB9LCBkLm1hbmlwdWxhdGVMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgdmFyIGQsCiAgICAgICAgZSwKICAgICAgICBmID0gYSA/IHRoaXMucmVtb3ZlTGlzdGVuZXIgOiB0aGlzLmFkZExpc3RlbmVyLAogICAgICAgIGcgPSBhID8gdGhpcy5yZW1vdmVMaXN0ZW5lcnMgOiB0aGlzLmFkZExpc3RlbmVyczsKICAgIGlmICgib2JqZWN0IiAhPSBfdHlwZW9mKGIpIHx8IGIgaW5zdGFuY2VvZiBSZWdFeHApIGZvciAoZCA9IGMubGVuZ3RoOyBkLS07KSB7CiAgICAgIGYuY2FsbCh0aGlzLCBiLCBjW2RdKTsKICAgIH0gZWxzZSBmb3IgKGQgaW4gYikgewogICAgICBiLmhhc093blByb3BlcnR5KGQpICYmIChlID0gYltkXSkgJiYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyBmLmNhbGwodGhpcywgZCwgZSkgOiBnLmNhbGwodGhpcywgZCwgZSkpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfSwgZC5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiwKICAgICAgICBjID0gX3R5cGVvZihhKSwKICAgICAgICBkID0gdGhpcy5fZ2V0RXZlbnRzKCk7CgogICAgaWYgKCJzdHJpbmciID09PSBjKSBkZWxldGUgZFthXTtlbHNlIGlmIChhIGluc3RhbmNlb2YgUmVnRXhwKSBmb3IgKGIgaW4gZCkgewogICAgICBkLmhhc093blByb3BlcnR5KGIpICYmIGEudGVzdChiKSAmJiBkZWxldGUgZFtiXTsKICAgIH0gZWxzZSBkZWxldGUgdGhpcy5fZXZlbnRzOwogICAgcmV0dXJuIHRoaXM7CiAgfSwgZC5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBjKCJyZW1vdmVFdmVudCIpLCBkLmVtaXRFdmVudCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICB2YXIgYywKICAgICAgICBkLAogICAgICAgIGUsCiAgICAgICAgZiwKICAgICAgICBnID0gdGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChhKTsKCiAgICBmb3IgKGUgaW4gZykgewogICAgICBpZiAoZy5oYXNPd25Qcm9wZXJ0eShlKSkgZm9yIChkID0gZ1tlXS5sZW5ndGg7IGQtLTspIHsKICAgICAgICBjID0gZ1tlXVtkXSwgYy5vbmNlID09PSAhMCAmJiB0aGlzLnJlbW92ZUxpc3RlbmVyKGEsIGMubGlzdGVuZXIpLCBmID0gYy5saXN0ZW5lci5hcHBseSh0aGlzLCBiIHx8IFtdKSwgZiA9PT0gdGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkgJiYgdGhpcy5yZW1vdmVMaXN0ZW5lcihhLCBjLmxpc3RlbmVyKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0sIGQudHJpZ2dlciA9IGMoImVtaXRFdmVudCIpLCBkLmVtaXQgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgcmV0dXJuIHRoaXMuZW1pdEV2ZW50KGEsIGIpOwogIH0sIGQuc2V0T25jZVJldHVyblZhbHVlID0gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWUgPSBhLCB0aGlzOwogIH0sIGQuX2dldE9uY2VSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLmhhc093blByb3BlcnR5KCJfb25jZVJldHVyblZhbHVlIikgPyB0aGlzLl9vbmNlUmV0dXJuVmFsdWUgOiAhMDsKICB9LCBkLl9nZXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5fZXZlbnRzIHx8ICh0aGlzLl9ldmVudHMgPSB7fSk7CiAgfSwgYS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGUuRXZlbnRFbWl0dGVyID0gZiwgYTsKICB9LCAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsIFtdLCBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gYTsKICB9KSA6ICJvYmplY3QiID09ICh0eXBlb2YgbW9kdWxlID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihtb2R1bGUpKSAmJiBtb2R1bGUuZXhwb3J0cyA/IG1vZHVsZS5leHBvcnRzID0gYSA6IGUuRXZlbnRFbWl0dGVyID0gYTsKfS5jYWxsKHRoaXMpLCBmdW5jdGlvbiAoYSkgewogIGZ1bmN0aW9uIGIoYSkgewogICAgaWYgKGEpIHsKICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBkW2FdKSByZXR1cm4gYTsKICAgICAgYSA9IGEuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBhLnNsaWNlKDEpOwoKICAgICAgZm9yICh2YXIgYiwgZSA9IDAsIGYgPSBjLmxlbmd0aDsgZiA+IGU7IGUrKykgewogICAgICAgIGlmIChiID0gY1tlXSArIGEsICJzdHJpbmciID09IHR5cGVvZiBkW2JdKSByZXR1cm4gYjsKICAgICAgfQogICAgfQogIH0KCiAgdmFyIGMgPSAiV2Via2l0IE1veiBtcyBNcyBPIi5zcGxpdCgiICIpLAogICAgICBkID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlOwogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5IiwgW10sIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBiOwogIH0pIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGIgOiBhLmdldFN0eWxlUHJvcGVydHkgPSBiOwp9KHdpbmRvdyksIGZ1bmN0aW9uIChhLCBiKSB7CiAgZnVuY3Rpb24gYyhhKSB7CiAgICB2YXIgYiA9IHBhcnNlRmxvYXQoYSksCiAgICAgICAgYyA9IC0xID09PSBhLmluZGV4T2YoIiUiKSAmJiAhaXNOYU4oYik7CiAgICByZXR1cm4gYyAmJiBiOwogIH0KCiAgZnVuY3Rpb24gZCgpIHt9CgogIGZ1bmN0aW9uIGUoKSB7CiAgICBmb3IgKHZhciBhID0gewogICAgICB3aWR0aDogMCwKICAgICAgaGVpZ2h0OiAwLAogICAgICBpbm5lcldpZHRoOiAwLAogICAgICBpbm5lckhlaWdodDogMCwKICAgICAgb3V0ZXJXaWR0aDogMCwKICAgICAgb3V0ZXJIZWlnaHQ6IDAKICAgIH0sIGIgPSAwLCBjID0gaC5sZW5ndGg7IGMgPiBiOyBiKyspIHsKICAgICAgdmFyIGQgPSBoW2JdOwogICAgICBhW2RdID0gMDsKICAgIH0KCiAgICByZXR1cm4gYTsKICB9CgogIGZ1bmN0aW9uIGYoYikgewogICAgZnVuY3Rpb24gZCgpIHsKICAgICAgaWYgKCFtKSB7CiAgICAgICAgbSA9ICEwOwogICAgICAgIHZhciBkID0gYS5nZXRDb21wdXRlZFN0eWxlOwoKICAgICAgICBpZiAoaiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBhID0gZCA/IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIHJldHVybiBkKGEsIG51bGwpOwogICAgICAgICAgfSA6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIHJldHVybiBhLmN1cnJlbnRTdHlsZTsKICAgICAgICAgIH07CiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGIpIHsKICAgICAgICAgICAgdmFyIGMgPSBhKGIpOwogICAgICAgICAgICByZXR1cm4gYyB8fCBnKCJTdHlsZSByZXR1cm5lZCAiICsgYyArICIuIEFyZSB5b3UgcnVubmluZyB0aGlzIGNvZGUgaW4gYSBoaWRkZW4gaWZyYW1lIG9uIEZpcmVmb3g/IFNlZSBodHRwOi8vYml0Lmx5L2dldHNpemVidWcxIiksIGM7CiAgICAgICAgICB9OwogICAgICAgIH0oKSwgayA9IGIoImJveFNpemluZyIpKSB7CiAgICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICAgICAgZS5zdHlsZS53aWR0aCA9ICIyMDBweCIsIGUuc3R5bGUucGFkZGluZyA9ICIxcHggMnB4IDNweCA0cHgiLCBlLnN0eWxlLmJvcmRlclN0eWxlID0gInNvbGlkIiwgZS5zdHlsZS5ib3JkZXJXaWR0aCA9ICIxcHggMnB4IDNweCA0cHgiLCBlLnN0eWxlW2tdID0gImJvcmRlci1ib3giOwogICAgICAgICAgdmFyIGYgPSBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICAgIGYuYXBwZW5kQ2hpbGQoZSk7CiAgICAgICAgICB2YXIgaCA9IGooZSk7CiAgICAgICAgICBsID0gMjAwID09PSBjKGgud2lkdGgpLCBmLnJlbW92ZUNoaWxkKGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGYoYSkgewogICAgICBpZiAoZCgpLCAic3RyaW5nIiA9PSB0eXBlb2YgYSAmJiAoYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSkpLCBhICYmICJvYmplY3QiID09IF90eXBlb2YoYSkgJiYgYS5ub2RlVHlwZSkgewogICAgICAgIHZhciBiID0gaihhKTsKICAgICAgICBpZiAoIm5vbmUiID09PSBiLmRpc3BsYXkpIHJldHVybiBlKCk7CiAgICAgICAgdmFyIGYgPSB7fTsKICAgICAgICBmLndpZHRoID0gYS5vZmZzZXRXaWR0aCwgZi5oZWlnaHQgPSBhLm9mZnNldEhlaWdodDsKCiAgICAgICAgZm9yICh2YXIgZyA9IGYuaXNCb3JkZXJCb3ggPSAhKCFrIHx8ICFiW2tdIHx8ICJib3JkZXItYm94IiAhPT0gYltrXSksIG0gPSAwLCBuID0gaC5sZW5ndGg7IG4gPiBtOyBtKyspIHsKICAgICAgICAgIHZhciBvID0gaFttXSwKICAgICAgICAgICAgICBwID0gYltvXTsKICAgICAgICAgIHAgPSBpKGEsIHApOwogICAgICAgICAgdmFyIHEgPSBwYXJzZUZsb2F0KHApOwogICAgICAgICAgZltvXSA9IGlzTmFOKHEpID8gMCA6IHE7CiAgICAgICAgfQoKICAgICAgICB2YXIgciA9IGYucGFkZGluZ0xlZnQgKyBmLnBhZGRpbmdSaWdodCwKICAgICAgICAgICAgcyA9IGYucGFkZGluZ1RvcCArIGYucGFkZGluZ0JvdHRvbSwKICAgICAgICAgICAgdCA9IGYubWFyZ2luTGVmdCArIGYubWFyZ2luUmlnaHQsCiAgICAgICAgICAgIHUgPSBmLm1hcmdpblRvcCArIGYubWFyZ2luQm90dG9tLAogICAgICAgICAgICB2ID0gZi5ib3JkZXJMZWZ0V2lkdGggKyBmLmJvcmRlclJpZ2h0V2lkdGgsCiAgICAgICAgICAgIHcgPSBmLmJvcmRlclRvcFdpZHRoICsgZi5ib3JkZXJCb3R0b21XaWR0aCwKICAgICAgICAgICAgeCA9IGcgJiYgbCwKICAgICAgICAgICAgeSA9IGMoYi53aWR0aCk7CiAgICAgICAgeSAhPT0gITEgJiYgKGYud2lkdGggPSB5ICsgKHggPyAwIDogciArIHYpKTsKICAgICAgICB2YXIgeiA9IGMoYi5oZWlnaHQpOwogICAgICAgIHJldHVybiB6ICE9PSAhMSAmJiAoZi5oZWlnaHQgPSB6ICsgKHggPyAwIDogcyArIHcpKSwgZi5pbm5lcldpZHRoID0gZi53aWR0aCAtIChyICsgdiksIGYuaW5uZXJIZWlnaHQgPSBmLmhlaWdodCAtIChzICsgdyksIGYub3V0ZXJXaWR0aCA9IGYud2lkdGggKyB0LCBmLm91dGVySGVpZ2h0ID0gZi5oZWlnaHQgKyB1LCBmOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaShiLCBjKSB7CiAgICAgIGlmIChhLmdldENvbXB1dGVkU3R5bGUgfHwgLTEgPT09IGMuaW5kZXhPZigiJSIpKSByZXR1cm4gYzsKICAgICAgdmFyIGQgPSBiLnN0eWxlLAogICAgICAgICAgZSA9IGQubGVmdCwKICAgICAgICAgIGYgPSBiLnJ1bnRpbWVTdHlsZSwKICAgICAgICAgIGcgPSBmICYmIGYubGVmdDsKICAgICAgcmV0dXJuIGcgJiYgKGYubGVmdCA9IGIuY3VycmVudFN0eWxlLmxlZnQpLCBkLmxlZnQgPSBjLCBjID0gZC5waXhlbExlZnQsIGQubGVmdCA9IGUsIGcgJiYgKGYubGVmdCA9IGcpLCBjOwogICAgfQoKICAgIHZhciBqLAogICAgICAgIGssCiAgICAgICAgbCwKICAgICAgICBtID0gITE7CiAgICByZXR1cm4gZjsKICB9CgogIHZhciBnID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIGNvbnNvbGUgPyBkIDogZnVuY3Rpb24gKGEpIHsKICAgIGNvbnNvbGUuZXJyb3IoYSk7CiAgfSwKICAgICAgaCA9IFsicGFkZGluZ0xlZnQiLCAicGFkZGluZ1JpZ2h0IiwgInBhZGRpbmdUb3AiLCAicGFkZGluZ0JvdHRvbSIsICJtYXJnaW5MZWZ0IiwgIm1hcmdpblJpZ2h0IiwgIm1hcmdpblRvcCIsICJtYXJnaW5Cb3R0b20iLCAiYm9yZGVyTGVmdFdpZHRoIiwgImJvcmRlclJpZ2h0V2lkdGgiLCAiYm9yZGVyVG9wV2lkdGgiLCAiYm9yZGVyQm90dG9tV2lkdGgiXTsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgiZ2V0LXNpemUvZ2V0LXNpemUiLCBbImdldC1zdHlsZS1wcm9wZXJ0eS9nZXQtc3R5bGUtcHJvcGVydHkiXSwgZikgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gZihyZXF1aXJlKCJkZXNhbmRyby1nZXQtc3R5bGUtcHJvcGVydHkiKSkgOiBhLmdldFNpemUgPSBmKGEuZ2V0U3R5bGVQcm9wZXJ0eSk7Cn0od2luZG93KSwgZnVuY3Rpb24gKGEpIHsKICBmdW5jdGlvbiBiKGEpIHsKICAgICJmdW5jdGlvbiIgPT0gdHlwZW9mIGEgJiYgKGIuaXNSZWFkeSA/IGEoKSA6IGcucHVzaChhKSk7CiAgfQoKICBmdW5jdGlvbiBjKGEpIHsKICAgIHZhciBjID0gInJlYWR5c3RhdGVjaGFuZ2UiID09PSBhLnR5cGUgJiYgImNvbXBsZXRlIiAhPT0gZi5yZWFkeVN0YXRlOwogICAgYi5pc1JlYWR5IHx8IGMgfHwgZCgpOwogIH0KCiAgZnVuY3Rpb24gZCgpIHsKICAgIGIuaXNSZWFkeSA9ICEwOwoKICAgIGZvciAodmFyIGEgPSAwLCBjID0gZy5sZW5ndGg7IGMgPiBhOyBhKyspIHsKICAgICAgdmFyIGQgPSBnW2FdOwogICAgICBkKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBlKGUpIHsKICAgIHJldHVybiAiY29tcGxldGUiID09PSBmLnJlYWR5U3RhdGUgPyBkKCkgOiAoZS5iaW5kKGYsICJET01Db250ZW50TG9hZGVkIiwgYyksIGUuYmluZChmLCAicmVhZHlzdGF0ZWNoYW5nZSIsIGMpLCBlLmJpbmQoYSwgImxvYWQiLCBjKSksIGI7CiAgfQoKICB2YXIgZiA9IGEuZG9jdW1lbnQsCiAgICAgIGcgPSBbXTsKICBiLmlzUmVhZHkgPSAhMSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoImRvYy1yZWFkeS9kb2MtcmVhZHkiLCBbImV2ZW50aWUvZXZlbnRpZSJdLCBlKSA6ICJvYmplY3QiID09ICh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID8gbW9kdWxlLmV4cG9ydHMgPSBlKHJlcXVpcmUoImV2ZW50aWUiKSkgOiBhLmRvY1JlYWR5ID0gZShhLmV2ZW50aWUpOwp9KHdpbmRvdyksIGZ1bmN0aW9uIChhKSB7CiAgInVzZSBzdHJpY3QiOwoKICBmdW5jdGlvbiBiKGEsIGIpIHsKICAgIHJldHVybiBhW2ddKGIpOwogIH0KCiAgZnVuY3Rpb24gYyhhKSB7CiAgICBpZiAoIWEucGFyZW50Tm9kZSkgewogICAgICB2YXIgYiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKICAgICAgYi5hcHBlbmRDaGlsZChhKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGQoYSwgYikgewogICAgYyhhKTsKCiAgICBmb3IgKHZhciBkID0gYS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoYiksIGUgPSAwLCBmID0gZC5sZW5ndGg7IGYgPiBlOyBlKyspIHsKICAgICAgaWYgKGRbZV0gPT09IGEpIHJldHVybiAhMDsKICAgIH0KCiAgICByZXR1cm4gITE7CiAgfQoKICBmdW5jdGlvbiBlKGEsIGQpIHsKICAgIHJldHVybiBjKGEpLCBiKGEsIGQpOwogIH0KCiAgdmFyIGYsCiAgICAgIGcgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoYS5tYXRjaGVzKSByZXR1cm4gIm1hdGNoZXMiOwogICAgaWYgKGEubWF0Y2hlc1NlbGVjdG9yKSByZXR1cm4gIm1hdGNoZXNTZWxlY3RvciI7CgogICAgZm9yICh2YXIgYiA9IFsid2Via2l0IiwgIm1veiIsICJtcyIsICJvIl0sIGMgPSAwLCBkID0gYi5sZW5ndGg7IGQgPiBjOyBjKyspIHsKICAgICAgdmFyIGUgPSBiW2NdLAogICAgICAgICAgZiA9IGUgKyAiTWF0Y2hlc1NlbGVjdG9yIjsKICAgICAgaWYgKGFbZl0pIHJldHVybiBmOwogICAgfQogIH0oKTsKCiAgaWYgKGcpIHsKICAgIHZhciBoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksCiAgICAgICAgaSA9IGIoaCwgImRpdiIpOwogICAgZiA9IGkgPyBiIDogZTsKICB9IGVsc2UgZiA9IGQ7CgogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3IiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGY7CiAgfSkgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gZiA6IHdpbmRvdy5tYXRjaGVzU2VsZWN0b3IgPSBmOwp9KEVsZW1lbnQucHJvdG90eXBlKSwgZnVuY3Rpb24gKGEsIGIpIHsKICAidXNlIHN0cmljdCI7CgogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCJmaXp6eS11aS11dGlscy91dGlscyIsIFsiZG9jLXJlYWR5L2RvYy1yZWFkeSIsICJtYXRjaGVzLXNlbGVjdG9yL21hdGNoZXMtc2VsZWN0b3IiXSwgZnVuY3Rpb24gKGMsIGQpIHsKICAgIHJldHVybiBiKGEsIGMsIGQpOwogIH0pIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGIoYSwgcmVxdWlyZSgiZG9jLXJlYWR5IiksIHJlcXVpcmUoImRlc2FuZHJvLW1hdGNoZXMtc2VsZWN0b3IiKSkgOiBhLmZpenp5VUlVdGlscyA9IGIoYSwgYS5kb2NSZWFkeSwgYS5tYXRjaGVzU2VsZWN0b3IpOwp9KHdpbmRvdywgZnVuY3Rpb24gKGEsIGIsIGMpIHsKICB2YXIgZCA9IHt9OwogIGQuZXh0ZW5kID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGZvciAodmFyIGMgaW4gYikgewogICAgICBhW2NdID0gYltjXTsKICAgIH0KCiAgICByZXR1cm4gYTsKICB9LCBkLm1vZHVsbyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gKGEgJSBiICsgYikgJSBiOwogIH07CiAgdmFyIGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwogIGQuaXNBcnJheSA9IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gIltvYmplY3QgQXJyYXldIiA9PSBlLmNhbGwoYSk7CiAgfSwgZC5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSBbXTsKICAgIGlmIChkLmlzQXJyYXkoYSkpIGIgPSBhO2Vsc2UgaWYgKGEgJiYgIm51bWJlciIgPT0gdHlwZW9mIGEubGVuZ3RoKSBmb3IgKHZhciBjID0gMCwgZSA9IGEubGVuZ3RoOyBlID4gYzsgYysrKSB7CiAgICAgIGIucHVzaChhW2NdKTsKICAgIH0gZWxzZSBiLnB1c2goYSk7CiAgICByZXR1cm4gYjsKICB9LCBkLmluZGV4T2YgPSBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA/IGZ1bmN0aW9uIChhLCBiKSB7CiAgICByZXR1cm4gYS5pbmRleE9mKGIpOwogIH0gOiBmdW5jdGlvbiAoYSwgYikgewogICAgZm9yICh2YXIgYyA9IDAsIGQgPSBhLmxlbmd0aDsgZCA+IGM7IGMrKykgewogICAgICBpZiAoYVtjXSA9PT0gYikgcmV0dXJuIGM7CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH0sIGQucmVtb3ZlRnJvbSA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICB2YXIgYyA9IGQuaW5kZXhPZihhLCBiKTsKICAgIC0xICE9IGMgJiYgYS5zcGxpY2UoYywgMSk7CiAgfSwgZC5pc0VsZW1lbnQgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBIVE1MRWxlbWVudCB8fCAib2JqZWN0IiA9PSAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihIVE1MRWxlbWVudCkpID8gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiBhIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7CiAgfSA6IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gYSAmJiAib2JqZWN0IiA9PSBfdHlwZW9mKGEpICYmIDEgPT0gYS5ub2RlVHlwZSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgYS5ub2RlTmFtZTsKICB9LCBkLnNldFRleHQgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBhKGEsIGMpIHsKICAgICAgYiA9IGIgfHwgKHZvaWQgMCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnRleHRDb250ZW50ID8gInRleHRDb250ZW50IiA6ICJpbm5lclRleHQiKSwgYVtiXSA9IGM7CiAgICB9CgogICAgdmFyIGI7CiAgICByZXR1cm4gYTsKICB9KCksIGQuZ2V0UGFyZW50ID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGZvciAoOyBhICE9IGRvY3VtZW50LmJvZHk7KSB7CiAgICAgIGlmIChhID0gYS5wYXJlbnROb2RlLCBjKGEsIGIpKSByZXR1cm4gYTsKICAgIH0KICB9LCBkLmdldFF1ZXJ5RWxlbWVudCA9IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gInN0cmluZyIgPT0gdHlwZW9mIGEgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGEpIDogYTsKICB9LCBkLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gIm9uIiArIGEudHlwZTsKICAgIHRoaXNbYl0gJiYgdGhpc1tiXShhKTsKICB9LCBkLmZpbHRlckZpbmRFbGVtZW50cyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICBhID0gZC5tYWtlQXJyYXkoYSk7CgogICAgZm9yICh2YXIgZSA9IFtdLCBmID0gMCwgZyA9IGEubGVuZ3RoOyBnID4gZjsgZisrKSB7CiAgICAgIHZhciBoID0gYVtmXTsKICAgICAgaWYgKGQuaXNFbGVtZW50KGgpKSBpZiAoYikgewogICAgICAgIGMoaCwgYikgJiYgZS5wdXNoKGgpOwoKICAgICAgICBmb3IgKHZhciBpID0gaC5xdWVyeVNlbGVjdG9yQWxsKGIpLCBqID0gMCwgayA9IGkubGVuZ3RoOyBrID4gajsgaisrKSB7CiAgICAgICAgICBlLnB1c2goaVtqXSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgZS5wdXNoKGgpOwogICAgfQoKICAgIHJldHVybiBlOwogIH0sIGQuZGVib3VuY2VNZXRob2QgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgdmFyIGQgPSBhLnByb3RvdHlwZVtiXSwKICAgICAgICBlID0gYiArICJUaW1lb3V0IjsKCiAgICBhLnByb3RvdHlwZVtiXSA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGEgPSB0aGlzW2VdOwogICAgICBhICYmIGNsZWFyVGltZW91dChhKTsKICAgICAgdmFyIGIgPSBhcmd1bWVudHMsCiAgICAgICAgICBmID0gdGhpczsKICAgICAgdGhpc1tlXSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGQuYXBwbHkoZiwgYiksIGRlbGV0ZSBmW2VdOwogICAgICB9LCBjIHx8IDEwMCk7CiAgICB9OwogIH0sIGQudG9EYXNoZWQgPSBmdW5jdGlvbiAoYSkgewogICAgcmV0dXJuIGEucmVwbGFjZSgvKC4pKFtBLVpdKS9nLCBmdW5jdGlvbiAoYSwgYiwgYykgewogICAgICByZXR1cm4gYiArICItIiArIGM7CiAgICB9KS50b0xvd2VyQ2FzZSgpOwogIH07CiAgdmFyIGYgPSBhLmNvbnNvbGU7CiAgcmV0dXJuIGQuaHRtbEluaXQgPSBmdW5jdGlvbiAoYywgZSkgewogICAgYihmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIGIgPSBkLnRvRGFzaGVkKGUpLCBnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmpzLSIgKyBiKSwgaCA9ICJkYXRhLSIgKyBiICsgIi1vcHRpb25zIiwgaSA9IDAsIGogPSBnLmxlbmd0aDsgaiA+IGk7IGkrKykgewogICAgICAgIHZhciBrLAogICAgICAgICAgICBsID0gZ1tpXSwKICAgICAgICAgICAgbSA9IGwuZ2V0QXR0cmlidXRlKGgpOwoKICAgICAgICB0cnkgewogICAgICAgICAgayA9IG0gJiYgSlNPTi5wYXJzZShtKTsKICAgICAgICB9IGNhdGNoIChuKSB7CiAgICAgICAgICBmICYmIGYuZXJyb3IoIkVycm9yIHBhcnNpbmcgIiArIGggKyAiIG9uICIgKyBsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgKyAobC5pZCA/ICIjIiArIGwuaWQgOiAiIikgKyAiOiAiICsgbik7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIHZhciBvID0gbmV3IGMobCwgayksCiAgICAgICAgICAgIHAgPSBhLmpRdWVyeTsKICAgICAgICBwICYmIHAuZGF0YShsLCBlLCBvKTsKICAgICAgfQogICAgfSk7CiAgfSwgZDsKfSksIGZ1bmN0aW9uIChhLCBiKSB7CiAgInVzZSBzdHJpY3QiOwoKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgib3V0bGF5ZXIvaXRlbSIsIFsiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsICJnZXQtc2l6ZS9nZXQtc2l6ZSIsICJnZXQtc3R5bGUtcHJvcGVydHkvZ2V0LXN0eWxlLXByb3BlcnR5IiwgImZpenp5LXVpLXV0aWxzL3V0aWxzIl0sIGZ1bmN0aW9uIChjLCBkLCBlLCBmKSB7CiAgICByZXR1cm4gYihhLCBjLCBkLCBlLCBmKTsKICB9KSA6ICJvYmplY3QiID09ICh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID8gbW9kdWxlLmV4cG9ydHMgPSBiKGEsIHJlcXVpcmUoIndvbGZ5ODctZXZlbnRlbWl0dGVyIiksIHJlcXVpcmUoImdldC1zaXplIiksIHJlcXVpcmUoImRlc2FuZHJvLWdldC1zdHlsZS1wcm9wZXJ0eSIpLCByZXF1aXJlKCJmaXp6eS11aS11dGlscyIpKSA6IChhLk91dGxheWVyID0ge30sIGEuT3V0bGF5ZXIuSXRlbSA9IGIoYSwgYS5FdmVudEVtaXR0ZXIsIGEuZ2V0U2l6ZSwgYS5nZXRTdHlsZVByb3BlcnR5LCBhLmZpenp5VUlVdGlscykpOwp9KHdpbmRvdywgZnVuY3Rpb24gKGEsIGIsIGMsIGQsIGUpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIGYoYSkgewogICAgZm9yICh2YXIgYiBpbiBhKSB7CiAgICAgIHJldHVybiAhMTsKICAgIH0KCiAgICByZXR1cm4gYiA9IG51bGwsICEwOwogIH0KCiAgZnVuY3Rpb24gZyhhLCBiKSB7CiAgICBhICYmICh0aGlzLmVsZW1lbnQgPSBhLCB0aGlzLmxheW91dCA9IGIsIHRoaXMucG9zaXRpb24gPSB7CiAgICAgIHg6IDAsCiAgICAgIHk6IDAKICAgIH0sIHRoaXMuX2NyZWF0ZSgpKTsKICB9CgogIGZ1bmN0aW9uIGgoYSkgewogICAgcmV0dXJuIGEucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoYSkgewogICAgICByZXR1cm4gIi0iICsgYS50b0xvd2VyQ2FzZSgpOwogICAgfSk7CiAgfQoKICB2YXIgaSA9IGEuZ2V0Q29tcHV0ZWRTdHlsZSwKICAgICAgaiA9IGkgPyBmdW5jdGlvbiAoYSkgewogICAgcmV0dXJuIGkoYSwgbnVsbCk7CiAgfSA6IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gYS5jdXJyZW50U3R5bGU7CiAgfSwKICAgICAgayA9IGQoInRyYW5zaXRpb24iKSwKICAgICAgbCA9IGQoInRyYW5zZm9ybSIpLAogICAgICBtID0gayAmJiBsLAogICAgICBuID0gISFkKCJwZXJzcGVjdGl2ZSIpLAogICAgICBvID0gewogICAgV2Via2l0VHJhbnNpdGlvbjogIndlYmtpdFRyYW5zaXRpb25FbmQiLAogICAgTW96VHJhbnNpdGlvbjogInRyYW5zaXRpb25lbmQiLAogICAgT1RyYW5zaXRpb246ICJvdHJhbnNpdGlvbmVuZCIsCiAgICB0cmFuc2l0aW9uOiAidHJhbnNpdGlvbmVuZCIKICB9W2tdLAogICAgICBwID0gWyJ0cmFuc2Zvcm0iLCAidHJhbnNpdGlvbiIsICJ0cmFuc2l0aW9uRHVyYXRpb24iLCAidHJhbnNpdGlvblByb3BlcnR5Il0sCiAgICAgIHEgPSBmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciBhID0ge30sIGIgPSAwLCBjID0gcC5sZW5ndGg7IGMgPiBiOyBiKyspIHsKICAgICAgdmFyIGUgPSBwW2JdLAogICAgICAgICAgZiA9IGQoZSk7CiAgICAgIGYgJiYgZiAhPT0gZSAmJiAoYVtlXSA9IGYpOwogICAgfQoKICAgIHJldHVybiBhOwogIH0oKTsKCiAgZS5leHRlbmQoZy5wcm90b3R5cGUsIGIucHJvdG90eXBlKSwgZy5wcm90b3R5cGUuX2NyZWF0ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuX3RyYW5zbiA9IHsKICAgICAgaW5nUHJvcGVydGllczoge30sCiAgICAgIGNsZWFuOiB7fSwKICAgICAgb25FbmQ6IHt9CiAgICB9LCB0aGlzLmNzcyh7CiAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiCiAgICB9KTsKICB9LCBnLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9ICJvbiIgKyBhLnR5cGU7CiAgICB0aGlzW2JdICYmIHRoaXNbYl0oYSk7CiAgfSwgZy5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2l6ZSA9IGModGhpcy5lbGVtZW50KTsKICB9LCBnLnByb3RvdHlwZS5jc3MgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSB0aGlzLmVsZW1lbnQuc3R5bGU7CgogICAgZm9yICh2YXIgYyBpbiBhKSB7CiAgICAgIHZhciBkID0gcVtjXSB8fCBjOwogICAgICBiW2RdID0gYVtjXTsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gaih0aGlzLmVsZW1lbnQpLAogICAgICAgIGIgPSB0aGlzLmxheW91dC5vcHRpb25zLAogICAgICAgIGMgPSBiLmlzT3JpZ2luTGVmdCwKICAgICAgICBkID0gYi5pc09yaWdpblRvcCwKICAgICAgICBlID0gYVtjID8gImxlZnQiIDogInJpZ2h0Il0sCiAgICAgICAgZiA9IGFbZCA/ICJ0b3AiIDogImJvdHRvbSJdLAogICAgICAgIGcgPSBwYXJzZUludChlLCAxMCksCiAgICAgICAgaCA9IHBhcnNlSW50KGYsIDEwKSwKICAgICAgICBpID0gdGhpcy5sYXlvdXQuc2l6ZTsKICAgIGcgPSAtMSAhPSBlLmluZGV4T2YoIiUiKSA/IGcgLyAxMDAgKiBpLndpZHRoIDogZywgaCA9IC0xICE9IGYuaW5kZXhPZigiJSIpID8gaCAvIDEwMCAqIGkuaGVpZ2h0IDogaCwgZyA9IGlzTmFOKGcpID8gMCA6IGcsIGggPSBpc05hTihoKSA/IDAgOiBoLCBnIC09IGMgPyBpLnBhZGRpbmdMZWZ0IDogaS5wYWRkaW5nUmlnaHQsIGggLT0gZCA/IGkucGFkZGluZ1RvcCA6IGkucGFkZGluZ0JvdHRvbSwgdGhpcy5wb3NpdGlvbi54ID0gZywgdGhpcy5wb3NpdGlvbi55ID0gaDsKICB9LCBnLnByb3RvdHlwZS5sYXlvdXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdGhpcy5sYXlvdXQuc2l6ZSwKICAgICAgICBiID0gdGhpcy5sYXlvdXQub3B0aW9ucywKICAgICAgICBjID0ge30sCiAgICAgICAgZCA9IGIuaXNPcmlnaW5MZWZ0ID8gInBhZGRpbmdMZWZ0IiA6ICJwYWRkaW5nUmlnaHQiLAogICAgICAgIGUgPSBiLmlzT3JpZ2luTGVmdCA/ICJsZWZ0IiA6ICJyaWdodCIsCiAgICAgICAgZiA9IGIuaXNPcmlnaW5MZWZ0ID8gInJpZ2h0IiA6ICJsZWZ0IiwKICAgICAgICBnID0gdGhpcy5wb3NpdGlvbi54ICsgYVtkXTsKICAgIGNbZV0gPSB0aGlzLmdldFhWYWx1ZShnKSwgY1tmXSA9ICIiOwogICAgdmFyIGggPSBiLmlzT3JpZ2luVG9wID8gInBhZGRpbmdUb3AiIDogInBhZGRpbmdCb3R0b20iLAogICAgICAgIGkgPSBiLmlzT3JpZ2luVG9wID8gInRvcCIgOiAiYm90dG9tIiwKICAgICAgICBqID0gYi5pc09yaWdpblRvcCA/ICJib3R0b20iIDogInRvcCIsCiAgICAgICAgayA9IHRoaXMucG9zaXRpb24ueSArIGFbaF07CiAgICBjW2ldID0gdGhpcy5nZXRZVmFsdWUoayksIGNbal0gPSAiIiwgdGhpcy5jc3MoYyksIHRoaXMuZW1pdEV2ZW50KCJsYXlvdXQiLCBbdGhpc10pOwogIH0sIGcucHJvdG90eXBlLmdldFhWYWx1ZSA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMubGF5b3V0Lm9wdGlvbnM7CiAgICByZXR1cm4gYi5wZXJjZW50UG9zaXRpb24gJiYgIWIuaXNIb3Jpem9udGFsID8gYSAvIHRoaXMubGF5b3V0LnNpemUud2lkdGggKiAxMDAgKyAiJSIgOiBhICsgInB4IjsKICB9LCBnLnByb3RvdHlwZS5nZXRZVmFsdWUgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSB0aGlzLmxheW91dC5vcHRpb25zOwogICAgcmV0dXJuIGIucGVyY2VudFBvc2l0aW9uICYmIGIuaXNIb3Jpem9udGFsID8gYSAvIHRoaXMubGF5b3V0LnNpemUuaGVpZ2h0ICogMTAwICsgIiUiIDogYSArICJweCI7CiAgfSwgZy5wcm90b3R5cGUuX3RyYW5zaXRpb25UbyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICB0aGlzLmdldFBvc2l0aW9uKCk7CiAgICB2YXIgYyA9IHRoaXMucG9zaXRpb24ueCwKICAgICAgICBkID0gdGhpcy5wb3NpdGlvbi55LAogICAgICAgIGUgPSBwYXJzZUludChhLCAxMCksCiAgICAgICAgZiA9IHBhcnNlSW50KGIsIDEwKSwKICAgICAgICBnID0gZSA9PT0gdGhpcy5wb3NpdGlvbi54ICYmIGYgPT09IHRoaXMucG9zaXRpb24ueTsKICAgIGlmICh0aGlzLnNldFBvc2l0aW9uKGEsIGIpLCBnICYmICF0aGlzLmlzVHJhbnNpdGlvbmluZykgcmV0dXJuIHZvaWQgdGhpcy5sYXlvdXRQb3NpdGlvbigpOwogICAgdmFyIGggPSBhIC0gYywKICAgICAgICBpID0gYiAtIGQsCiAgICAgICAgaiA9IHt9OwogICAgai50cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zbGF0ZShoLCBpKSwgdGhpcy50cmFuc2l0aW9uKHsKICAgICAgdG86IGosCiAgICAgIG9uVHJhbnNpdGlvbkVuZDogewogICAgICAgIHRyYW5zZm9ybTogdGhpcy5sYXlvdXRQb3NpdGlvbgogICAgICB9LAogICAgICBpc0NsZWFuaW5nOiAhMAogICAgfSk7CiAgfSwgZy5wcm90b3R5cGUuZ2V0VHJhbnNsYXRlID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIHZhciBjID0gdGhpcy5sYXlvdXQub3B0aW9uczsKICAgIHJldHVybiBhID0gYy5pc09yaWdpbkxlZnQgPyBhIDogLWEsIGIgPSBjLmlzT3JpZ2luVG9wID8gYiA6IC1iLCBhID0gdGhpcy5nZXRYVmFsdWUoYSksIGIgPSB0aGlzLmdldFlWYWx1ZShiKSwgbiA/ICJ0cmFuc2xhdGUzZCgiICsgYSArICIsICIgKyBiICsgIiwgMCkiIDogInRyYW5zbGF0ZSgiICsgYSArICIsICIgKyBiICsgIikiOwogIH0sIGcucHJvdG90eXBlLmdvVG8gPSBmdW5jdGlvbiAoYSwgYikgewogICAgdGhpcy5zZXRQb3NpdGlvbihhLCBiKSwgdGhpcy5sYXlvdXRQb3NpdGlvbigpOwogIH0sIGcucHJvdG90eXBlLm1vdmVUbyA9IG0gPyBnLnByb3RvdHlwZS5fdHJhbnNpdGlvblRvIDogZy5wcm90b3R5cGUuZ29UbywgZy5wcm90b3R5cGUuc2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoYSwgYikgewogICAgdGhpcy5wb3NpdGlvbi54ID0gcGFyc2VJbnQoYSwgMTApLCB0aGlzLnBvc2l0aW9uLnkgPSBwYXJzZUludChiLCAxMCk7CiAgfSwgZy5wcm90b3R5cGUuX25vblRyYW5zaXRpb24gPSBmdW5jdGlvbiAoYSkgewogICAgdGhpcy5jc3MoYS50byksIGEuaXNDbGVhbmluZyAmJiB0aGlzLl9yZW1vdmVTdHlsZXMoYS50byk7CgogICAgZm9yICh2YXIgYiBpbiBhLm9uVHJhbnNpdGlvbkVuZCkgewogICAgICBhLm9uVHJhbnNpdGlvbkVuZFtiXS5jYWxsKHRoaXMpOwogICAgfQogIH0sIGcucHJvdG90eXBlLl90cmFuc2l0aW9uID0gZnVuY3Rpb24gKGEpIHsKICAgIGlmICghcGFyc2VGbG9hdCh0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbikpIHJldHVybiB2b2lkIHRoaXMuX25vblRyYW5zaXRpb24oYSk7CiAgICB2YXIgYiA9IHRoaXMuX3RyYW5zbjsKCiAgICBmb3IgKHZhciBjIGluIGEub25UcmFuc2l0aW9uRW5kKSB7CiAgICAgIGIub25FbmRbY10gPSBhLm9uVHJhbnNpdGlvbkVuZFtjXTsKICAgIH0KCiAgICBmb3IgKGMgaW4gYS50bykgewogICAgICBiLmluZ1Byb3BlcnRpZXNbY10gPSAhMCwgYS5pc0NsZWFuaW5nICYmIChiLmNsZWFuW2NdID0gITApOwogICAgfQoKICAgIGlmIChhLmZyb20pIHsKICAgICAgdGhpcy5jc3MoYS5mcm9tKTsKICAgICAgdmFyIGQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICBkID0gbnVsbDsKICAgIH0KCiAgICB0aGlzLmVuYWJsZVRyYW5zaXRpb24oYS50byksIHRoaXMuY3NzKGEudG8pLCB0aGlzLmlzVHJhbnNpdGlvbmluZyA9ICEwOwogIH07CiAgdmFyIHIgPSAib3BhY2l0eSwiICsgaChxLnRyYW5zZm9ybSB8fCAidHJhbnNmb3JtIik7CiAgZy5wcm90b3R5cGUuZW5hYmxlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaXNUcmFuc2l0aW9uaW5nIHx8ICh0aGlzLmNzcyh7CiAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogciwKICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiB0aGlzLmxheW91dC5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbgogICAgfSksIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKG8sIHRoaXMsICExKSk7CiAgfSwgZy5wcm90b3R5cGUudHJhbnNpdGlvbiA9IGcucHJvdG90eXBlW2sgPyAiX3RyYW5zaXRpb24iIDogIl9ub25UcmFuc2l0aW9uIl0sIGcucHJvdG90eXBlLm9ud2Via2l0VHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uIChhKSB7CiAgICB0aGlzLm9udHJhbnNpdGlvbmVuZChhKTsKICB9LCBnLnByb3RvdHlwZS5vbm90cmFuc2l0aW9uZW5kID0gZnVuY3Rpb24gKGEpIHsKICAgIHRoaXMub250cmFuc2l0aW9uZW5kKGEpOwogIH07CiAgdmFyIHMgPSB7CiAgICAiLXdlYmtpdC10cmFuc2Zvcm0iOiAidHJhbnNmb3JtIiwKICAgICItbW96LXRyYW5zZm9ybSI6ICJ0cmFuc2Zvcm0iLAogICAgIi1vLXRyYW5zZm9ybSI6ICJ0cmFuc2Zvcm0iCiAgfTsKICBnLnByb3RvdHlwZS5vbnRyYW5zaXRpb25lbmQgPSBmdW5jdGlvbiAoYSkgewogICAgaWYgKGEudGFyZ2V0ID09PSB0aGlzLmVsZW1lbnQpIHsKICAgICAgdmFyIGIgPSB0aGlzLl90cmFuc24sCiAgICAgICAgICBjID0gc1thLnByb3BlcnR5TmFtZV0gfHwgYS5wcm9wZXJ0eU5hbWU7CgogICAgICBpZiAoZGVsZXRlIGIuaW5nUHJvcGVydGllc1tjXSwgZihiLmluZ1Byb3BlcnRpZXMpICYmIHRoaXMuZGlzYWJsZVRyYW5zaXRpb24oKSwgYyBpbiBiLmNsZWFuICYmICh0aGlzLmVsZW1lbnQuc3R5bGVbYS5wcm9wZXJ0eU5hbWVdID0gIiIsIGRlbGV0ZSBiLmNsZWFuW2NdKSwgYyBpbiBiLm9uRW5kKSB7CiAgICAgICAgdmFyIGQgPSBiLm9uRW5kW2NdOwogICAgICAgIGQuY2FsbCh0aGlzKSwgZGVsZXRlIGIub25FbmRbY107CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdEV2ZW50KCJ0cmFuc2l0aW9uRW5kIiwgW3RoaXNdKTsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5kaXNhYmxlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMucmVtb3ZlVHJhbnNpdGlvblN0eWxlcygpLCB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihvLCB0aGlzLCAhMSksIHRoaXMuaXNUcmFuc2l0aW9uaW5nID0gITE7CiAgfSwgZy5wcm90b3R5cGUuX3JlbW92ZVN0eWxlcyA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHt9OwoKICAgIGZvciAodmFyIGMgaW4gYSkgewogICAgICBiW2NdID0gIiI7CiAgICB9CgogICAgdGhpcy5jc3MoYik7CiAgfTsKICB2YXIgdCA9IHsKICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogIiIsCiAgICB0cmFuc2l0aW9uRHVyYXRpb246ICIiCiAgfTsKICByZXR1cm4gZy5wcm90b3R5cGUucmVtb3ZlVHJhbnNpdGlvblN0eWxlcyA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY3NzKHQpOwogIH0sIGcucHJvdG90eXBlLnJlbW92ZUVsZW0gPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpLCB0aGlzLmNzcyh7CiAgICAgIGRpc3BsYXk6ICIiCiAgICB9KSwgdGhpcy5lbWl0RXZlbnQoInJlbW92ZSIsIFt0aGlzXSk7CiAgfSwgZy5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKCkgewogICAgaWYgKCFrIHx8ICFwYXJzZUZsb2F0KHRoaXMubGF5b3V0Lm9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uKSkgcmV0dXJuIHZvaWQgdGhpcy5yZW1vdmVFbGVtKCk7CiAgICB2YXIgYSA9IHRoaXM7CiAgICB0aGlzLm9uY2UoInRyYW5zaXRpb25FbmQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGEucmVtb3ZlRWxlbSgpOwogICAgfSksIHRoaXMuaGlkZSgpOwogIH0sIGcucHJvdG90eXBlLnJldmVhbCA9IGZ1bmN0aW9uICgpIHsKICAgIGRlbGV0ZSB0aGlzLmlzSGlkZGVuLCB0aGlzLmNzcyh7CiAgICAgIGRpc3BsYXk6ICIiCiAgICB9KTsKICAgIHZhciBhID0gdGhpcy5sYXlvdXQub3B0aW9ucywKICAgICAgICBiID0ge30sCiAgICAgICAgYyA9IHRoaXMuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSgidmlzaWJsZVN0eWxlIik7CiAgICBiW2NdID0gdGhpcy5vblJldmVhbFRyYW5zaXRpb25FbmQsIHRoaXMudHJhbnNpdGlvbih7CiAgICAgIGZyb206IGEuaGlkZGVuU3R5bGUsCiAgICAgIHRvOiBhLnZpc2libGVTdHlsZSwKICAgICAgaXNDbGVhbmluZzogITAsCiAgICAgIG9uVHJhbnNpdGlvbkVuZDogYgogICAgfSk7CiAgfSwgZy5wcm90b3R5cGUub25SZXZlYWxUcmFuc2l0aW9uRW5kID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5pc0hpZGRlbiB8fCB0aGlzLmVtaXRFdmVudCgicmV2ZWFsIik7CiAgfSwgZy5wcm90b3R5cGUuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMubGF5b3V0Lm9wdGlvbnNbYV07CiAgICBpZiAoYi5vcGFjaXR5KSByZXR1cm4gIm9wYWNpdHkiOwoKICAgIGZvciAodmFyIGMgaW4gYikgewogICAgICByZXR1cm4gYzsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5pc0hpZGRlbiA9ICEwLCB0aGlzLmNzcyh7CiAgICAgIGRpc3BsYXk6ICIiCiAgICB9KTsKICAgIHZhciBhID0gdGhpcy5sYXlvdXQub3B0aW9ucywKICAgICAgICBiID0ge30sCiAgICAgICAgYyA9IHRoaXMuZ2V0SGlkZVJldmVhbFRyYW5zaXRpb25FbmRQcm9wZXJ0eSgiaGlkZGVuU3R5bGUiKTsKICAgIGJbY10gPSB0aGlzLm9uSGlkZVRyYW5zaXRpb25FbmQsIHRoaXMudHJhbnNpdGlvbih7CiAgICAgIGZyb206IGEudmlzaWJsZVN0eWxlLAogICAgICB0bzogYS5oaWRkZW5TdHlsZSwKICAgICAgaXNDbGVhbmluZzogITAsCiAgICAgIG9uVHJhbnNpdGlvbkVuZDogYgogICAgfSk7CiAgfSwgZy5wcm90b3R5cGUub25IaWRlVHJhbnNpdGlvbkVuZCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaXNIaWRkZW4gJiYgKHRoaXMuY3NzKHsKICAgICAgZGlzcGxheTogIm5vbmUiCiAgICB9KSwgdGhpcy5lbWl0RXZlbnQoImhpZGUiKSk7CiAgfSwgZy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY3NzKHsKICAgICAgcG9zaXRpb246ICIiLAogICAgICBsZWZ0OiAiIiwKICAgICAgcmlnaHQ6ICIiLAogICAgICB0b3A6ICIiLAogICAgICBib3R0b206ICIiLAogICAgICB0cmFuc2l0aW9uOiAiIiwKICAgICAgdHJhbnNmb3JtOiAiIgogICAgfSk7CiAgfSwgZzsKfSksIGZ1bmN0aW9uIChhLCBiKSB7CiAgInVzZSBzdHJpY3QiOwoKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgib3V0bGF5ZXIvb3V0bGF5ZXIiLCBbImV2ZW50aWUvZXZlbnRpZSIsICJldmVudEVtaXR0ZXIvRXZlbnRFbWl0dGVyIiwgImdldC1zaXplL2dldC1zaXplIiwgImZpenp5LXVpLXV0aWxzL3V0aWxzIiwgIi4vaXRlbSJdLCBmdW5jdGlvbiAoYywgZCwgZSwgZiwgZykgewogICAgcmV0dXJuIGIoYSwgYywgZCwgZSwgZiwgZyk7CiAgfSkgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gYihhLCByZXF1aXJlKCJldmVudGllIiksIHJlcXVpcmUoIndvbGZ5ODctZXZlbnRlbWl0dGVyIiksIHJlcXVpcmUoImdldC1zaXplIiksIHJlcXVpcmUoImZpenp5LXVpLXV0aWxzIiksIHJlcXVpcmUoIi4vaXRlbSIpKSA6IGEuT3V0bGF5ZXIgPSBiKGEsIGEuZXZlbnRpZSwgYS5FdmVudEVtaXR0ZXIsIGEuZ2V0U2l6ZSwgYS5maXp6eVVJVXRpbHMsIGEuT3V0bGF5ZXIuSXRlbSk7Cn0od2luZG93LCBmdW5jdGlvbiAoYSwgYiwgYywgZCwgZSwgZikgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gZyhhLCBiKSB7CiAgICB2YXIgYyA9IGUuZ2V0UXVlcnlFbGVtZW50KGEpOwogICAgaWYgKCFjKSByZXR1cm4gdm9pZCAoaCAmJiBoLmVycm9yKCJCYWQgZWxlbWVudCBmb3IgIiArIHRoaXMuY29uc3RydWN0b3IubmFtZXNwYWNlICsgIjogIiArIChjIHx8IGEpKSk7CiAgICB0aGlzLmVsZW1lbnQgPSBjLCBpICYmICh0aGlzLiRlbGVtZW50ID0gaSh0aGlzLmVsZW1lbnQpKSwgdGhpcy5vcHRpb25zID0gZS5leHRlbmQoe30sIHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdHMpLCB0aGlzLm9wdGlvbihiKTsKICAgIHZhciBkID0gKytrOwogICAgdGhpcy5lbGVtZW50Lm91dGxheWVyR1VJRCA9IGQsIGxbZF0gPSB0aGlzLCB0aGlzLl9jcmVhdGUoKSwgdGhpcy5vcHRpb25zLmlzSW5pdExheW91dCAmJiB0aGlzLmxheW91dCgpOwogIH0KCiAgdmFyIGggPSBhLmNvbnNvbGUsCiAgICAgIGkgPSBhLmpRdWVyeSwKICAgICAgaiA9IGZ1bmN0aW9uIGooKSB7fSwKICAgICAgayA9IDAsCiAgICAgIGwgPSB7fTsKCiAgcmV0dXJuIGcubmFtZXNwYWNlID0gIm91dGxheWVyIiwgZy5JdGVtID0gZiwgZy5kZWZhdWx0cyA9IHsKICAgIGNvbnRhaW5lclN0eWxlOiB7CiAgICAgIHBvc2l0aW9uOiAicmVsYXRpdmUiCiAgICB9LAogICAgaXNJbml0TGF5b3V0OiAhMCwKICAgIGlzT3JpZ2luTGVmdDogITAsCiAgICBpc09yaWdpblRvcDogITAsCiAgICBpc1Jlc2l6ZUJvdW5kOiAhMCwKICAgIGlzUmVzaXppbmdDb250YWluZXI6ICEwLAogICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAiMC40cyIsCiAgICBoaWRkZW5TdHlsZTogewogICAgICBvcGFjaXR5OiAwLAogICAgICB0cmFuc2Zvcm06ICJzY2FsZSgwLjAwMSkiCiAgICB9LAogICAgdmlzaWJsZVN0eWxlOiB7CiAgICAgIG9wYWNpdHk6IDEsCiAgICAgIHRyYW5zZm9ybTogInNjYWxlKDEpIgogICAgfQogIH0sIGUuZXh0ZW5kKGcucHJvdG90eXBlLCBjLnByb3RvdHlwZSksIGcucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChhKSB7CiAgICBlLmV4dGVuZCh0aGlzLm9wdGlvbnMsIGEpOwogIH0sIGcucHJvdG90eXBlLl9jcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnJlbG9hZEl0ZW1zKCksIHRoaXMuc3RhbXBzID0gW10sIHRoaXMuc3RhbXAodGhpcy5vcHRpb25zLnN0YW1wKSwgZS5leHRlbmQodGhpcy5lbGVtZW50LnN0eWxlLCB0aGlzLm9wdGlvbnMuY29udGFpbmVyU3R5bGUpLCB0aGlzLm9wdGlvbnMuaXNSZXNpemVCb3VuZCAmJiB0aGlzLmJpbmRSZXNpemUoKTsKICB9LCBnLnByb3RvdHlwZS5yZWxvYWRJdGVtcyA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaXRlbXMgPSB0aGlzLl9pdGVtaXplKHRoaXMuZWxlbWVudC5jaGlsZHJlbik7CiAgfSwgZy5wcm90b3R5cGUuX2l0ZW1pemUgPSBmdW5jdGlvbiAoYSkgewogICAgZm9yICh2YXIgYiA9IHRoaXMuX2ZpbHRlckZpbmRJdGVtRWxlbWVudHMoYSksIGMgPSB0aGlzLmNvbnN0cnVjdG9yLkl0ZW0sIGQgPSBbXSwgZSA9IDAsIGYgPSBiLmxlbmd0aDsgZiA+IGU7IGUrKykgewogICAgICB2YXIgZyA9IGJbZV0sCiAgICAgICAgICBoID0gbmV3IGMoZywgdGhpcyk7CiAgICAgIGQucHVzaChoKTsKICAgIH0KCiAgICByZXR1cm4gZDsKICB9LCBnLnByb3RvdHlwZS5fZmlsdGVyRmluZEl0ZW1FbGVtZW50cyA9IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gZS5maWx0ZXJGaW5kRWxlbWVudHMoYSwgdGhpcy5vcHRpb25zLml0ZW1TZWxlY3Rvcik7CiAgfSwgZy5wcm90b3R5cGUuZ2V0SXRlbUVsZW1lbnRzID0gZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgYSA9IFtdLCBiID0gMCwgYyA9IHRoaXMuaXRlbXMubGVuZ3RoOyBjID4gYjsgYisrKSB7CiAgICAgIGEucHVzaCh0aGlzLml0ZW1zW2JdLmVsZW1lbnQpOwogICAgfQoKICAgIHJldHVybiBhOwogIH0sIGcucHJvdG90eXBlLmxheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuX3Jlc2V0TGF5b3V0KCksIHRoaXMuX21hbmFnZVN0YW1wcygpOwogICAgdmFyIGEgPSB2b2lkIDAgIT09IHRoaXMub3B0aW9ucy5pc0xheW91dEluc3RhbnQgPyB0aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50IDogIXRoaXMuX2lzTGF5b3V0SW5pdGVkOwogICAgdGhpcy5sYXlvdXRJdGVtcyh0aGlzLml0ZW1zLCBhKSwgdGhpcy5faXNMYXlvdXRJbml0ZWQgPSAhMDsKICB9LCBnLnByb3RvdHlwZS5faW5pdCA9IGcucHJvdG90eXBlLmxheW91dCwgZy5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5nZXRTaXplKCk7CiAgfSwgZy5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuc2l6ZSA9IGQodGhpcy5lbGVtZW50KTsKICB9LCBnLnByb3RvdHlwZS5fZ2V0TWVhc3VyZW1lbnQgPSBmdW5jdGlvbiAoYSwgYikgewogICAgdmFyIGMsCiAgICAgICAgZiA9IHRoaXMub3B0aW9uc1thXTsKICAgIGYgPyAoInN0cmluZyIgPT0gdHlwZW9mIGYgPyBjID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZikgOiBlLmlzRWxlbWVudChmKSAmJiAoYyA9IGYpLCB0aGlzW2FdID0gYyA/IGQoYylbYl0gOiBmKSA6IHRoaXNbYV0gPSAwOwogIH0sIGcucHJvdG90eXBlLmxheW91dEl0ZW1zID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGEgPSB0aGlzLl9nZXRJdGVtc0ZvckxheW91dChhKSwgdGhpcy5fbGF5b3V0SXRlbXMoYSwgYiksIHRoaXMuX3Bvc3RMYXlvdXQoKTsKICB9LCBnLnByb3RvdHlwZS5fZ2V0SXRlbXNGb3JMYXlvdXQgPSBmdW5jdGlvbiAoYSkgewogICAgZm9yICh2YXIgYiA9IFtdLCBjID0gMCwgZCA9IGEubGVuZ3RoOyBkID4gYzsgYysrKSB7CiAgICAgIHZhciBlID0gYVtjXTsKICAgICAgZS5pc0lnbm9yZWQgfHwgYi5wdXNoKGUpOwogICAgfQoKICAgIHJldHVybiBiOwogIH0sIGcucHJvdG90eXBlLl9sYXlvdXRJdGVtcyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICBpZiAodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcygibGF5b3V0IiwgYSksIGEgJiYgYS5sZW5ndGgpIHsKICAgICAgZm9yICh2YXIgYyA9IFtdLCBkID0gMCwgZSA9IGEubGVuZ3RoOyBlID4gZDsgZCsrKSB7CiAgICAgICAgdmFyIGYgPSBhW2RdLAogICAgICAgICAgICBnID0gdGhpcy5fZ2V0SXRlbUxheW91dFBvc2l0aW9uKGYpOwoKICAgICAgICBnLml0ZW0gPSBmLCBnLmlzSW5zdGFudCA9IGIgfHwgZi5pc0xheW91dEluc3RhbnQsIGMucHVzaChnKTsKICAgICAgfQoKICAgICAgdGhpcy5fcHJvY2Vzc0xheW91dFF1ZXVlKGMpOwogICAgfQogIH0sIGcucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB4OiAwLAogICAgICB5OiAwCiAgICB9OwogIH0sIGcucHJvdG90eXBlLl9wcm9jZXNzTGF5b3V0UXVldWUgPSBmdW5jdGlvbiAoYSkgewogICAgZm9yICh2YXIgYiA9IDAsIGMgPSBhLmxlbmd0aDsgYyA+IGI7IGIrKykgewogICAgICB2YXIgZCA9IGFbYl07CgogICAgICB0aGlzLl9wb3NpdGlvbkl0ZW0oZC5pdGVtLCBkLngsIGQueSwgZC5pc0luc3RhbnQpOwogICAgfQogIH0sIGcucHJvdG90eXBlLl9wb3NpdGlvbkl0ZW0gPSBmdW5jdGlvbiAoYSwgYiwgYywgZCkgewogICAgZCA/IGEuZ29UbyhiLCBjKSA6IGEubW92ZVRvKGIsIGMpOwogIH0sIGcucHJvdG90eXBlLl9wb3N0TGF5b3V0ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5yZXNpemVDb250YWluZXIoKTsKICB9LCBnLnByb3RvdHlwZS5yZXNpemVDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5vcHRpb25zLmlzUmVzaXppbmdDb250YWluZXIpIHsKICAgICAgdmFyIGEgPSB0aGlzLl9nZXRDb250YWluZXJTaXplKCk7CgogICAgICBhICYmICh0aGlzLl9zZXRDb250YWluZXJNZWFzdXJlKGEud2lkdGgsICEwKSwgdGhpcy5fc2V0Q29udGFpbmVyTWVhc3VyZShhLmhlaWdodCwgITEpKTsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZSA9IGosIGcucHJvdG90eXBlLl9zZXRDb250YWluZXJNZWFzdXJlID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGlmICh2b2lkIDAgIT09IGEpIHsKICAgICAgdmFyIGMgPSB0aGlzLnNpemU7CiAgICAgIGMuaXNCb3JkZXJCb3ggJiYgKGEgKz0gYiA/IGMucGFkZGluZ0xlZnQgKyBjLnBhZGRpbmdSaWdodCArIGMuYm9yZGVyTGVmdFdpZHRoICsgYy5ib3JkZXJSaWdodFdpZHRoIDogYy5wYWRkaW5nQm90dG9tICsgYy5wYWRkaW5nVG9wICsgYy5ib3JkZXJUb3BXaWR0aCArIGMuYm9yZGVyQm90dG9tV2lkdGgpLCBhID0gTWF0aC5tYXgoYSwgMCksIHRoaXMuZWxlbWVudC5zdHlsZVtiID8gIndpZHRoIiA6ICJoZWlnaHQiXSA9IGEgKyAicHgiOwogICAgfQogIH0sIGcucHJvdG90eXBlLl9lbWl0Q29tcGxldGVPbkl0ZW1zID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGZ1bmN0aW9uIGMoKSB7CiAgICAgIGUuZGlzcGF0Y2hFdmVudChhICsgIkNvbXBsZXRlIiwgbnVsbCwgW2JdKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkKCkgewogICAgICBnKyssIGcgPT09IGYgJiYgYygpOwogICAgfQoKICAgIHZhciBlID0gdGhpcywKICAgICAgICBmID0gYi5sZW5ndGg7CiAgICBpZiAoIWIgfHwgIWYpIHJldHVybiB2b2lkIGMoKTsKCiAgICBmb3IgKHZhciBnID0gMCwgaCA9IDAsIGkgPSBiLmxlbmd0aDsgaSA+IGg7IGgrKykgewogICAgICB2YXIgaiA9IGJbaF07CiAgICAgIGoub25jZShhLCBkKTsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICAgIHZhciBkID0gYiA/IFtiXS5jb25jYXQoYykgOiBjOwogICAgaWYgKHRoaXMuZW1pdEV2ZW50KGEsIGQpLCBpKSBpZiAodGhpcy4kZWxlbWVudCA9IHRoaXMuJGVsZW1lbnQgfHwgaSh0aGlzLmVsZW1lbnQpLCBiKSB7CiAgICAgIHZhciBlID0gaS5FdmVudChiKTsKICAgICAgZS50eXBlID0gYSwgdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUsIGMpOwogICAgfSBlbHNlIHRoaXMuJGVsZW1lbnQudHJpZ2dlcihhLCBjKTsKICB9LCBnLnByb3RvdHlwZS5pZ25vcmUgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSB0aGlzLmdldEl0ZW0oYSk7CiAgICBiICYmIChiLmlzSWdub3JlZCA9ICEwKTsKICB9LCBnLnByb3RvdHlwZS51bmlnbm9yZSA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMuZ2V0SXRlbShhKTsKICAgIGIgJiYgZGVsZXRlIGIuaXNJZ25vcmVkOwogIH0sIGcucHJvdG90eXBlLnN0YW1wID0gZnVuY3Rpb24gKGEpIHsKICAgIGlmIChhID0gdGhpcy5fZmluZChhKSkgewogICAgICB0aGlzLnN0YW1wcyA9IHRoaXMuc3RhbXBzLmNvbmNhdChhKTsKCiAgICAgIGZvciAodmFyIGIgPSAwLCBjID0gYS5sZW5ndGg7IGMgPiBiOyBiKyspIHsKICAgICAgICB2YXIgZCA9IGFbYl07CiAgICAgICAgdGhpcy5pZ25vcmUoZCk7CiAgICAgIH0KICAgIH0KICB9LCBnLnByb3RvdHlwZS51bnN0YW1wID0gZnVuY3Rpb24gKGEpIHsKICAgIGlmIChhID0gdGhpcy5fZmluZChhKSkgZm9yICh2YXIgYiA9IDAsIGMgPSBhLmxlbmd0aDsgYyA+IGI7IGIrKykgewogICAgICB2YXIgZCA9IGFbYl07CiAgICAgIGUucmVtb3ZlRnJvbSh0aGlzLnN0YW1wcywgZCksIHRoaXMudW5pZ25vcmUoZCk7CiAgICB9CiAgfSwgZy5wcm90b3R5cGUuX2ZpbmQgPSBmdW5jdGlvbiAoYSkgewogICAgcmV0dXJuIGEgPyAoInN0cmluZyIgPT0gdHlwZW9mIGEgJiYgKGEgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChhKSksIGEgPSBlLm1ha2VBcnJheShhKSkgOiB2b2lkIDA7CiAgfSwgZy5wcm90b3R5cGUuX21hbmFnZVN0YW1wcyA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnN0YW1wcyAmJiB0aGlzLnN0YW1wcy5sZW5ndGgpIHsKICAgICAgdGhpcy5fZ2V0Qm91bmRpbmdSZWN0KCk7CgogICAgICBmb3IgKHZhciBhID0gMCwgYiA9IHRoaXMuc3RhbXBzLmxlbmd0aDsgYiA+IGE7IGErKykgewogICAgICAgIHZhciBjID0gdGhpcy5zdGFtcHNbYV07CgogICAgICAgIHRoaXMuX21hbmFnZVN0YW1wKGMpOwogICAgICB9CiAgICB9CiAgfSwgZy5wcm90b3R5cGUuX2dldEJvdW5kaW5nUmVjdCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgIGIgPSB0aGlzLnNpemU7CiAgICB0aGlzLl9ib3VuZGluZ1JlY3QgPSB7CiAgICAgIGxlZnQ6IGEubGVmdCArIGIucGFkZGluZ0xlZnQgKyBiLmJvcmRlckxlZnRXaWR0aCwKICAgICAgdG9wOiBhLnRvcCArIGIucGFkZGluZ1RvcCArIGIuYm9yZGVyVG9wV2lkdGgsCiAgICAgIHJpZ2h0OiBhLnJpZ2h0IC0gKGIucGFkZGluZ1JpZ2h0ICsgYi5ib3JkZXJSaWdodFdpZHRoKSwKICAgICAgYm90dG9tOiBhLmJvdHRvbSAtIChiLnBhZGRpbmdCb3R0b20gKyBiLmJvcmRlckJvdHRvbVdpZHRoKQogICAgfTsKICB9LCBnLnByb3RvdHlwZS5fbWFuYWdlU3RhbXAgPSBqLCBnLnByb3RvdHlwZS5fZ2V0RWxlbWVudE9mZnNldCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgYyA9IHRoaXMuX2JvdW5kaW5nUmVjdCwKICAgICAgICBlID0gZChhKSwKICAgICAgICBmID0gewogICAgICBsZWZ0OiBiLmxlZnQgLSBjLmxlZnQgLSBlLm1hcmdpbkxlZnQsCiAgICAgIHRvcDogYi50b3AgLSBjLnRvcCAtIGUubWFyZ2luVG9wLAogICAgICByaWdodDogYy5yaWdodCAtIGIucmlnaHQgLSBlLm1hcmdpblJpZ2h0LAogICAgICBib3R0b206IGMuYm90dG9tIC0gYi5ib3R0b20gLSBlLm1hcmdpbkJvdHRvbQogICAgfTsKICAgIHJldHVybiBmOwogIH0sIGcucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gIm9uIiArIGEudHlwZTsKICAgIHRoaXNbYl0gJiYgdGhpc1tiXShhKTsKICB9LCBnLnByb3RvdHlwZS5iaW5kUmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5pc1Jlc2l6ZUJvdW5kIHx8IChiLmJpbmQoYSwgInJlc2l6ZSIsIHRoaXMpLCB0aGlzLmlzUmVzaXplQm91bmQgPSAhMCk7CiAgfSwgZy5wcm90b3R5cGUudW5iaW5kUmVzaXplID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5pc1Jlc2l6ZUJvdW5kICYmIGIudW5iaW5kKGEsICJyZXNpemUiLCB0aGlzKSwgdGhpcy5pc1Jlc2l6ZUJvdW5kID0gITE7CiAgfSwgZy5wcm90b3R5cGUub25yZXNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICBmdW5jdGlvbiBhKCkgewogICAgICBiLnJlc2l6ZSgpLCBkZWxldGUgYi5yZXNpemVUaW1lb3V0OwogICAgfQoKICAgIHRoaXMucmVzaXplVGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5yZXNpemVUaW1lb3V0KTsKICAgIHZhciBiID0gdGhpczsKICAgIHRoaXMucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoYSwgMTAwKTsKICB9LCBnLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmlzUmVzaXplQm91bmQgJiYgdGhpcy5uZWVkc1Jlc2l6ZUxheW91dCgpICYmIHRoaXMubGF5b3V0KCk7CiAgfSwgZy5wcm90b3R5cGUubmVlZHNSZXNpemVMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYSA9IGQodGhpcy5lbGVtZW50KSwKICAgICAgICBiID0gdGhpcy5zaXplICYmIGE7CiAgICByZXR1cm4gYiAmJiBhLmlubmVyV2lkdGggIT09IHRoaXMuc2l6ZS5pbm5lcldpZHRoOwogIH0sIGcucHJvdG90eXBlLmFkZEl0ZW1zID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gdGhpcy5faXRlbWl6ZShhKTsKCiAgICByZXR1cm4gYi5sZW5ndGggJiYgKHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLmNvbmNhdChiKSksIGI7CiAgfSwgZy5wcm90b3R5cGUuYXBwZW5kZWQgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSB0aGlzLmFkZEl0ZW1zKGEpOwogICAgYi5sZW5ndGggJiYgKHRoaXMubGF5b3V0SXRlbXMoYiwgITApLCB0aGlzLnJldmVhbChiKSk7CiAgfSwgZy5wcm90b3R5cGUucHJlcGVuZGVkID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gdGhpcy5faXRlbWl6ZShhKTsKCiAgICBpZiAoYi5sZW5ndGgpIHsKICAgICAgdmFyIGMgPSB0aGlzLml0ZW1zLnNsaWNlKDApOwogICAgICB0aGlzLml0ZW1zID0gYi5jb25jYXQoYyksIHRoaXMuX3Jlc2V0TGF5b3V0KCksIHRoaXMuX21hbmFnZVN0YW1wcygpLCB0aGlzLmxheW91dEl0ZW1zKGIsICEwKSwgdGhpcy5yZXZlYWwoYiksIHRoaXMubGF5b3V0SXRlbXMoYyk7CiAgICB9CiAgfSwgZy5wcm90b3R5cGUucmV2ZWFsID0gZnVuY3Rpb24gKGEpIHsKICAgIHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoInJldmVhbCIsIGEpOwoKICAgIGZvciAodmFyIGIgPSBhICYmIGEubGVuZ3RoLCBjID0gMDsgYiAmJiBiID4gYzsgYysrKSB7CiAgICAgIHZhciBkID0gYVtjXTsKICAgICAgZC5yZXZlYWwoKTsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKGEpIHsKICAgIHRoaXMuX2VtaXRDb21wbGV0ZU9uSXRlbXMoImhpZGUiLCBhKTsKCiAgICBmb3IgKHZhciBiID0gYSAmJiBhLmxlbmd0aCwgYyA9IDA7IGIgJiYgYiA+IGM7IGMrKykgewogICAgICB2YXIgZCA9IGFbY107CiAgICAgIGQuaGlkZSgpOwogICAgfQogIH0sIGcucHJvdG90eXBlLnJldmVhbEl0ZW1FbGVtZW50cyA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMuZ2V0SXRlbXMoYSk7CiAgICB0aGlzLnJldmVhbChiKTsKICB9LCBnLnByb3RvdHlwZS5oaWRlSXRlbUVsZW1lbnRzID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gdGhpcy5nZXRJdGVtcyhhKTsKICAgIHRoaXMuaGlkZShiKTsKICB9LCBnLnByb3RvdHlwZS5nZXRJdGVtID0gZnVuY3Rpb24gKGEpIHsKICAgIGZvciAodmFyIGIgPSAwLCBjID0gdGhpcy5pdGVtcy5sZW5ndGg7IGMgPiBiOyBiKyspIHsKICAgICAgdmFyIGQgPSB0aGlzLml0ZW1zW2JdOwogICAgICBpZiAoZC5lbGVtZW50ID09PSBhKSByZXR1cm4gZDsKICAgIH0KICB9LCBnLnByb3RvdHlwZS5nZXRJdGVtcyA9IGZ1bmN0aW9uIChhKSB7CiAgICBhID0gZS5tYWtlQXJyYXkoYSk7CgogICAgZm9yICh2YXIgYiA9IFtdLCBjID0gMCwgZCA9IGEubGVuZ3RoOyBkID4gYzsgYysrKSB7CiAgICAgIHZhciBmID0gYVtjXSwKICAgICAgICAgIGcgPSB0aGlzLmdldEl0ZW0oZik7CiAgICAgIGcgJiYgYi5wdXNoKGcpOwogICAgfQoKICAgIHJldHVybiBiOwogIH0sIGcucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMuZ2V0SXRlbXMoYSk7CiAgICBpZiAodGhpcy5fZW1pdENvbXBsZXRlT25JdGVtcygicmVtb3ZlIiwgYiksIGIgJiYgYi5sZW5ndGgpIGZvciAodmFyIGMgPSAwLCBkID0gYi5sZW5ndGg7IGQgPiBjOyBjKyspIHsKICAgICAgdmFyIGYgPSBiW2NdOwogICAgICBmLnJlbW92ZSgpLCBlLnJlbW92ZUZyb20odGhpcy5pdGVtcywgZik7CiAgICB9CiAgfSwgZy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdGhpcy5lbGVtZW50LnN0eWxlOwogICAgYS5oZWlnaHQgPSAiIiwgYS5wb3NpdGlvbiA9ICIiLCBhLndpZHRoID0gIiI7CgogICAgZm9yICh2YXIgYiA9IDAsIGMgPSB0aGlzLml0ZW1zLmxlbmd0aDsgYyA+IGI7IGIrKykgewogICAgICB2YXIgZCA9IHRoaXMuaXRlbXNbYl07CiAgICAgIGQuZGVzdHJveSgpOwogICAgfQoKICAgIHRoaXMudW5iaW5kUmVzaXplKCk7CiAgICB2YXIgZSA9IHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQ7CiAgICBkZWxldGUgbFtlXSwgZGVsZXRlIHRoaXMuZWxlbWVudC5vdXRsYXllckdVSUQsIGkgJiYgaS5yZW1vdmVEYXRhKHRoaXMuZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lc3BhY2UpOwogIH0sIGcuZGF0YSA9IGZ1bmN0aW9uIChhKSB7CiAgICBhID0gZS5nZXRRdWVyeUVsZW1lbnQoYSk7CiAgICB2YXIgYiA9IGEgJiYgYS5vdXRsYXllckdVSUQ7CiAgICByZXR1cm4gYiAmJiBsW2JdOwogIH0sIGcuY3JlYXRlID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgIGZ1bmN0aW9uIGMoKSB7CiAgICAgIGcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSA/IGMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShnLnByb3RvdHlwZSkgOiBlLmV4dGVuZChjLnByb3RvdHlwZSwgZy5wcm90b3R5cGUpLCBjLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGMsIGMuZGVmYXVsdHMgPSBlLmV4dGVuZCh7fSwgZy5kZWZhdWx0cyksIGUuZXh0ZW5kKGMuZGVmYXVsdHMsIGIpLCBjLnByb3RvdHlwZS5zZXR0aW5ncyA9IHt9LCBjLm5hbWVzcGFjZSA9IGEsIGMuZGF0YSA9IGcuZGF0YSwgYy5JdGVtID0gZnVuY3Rpb24gKCkgewogICAgICBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9LCBjLkl0ZW0ucHJvdG90eXBlID0gbmV3IGYoKSwgZS5odG1sSW5pdChjLCBhKSwgaSAmJiBpLmJyaWRnZXQgJiYgaS5icmlkZ2V0KGEsIGMpLCBjOwogIH0sIGcuSXRlbSA9IGYsIGc7Cn0pLCBmdW5jdGlvbiAoYSwgYikgewogICJ1c2Ugc3RyaWN0IjsKCiAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoImlzb3RvcGUvanMvaXRlbSIsIFsib3V0bGF5ZXIvb3V0bGF5ZXIiXSwgYikgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gYihyZXF1aXJlKCJvdXRsYXllciIpKSA6IChhLklzb3RvcGUgPSBhLklzb3RvcGUgfHwge30sIGEuSXNvdG9wZS5JdGVtID0gYihhLk91dGxheWVyKSk7Cn0od2luZG93LCBmdW5jdGlvbiAoYSkgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gYigpIHsKICAgIGEuSXRlbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgYi5wcm90b3R5cGUgPSBuZXcgYS5JdGVtKCksIGIucHJvdG90eXBlLl9jcmVhdGUgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmlkID0gdGhpcy5sYXlvdXQuaXRlbUdVSUQrKywgYS5JdGVtLnByb3RvdHlwZS5fY3JlYXRlLmNhbGwodGhpcyksIHRoaXMuc29ydERhdGEgPSB7fTsKICB9LCBiLnByb3RvdHlwZS51cGRhdGVTb3J0RGF0YSA9IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdGhpcy5pc0lnbm9yZWQpIHsKICAgICAgdGhpcy5zb3J0RGF0YS5pZCA9IHRoaXMuaWQsIHRoaXMuc29ydERhdGFbIm9yaWdpbmFsLW9yZGVyIl0gPSB0aGlzLmlkLCB0aGlzLnNvcnREYXRhLnJhbmRvbSA9IE1hdGgucmFuZG9tKCk7CiAgICAgIHZhciBhID0gdGhpcy5sYXlvdXQub3B0aW9ucy5nZXRTb3J0RGF0YSwKICAgICAgICAgIGIgPSB0aGlzLmxheW91dC5fc29ydGVyczsKCiAgICAgIGZvciAodmFyIGMgaW4gYSkgewogICAgICAgIHZhciBkID0gYltjXTsKICAgICAgICB0aGlzLnNvcnREYXRhW2NdID0gZCh0aGlzLmVsZW1lbnQsIHRoaXMpOwogICAgICB9CiAgICB9CiAgfTsKICB2YXIgYyA9IGIucHJvdG90eXBlLmRlc3Ryb3k7CiAgcmV0dXJuIGIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICBjLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyksIHRoaXMuY3NzKHsKICAgICAgZGlzcGxheTogIiIKICAgIH0pOwogIH0sIGI7Cn0pLCBmdW5jdGlvbiAoYSwgYikgewogICJ1c2Ugc3RyaWN0IjsKCiAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoImlzb3RvcGUvanMvbGF5b3V0LW1vZGUiLCBbImdldC1zaXplL2dldC1zaXplIiwgIm91dGxheWVyL291dGxheWVyIl0sIGIpIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGIocmVxdWlyZSgiZ2V0LXNpemUiKSwgcmVxdWlyZSgib3V0bGF5ZXIiKSkgOiAoYS5Jc290b3BlID0gYS5Jc290b3BlIHx8IHt9LCBhLklzb3RvcGUuTGF5b3V0TW9kZSA9IGIoYS5nZXRTaXplLCBhLk91dGxheWVyKSk7Cn0od2luZG93LCBmdW5jdGlvbiAoYSwgYikgewogICJ1c2Ugc3RyaWN0IjsKCiAgZnVuY3Rpb24gYyhhKSB7CiAgICB0aGlzLmlzb3RvcGUgPSBhLCBhICYmICh0aGlzLm9wdGlvbnMgPSBhLm9wdGlvbnNbdGhpcy5uYW1lc3BhY2VdLCB0aGlzLmVsZW1lbnQgPSBhLmVsZW1lbnQsIHRoaXMuaXRlbXMgPSBhLmZpbHRlcmVkSXRlbXMsIHRoaXMuc2l6ZSA9IGEuc2l6ZSk7CiAgfQoKICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gYShhKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGIucHJvdG90eXBlW2FdLmFwcGx5KHRoaXMuaXNvdG9wZSwgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0KCiAgICBmb3IgKHZhciBkID0gWyJfcmVzZXRMYXlvdXQiLCAiX2dldEl0ZW1MYXlvdXRQb3NpdGlvbiIsICJfbWFuYWdlU3RhbXAiLCAiX2dldENvbnRhaW5lclNpemUiLCAiX2dldEVsZW1lbnRPZmZzZXQiLCAibmVlZHNSZXNpemVMYXlvdXQiXSwgZSA9IDAsIGYgPSBkLmxlbmd0aDsgZiA+IGU7IGUrKykgewogICAgICB2YXIgZyA9IGRbZV07CiAgICAgIGMucHJvdG90eXBlW2ddID0gYShnKTsKICAgIH0KICB9KCksIGMucHJvdG90eXBlLm5lZWRzVmVydGljYWxSZXNpemVMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYiA9IGEodGhpcy5pc290b3BlLmVsZW1lbnQpLAogICAgICAgIGMgPSB0aGlzLmlzb3RvcGUuc2l6ZSAmJiBiOwogICAgcmV0dXJuIGMgJiYgYi5pbm5lckhlaWdodCAhPSB0aGlzLmlzb3RvcGUuc2l6ZS5pbm5lckhlaWdodDsKICB9LCBjLnByb3RvdHlwZS5fZ2V0TWVhc3VyZW1lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmlzb3RvcGUuX2dldE1lYXN1cmVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfSwgYy5wcm90b3R5cGUuZ2V0Q29sdW1uV2lkdGggPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmdldFNlZ21lbnRTaXplKCJjb2x1bW4iLCAiV2lkdGgiKTsKICB9LCBjLnByb3RvdHlwZS5nZXRSb3dIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLmdldFNlZ21lbnRTaXplKCJyb3ciLCAiSGVpZ2h0Iik7CiAgfSwgYy5wcm90b3R5cGUuZ2V0U2VnbWVudFNpemUgPSBmdW5jdGlvbiAoYSwgYikgewogICAgdmFyIGMgPSBhICsgYiwKICAgICAgICBkID0gIm91dGVyIiArIGI7CgogICAgaWYgKHRoaXMuX2dldE1lYXN1cmVtZW50KGMsIGQpLCAhdGhpc1tjXSkgewogICAgICB2YXIgZSA9IHRoaXMuZ2V0Rmlyc3RJdGVtU2l6ZSgpOwogICAgICB0aGlzW2NdID0gZSAmJiBlW2RdIHx8IHRoaXMuaXNvdG9wZS5zaXplWyJpbm5lciIgKyBiXTsKICAgIH0KICB9LCBjLnByb3RvdHlwZS5nZXRGaXJzdEl0ZW1TaXplID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGIgPSB0aGlzLmlzb3RvcGUuZmlsdGVyZWRJdGVtc1swXTsKICAgIHJldHVybiBiICYmIGIuZWxlbWVudCAmJiBhKGIuZWxlbWVudCk7CiAgfSwgYy5wcm90b3R5cGUubGF5b3V0ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5pc290b3BlLmxheW91dC5hcHBseSh0aGlzLmlzb3RvcGUsIGFyZ3VtZW50cyk7CiAgfSwgYy5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaXNvdG9wZS5nZXRTaXplKCksIHRoaXMuc2l6ZSA9IHRoaXMuaXNvdG9wZS5zaXplOwogIH0sIGMubW9kZXMgPSB7fSwgYy5jcmVhdGUgPSBmdW5jdGlvbiAoYSwgYikgewogICAgZnVuY3Rpb24gZCgpIHsKICAgICAgYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfQoKICAgIHJldHVybiBkLnByb3RvdHlwZSA9IG5ldyBjKCksIGIgJiYgKGQub3B0aW9ucyA9IGIpLCBkLnByb3RvdHlwZS5uYW1lc3BhY2UgPSBhLCBjLm1vZGVzW2FdID0gZCwgZDsKICB9LCBjOwp9KSwgZnVuY3Rpb24gKGEsIGIpIHsKICAidXNlIHN0cmljdCI7CgogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCJtYXNvbnJ5L21hc29ucnkiLCBbIm91dGxheWVyL291dGxheWVyIiwgImdldC1zaXplL2dldC1zaXplIiwgImZpenp5LXVpLXV0aWxzL3V0aWxzIl0sIGIpIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGIocmVxdWlyZSgib3V0bGF5ZXIiKSwgcmVxdWlyZSgiZ2V0LXNpemUiKSwgcmVxdWlyZSgiZml6enktdWktdXRpbHMiKSkgOiBhLk1hc29ucnkgPSBiKGEuT3V0bGF5ZXIsIGEuZ2V0U2l6ZSwgYS5maXp6eVVJVXRpbHMpOwp9KHdpbmRvdywgZnVuY3Rpb24gKGEsIGIsIGMpIHsKICB2YXIgZCA9IGEuY3JlYXRlKCJtYXNvbnJ5Iik7CiAgcmV0dXJuIGQucHJvdG90eXBlLl9yZXNldExheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuZ2V0U2l6ZSgpLCB0aGlzLl9nZXRNZWFzdXJlbWVudCgiY29sdW1uV2lkdGgiLCAib3V0ZXJXaWR0aCIpLCB0aGlzLl9nZXRNZWFzdXJlbWVudCgiZ3V0dGVyIiwgIm91dGVyV2lkdGgiKSwgdGhpcy5tZWFzdXJlQ29sdW1ucygpOwogICAgdmFyIGEgPSB0aGlzLmNvbHM7CgogICAgZm9yICh0aGlzLmNvbFlzID0gW107IGEtLTspIHsKICAgICAgdGhpcy5jb2xZcy5wdXNoKDApOwogICAgfQoKICAgIHRoaXMubWF4WSA9IDA7CiAgfSwgZC5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5nZXRDb250YWluZXJXaWR0aCgpLCAhdGhpcy5jb2x1bW5XaWR0aCkgewogICAgICB2YXIgYSA9IHRoaXMuaXRlbXNbMF0sCiAgICAgICAgICBjID0gYSAmJiBhLmVsZW1lbnQ7CiAgICAgIHRoaXMuY29sdW1uV2lkdGggPSBjICYmIGIoYykub3V0ZXJXaWR0aCB8fCB0aGlzLmNvbnRhaW5lcldpZHRoOwogICAgfQoKICAgIHZhciBkID0gdGhpcy5jb2x1bW5XaWR0aCArPSB0aGlzLmd1dHRlciwKICAgICAgICBlID0gdGhpcy5jb250YWluZXJXaWR0aCArIHRoaXMuZ3V0dGVyLAogICAgICAgIGYgPSBlIC8gZCwKICAgICAgICBnID0gZCAtIGUgJSBkLAogICAgICAgIGggPSBnICYmIDEgPiBnID8gInJvdW5kIiA6ICJmbG9vciI7CiAgICBmID0gTWF0aFtoXShmKSwgdGhpcy5jb2xzID0gTWF0aC5tYXgoZiwgMSk7CiAgfSwgZC5wcm90b3R5cGUuZ2V0Q29udGFpbmVyV2lkdGggPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYSA9IHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoID8gdGhpcy5lbGVtZW50LnBhcmVudE5vZGUgOiB0aGlzLmVsZW1lbnQsCiAgICAgICAgYyA9IGIoYSk7CiAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gYyAmJiBjLmlubmVyV2lkdGg7CiAgfSwgZC5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChhKSB7CiAgICBhLmdldFNpemUoKTsKICAgIHZhciBiID0gYS5zaXplLm91dGVyV2lkdGggJSB0aGlzLmNvbHVtbldpZHRoLAogICAgICAgIGQgPSBiICYmIDEgPiBiID8gInJvdW5kIiA6ICJjZWlsIiwKICAgICAgICBlID0gTWF0aFtkXShhLnNpemUub3V0ZXJXaWR0aCAvIHRoaXMuY29sdW1uV2lkdGgpOwogICAgZSA9IE1hdGgubWluKGUsIHRoaXMuY29scyk7CgogICAgZm9yICh2YXIgZiA9IHRoaXMuX2dldENvbEdyb3VwKGUpLCBnID0gTWF0aC5taW4uYXBwbHkoTWF0aCwgZiksIGggPSBjLmluZGV4T2YoZiwgZyksIGkgPSB7CiAgICAgIHg6IHRoaXMuY29sdW1uV2lkdGggKiBoLAogICAgICB5OiBnCiAgICB9LCBqID0gZyArIGEuc2l6ZS5vdXRlckhlaWdodCwgayA9IHRoaXMuY29scyArIDEgLSBmLmxlbmd0aCwgbCA9IDA7IGsgPiBsOyBsKyspIHsKICAgICAgdGhpcy5jb2xZc1toICsgbF0gPSBqOwogICAgfQoKICAgIHJldHVybiBpOwogIH0sIGQucHJvdG90eXBlLl9nZXRDb2xHcm91cCA9IGZ1bmN0aW9uIChhKSB7CiAgICBpZiAoMiA+IGEpIHJldHVybiB0aGlzLmNvbFlzOwoKICAgIGZvciAodmFyIGIgPSBbXSwgYyA9IHRoaXMuY29scyArIDEgLSBhLCBkID0gMDsgYyA+IGQ7IGQrKykgewogICAgICB2YXIgZSA9IHRoaXMuY29sWXMuc2xpY2UoZCwgZCArIGEpOwogICAgICBiW2RdID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgZSk7CiAgICB9CgogICAgcmV0dXJuIGI7CiAgfSwgZC5wcm90b3R5cGUuX21hbmFnZVN0YW1wID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBjID0gYihhKSwKICAgICAgICBkID0gdGhpcy5fZ2V0RWxlbWVudE9mZnNldChhKSwKICAgICAgICBlID0gdGhpcy5vcHRpb25zLmlzT3JpZ2luTGVmdCA/IGQubGVmdCA6IGQucmlnaHQsCiAgICAgICAgZiA9IGUgKyBjLm91dGVyV2lkdGgsCiAgICAgICAgZyA9IE1hdGguZmxvb3IoZSAvIHRoaXMuY29sdW1uV2lkdGgpOwoKICAgIGcgPSBNYXRoLm1heCgwLCBnKTsKICAgIHZhciBoID0gTWF0aC5mbG9vcihmIC8gdGhpcy5jb2x1bW5XaWR0aCk7CiAgICBoIC09IGYgJSB0aGlzLmNvbHVtbldpZHRoID8gMCA6IDEsIGggPSBNYXRoLm1pbih0aGlzLmNvbHMgLSAxLCBoKTsKCiAgICBmb3IgKHZhciBpID0gKHRoaXMub3B0aW9ucy5pc09yaWdpblRvcCA/IGQudG9wIDogZC5ib3R0b20pICsgYy5vdXRlckhlaWdodCwgaiA9IGc7IGggPj0gajsgaisrKSB7CiAgICAgIHRoaXMuY29sWXNbal0gPSBNYXRoLm1heChpLCB0aGlzLmNvbFlzW2pdKTsKICAgIH0KICB9LCBkLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMubWF4WSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHRoaXMuY29sWXMpOwogICAgdmFyIGEgPSB7CiAgICAgIGhlaWdodDogdGhpcy5tYXhZCiAgICB9OwogICAgcmV0dXJuIHRoaXMub3B0aW9ucy5pc0ZpdFdpZHRoICYmIChhLndpZHRoID0gdGhpcy5fZ2V0Q29udGFpbmVyRml0V2lkdGgoKSksIGE7CiAgfSwgZC5wcm90b3R5cGUuX2dldENvbnRhaW5lckZpdFdpZHRoID0gZnVuY3Rpb24gKCkgewogICAgZm9yICh2YXIgYSA9IDAsIGIgPSB0aGlzLmNvbHM7IC0tYiAmJiAwID09PSB0aGlzLmNvbFlzW2JdOykgewogICAgICBhKys7CiAgICB9CgogICAgcmV0dXJuICh0aGlzLmNvbHMgLSBhKSAqIHRoaXMuY29sdW1uV2lkdGggLSB0aGlzLmd1dHRlcjsKICB9LCBkLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdGhpcy5jb250YWluZXJXaWR0aDsKICAgIHJldHVybiB0aGlzLmdldENvbnRhaW5lcldpZHRoKCksIGEgIT09IHRoaXMuY29udGFpbmVyV2lkdGg7CiAgfSwgZDsKfSksIGZ1bmN0aW9uIChhLCBiKSB7CiAgInVzZSBzdHJpY3QiOwoKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvbWFzb25yeSIsIFsiLi4vbGF5b3V0LW1vZGUiLCAibWFzb25yeS9tYXNvbnJ5Il0sIGIpIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGIocmVxdWlyZSgiLi4vbGF5b3V0LW1vZGUiKSwgcmVxdWlyZSgibWFzb25yeS1sYXlvdXQiKSkgOiBiKGEuSXNvdG9wZS5MYXlvdXRNb2RlLCBhLk1hc29ucnkpOwp9KHdpbmRvdywgZnVuY3Rpb24gKGEsIGIpIHsKICAidXNlIHN0cmljdCI7CgogIGZ1bmN0aW9uIGMoYSwgYikgewogICAgZm9yICh2YXIgYyBpbiBiKSB7CiAgICAgIGFbY10gPSBiW2NdOwogICAgfQoKICAgIHJldHVybiBhOwogIH0KCiAgdmFyIGQgPSBhLmNyZWF0ZSgibWFzb25yeSIpLAogICAgICBlID0gZC5wcm90b3R5cGUuX2dldEVsZW1lbnRPZmZzZXQsCiAgICAgIGYgPSBkLnByb3RvdHlwZS5sYXlvdXQsCiAgICAgIGcgPSBkLnByb3RvdHlwZS5fZ2V0TWVhc3VyZW1lbnQ7CiAgYyhkLnByb3RvdHlwZSwgYi5wcm90b3R5cGUpLCBkLnByb3RvdHlwZS5fZ2V0RWxlbWVudE9mZnNldCA9IGUsIGQucHJvdG90eXBlLmxheW91dCA9IGYsIGQucHJvdG90eXBlLl9nZXRNZWFzdXJlbWVudCA9IGc7CiAgdmFyIGggPSBkLnByb3RvdHlwZS5tZWFzdXJlQ29sdW1uczsKCiAgZC5wcm90b3R5cGUubWVhc3VyZUNvbHVtbnMgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLml0ZW1zID0gdGhpcy5pc290b3BlLmZpbHRlcmVkSXRlbXMsIGguY2FsbCh0aGlzKTsKICB9OwoKICB2YXIgaSA9IGQucHJvdG90eXBlLl9tYW5hZ2VTdGFtcDsKICByZXR1cm4gZC5wcm90b3R5cGUuX21hbmFnZVN0YW1wID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5vcHRpb25zLmlzT3JpZ2luTGVmdCA9IHRoaXMuaXNvdG9wZS5vcHRpb25zLmlzT3JpZ2luTGVmdCwgdGhpcy5vcHRpb25zLmlzT3JpZ2luVG9wID0gdGhpcy5pc290b3BlLm9wdGlvbnMuaXNPcmlnaW5Ub3AsIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9LCBkOwp9KSwgZnVuY3Rpb24gKGEsIGIpIHsKICAidXNlIHN0cmljdCI7CgogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCJpc290b3BlL2pzL2xheW91dC1tb2Rlcy9maXQtcm93cyIsIFsiLi4vbGF5b3V0LW1vZGUiXSwgYikgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gYihyZXF1aXJlKCIuLi9sYXlvdXQtbW9kZSIpKSA6IGIoYS5Jc290b3BlLkxheW91dE1vZGUpOwp9KHdpbmRvdywgZnVuY3Rpb24gKGEpIHsKICAidXNlIHN0cmljdCI7CgogIHZhciBiID0gYS5jcmVhdGUoImZpdFJvd3MiKTsKICByZXR1cm4gYi5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy54ID0gMCwgdGhpcy55ID0gMCwgdGhpcy5tYXhZID0gMCwgdGhpcy5fZ2V0TWVhc3VyZW1lbnQoImd1dHRlciIsICJvdXRlcldpZHRoIik7CiAgfSwgYi5wcm90b3R5cGUuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChhKSB7CiAgICBhLmdldFNpemUoKTsKICAgIHZhciBiID0gYS5zaXplLm91dGVyV2lkdGggKyB0aGlzLmd1dHRlciwKICAgICAgICBjID0gdGhpcy5pc290b3BlLnNpemUuaW5uZXJXaWR0aCArIHRoaXMuZ3V0dGVyOwogICAgMCAhPT0gdGhpcy54ICYmIGIgKyB0aGlzLnggPiBjICYmICh0aGlzLnggPSAwLCB0aGlzLnkgPSB0aGlzLm1heFkpOwogICAgdmFyIGQgPSB7CiAgICAgIHg6IHRoaXMueCwKICAgICAgeTogdGhpcy55CiAgICB9OwogICAgcmV0dXJuIHRoaXMubWF4WSA9IE1hdGgubWF4KHRoaXMubWF4WSwgdGhpcy55ICsgYS5zaXplLm91dGVySGVpZ2h0KSwgdGhpcy54ICs9IGIsIGQ7CiAgfSwgYi5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBoZWlnaHQ6IHRoaXMubWF4WQogICAgfTsKICB9LCBiOwp9KSwgZnVuY3Rpb24gKGEsIGIpIHsKICAidXNlIHN0cmljdCI7CgogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCJpc290b3BlL2pzL2xheW91dC1tb2Rlcy92ZXJ0aWNhbCIsIFsiLi4vbGF5b3V0LW1vZGUiXSwgYikgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gYihyZXF1aXJlKCIuLi9sYXlvdXQtbW9kZSIpKSA6IGIoYS5Jc290b3BlLkxheW91dE1vZGUpOwp9KHdpbmRvdywgZnVuY3Rpb24gKGEpIHsKICAidXNlIHN0cmljdCI7CgogIHZhciBiID0gYS5jcmVhdGUoInZlcnRpY2FsIiwgewogICAgaG9yaXpvbnRhbEFsaWdubWVudDogMAogIH0pOwogIHJldHVybiBiLnByb3RvdHlwZS5fcmVzZXRMYXlvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLnkgPSAwOwogIH0sIGIucHJvdG90eXBlLl9nZXRJdGVtTGF5b3V0UG9zaXRpb24gPSBmdW5jdGlvbiAoYSkgewogICAgYS5nZXRTaXplKCk7CiAgICB2YXIgYiA9ICh0aGlzLmlzb3RvcGUuc2l6ZS5pbm5lcldpZHRoIC0gYS5zaXplLm91dGVyV2lkdGgpICogdGhpcy5vcHRpb25zLmhvcml6b250YWxBbGlnbm1lbnQsCiAgICAgICAgYyA9IHRoaXMueTsKICAgIHJldHVybiB0aGlzLnkgKz0gYS5zaXplLm91dGVySGVpZ2h0LCB7CiAgICAgIHg6IGIsCiAgICAgIHk6IGMKICAgIH07CiAgfSwgYi5wcm90b3R5cGUuX2dldENvbnRhaW5lclNpemUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBoZWlnaHQ6IHRoaXMueQogICAgfTsKICB9LCBiOwp9KSwgZnVuY3Rpb24gKGEsIGIpIHsKICAidXNlIHN0cmljdCI7CgogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsib3V0bGF5ZXIvb3V0bGF5ZXIiLCAiZ2V0LXNpemUvZ2V0LXNpemUiLCAibWF0Y2hlcy1zZWxlY3Rvci9tYXRjaGVzLXNlbGVjdG9yIiwgImZpenp5LXVpLXV0aWxzL3V0aWxzIiwgImlzb3RvcGUvanMvaXRlbSIsICJpc290b3BlL2pzL2xheW91dC1tb2RlIiwgImlzb3RvcGUvanMvbGF5b3V0LW1vZGVzL21hc29ucnkiLCAiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvZml0LXJvd3MiLCAiaXNvdG9wZS9qcy9sYXlvdXQtbW9kZXMvdmVydGljYWwiXSwgZnVuY3Rpb24gKGMsIGQsIGUsIGYsIGcsIGgpIHsKICAgIHJldHVybiBiKGEsIGMsIGQsIGUsIGYsIGcsIGgpOwogIH0pIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IGIoYSwgcmVxdWlyZSgib3V0bGF5ZXIiKSwgcmVxdWlyZSgiZ2V0LXNpemUiKSwgcmVxdWlyZSgiZGVzYW5kcm8tbWF0Y2hlcy1zZWxlY3RvciIpLCByZXF1aXJlKCJmaXp6eS11aS11dGlscyIpLCByZXF1aXJlKCIuL2l0ZW0iKSwgcmVxdWlyZSgiLi9sYXlvdXQtbW9kZSIpLCByZXF1aXJlKCIuL2xheW91dC1tb2Rlcy9tYXNvbnJ5IiksIHJlcXVpcmUoIi4vbGF5b3V0LW1vZGVzL2ZpdC1yb3dzIiksIHJlcXVpcmUoIi4vbGF5b3V0LW1vZGVzL3ZlcnRpY2FsIikpIDogYS5Jc290b3BlID0gYihhLCBhLk91dGxheWVyLCBhLmdldFNpemUsIGEubWF0Y2hlc1NlbGVjdG9yLCBhLmZpenp5VUlVdGlscywgYS5Jc290b3BlLkl0ZW0sIGEuSXNvdG9wZS5MYXlvdXRNb2RlKTsKfSh3aW5kb3csIGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlLCBmLCBnKSB7CiAgZnVuY3Rpb24gaChhLCBiKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGMsIGQpIHsKICAgICAgZm9yICh2YXIgZSA9IDAsIGYgPSBhLmxlbmd0aDsgZiA+IGU7IGUrKykgewogICAgICAgIHZhciBnID0gYVtlXSwKICAgICAgICAgICAgaCA9IGMuc29ydERhdGFbZ10sCiAgICAgICAgICAgIGkgPSBkLnNvcnREYXRhW2ddOwoKICAgICAgICBpZiAoaCA+IGkgfHwgaSA+IGgpIHsKICAgICAgICAgIHZhciBqID0gdm9pZCAwICE9PSBiW2ddID8gYltnXSA6IGIsCiAgICAgICAgICAgICAgayA9IGogPyAxIDogLTE7CiAgICAgICAgICByZXR1cm4gKGggPiBpID8gMSA6IC0xKSAqIGs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH07CiAgfQoKICB2YXIgaSA9IGEualF1ZXJ5LAogICAgICBqID0gU3RyaW5nLnByb3RvdHlwZS50cmltID8gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiBhLnRyaW0oKTsKICB9IDogZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiBhLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAiIik7CiAgfSwKICAgICAgayA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwKICAgICAgbCA9IGsudGV4dENvbnRlbnQgPyBmdW5jdGlvbiAoYSkgewogICAgcmV0dXJuIGEudGV4dENvbnRlbnQ7CiAgfSA6IGZ1bmN0aW9uIChhKSB7CiAgICByZXR1cm4gYS5pbm5lclRleHQ7CiAgfSwKICAgICAgbSA9IGIuY3JlYXRlKCJpc290b3BlIiwgewogICAgbGF5b3V0TW9kZTogIm1hc29ucnkiLAogICAgaXNKUXVlcnlGaWx0ZXJpbmc6ICEwLAogICAgc29ydEFzY2VuZGluZzogITAKICB9KTsKICBtLkl0ZW0gPSBmLCBtLkxheW91dE1vZGUgPSBnLCBtLnByb3RvdHlwZS5fY3JlYXRlID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5pdGVtR1VJRCA9IDAsIHRoaXMuX3NvcnRlcnMgPSB7fSwgdGhpcy5fZ2V0U29ydGVycygpLCBiLnByb3RvdHlwZS5fY3JlYXRlLmNhbGwodGhpcyksIHRoaXMubW9kZXMgPSB7fSwgdGhpcy5maWx0ZXJlZEl0ZW1zID0gdGhpcy5pdGVtcywgdGhpcy5zb3J0SGlzdG9yeSA9IFsib3JpZ2luYWwtb3JkZXIiXTsKCiAgICBmb3IgKHZhciBhIGluIGcubW9kZXMpIHsKICAgICAgdGhpcy5faW5pdExheW91dE1vZGUoYSk7CiAgICB9CiAgfSwgbS5wcm90b3R5cGUucmVsb2FkSXRlbXMgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLml0ZW1HVUlEID0gMCwgYi5wcm90b3R5cGUucmVsb2FkSXRlbXMuY2FsbCh0aGlzKTsKICB9LCBtLnByb3RvdHlwZS5faXRlbWl6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGEgPSBiLnByb3RvdHlwZS5faXRlbWl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBjID0gMCwgZCA9IGEubGVuZ3RoOyBkID4gYzsgYysrKSB7CiAgICAgIHZhciBlID0gYVtjXTsKICAgICAgZS5pZCA9IHRoaXMuaXRlbUdVSUQrKzsKICAgIH0KCiAgICByZXR1cm4gdGhpcy5fdXBkYXRlSXRlbXNTb3J0RGF0YShhKSwgYTsKICB9LCBtLnByb3RvdHlwZS5faW5pdExheW91dE1vZGUgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGIgPSBnLm1vZGVzW2FdLAogICAgICAgIGMgPSB0aGlzLm9wdGlvbnNbYV0gfHwge307CiAgICB0aGlzLm9wdGlvbnNbYV0gPSBiLm9wdGlvbnMgPyBlLmV4dGVuZChiLm9wdGlvbnMsIGMpIDogYywgdGhpcy5tb2Rlc1thXSA9IG5ldyBiKHRoaXMpOwogIH0sIG0ucHJvdG90eXBlLmxheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiAhdGhpcy5faXNMYXlvdXRJbml0ZWQgJiYgdGhpcy5vcHRpb25zLmlzSW5pdExheW91dCA/IHZvaWQgdGhpcy5hcnJhbmdlKCkgOiB2b2lkIHRoaXMuX2xheW91dCgpOwogIH0sIG0ucHJvdG90eXBlLl9sYXlvdXQgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYSA9IHRoaXMuX2dldElzSW5zdGFudCgpOwoKICAgIHRoaXMuX3Jlc2V0TGF5b3V0KCksIHRoaXMuX21hbmFnZVN0YW1wcygpLCB0aGlzLmxheW91dEl0ZW1zKHRoaXMuZmlsdGVyZWRJdGVtcywgYSksIHRoaXMuX2lzTGF5b3V0SW5pdGVkID0gITA7CiAgfSwgbS5wcm90b3R5cGUuYXJyYW5nZSA9IGZ1bmN0aW9uIChhKSB7CiAgICBmdW5jdGlvbiBiKCkgewogICAgICBkLnJldmVhbChjLm5lZWRSZXZlYWwpLCBkLmhpZGUoYy5uZWVkSGlkZSk7CiAgICB9CgogICAgdGhpcy5vcHRpb24oYSksIHRoaXMuX2dldElzSW5zdGFudCgpOwoKICAgIHZhciBjID0gdGhpcy5fZmlsdGVyKHRoaXMuaXRlbXMpOwoKICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IGMubWF0Y2hlczsKICAgIHZhciBkID0gdGhpczsKICAgIHRoaXMuX2JpbmRBcnJhbmdlQ29tcGxldGUoKSwgdGhpcy5faXNJbnN0YW50ID8gdGhpcy5fbm9UcmFuc2l0aW9uKGIpIDogYigpLCB0aGlzLl9zb3J0KCksIHRoaXMuX2xheW91dCgpOwogIH0sIG0ucHJvdG90eXBlLl9pbml0ID0gbS5wcm90b3R5cGUuYXJyYW5nZSwgbS5wcm90b3R5cGUuX2dldElzSW5zdGFudCA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdm9pZCAwICE9PSB0aGlzLm9wdGlvbnMuaXNMYXlvdXRJbnN0YW50ID8gdGhpcy5vcHRpb25zLmlzTGF5b3V0SW5zdGFudCA6ICF0aGlzLl9pc0xheW91dEluaXRlZDsKICAgIHJldHVybiB0aGlzLl9pc0luc3RhbnQgPSBhLCBhOwogIH0sIG0ucHJvdG90eXBlLl9iaW5kQXJyYW5nZUNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gYSgpIHsKICAgICAgYiAmJiBjICYmIGQgJiYgZS5kaXNwYXRjaEV2ZW50KCJhcnJhbmdlQ29tcGxldGUiLCBudWxsLCBbZS5maWx0ZXJlZEl0ZW1zXSk7CiAgICB9CgogICAgdmFyIGIsCiAgICAgICAgYywKICAgICAgICBkLAogICAgICAgIGUgPSB0aGlzOwogICAgdGhpcy5vbmNlKCJsYXlvdXRDb21wbGV0ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgYiA9ICEwLCBhKCk7CiAgICB9KSwgdGhpcy5vbmNlKCJoaWRlQ29tcGxldGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGMgPSAhMCwgYSgpOwogICAgfSksIHRoaXMub25jZSgicmV2ZWFsQ29tcGxldGUiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGQgPSAhMCwgYSgpOwogICAgfSk7CiAgfSwgbS5wcm90b3R5cGUuX2ZpbHRlciA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMub3B0aW9ucy5maWx0ZXI7CiAgICBiID0gYiB8fCAiKiI7CgogICAgZm9yICh2YXIgYyA9IFtdLCBkID0gW10sIGUgPSBbXSwgZiA9IHRoaXMuX2dldEZpbHRlclRlc3QoYiksIGcgPSAwLCBoID0gYS5sZW5ndGg7IGggPiBnOyBnKyspIHsKICAgICAgdmFyIGkgPSBhW2ddOwoKICAgICAgaWYgKCFpLmlzSWdub3JlZCkgewogICAgICAgIHZhciBqID0gZihpKTsKICAgICAgICBqICYmIGMucHVzaChpKSwgaiAmJiBpLmlzSGlkZGVuID8gZC5wdXNoKGkpIDogaiB8fCBpLmlzSGlkZGVuIHx8IGUucHVzaChpKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiB7CiAgICAgIG1hdGNoZXM6IGMsCiAgICAgIG5lZWRSZXZlYWw6IGQsCiAgICAgIG5lZWRIaWRlOiBlCiAgICB9OwogIH0sIG0ucHJvdG90eXBlLl9nZXRGaWx0ZXJUZXN0ID0gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiBpICYmIHRoaXMub3B0aW9ucy5pc0pRdWVyeUZpbHRlcmluZyA/IGZ1bmN0aW9uIChiKSB7CiAgICAgIHJldHVybiBpKGIuZWxlbWVudCkuaXMoYSk7CiAgICB9IDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgYSA/IGZ1bmN0aW9uIChiKSB7CiAgICAgIHJldHVybiBhKGIuZWxlbWVudCk7CiAgICB9IDogZnVuY3Rpb24gKGIpIHsKICAgICAgcmV0dXJuIGQoYi5lbGVtZW50LCBhKTsKICAgIH07CiAgfSwgbS5wcm90b3R5cGUudXBkYXRlU29ydERhdGEgPSBmdW5jdGlvbiAoYSkgewogICAgdmFyIGI7CiAgICBhID8gKGEgPSBlLm1ha2VBcnJheShhKSwgYiA9IHRoaXMuZ2V0SXRlbXMoYSkpIDogYiA9IHRoaXMuaXRlbXMsIHRoaXMuX2dldFNvcnRlcnMoKSwgdGhpcy5fdXBkYXRlSXRlbXNTb3J0RGF0YShiKTsKICB9LCBtLnByb3RvdHlwZS5fZ2V0U29ydGVycyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdGhpcy5vcHRpb25zLmdldFNvcnREYXRhOwoKICAgIGZvciAodmFyIGIgaW4gYSkgewogICAgICB2YXIgYyA9IGFbYl07CiAgICAgIHRoaXMuX3NvcnRlcnNbYl0gPSBuKGMpOwogICAgfQogIH0sIG0ucHJvdG90eXBlLl91cGRhdGVJdGVtc1NvcnREYXRhID0gZnVuY3Rpb24gKGEpIHsKICAgIGZvciAodmFyIGIgPSBhICYmIGEubGVuZ3RoLCBjID0gMDsgYiAmJiBiID4gYzsgYysrKSB7CiAgICAgIHZhciBkID0gYVtjXTsKICAgICAgZC51cGRhdGVTb3J0RGF0YSgpOwogICAgfQogIH07CgogIHZhciBuID0gZnVuY3Rpb24gKCkgewogICAgZnVuY3Rpb24gYShhKSB7CiAgICAgIGlmICgic3RyaW5nIiAhPSB0eXBlb2YgYSkgcmV0dXJuIGE7CiAgICAgIHZhciBjID0gaihhKS5zcGxpdCgiICIpLAogICAgICAgICAgZCA9IGNbMF0sCiAgICAgICAgICBlID0gZC5tYXRjaCgvXlxbKC4rKVxdJC8pLAogICAgICAgICAgZiA9IGUgJiYgZVsxXSwKICAgICAgICAgIGcgPSBiKGYsIGQpLAogICAgICAgICAgaCA9IG0uc29ydERhdGFQYXJzZXJzW2NbMV1dOwogICAgICByZXR1cm4gYSA9IGggPyBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhICYmIGgoZyhhKSk7CiAgICAgIH0gOiBmdW5jdGlvbiAoYSkgewogICAgICAgIHJldHVybiBhICYmIGcoYSk7CiAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gYihhLCBiKSB7CiAgICAgIHZhciBjOwogICAgICByZXR1cm4gYyA9IGEgPyBmdW5jdGlvbiAoYikgewogICAgICAgIHJldHVybiBiLmdldEF0dHJpYnV0ZShhKTsKICAgICAgfSA6IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgdmFyIGMgPSBhLnF1ZXJ5U2VsZWN0b3IoYik7CiAgICAgICAgcmV0dXJuIGMgJiYgbChjKTsKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gYTsKICB9KCk7CgogIG0uc29ydERhdGFQYXJzZXJzID0gewogICAgcGFyc2VJbnQ6IGZ1bmN0aW9uIChfcGFyc2VJbnQpIHsKICAgICAgZnVuY3Rpb24gcGFyc2VJbnQoX3gpIHsKICAgICAgICByZXR1cm4gX3BhcnNlSW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHBhcnNlSW50LnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfcGFyc2VJbnQudG9TdHJpbmcoKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBwYXJzZUludDsKICAgIH0oZnVuY3Rpb24gKGEpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KGEsIDEwKTsKICAgIH0pLAogICAgcGFyc2VGbG9hdDogZnVuY3Rpb24gKF9wYXJzZUZsb2F0KSB7CiAgICAgIGZ1bmN0aW9uIHBhcnNlRmxvYXQoX3gyKSB7CiAgICAgICAgcmV0dXJuIF9wYXJzZUZsb2F0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHBhcnNlRmxvYXQudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9wYXJzZUZsb2F0LnRvU3RyaW5nKCk7CiAgICAgIH07CgogICAgICByZXR1cm4gcGFyc2VGbG9hdDsKICAgIH0oZnVuY3Rpb24gKGEpIHsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYSk7CiAgICB9KQogIH0sIG0ucHJvdG90eXBlLl9zb3J0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGEgPSB0aGlzLm9wdGlvbnMuc29ydEJ5OwoKICAgIGlmIChhKSB7CiAgICAgIHZhciBiID0gW10uY29uY2F0LmFwcGx5KGEsIHRoaXMuc29ydEhpc3RvcnkpLAogICAgICAgICAgYyA9IGgoYiwgdGhpcy5vcHRpb25zLnNvcnRBc2NlbmRpbmcpOwogICAgICB0aGlzLmZpbHRlcmVkSXRlbXMuc29ydChjKSwgYSAhPSB0aGlzLnNvcnRIaXN0b3J5WzBdICYmIHRoaXMuc29ydEhpc3RvcnkudW5zaGlmdChhKTsKICAgIH0KICB9LCBtLnByb3RvdHlwZS5fbW9kZSA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhID0gdGhpcy5vcHRpb25zLmxheW91dE1vZGUsCiAgICAgICAgYiA9IHRoaXMubW9kZXNbYV07CiAgICBpZiAoIWIpIHRocm93IG5ldyBFcnJvcigiTm8gbGF5b3V0IG1vZGU6ICIgKyBhKTsKICAgIHJldHVybiBiLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnNbYV0sIGI7CiAgfSwgbS5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0ID0gZnVuY3Rpb24gKCkgewogICAgYi5wcm90b3R5cGUuX3Jlc2V0TGF5b3V0LmNhbGwodGhpcyksIHRoaXMuX21vZGUoKS5fcmVzZXRMYXlvdXQoKTsKICB9LCBtLnByb3RvdHlwZS5fZ2V0SXRlbUxheW91dFBvc2l0aW9uID0gZnVuY3Rpb24gKGEpIHsKICAgIHJldHVybiB0aGlzLl9tb2RlKCkuX2dldEl0ZW1MYXlvdXRQb3NpdGlvbihhKTsKICB9LCBtLnByb3RvdHlwZS5fbWFuYWdlU3RhbXAgPSBmdW5jdGlvbiAoYSkgewogICAgdGhpcy5fbW9kZSgpLl9tYW5hZ2VTdGFtcChhKTsKICB9LCBtLnByb3RvdHlwZS5fZ2V0Q29udGFpbmVyU2l6ZSA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLl9tb2RlKCkuX2dldENvbnRhaW5lclNpemUoKTsKICB9LCBtLnByb3RvdHlwZS5uZWVkc1Jlc2l6ZUxheW91dCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0aGlzLl9tb2RlKCkubmVlZHNSZXNpemVMYXlvdXQoKTsKICB9LCBtLnByb3RvdHlwZS5hcHBlbmRlZCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMuYWRkSXRlbXMoYSk7CgogICAgaWYgKGIubGVuZ3RoKSB7CiAgICAgIHZhciBjID0gdGhpcy5fZmlsdGVyUmV2ZWFsQWRkZWQoYik7CgogICAgICB0aGlzLmZpbHRlcmVkSXRlbXMgPSB0aGlzLmZpbHRlcmVkSXRlbXMuY29uY2F0KGMpOwogICAgfQogIH0sIG0ucHJvdG90eXBlLnByZXBlbmRlZCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMuX2l0ZW1pemUoYSk7CgogICAgaWYgKGIubGVuZ3RoKSB7CiAgICAgIHRoaXMuX3Jlc2V0TGF5b3V0KCksIHRoaXMuX21hbmFnZVN0YW1wcygpOwoKICAgICAgdmFyIGMgPSB0aGlzLl9maWx0ZXJSZXZlYWxBZGRlZChiKTsKCiAgICAgIHRoaXMubGF5b3V0SXRlbXModGhpcy5maWx0ZXJlZEl0ZW1zKSwgdGhpcy5maWx0ZXJlZEl0ZW1zID0gYy5jb25jYXQodGhpcy5maWx0ZXJlZEl0ZW1zKSwgdGhpcy5pdGVtcyA9IGIuY29uY2F0KHRoaXMuaXRlbXMpOwogICAgfQogIH0sIG0ucHJvdG90eXBlLl9maWx0ZXJSZXZlYWxBZGRlZCA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYiA9IHRoaXMuX2ZpbHRlcihhKTsKCiAgICByZXR1cm4gdGhpcy5oaWRlKGIubmVlZEhpZGUpLCB0aGlzLnJldmVhbChiLm1hdGNoZXMpLCB0aGlzLmxheW91dEl0ZW1zKGIubWF0Y2hlcywgITApLCBiLm1hdGNoZXM7CiAgfSwgbS5wcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gdGhpcy5hZGRJdGVtcyhhKTsKCiAgICBpZiAoYi5sZW5ndGgpIHsKICAgICAgdmFyIGMsCiAgICAgICAgICBkLAogICAgICAgICAgZSA9IGIubGVuZ3RoOwoKICAgICAgZm9yIChjID0gMDsgZSA+IGM7IGMrKykgewogICAgICAgIGQgPSBiW2NdLCB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZC5lbGVtZW50KTsKICAgICAgfQoKICAgICAgdmFyIGYgPSB0aGlzLl9maWx0ZXIoYikubWF0Y2hlczsKCiAgICAgIGZvciAoYyA9IDA7IGUgPiBjOyBjKyspIHsKICAgICAgICBiW2NdLmlzTGF5b3V0SW5zdGFudCA9ICEwOwogICAgICB9CgogICAgICBmb3IgKHRoaXMuYXJyYW5nZSgpLCBjID0gMDsgZSA+IGM7IGMrKykgewogICAgICAgIGRlbGV0ZSBiW2NdLmlzTGF5b3V0SW5zdGFudDsKICAgICAgfQoKICAgICAgdGhpcy5yZXZlYWwoZik7CiAgICB9CiAgfTsKICB2YXIgbyA9IG0ucHJvdG90eXBlLnJlbW92ZTsKICByZXR1cm4gbS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGEpIHsKICAgIGEgPSBlLm1ha2VBcnJheShhKTsKICAgIHZhciBiID0gdGhpcy5nZXRJdGVtcyhhKTsKICAgIG8uY2FsbCh0aGlzLCBhKTsKICAgIHZhciBjID0gYiAmJiBiLmxlbmd0aDsKICAgIGlmIChjKSBmb3IgKHZhciBkID0gMDsgYyA+IGQ7IGQrKykgewogICAgICB2YXIgZiA9IGJbZF07CiAgICAgIGUucmVtb3ZlRnJvbSh0aGlzLmZpbHRlcmVkSXRlbXMsIGYpOwogICAgfQogIH0sIG0ucHJvdG90eXBlLnNodWZmbGUgPSBmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciBhID0gMCwgYiA9IHRoaXMuaXRlbXMubGVuZ3RoOyBiID4gYTsgYSsrKSB7CiAgICAgIHZhciBjID0gdGhpcy5pdGVtc1thXTsKICAgICAgYy5zb3J0RGF0YS5yYW5kb20gPSBNYXRoLnJhbmRvbSgpOwogICAgfQoKICAgIHRoaXMub3B0aW9ucy5zb3J0QnkgPSAicmFuZG9tIiwgdGhpcy5fc29ydCgpLCB0aGlzLl9sYXlvdXQoKTsKICB9LCBtLnByb3RvdHlwZS5fbm9UcmFuc2l0aW9uID0gZnVuY3Rpb24gKGEpIHsKICAgIHZhciBiID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbjsKICAgIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24gPSAwOwogICAgdmFyIGMgPSBhLmNhbGwodGhpcyk7CiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbiA9IGIsIGM7CiAgfSwgbS5wcm90b3R5cGUuZ2V0RmlsdGVyZWRJdGVtRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciBhID0gW10sIGIgPSAwLCBjID0gdGhpcy5maWx0ZXJlZEl0ZW1zLmxlbmd0aDsgYyA+IGI7IGIrKykgewogICAgICBhLnB1c2godGhpcy5maWx0ZXJlZEl0ZW1zW2JdLmVsZW1lbnQpOwogICAgfQoKICAgIHJldHVybiBhOwogIH0sIG07Cn0pOwovKiEKICogaW1hZ2VzTG9hZGVkIFBBQ0tBR0VEIHYzLjEuOAogKiBKYXZhU2NyaXB0IGlzIGFsbCBsaWtlICJZb3UgaW1hZ2VzIGFyZSBkb25lIHlldCBvciB3aGF0PyIKICogTUlUIExpY2Vuc2UKICovCgooZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGUoKSB7fQoKICBmdW5jdGlvbiB0KGUsIHQpIHsKICAgIGZvciAodmFyIG4gPSBlLmxlbmd0aDsgbi0tOykgewogICAgICBpZiAoZVtuXS5saXN0ZW5lciA9PT0gdCkgcmV0dXJuIG47CiAgICB9CgogICAgcmV0dXJuIC0xOwogIH0KCiAgZnVuY3Rpb24gbihlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpc1tlXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9CgogIHZhciBpID0gZS5wcm90b3R5cGUsCiAgICAgIHIgPSB0aGlzLAogICAgICBvID0gci5FdmVudEVtaXR0ZXI7CiAgaS5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZSkgewogICAgdmFyIHQsCiAgICAgICAgbiwKICAgICAgICBpID0gdGhpcy5fZ2V0RXZlbnRzKCk7CgogICAgaWYgKCJvYmplY3QiID09IF90eXBlb2YoZSkpIHsKICAgICAgdCA9IHt9OwoKICAgICAgZm9yIChuIGluIGkpIHsKICAgICAgICBpLmhhc093blByb3BlcnR5KG4pICYmIGUudGVzdChuKSAmJiAodFtuXSA9IGlbbl0pOwogICAgICB9CiAgICB9IGVsc2UgdCA9IGlbZV0gfHwgKGlbZV0gPSBbXSk7CgogICAgcmV0dXJuIHQ7CiAgfSwgaS5mbGF0dGVuTGlzdGVuZXJzID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciB0LAogICAgICAgIG4gPSBbXTsKCiAgICBmb3IgKHQgPSAwOyBlLmxlbmd0aCA+IHQ7IHQgKz0gMSkgewogICAgICBuLnB1c2goZVt0XS5saXN0ZW5lcik7CiAgICB9CgogICAgcmV0dXJuIG47CiAgfSwgaS5nZXRMaXN0ZW5lcnNBc09iamVjdCA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCwKICAgICAgICBuID0gdGhpcy5nZXRMaXN0ZW5lcnMoZSk7CiAgICByZXR1cm4gbiBpbnN0YW5jZW9mIEFycmF5ICYmICh0ID0ge30sIHRbZV0gPSBuKSwgdCB8fCBuOwogIH0sIGkuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiAoZSwgbikgewogICAgdmFyIGksCiAgICAgICAgciA9IHRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZSksCiAgICAgICAgbyA9ICJvYmplY3QiID09IF90eXBlb2Yobik7CgogICAgZm9yIChpIGluIHIpIHsKICAgICAgci5oYXNPd25Qcm9wZXJ0eShpKSAmJiAtMSA9PT0gdChyW2ldLCBuKSAmJiByW2ldLnB1c2gobyA/IG4gOiB7CiAgICAgICAgbGlzdGVuZXI6IG4sCiAgICAgICAgb25jZTogITEKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwgaS5vbiA9IG4oImFkZExpc3RlbmVyIiksIGkuYWRkT25jZUxpc3RlbmVyID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgIHJldHVybiB0aGlzLmFkZExpc3RlbmVyKGUsIHsKICAgICAgbGlzdGVuZXI6IHQsCiAgICAgIG9uY2U6ICEwCiAgICB9KTsKICB9LCBpLm9uY2UgPSBuKCJhZGRPbmNlTGlzdGVuZXIiKSwgaS5kZWZpbmVFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gdGhpcy5nZXRMaXN0ZW5lcnMoZSksIHRoaXM7CiAgfSwgaS5kZWZpbmVFdmVudHMgPSBmdW5jdGlvbiAoZSkgewogICAgZm9yICh2YXIgdCA9IDA7IGUubGVuZ3RoID4gdDsgdCArPSAxKSB7CiAgICAgIHRoaXMuZGVmaW5lRXZlbnQoZVt0XSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwgaS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIChlLCBuKSB7CiAgICB2YXIgaSwKICAgICAgICByLAogICAgICAgIG8gPSB0aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpOwoKICAgIGZvciAociBpbiBvKSB7CiAgICAgIG8uaGFzT3duUHJvcGVydHkocikgJiYgKGkgPSB0KG9bcl0sIG4pLCAtMSAhPT0gaSAmJiBvW3JdLnNwbGljZShpLCAxKSk7CiAgICB9CgogICAgcmV0dXJuIHRoaXM7CiAgfSwgaS5vZmYgPSBuKCJyZW1vdmVMaXN0ZW5lciIpLCBpLmFkZExpc3RlbmVycyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICByZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCExLCBlLCB0KTsKICB9LCBpLnJlbW92ZUxpc3RlbmVycyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICByZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLCBlLCB0KTsKICB9LCBpLm1hbmlwdWxhdGVMaXN0ZW5lcnMgPSBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgdmFyIGksCiAgICAgICAgciwKICAgICAgICBvID0gZSA/IHRoaXMucmVtb3ZlTGlzdGVuZXIgOiB0aGlzLmFkZExpc3RlbmVyLAogICAgICAgIHMgPSBlID8gdGhpcy5yZW1vdmVMaXN0ZW5lcnMgOiB0aGlzLmFkZExpc3RlbmVyczsKICAgIGlmICgib2JqZWN0IiAhPSBfdHlwZW9mKHQpIHx8IHQgaW5zdGFuY2VvZiBSZWdFeHApIGZvciAoaSA9IG4ubGVuZ3RoOyBpLS07KSB7CiAgICAgIG8uY2FsbCh0aGlzLCB0LCBuW2ldKTsKICAgIH0gZWxzZSBmb3IgKGkgaW4gdCkgewogICAgICB0Lmhhc093blByb3BlcnR5KGkpICYmIChyID0gdFtpXSkgJiYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgPyBvLmNhbGwodGhpcywgaSwgcikgOiBzLmNhbGwodGhpcywgaSwgcikpOwogICAgfQogICAgcmV0dXJuIHRoaXM7CiAgfSwgaS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCwKICAgICAgICBuID0gX3R5cGVvZihlKSwKICAgICAgICBpID0gdGhpcy5fZ2V0RXZlbnRzKCk7CgogICAgaWYgKCJzdHJpbmciID09PSBuKSBkZWxldGUgaVtlXTtlbHNlIGlmICgib2JqZWN0IiA9PT0gbikgZm9yICh0IGluIGkpIHsKICAgICAgaS5oYXNPd25Qcm9wZXJ0eSh0KSAmJiBlLnRlc3QodCkgJiYgZGVsZXRlIGlbdF07CiAgICB9IGVsc2UgZGVsZXRlIHRoaXMuX2V2ZW50czsKICAgIHJldHVybiB0aGlzOwogIH0sIGkucmVtb3ZlQWxsTGlzdGVuZXJzID0gbigicmVtb3ZlRXZlbnQiKSwgaS5lbWl0RXZlbnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgdmFyIG4sCiAgICAgICAgaSwKICAgICAgICByLAogICAgICAgIG8sCiAgICAgICAgcyA9IHRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZSk7CgogICAgZm9yIChyIGluIHMpIHsKICAgICAgaWYgKHMuaGFzT3duUHJvcGVydHkocikpIGZvciAoaSA9IHNbcl0ubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgbiA9IHNbcl1baV0sIG4ub25jZSA9PT0gITAgJiYgdGhpcy5yZW1vdmVMaXN0ZW5lcihlLCBuLmxpc3RlbmVyKSwgbyA9IG4ubGlzdGVuZXIuYXBwbHkodGhpcywgdCB8fCBbXSksIG8gPT09IHRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpICYmIHRoaXMucmVtb3ZlTGlzdGVuZXIoZSwgbi5saXN0ZW5lcik7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdGhpczsKICB9LCBpLnRyaWdnZXIgPSBuKCJlbWl0RXZlbnQiKSwgaS5lbWl0ID0gZnVuY3Rpb24gKGUpIHsKICAgIHZhciB0ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKICAgIHJldHVybiB0aGlzLmVtaXRFdmVudChlLCB0KTsKICB9LCBpLnNldE9uY2VSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICByZXR1cm4gdGhpcy5fb25jZVJldHVyblZhbHVlID0gZSwgdGhpczsKICB9LCBpLl9nZXRPbmNlUmV0dXJuVmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpcy5oYXNPd25Qcm9wZXJ0eSgiX29uY2VSZXR1cm5WYWx1ZSIpID8gdGhpcy5fb25jZVJldHVyblZhbHVlIDogITA7CiAgfSwgaS5fZ2V0RXZlbnRzID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMuX2V2ZW50cyB8fCAodGhpcy5fZXZlbnRzID0ge30pOwogIH0sIGUubm9Db25mbGljdCA9IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiByLkV2ZW50RW1pdHRlciA9IG8sIGU7CiAgfSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoImV2ZW50RW1pdHRlci9FdmVudEVtaXR0ZXIiLCBbXSwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGU7CiAgfSkgOiAib2JqZWN0IiA9PSAodHlwZW9mIG1vZHVsZSA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YobW9kdWxlKSkgJiYgbW9kdWxlLmV4cG9ydHMgPyBtb2R1bGUuZXhwb3J0cyA9IGUgOiB0aGlzLkV2ZW50RW1pdHRlciA9IGU7Cn0pLmNhbGwodGhpcyksIGZ1bmN0aW9uIChlKSB7CiAgZnVuY3Rpb24gdCh0KSB7CiAgICB2YXIgbiA9IGUuZXZlbnQ7CiAgICByZXR1cm4gbi50YXJnZXQgPSBuLnRhcmdldCB8fCBuLnNyY0VsZW1lbnQgfHwgdCwgbjsKICB9CgogIHZhciBuID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LAogICAgICBpID0gZnVuY3Rpb24gaSgpIHt9OwoKICBuLmFkZEV2ZW50TGlzdGVuZXIgPyBpID0gZnVuY3Rpb24gaShlLCB0LCBuKSB7CiAgICBlLmFkZEV2ZW50TGlzdGVuZXIodCwgbiwgITEpOwogIH0gOiBuLmF0dGFjaEV2ZW50ICYmIChpID0gZnVuY3Rpb24gaShlLCBuLCBfaTIpIHsKICAgIGVbbiArIF9pMl0gPSBfaTIuaGFuZGxlRXZlbnQgPyBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBuID0gdChlKTsKCiAgICAgIF9pMi5oYW5kbGVFdmVudC5jYWxsKF9pMiwgbik7CiAgICB9IDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgbiA9IHQoZSk7CgogICAgICBfaTIuY2FsbChlLCBuKTsKICAgIH0sIGUuYXR0YWNoRXZlbnQoIm9uIiArIG4sIGVbbiArIF9pMl0pOwogIH0pOwoKICB2YXIgciA9IGZ1bmN0aW9uIHIoKSB7fTsKCiAgbi5yZW1vdmVFdmVudExpc3RlbmVyID8gciA9IGZ1bmN0aW9uIHIoZSwgdCwgbikgewogICAgZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIG4sICExKTsKICB9IDogbi5kZXRhY2hFdmVudCAmJiAociA9IGZ1bmN0aW9uIHIoZSwgdCwgbikgewogICAgZS5kZXRhY2hFdmVudCgib24iICsgdCwgZVt0ICsgbl0pOwoKICAgIHRyeSB7CiAgICAgIGRlbGV0ZSBlW3QgKyBuXTsKICAgIH0gY2F0Y2ggKGkpIHsKICAgICAgZVt0ICsgbl0gPSB2b2lkIDA7CiAgICB9CiAgfSk7CiAgdmFyIG8gPSB7CiAgICBiaW5kOiBpLAogICAgdW5iaW5kOiByCiAgfTsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgiZXZlbnRpZS9ldmVudGllIiwgbykgOiBlLmV2ZW50aWUgPSBvOwp9KHRoaXMpLCBmdW5jdGlvbiAoZSwgdCkgewogICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKFsiZXZlbnRFbWl0dGVyL0V2ZW50RW1pdHRlciIsICJldmVudGllL2V2ZW50aWUiXSwgZnVuY3Rpb24gKG4sIGkpIHsKICAgIHJldHVybiB0KGUsIG4sIGkpOwogIH0pIDogIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgPyBtb2R1bGUuZXhwb3J0cyA9IHQoZSwgcmVxdWlyZSgid29sZnk4Ny1ldmVudGVtaXR0ZXIiKSwgcmVxdWlyZSgiZXZlbnRpZSIpKSA6IGUuaW1hZ2VzTG9hZGVkID0gdChlLCBlLkV2ZW50RW1pdHRlciwgZS5ldmVudGllKTsKfSh3aW5kb3csIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgZnVuY3Rpb24gaShlLCB0KSB7CiAgICBmb3IgKHZhciBuIGluIHQpIHsKICAgICAgZVtuXSA9IHRbbl07CiAgICB9CgogICAgcmV0dXJuIGU7CiAgfQoKICBmdW5jdGlvbiByKGUpIHsKICAgIHJldHVybiAiW29iamVjdCBBcnJheV0iID09PSBkLmNhbGwoZSk7CiAgfQoKICBmdW5jdGlvbiBvKGUpIHsKICAgIHZhciB0ID0gW107CiAgICBpZiAocihlKSkgdCA9IGU7ZWxzZSBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUubGVuZ3RoKSBmb3IgKHZhciBuID0gMCwgaSA9IGUubGVuZ3RoOyBpID4gbjsgbisrKSB7CiAgICAgIHQucHVzaChlW25dKTsKICAgIH0gZWxzZSB0LnB1c2goZSk7CiAgICByZXR1cm4gdDsKICB9CgogIGZ1bmN0aW9uIHMoZSwgdCwgbikgewogICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIHMpKSByZXR1cm4gbmV3IHMoZSwgdCk7CiAgICAic3RyaW5nIiA9PSB0eXBlb2YgZSAmJiAoZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZSkpLCB0aGlzLmVsZW1lbnRzID0gbyhlKSwgdGhpcy5vcHRpb25zID0gaSh7fSwgdGhpcy5vcHRpb25zKSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCA/IG4gPSB0IDogaSh0aGlzLm9wdGlvbnMsIHQpLCBuICYmIHRoaXMub24oImFsd2F5cyIsIG4pLCB0aGlzLmdldEltYWdlcygpLCBhICYmICh0aGlzLmpxRGVmZXJyZWQgPSBuZXcgYS5EZWZlcnJlZCgpKTsKICAgIHZhciByID0gdGhpczsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICByLmNoZWNrKCk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGYoZSkgewogICAgdGhpcy5pbWcgPSBlOwogIH0KCiAgZnVuY3Rpb24gYyhlKSB7CiAgICB0aGlzLnNyYyA9IGUsIHZbZV0gPSB0aGlzOwogIH0KCiAgdmFyIGEgPSBlLmpRdWVyeSwKICAgICAgdSA9IGUuY29uc29sZSwKICAgICAgaCA9IHUgIT09IHZvaWQgMCwKICAgICAgZCA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CiAgcy5wcm90b3R5cGUgPSBuZXcgdCgpLCBzLnByb3RvdHlwZS5vcHRpb25zID0ge30sIHMucHJvdG90eXBlLmdldEltYWdlcyA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaW1hZ2VzID0gW107CgogICAgZm9yICh2YXIgZSA9IDAsIHQgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgdCA+IGU7IGUrKykgewogICAgICB2YXIgbiA9IHRoaXMuZWxlbWVudHNbZV07CiAgICAgICJJTUciID09PSBuLm5vZGVOYW1lICYmIHRoaXMuYWRkSW1hZ2Uobik7CiAgICAgIHZhciBpID0gbi5ub2RlVHlwZTsKICAgICAgaWYgKGkgJiYgKDEgPT09IGkgfHwgOSA9PT0gaSB8fCAxMSA9PT0gaSkpIGZvciAodmFyIHIgPSBuLnF1ZXJ5U2VsZWN0b3JBbGwoImltZyIpLCBvID0gMCwgcyA9IHIubGVuZ3RoOyBzID4gbzsgbysrKSB7CiAgICAgICAgdmFyIGYgPSByW29dOwogICAgICAgIHRoaXMuYWRkSW1hZ2UoZik7CiAgICAgIH0KICAgIH0KICB9LCBzLnByb3RvdHlwZS5hZGRJbWFnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgdCA9IG5ldyBmKGUpOwogICAgdGhpcy5pbWFnZXMucHVzaCh0KTsKICB9LCBzLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIGUoZSwgcikgewogICAgICByZXR1cm4gdC5vcHRpb25zLmRlYnVnICYmIGggJiYgdS5sb2coImNvbmZpcm0iLCBlLCByKSwgdC5wcm9ncmVzcyhlKSwgbisrLCBuID09PSBpICYmIHQuY29tcGxldGUoKSwgITA7CiAgICB9CgogICAgdmFyIHQgPSB0aGlzLAogICAgICAgIG4gPSAwLAogICAgICAgIGkgPSB0aGlzLmltYWdlcy5sZW5ndGg7CiAgICBpZiAodGhpcy5oYXNBbnlCcm9rZW4gPSAhMSwgIWkpIHJldHVybiB0aGlzLmNvbXBsZXRlKCksIHZvaWQgMDsKCiAgICBmb3IgKHZhciByID0gMDsgaSA+IHI7IHIrKykgewogICAgICB2YXIgbyA9IHRoaXMuaW1hZ2VzW3JdOwogICAgICBvLm9uKCJjb25maXJtIiwgZSksIG8uY2hlY2soKTsKICAgIH0KICB9LCBzLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uIChlKSB7CiAgICB0aGlzLmhhc0FueUJyb2tlbiA9IHRoaXMuaGFzQW55QnJva2VuIHx8ICFlLmlzTG9hZGVkOwogICAgdmFyIHQgPSB0aGlzOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHQuZW1pdCgicHJvZ3Jlc3MiLCB0LCBlKSwgdC5qcURlZmVycmVkICYmIHQuanFEZWZlcnJlZC5ub3RpZnkgJiYgdC5qcURlZmVycmVkLm5vdGlmeSh0LCBlKTsKICAgIH0pOwogIH0sIHMucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGUgPSB0aGlzLmhhc0FueUJyb2tlbiA/ICJmYWlsIiA6ICJkb25lIjsKICAgIHRoaXMuaXNDb21wbGV0ZSA9ICEwOwogICAgdmFyIHQgPSB0aGlzOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0LmVtaXQoZSwgdCksIHQuZW1pdCgiYWx3YXlzIiwgdCksIHQuanFEZWZlcnJlZCkgewogICAgICAgIHZhciBuID0gdC5oYXNBbnlCcm9rZW4gPyAicmVqZWN0IiA6ICJyZXNvbHZlIjsKICAgICAgICB0LmpxRGVmZXJyZWRbbl0odCk7CiAgICAgIH0KICAgIH0pOwogIH0sIGEgJiYgKGEuZm4uaW1hZ2VzTG9hZGVkID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgIHZhciBuID0gbmV3IHModGhpcywgZSwgdCk7CiAgICByZXR1cm4gbi5qcURlZmVycmVkLnByb21pc2UoYSh0aGlzKSk7CiAgfSksIGYucHJvdG90eXBlID0gbmV3IHQoKSwgZi5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7CiAgICB2YXIgZSA9IHZbdGhpcy5pbWcuc3JjXSB8fCBuZXcgYyh0aGlzLmltZy5zcmMpOwogICAgaWYgKGUuaXNDb25maXJtZWQpIHJldHVybiB0aGlzLmNvbmZpcm0oZS5pc0xvYWRlZCwgImNhY2hlZCB3YXMgY29uZmlybWVkIiksIHZvaWQgMDsKICAgIGlmICh0aGlzLmltZy5jb21wbGV0ZSAmJiB2b2lkIDAgIT09IHRoaXMuaW1nLm5hdHVyYWxXaWR0aCkgcmV0dXJuIHRoaXMuY29uZmlybSgwICE9PSB0aGlzLmltZy5uYXR1cmFsV2lkdGgsICJuYXR1cmFsV2lkdGgiKSwgdm9pZCAwOwogICAgdmFyIHQgPSB0aGlzOwogICAgZS5vbigiY29uZmlybSIsIGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgIHJldHVybiB0LmNvbmZpcm0oZS5pc0xvYWRlZCwgbiksICEwOwogICAgfSksIGUuY2hlY2soKTsKICB9LCBmLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgIHRoaXMuaXNMb2FkZWQgPSBlLCB0aGlzLmVtaXQoImNvbmZpcm0iLCB0aGlzLCB0KTsKICB9OwogIHZhciB2ID0ge307CiAgcmV0dXJuIGMucHJvdG90eXBlID0gbmV3IHQoKSwgYy5wcm90b3R5cGUuY2hlY2sgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMuaXNDaGVja2VkKSB7CiAgICAgIHZhciBlID0gbmV3IEltYWdlKCk7CiAgICAgIG4uYmluZChlLCAibG9hZCIsIHRoaXMpLCBuLmJpbmQoZSwgImVycm9yIiwgdGhpcyksIGUuc3JjID0gdGhpcy5zcmMsIHRoaXMuaXNDaGVja2VkID0gITA7CiAgICB9CiAgfSwgYy5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAoZSkgewogICAgdmFyIHQgPSAib24iICsgZS50eXBlOwogICAgdGhpc1t0XSAmJiB0aGlzW3RdKGUpOwogIH0sIGMucHJvdG90eXBlLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICB0aGlzLmNvbmZpcm0oITAsICJvbmxvYWQiKSwgdGhpcy51bmJpbmRQcm94eUV2ZW50cyhlKTsKICB9LCBjLnByb3RvdHlwZS5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHsKICAgIHRoaXMuY29uZmlybSghMSwgIm9uZXJyb3IiKSwgdGhpcy51bmJpbmRQcm94eUV2ZW50cyhlKTsKICB9LCBjLnByb3RvdHlwZS5jb25maXJtID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgIHRoaXMuaXNDb25maXJtZWQgPSAhMCwgdGhpcy5pc0xvYWRlZCA9IGUsIHRoaXMuZW1pdCgiY29uZmlybSIsIHRoaXMsIHQpOwogIH0sIGMucHJvdG90eXBlLnVuYmluZFByb3h5RXZlbnRzID0gZnVuY3Rpb24gKGUpIHsKICAgIG4udW5iaW5kKGUudGFyZ2V0LCAibG9hZCIsIHRoaXMpLCBuLnVuYmluZChlLnRhcmdldCwgImVycm9yIiwgdGhpcyk7CiAgfSwgczsKfSk7Ci8qIQogKiBwYXJhbGxheC5qcyB2MS40LjIgKGh0dHA6Ly9waXhlbGNvZy5naXRodWIuaW8vcGFyYWxsYXguanMvKQogKiBAY29weXJpZ2h0IDIwMTYgUGl4ZWxDb2csIEluYy4KICogQGxpY2Vuc2UgTUlUIChodHRwczovL2dpdGh1Yi5jb20vcGl4ZWxjb2cvcGFyYWxsYXguanMvYmxvYi9tYXN0ZXIvTElDRU5TRSkKICovCgohZnVuY3Rpb24gKHQsIGksIGUsIHMpIHsKICBmdW5jdGlvbiBvKGksIGUpIHsKICAgIHZhciBoID0gdGhpczsKICAgICJvYmplY3QiID09IF90eXBlb2YoZSkgJiYgKGRlbGV0ZSBlLnJlZnJlc2gsIGRlbGV0ZSBlLnJlbmRlciwgdC5leHRlbmQodGhpcywgZSkpLCB0aGlzLiRlbGVtZW50ID0gdChpKSwgIXRoaXMuaW1hZ2VTcmMgJiYgdGhpcy4kZWxlbWVudC5pcygiaW1nIikgJiYgKHRoaXMuaW1hZ2VTcmMgPSB0aGlzLiRlbGVtZW50LmF0dHIoInNyYyIpKTsKICAgIHZhciByID0gKHRoaXMucG9zaXRpb24gKyAiIikudG9Mb3dlckNhc2UoKS5tYXRjaCgvXFMrL2cpIHx8IFtdOwogICAgaWYgKHIubGVuZ3RoIDwgMSAmJiByLnB1c2goImNlbnRlciIpLCAxID09IHIubGVuZ3RoICYmIHIucHVzaChyWzBdKSwgKCJ0b3AiID09IHJbMF0gfHwgImJvdHRvbSIgPT0gclswXSB8fCAibGVmdCIgPT0gclsxXSB8fCAicmlnaHQiID09IHJbMV0pICYmIChyID0gW3JbMV0sIHJbMF1dKSwgdGhpcy5wb3NpdGlvblggIT0gcyAmJiAoclswXSA9IHRoaXMucG9zaXRpb25YLnRvTG93ZXJDYXNlKCkpLCB0aGlzLnBvc2l0aW9uWSAhPSBzICYmIChyWzFdID0gdGhpcy5wb3NpdGlvblkudG9Mb3dlckNhc2UoKSksIGgucG9zaXRpb25YID0gclswXSwgaC5wb3NpdGlvblkgPSByWzFdLCAibGVmdCIgIT0gdGhpcy5wb3NpdGlvblggJiYgInJpZ2h0IiAhPSB0aGlzLnBvc2l0aW9uWCAmJiAodGhpcy5wb3NpdGlvblggPSBpc05hTihwYXJzZUludCh0aGlzLnBvc2l0aW9uWCkpID8gImNlbnRlciIgOiBwYXJzZUludCh0aGlzLnBvc2l0aW9uWCkpLCAidG9wIiAhPSB0aGlzLnBvc2l0aW9uWSAmJiAiYm90dG9tIiAhPSB0aGlzLnBvc2l0aW9uWSAmJiAodGhpcy5wb3NpdGlvblkgPSBpc05hTihwYXJzZUludCh0aGlzLnBvc2l0aW9uWSkpID8gImNlbnRlciIgOiBwYXJzZUludCh0aGlzLnBvc2l0aW9uWSkpLCB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvblggKyAoaXNOYU4odGhpcy5wb3NpdGlvblgpID8gIiIgOiAicHgiKSArICIgIiArIHRoaXMucG9zaXRpb25ZICsgKGlzTmFOKHRoaXMucG9zaXRpb25ZKSA/ICIiIDogInB4IiksIG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhpUG9kfGlQaG9uZXxpUGFkKS8pKSByZXR1cm4gdGhpcy5pbWFnZVNyYyAmJiB0aGlzLmlvc0ZpeCAmJiAhdGhpcy4kZWxlbWVudC5pcygiaW1nIikgJiYgdGhpcy4kZWxlbWVudC5jc3MoewogICAgICBiYWNrZ3JvdW5kSW1hZ2U6ICJ1cmwoIiArIHRoaXMuaW1hZ2VTcmMgKyAiKSIsCiAgICAgIGJhY2tncm91bmRTaXplOiAiY292ZXIiLAogICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IHRoaXMucG9zaXRpb24KICAgIH0pLCB0aGlzOwogICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhBbmRyb2lkKS8pKSByZXR1cm4gdGhpcy5pbWFnZVNyYyAmJiB0aGlzLmFuZHJvaWRGaXggJiYgIXRoaXMuJGVsZW1lbnQuaXMoImltZyIpICYmIHRoaXMuJGVsZW1lbnQuY3NzKHsKICAgICAgYmFja2dyb3VuZEltYWdlOiAidXJsKCIgKyB0aGlzLmltYWdlU3JjICsgIikiLAogICAgICBiYWNrZ3JvdW5kU2l6ZTogImNvdmVyIiwKICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uCiAgICB9KSwgdGhpczsKICAgIHRoaXMuJG1pcnJvciA9IHQoIjxkaXYgLz4iKS5wcmVwZW5kVG8oImJvZHkiKTsKICAgIHZhciBhID0gdGhpcy4kZWxlbWVudC5maW5kKCI+LnBhcmFsbGF4LXNsaWRlciIpLAogICAgICAgIG4gPSAhMTsKICAgIDAgPT0gYS5sZW5ndGggPyB0aGlzLiRzbGlkZXIgPSB0KCI8aW1nIC8+IikucHJlcGVuZFRvKHRoaXMuJG1pcnJvcikgOiAodGhpcy4kc2xpZGVyID0gYS5wcmVwZW5kVG8odGhpcy4kbWlycm9yKSwgbiA9ICEwKSwgdGhpcy4kbWlycm9yLmFkZENsYXNzKCJwYXJhbGxheC1taXJyb3IiKS5jc3MoewogICAgICB2aXNpYmlsaXR5OiAiaGlkZGVuIiwKICAgICAgekluZGV4OiB0aGlzLnpJbmRleCwKICAgICAgcG9zaXRpb246ICJmaXhlZCIsCiAgICAgIHRvcDogMCwKICAgICAgbGVmdDogMCwKICAgICAgb3ZlcmZsb3c6ICJoaWRkZW4iCiAgICB9KSwgdGhpcy4kc2xpZGVyLmFkZENsYXNzKCJwYXJhbGxheC1zbGlkZXIiKS5vbmUoImxvYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGgubmF0dXJhbEhlaWdodCAmJiBoLm5hdHVyYWxXaWR0aCB8fCAoaC5uYXR1cmFsSGVpZ2h0ID0gdGhpcy5uYXR1cmFsSGVpZ2h0IHx8IHRoaXMuaGVpZ2h0IHx8IDEsIGgubmF0dXJhbFdpZHRoID0gdGhpcy5uYXR1cmFsV2lkdGggfHwgdGhpcy53aWR0aCB8fCAxKSwgaC5hc3BlY3RSYXRpbyA9IGgubmF0dXJhbFdpZHRoIC8gaC5uYXR1cmFsSGVpZ2h0LCBvLmlzU2V0dXAgfHwgby5zZXR1cCgpLCBvLnNsaWRlcnMucHVzaChoKSwgby5pc0ZyZXNoID0gITEsIG8ucmVxdWVzdFJlbmRlcigpOwogICAgfSksIG4gfHwgKHRoaXMuJHNsaWRlclswXS5zcmMgPSB0aGlzLmltYWdlU3JjKSwgKHRoaXMubmF0dXJhbEhlaWdodCAmJiB0aGlzLm5hdHVyYWxXaWR0aCB8fCB0aGlzLiRzbGlkZXJbMF0uY29tcGxldGUgfHwgYS5sZW5ndGggPiAwKSAmJiB0aGlzLiRzbGlkZXIudHJpZ2dlcigibG9hZCIpOwogIH0KCiAgZnVuY3Rpb24gaChzKSB7CiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGggPSB0KHRoaXMpLAogICAgICAgICAgciA9ICJvYmplY3QiID09IF90eXBlb2YocykgJiYgczsKICAgICAgdGhpcyA9PSBpIHx8IHRoaXMgPT0gZSB8fCBoLmlzKCJib2R5IikgPyBvLmNvbmZpZ3VyZShyKSA6IGguZGF0YSgicHgucGFyYWxsYXgiKSA/ICJvYmplY3QiID09IF90eXBlb2YocykgJiYgdC5leHRlbmQoaC5kYXRhKCJweC5wYXJhbGxheCIpLCByKSA6IChyID0gdC5leHRlbmQoe30sIGguZGF0YSgpLCByKSwgaC5kYXRhKCJweC5wYXJhbGxheCIsIG5ldyBvKHRoaXMsIHIpKSksICJzdHJpbmciID09IHR5cGVvZiBzICYmICgiZGVzdHJveSIgPT0gcyA/IG8uZGVzdHJveSh0aGlzKSA6IG9bc10oKSk7CiAgICB9KTsKICB9CgogICFmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciB0ID0gMCwgZSA9IFsibXMiLCAibW96IiwgIndlYmtpdCIsICJvIl0sIHMgPSAwOyBzIDwgZS5sZW5ndGggJiYgIWkucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3MpIHsKICAgICAgaS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBpW2Vbc10gKyAiUmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIGkuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBpW2Vbc10gKyAiQ2FuY2VsQW5pbWF0aW9uRnJhbWUiXSB8fCBpW2Vbc10gKyAiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIl07CiAgICB9CgogICAgaS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgKGkucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICAgIG8gPSBNYXRoLm1heCgwLCAxNiAtIChzIC0gdCkpLAogICAgICAgICAgaCA9IGkuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgZShzICsgbyk7CiAgICAgIH0sIG8pOwogICAgICByZXR1cm4gdCA9IHMgKyBvLCBoOwogICAgfSksIGkuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgKGkuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbiAodCkgewogICAgICBjbGVhclRpbWVvdXQodCk7CiAgICB9KTsKICB9KCksIHQuZXh0ZW5kKG8ucHJvdG90eXBlLCB7CiAgICBzcGVlZDogLjIsCiAgICBibGVlZDogMCwKICAgIHpJbmRleDogLTEwMCwKICAgIGlvc0ZpeDogITAsCiAgICBhbmRyb2lkRml4OiAhMCwKICAgIHBvc2l0aW9uOiAiY2VudGVyIiwKICAgIG92ZXJTY3JvbGxGaXg6ICExLAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdGhpcy5ib3hXaWR0aCA9IHRoaXMuJGVsZW1lbnQub3V0ZXJXaWR0aCgpLCB0aGlzLmJveEhlaWdodCA9IHRoaXMuJGVsZW1lbnQub3V0ZXJIZWlnaHQoKSArIDIgKiB0aGlzLmJsZWVkLCB0aGlzLmJveE9mZnNldFRvcCA9IHRoaXMuJGVsZW1lbnQub2Zmc2V0KCkudG9wIC0gdGhpcy5ibGVlZCwgdGhpcy5ib3hPZmZzZXRMZWZ0ID0gdGhpcy4kZWxlbWVudC5vZmZzZXQoKS5sZWZ0LCB0aGlzLmJveE9mZnNldEJvdHRvbSA9IHRoaXMuYm94T2Zmc2V0VG9wICsgdGhpcy5ib3hIZWlnaHQ7CiAgICAgIHZhciB0ID0gby53aW5IZWlnaHQsCiAgICAgICAgICBpID0gby5kb2NIZWlnaHQsCiAgICAgICAgICBlID0gTWF0aC5taW4odGhpcy5ib3hPZmZzZXRUb3AsIGkgLSB0KSwKICAgICAgICAgIHMgPSBNYXRoLm1heCh0aGlzLmJveE9mZnNldFRvcCArIHRoaXMuYm94SGVpZ2h0IC0gdCwgMCksCiAgICAgICAgICBoID0gdGhpcy5ib3hIZWlnaHQgKyAoZSAtIHMpICogKDEgLSB0aGlzLnNwZWVkKSB8IDAsCiAgICAgICAgICByID0gKHRoaXMuYm94T2Zmc2V0VG9wIC0gZSkgKiAoMSAtIHRoaXMuc3BlZWQpIHwgMDsKCiAgICAgIGlmIChoICogdGhpcy5hc3BlY3RSYXRpbyA+PSB0aGlzLmJveFdpZHRoKSB7CiAgICAgICAgdGhpcy5pbWFnZVdpZHRoID0gaCAqIHRoaXMuYXNwZWN0UmF0aW8gfCAwLCB0aGlzLmltYWdlSGVpZ2h0ID0gaCwgdGhpcy5vZmZzZXRCYXNlVG9wID0gcjsKICAgICAgICB2YXIgYSA9IHRoaXMuaW1hZ2VXaWR0aCAtIHRoaXMuYm94V2lkdGg7CiAgICAgICAgdGhpcy5vZmZzZXRMZWZ0ID0gImxlZnQiID09IHRoaXMucG9zaXRpb25YID8gMCA6ICJyaWdodCIgPT0gdGhpcy5wb3NpdGlvblggPyAtYSA6IGlzTmFOKHRoaXMucG9zaXRpb25YKSA/IC1hIC8gMiB8IDAgOiBNYXRoLm1heCh0aGlzLnBvc2l0aW9uWCwgLWEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW1hZ2VXaWR0aCA9IHRoaXMuYm94V2lkdGgsIHRoaXMuaW1hZ2VIZWlnaHQgPSB0aGlzLmJveFdpZHRoIC8gdGhpcy5hc3BlY3RSYXRpbyB8IDAsIHRoaXMub2Zmc2V0TGVmdCA9IDA7CiAgICAgICAgdmFyIGEgPSB0aGlzLmltYWdlSGVpZ2h0IC0gaDsKICAgICAgICB0aGlzLm9mZnNldEJhc2VUb3AgPSAidG9wIiA9PSB0aGlzLnBvc2l0aW9uWSA/IHIgOiAiYm90dG9tIiA9PSB0aGlzLnBvc2l0aW9uWSA/IHIgLSBhIDogaXNOYU4odGhpcy5wb3NpdGlvblkpID8gciAtIGEgLyAyIHwgMCA6IHIgKyBNYXRoLm1heCh0aGlzLnBvc2l0aW9uWSwgLWEpOwogICAgICB9CiAgICB9LAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHZhciB0ID0gby5zY3JvbGxUb3AsCiAgICAgICAgICBpID0gby5zY3JvbGxMZWZ0LAogICAgICAgICAgZSA9IHRoaXMub3ZlclNjcm9sbEZpeCA/IG8ub3ZlclNjcm9sbCA6IDAsCiAgICAgICAgICBzID0gdCArIG8ud2luSGVpZ2h0OwogICAgICB0aGlzLmJveE9mZnNldEJvdHRvbSA+IHQgJiYgdGhpcy5ib3hPZmZzZXRUb3AgPD0gcyA/ICh0aGlzLnZpc2liaWxpdHkgPSAidmlzaWJsZSIsIHRoaXMubWlycm9yVG9wID0gdGhpcy5ib3hPZmZzZXRUb3AgLSB0LCB0aGlzLm1pcnJvckxlZnQgPSB0aGlzLmJveE9mZnNldExlZnQgLSBpLCB0aGlzLm9mZnNldFRvcCA9IHRoaXMub2Zmc2V0QmFzZVRvcCAtIHRoaXMubWlycm9yVG9wICogKDEgLSB0aGlzLnNwZWVkKSkgOiB0aGlzLnZpc2liaWxpdHkgPSAiaGlkZGVuIiwgdGhpcy4kbWlycm9yLmNzcyh7CiAgICAgICAgdHJhbnNmb3JtOiAidHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCkiLAogICAgICAgIHZpc2liaWxpdHk6IHRoaXMudmlzaWJpbGl0eSwKICAgICAgICB0b3A6IHRoaXMubWlycm9yVG9wIC0gZSwKICAgICAgICBsZWZ0OiB0aGlzLm1pcnJvckxlZnQsCiAgICAgICAgaGVpZ2h0OiB0aGlzLmJveEhlaWdodCwKICAgICAgICB3aWR0aDogdGhpcy5ib3hXaWR0aAogICAgICB9KSwgdGhpcy4kc2xpZGVyLmNzcyh7CiAgICAgICAgdHJhbnNmb3JtOiAidHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCkiLAogICAgICAgIHBvc2l0aW9uOiAiYWJzb2x1dGUiLAogICAgICAgIHRvcDogdGhpcy5vZmZzZXRUb3AsCiAgICAgICAgbGVmdDogdGhpcy5vZmZzZXRMZWZ0LAogICAgICAgIGhlaWdodDogdGhpcy5pbWFnZUhlaWdodCwKICAgICAgICB3aWR0aDogdGhpcy5pbWFnZVdpZHRoLAogICAgICAgIG1heFdpZHRoOiAibm9uZSIKICAgICAgfSk7CiAgICB9CiAgfSksIHQuZXh0ZW5kKG8sIHsKICAgIHNjcm9sbFRvcDogMCwKICAgIHNjcm9sbExlZnQ6IDAsCiAgICB3aW5IZWlnaHQ6IDAsCiAgICB3aW5XaWR0aDogMCwKICAgIGRvY0hlaWdodDogMSA8PCAzMCwKICAgIGRvY1dpZHRoOiAxIDw8IDMwLAogICAgc2xpZGVyczogW10sCiAgICBpc1JlYWR5OiAhMSwKICAgIGlzRnJlc2g6ICExLAogICAgaXNCdXN5OiAhMSwKICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgICAgaWYgKCF0aGlzLmlzUmVhZHkpIHsKICAgICAgICB2YXIgcyA9IHQoZSksCiAgICAgICAgICAgIGggPSB0KGkpLAogICAgICAgICAgICByID0gZnVuY3Rpb24gcigpIHsKICAgICAgICAgIG8ud2luSGVpZ2h0ID0gaC5oZWlnaHQoKSwgby53aW5XaWR0aCA9IGgud2lkdGgoKSwgby5kb2NIZWlnaHQgPSBzLmhlaWdodCgpLCBvLmRvY1dpZHRoID0gcy53aWR0aCgpOwogICAgICAgIH0sCiAgICAgICAgICAgIGEgPSBmdW5jdGlvbiBhKCkgewogICAgICAgICAgdmFyIHQgPSBoLnNjcm9sbFRvcCgpLAogICAgICAgICAgICAgIGkgPSBvLmRvY0hlaWdodCAtIG8ud2luSGVpZ2h0LAogICAgICAgICAgICAgIGUgPSBvLmRvY1dpZHRoIC0gby53aW5XaWR0aDsKICAgICAgICAgIG8uc2Nyb2xsVG9wID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaSwgdCkpLCBvLnNjcm9sbExlZnQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihlLCBoLnNjcm9sbExlZnQoKSkpLCBvLm92ZXJTY3JvbGwgPSBNYXRoLm1heCh0IC0gaSwgTWF0aC5taW4odCwgMCkpOwogICAgICAgIH07CgogICAgICAgIGgub24oInJlc2l6ZS5weC5wYXJhbGxheCBsb2FkLnB4LnBhcmFsbGF4IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgcigpLCBvLmlzRnJlc2ggPSAhMSwgby5yZXF1ZXN0UmVuZGVyKCk7CiAgICAgICAgfSkub24oInNjcm9sbC5weC5wYXJhbGxheCBsb2FkLnB4LnBhcmFsbGF4IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgYSgpLCBvLnJlcXVlc3RSZW5kZXIoKTsKICAgICAgICB9KSwgcigpLCBhKCksIHRoaXMuaXNSZWFkeSA9ICEwOwogICAgICB9CiAgICB9LAogICAgY29uZmlndXJlOiBmdW5jdGlvbiBjb25maWd1cmUoaSkgewogICAgICAib2JqZWN0IiA9PSBfdHlwZW9mKGkpICYmIChkZWxldGUgaS5yZWZyZXNoLCBkZWxldGUgaS5yZW5kZXIsIHQuZXh0ZW5kKHRoaXMucHJvdG90eXBlLCBpKSk7CiAgICB9LAogICAgcmVmcmVzaDogZnVuY3Rpb24gcmVmcmVzaCgpIHsKICAgICAgdC5lYWNoKHRoaXMuc2xpZGVycywgZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMucmVmcmVzaCgpOwogICAgICB9KSwgdGhpcy5pc0ZyZXNoID0gITA7CiAgICB9LAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7CiAgICAgIHRoaXMuaXNGcmVzaCB8fCB0aGlzLnJlZnJlc2goKSwgdC5lYWNoKHRoaXMuc2xpZGVycywgZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlcXVlc3RSZW5kZXI6IGZ1bmN0aW9uIHJlcXVlc3RSZW5kZXIoKSB7CiAgICAgIHZhciB0ID0gdGhpczsKICAgICAgdGhpcy5pc0J1c3kgfHwgKHRoaXMuaXNCdXN5ID0gITAsIGkucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICB0LnJlbmRlcigpLCB0LmlzQnVzeSA9ICExOwogICAgICB9KSk7CiAgICB9LAogICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveShlKSB7CiAgICAgIHZhciBzLAogICAgICAgICAgaCA9IHQoZSkuZGF0YSgicHgucGFyYWxsYXgiKTsKCiAgICAgIGZvciAoaC4kbWlycm9yLnJlbW92ZSgpLCBzID0gMDsgcyA8IHRoaXMuc2xpZGVycy5sZW5ndGg7IHMgKz0gMSkgewogICAgICAgIHRoaXMuc2xpZGVyc1tzXSA9PSBoICYmIHRoaXMuc2xpZGVycy5zcGxpY2UocywgMSk7CiAgICAgIH0KCiAgICAgIHQoZSkuZGF0YSgicHgucGFyYWxsYXgiLCAhMSksIDAgPT09IHRoaXMuc2xpZGVycy5sZW5ndGggJiYgKHQoaSkub2ZmKCJzY3JvbGwucHgucGFyYWxsYXggcmVzaXplLnB4LnBhcmFsbGF4IGxvYWQucHgucGFyYWxsYXgiKSwgdGhpcy5pc1JlYWR5ID0gITEsIG8uaXNTZXR1cCA9ICExKTsKICAgIH0KICB9KTsKICB2YXIgciA9IHQuZm4ucGFyYWxsYXg7CiAgdC5mbi5wYXJhbGxheCA9IGgsIHQuZm4ucGFyYWxsYXguQ29uc3RydWN0b3IgPSBvLCB0LmZuLnBhcmFsbGF4Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdC5mbi5wYXJhbGxheCA9IHIsIHRoaXM7CiAgfSwgdChlKS5vbigicmVhZHkucHgucGFyYWxsYXguZGF0YS1hcGkiLCBmdW5jdGlvbiAoKSB7CiAgICB0KCdbZGF0YS1wYXJhbGxheD0ic2Nyb2xsIl0nKS5wYXJhbGxheCgpOwogIH0pOwp9KGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7Ci8qID09IGpxdWVyeSBtb3VzZXdoZWVsIHBsdWdpbiA9PSBWZXJzaW9uOiAzLjEuMTMsIExpY2Vuc2U6IE1JVCBMaWNlbnNlIChNSVQpICovCgohZnVuY3Rpb24gKGEpIHsKICAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbImpxdWVyeSJdLCBhKSA6ICJvYmplY3QiID09ICh0eXBlb2YgZXhwb3J0cyA9PT0gInVuZGVmaW5lZCIgPyAidW5kZWZpbmVkIiA6IF90eXBlb2YoZXhwb3J0cykpID8gbW9kdWxlLmV4cG9ydHMgPSBhIDogYShqUXVlcnkpOwp9KGZ1bmN0aW9uIChhKSB7CiAgZnVuY3Rpb24gYihiKSB7CiAgICB2YXIgZyA9IGIgfHwgd2luZG93LmV2ZW50LAogICAgICAgIGggPSBpLmNhbGwoYXJndW1lbnRzLCAxKSwKICAgICAgICBqID0gMCwKICAgICAgICBsID0gMCwKICAgICAgICBtID0gMCwKICAgICAgICBuID0gMCwKICAgICAgICBvID0gMCwKICAgICAgICBwID0gMDsKCiAgICBpZiAoYiA9IGEuZXZlbnQuZml4KGcpLCBiLnR5cGUgPSAibW91c2V3aGVlbCIsICJkZXRhaWwiIGluIGcgJiYgKG0gPSAtMSAqIGcuZGV0YWlsKSwgIndoZWVsRGVsdGEiIGluIGcgJiYgKG0gPSBnLndoZWVsRGVsdGEpLCAid2hlZWxEZWx0YVkiIGluIGcgJiYgKG0gPSBnLndoZWVsRGVsdGFZKSwgIndoZWVsRGVsdGFYIiBpbiBnICYmIChsID0gLTEgKiBnLndoZWVsRGVsdGFYKSwgImF4aXMiIGluIGcgJiYgZy5heGlzID09PSBnLkhPUklaT05UQUxfQVhJUyAmJiAobCA9IC0xICogbSwgbSA9IDApLCBqID0gMCA9PT0gbSA/IGwgOiBtLCAiZGVsdGFZIiBpbiBnICYmIChtID0gLTEgKiBnLmRlbHRhWSwgaiA9IG0pLCAiZGVsdGFYIiBpbiBnICYmIChsID0gZy5kZWx0YVgsIDAgPT09IG0gJiYgKGogPSAtMSAqIGwpKSwgMCAhPT0gbSB8fCAwICE9PSBsKSB7CiAgICAgIGlmICgxID09PSBnLmRlbHRhTW9kZSkgewogICAgICAgIHZhciBxID0gYS5kYXRhKHRoaXMsICJtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0Iik7CiAgICAgICAgaiAqPSBxLCBtICo9IHEsIGwgKj0gcTsKICAgICAgfSBlbHNlIGlmICgyID09PSBnLmRlbHRhTW9kZSkgewogICAgICAgIHZhciByID0gYS5kYXRhKHRoaXMsICJtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Iik7CiAgICAgICAgaiAqPSByLCBtICo9IHIsIGwgKj0gcjsKICAgICAgfQoKICAgICAgaWYgKG4gPSBNYXRoLm1heChNYXRoLmFicyhtKSwgTWF0aC5hYnMobCkpLCAoIWYgfHwgZiA+IG4pICYmIChmID0gbiwgZChnLCBuKSAmJiAoZiAvPSA0MCkpLCBkKGcsIG4pICYmIChqIC89IDQwLCBsIC89IDQwLCBtIC89IDQwKSwgaiA9IE1hdGhbaiA+PSAxID8gImZsb29yIiA6ICJjZWlsIl0oaiAvIGYpLCBsID0gTWF0aFtsID49IDEgPyAiZmxvb3IiIDogImNlaWwiXShsIC8gZiksIG0gPSBNYXRoW20gPj0gMSA/ICJmbG9vciIgOiAiY2VpbCJdKG0gLyBmKSwgay5zZXR0aW5ncy5ub3JtYWxpemVPZmZzZXQgJiYgdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHsKICAgICAgICB2YXIgcyA9IHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgbyA9IGIuY2xpZW50WCAtIHMubGVmdCwgcCA9IGIuY2xpZW50WSAtIHMudG9wOwogICAgICB9CgogICAgICByZXR1cm4gYi5kZWx0YVggPSBsLCBiLmRlbHRhWSA9IG0sIGIuZGVsdGFGYWN0b3IgPSBmLCBiLm9mZnNldFggPSBvLCBiLm9mZnNldFkgPSBwLCBiLmRlbHRhTW9kZSA9IDAsIGgudW5zaGlmdChiLCBqLCBsLCBtKSwgZSAmJiBjbGVhclRpbWVvdXQoZSksIGUgPSBzZXRUaW1lb3V0KGMsIDIwMCksIChhLmV2ZW50LmRpc3BhdGNoIHx8IGEuZXZlbnQuaGFuZGxlKS5hcHBseSh0aGlzLCBoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGMoKSB7CiAgICBmID0gbnVsbDsKICB9CgogIGZ1bmN0aW9uIGQoYSwgYikgewogICAgcmV0dXJuIGsuc2V0dGluZ3MuYWRqdXN0T2xkRGVsdGFzICYmICJtb3VzZXdoZWVsIiA9PT0gYS50eXBlICYmIGIgJSAxMjAgPT09IDA7CiAgfQoKICB2YXIgZSwKICAgICAgZiwKICAgICAgZyA9IFsid2hlZWwiLCAibW91c2V3aGVlbCIsICJET01Nb3VzZVNjcm9sbCIsICJNb3pNb3VzZVBpeGVsU2Nyb2xsIl0sCiAgICAgIGggPSAib253aGVlbCIgaW4gZG9jdW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID49IDkgPyBbIndoZWVsIl0gOiBbIm1vdXNld2hlZWwiLCAiRG9tTW91c2VTY3JvbGwiLCAiTW96TW91c2VQaXhlbFNjcm9sbCJdLAogICAgICBpID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwogIGlmIChhLmV2ZW50LmZpeEhvb2tzKSBmb3IgKHZhciBqID0gZy5sZW5ndGg7IGo7KSB7CiAgICBhLmV2ZW50LmZpeEhvb2tzW2dbLS1qXV0gPSBhLmV2ZW50Lm1vdXNlSG9va3M7CiAgfQogIHZhciBrID0gYS5ldmVudC5zcGVjaWFsLm1vdXNld2hlZWwgPSB7CiAgICB2ZXJzaW9uOiAiMy4xLjEyIiwKICAgIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgICAgaWYgKHRoaXMuYWRkRXZlbnRMaXN0ZW5lcikgZm9yICh2YXIgYyA9IGgubGVuZ3RoOyBjOykgewogICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihoWy0tY10sIGIsICExKTsKICAgICAgfSBlbHNlIHRoaXMub25tb3VzZXdoZWVsID0gYjsKICAgICAgYS5kYXRhKHRoaXMsICJtb3VzZXdoZWVsLWxpbmUtaGVpZ2h0Iiwgay5nZXRMaW5lSGVpZ2h0KHRoaXMpKSwgYS5kYXRhKHRoaXMsICJtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Iiwgay5nZXRQYWdlSGVpZ2h0KHRoaXMpKTsKICAgIH0sCiAgICB0ZWFyZG93bjogZnVuY3Rpb24gdGVhcmRvd24oKSB7CiAgICAgIGlmICh0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpIGZvciAodmFyIGMgPSBoLmxlbmd0aDsgYzspIHsKICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoaFstLWNdLCBiLCAhMSk7CiAgICAgIH0gZWxzZSB0aGlzLm9ubW91c2V3aGVlbCA9IG51bGw7CiAgICAgIGEucmVtb3ZlRGF0YSh0aGlzLCAibW91c2V3aGVlbC1saW5lLWhlaWdodCIpLCBhLnJlbW92ZURhdGEodGhpcywgIm1vdXNld2hlZWwtcGFnZS1oZWlnaHQiKTsKICAgIH0sCiAgICBnZXRMaW5lSGVpZ2h0OiBmdW5jdGlvbiBnZXRMaW5lSGVpZ2h0KGIpIHsKICAgICAgdmFyIGMgPSBhKGIpLAogICAgICAgICAgZCA9IGNbIm9mZnNldFBhcmVudCIgaW4gYS5mbiA/ICJvZmZzZXRQYXJlbnQiIDogInBhcmVudCJdKCk7CiAgICAgIHJldHVybiBkLmxlbmd0aCB8fCAoZCA9IGEoImJvZHkiKSksIHBhcnNlSW50KGQuY3NzKCJmb250U2l6ZSIpLCAxMCkgfHwgcGFyc2VJbnQoYy5jc3MoImZvbnRTaXplIiksIDEwKSB8fCAxNjsKICAgIH0sCiAgICBnZXRQYWdlSGVpZ2h0OiBmdW5jdGlvbiBnZXRQYWdlSGVpZ2h0KGIpIHsKICAgICAgcmV0dXJuIGEoYikuaGVpZ2h0KCk7CiAgICB9LAogICAgc2V0dGluZ3M6IHsKICAgICAgYWRqdXN0T2xkRGVsdGFzOiAhMCwKICAgICAgbm9ybWFsaXplT2Zmc2V0OiAhMAogICAgfQogIH07CiAgYS5mbi5leHRlbmQoewogICAgbW91c2V3aGVlbDogZnVuY3Rpb24gbW91c2V3aGVlbChhKSB7CiAgICAgIHJldHVybiBhID8gdGhpcy5iaW5kKCJtb3VzZXdoZWVsIiwgYSkgOiB0aGlzLnRyaWdnZXIoIm1vdXNld2hlZWwiKTsKICAgIH0sCiAgICB1bm1vdXNld2hlZWw6IGZ1bmN0aW9uIHVubW91c2V3aGVlbChhKSB7CiAgICAgIHJldHVybiB0aGlzLnVuYmluZCgibW91c2V3aGVlbCIsIGEpOwogICAgfQogIH0pOwp9KTsKIWZ1bmN0aW9uIChhKSB7CiAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGVmaW5lICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWyJqcXVlcnkiXSwgYSkgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IG1vZHVsZS5leHBvcnRzID0gYSA6IGEoalF1ZXJ5KTsKfShmdW5jdGlvbiAoYSkgewogIGZ1bmN0aW9uIGIoYikgewogICAgdmFyIGcgPSBiIHx8IHdpbmRvdy5ldmVudCwKICAgICAgICBoID0gaS5jYWxsKGFyZ3VtZW50cywgMSksCiAgICAgICAgaiA9IDAsCiAgICAgICAgbCA9IDAsCiAgICAgICAgbSA9IDAsCiAgICAgICAgbiA9IDAsCiAgICAgICAgbyA9IDAsCiAgICAgICAgcCA9IDA7CgogICAgaWYgKGIgPSBhLmV2ZW50LmZpeChnKSwgYi50eXBlID0gIm1vdXNld2hlZWwiLCAiZGV0YWlsIiBpbiBnICYmIChtID0gLTEgKiBnLmRldGFpbCksICJ3aGVlbERlbHRhIiBpbiBnICYmIChtID0gZy53aGVlbERlbHRhKSwgIndoZWVsRGVsdGFZIiBpbiBnICYmIChtID0gZy53aGVlbERlbHRhWSksICJ3aGVlbERlbHRhWCIgaW4gZyAmJiAobCA9IC0xICogZy53aGVlbERlbHRhWCksICJheGlzIiBpbiBnICYmIGcuYXhpcyA9PT0gZy5IT1JJWk9OVEFMX0FYSVMgJiYgKGwgPSAtMSAqIG0sIG0gPSAwKSwgaiA9IDAgPT09IG0gPyBsIDogbSwgImRlbHRhWSIgaW4gZyAmJiAobSA9IC0xICogZy5kZWx0YVksIGogPSBtKSwgImRlbHRhWCIgaW4gZyAmJiAobCA9IGcuZGVsdGFYLCAwID09PSBtICYmIChqID0gLTEgKiBsKSksIDAgIT09IG0gfHwgMCAhPT0gbCkgewogICAgICBpZiAoMSA9PT0gZy5kZWx0YU1vZGUpIHsKICAgICAgICB2YXIgcSA9IGEuZGF0YSh0aGlzLCAibW91c2V3aGVlbC1saW5lLWhlaWdodCIpOwogICAgICAgIGogKj0gcSwgbSAqPSBxLCBsICo9IHE7CiAgICAgIH0gZWxzZSBpZiAoMiA9PT0gZy5kZWx0YU1vZGUpIHsKICAgICAgICB2YXIgciA9IGEuZGF0YSh0aGlzLCAibW91c2V3aGVlbC1wYWdlLWhlaWdodCIpOwogICAgICAgIGogKj0gciwgbSAqPSByLCBsICo9IHI7CiAgICAgIH0KCiAgICAgIGlmIChuID0gTWF0aC5tYXgoTWF0aC5hYnMobSksIE1hdGguYWJzKGwpKSwgKCFmIHx8IGYgPiBuKSAmJiAoZiA9IG4sIGQoZywgbikgJiYgKGYgLz0gNDApKSwgZChnLCBuKSAmJiAoaiAvPSA0MCwgbCAvPSA0MCwgbSAvPSA0MCksIGogPSBNYXRoW2ogPj0gMSA/ICJmbG9vciIgOiAiY2VpbCJdKGogLyBmKSwgbCA9IE1hdGhbbCA+PSAxID8gImZsb29yIiA6ICJjZWlsIl0obCAvIGYpLCBtID0gTWF0aFttID49IDEgPyAiZmxvb3IiIDogImNlaWwiXShtIC8gZiksIGsuc2V0dGluZ3Mubm9ybWFsaXplT2Zmc2V0ICYmIHRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KSB7CiAgICAgICAgdmFyIHMgPSB0aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIG8gPSBiLmNsaWVudFggLSBzLmxlZnQsIHAgPSBiLmNsaWVudFkgLSBzLnRvcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGIuZGVsdGFYID0gbCwgYi5kZWx0YVkgPSBtLCBiLmRlbHRhRmFjdG9yID0gZiwgYi5vZmZzZXRYID0gbywgYi5vZmZzZXRZID0gcCwgYi5kZWx0YU1vZGUgPSAwLCBoLnVuc2hpZnQoYiwgaiwgbCwgbSksIGUgJiYgY2xlYXJUaW1lb3V0KGUpLCBlID0gc2V0VGltZW91dChjLCAyMDApLCAoYS5ldmVudC5kaXNwYXRjaCB8fCBhLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcywgaCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBjKCkgewogICAgZiA9IG51bGw7CiAgfQoKICBmdW5jdGlvbiBkKGEsIGIpIHsKICAgIHJldHVybiBrLnNldHRpbmdzLmFkanVzdE9sZERlbHRhcyAmJiAibW91c2V3aGVlbCIgPT09IGEudHlwZSAmJiBiICUgMTIwID09PSAwOwogIH0KCiAgdmFyIGUsCiAgICAgIGYsCiAgICAgIGcgPSBbIndoZWVsIiwgIm1vdXNld2hlZWwiLCAiRE9NTW91c2VTY3JvbGwiLCAiTW96TW91c2VQaXhlbFNjcm9sbCJdLAogICAgICBoID0gIm9ud2hlZWwiIGluIGRvY3VtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+PSA5ID8gWyJ3aGVlbCJdIDogWyJtb3VzZXdoZWVsIiwgIkRvbU1vdXNlU2Nyb2xsIiwgIk1vek1vdXNlUGl4ZWxTY3JvbGwiXSwKICAgICAgaSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTsKICBpZiAoYS5ldmVudC5maXhIb29rcykgZm9yICh2YXIgaiA9IGcubGVuZ3RoOyBqOykgewogICAgYS5ldmVudC5maXhIb29rc1tnWy0tal1dID0gYS5ldmVudC5tb3VzZUhvb2tzOwogIH0KICB2YXIgayA9IGEuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID0gewogICAgdmVyc2lvbjogIjMuMS4xMiIsCiAgICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICAgIGlmICh0aGlzLmFkZEV2ZW50TGlzdGVuZXIpIGZvciAodmFyIGMgPSBoLmxlbmd0aDsgYzspIHsKICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoaFstLWNdLCBiLCAhMSk7CiAgICAgIH0gZWxzZSB0aGlzLm9ubW91c2V3aGVlbCA9IGI7CiAgICAgIGEuZGF0YSh0aGlzLCAibW91c2V3aGVlbC1saW5lLWhlaWdodCIsIGsuZ2V0TGluZUhlaWdodCh0aGlzKSksIGEuZGF0YSh0aGlzLCAibW91c2V3aGVlbC1wYWdlLWhlaWdodCIsIGsuZ2V0UGFnZUhlaWdodCh0aGlzKSk7CiAgICB9LAogICAgdGVhcmRvd246IGZ1bmN0aW9uIHRlYXJkb3duKCkgewogICAgICBpZiAodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKSBmb3IgKHZhciBjID0gaC5sZW5ndGg7IGM7KSB7CiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGhbLS1jXSwgYiwgITEpOwogICAgICB9IGVsc2UgdGhpcy5vbm1vdXNld2hlZWwgPSBudWxsOwogICAgICBhLnJlbW92ZURhdGEodGhpcywgIm1vdXNld2hlZWwtbGluZS1oZWlnaHQiKSwgYS5yZW1vdmVEYXRhKHRoaXMsICJtb3VzZXdoZWVsLXBhZ2UtaGVpZ2h0Iik7CiAgICB9LAogICAgZ2V0TGluZUhlaWdodDogZnVuY3Rpb24gZ2V0TGluZUhlaWdodChiKSB7CiAgICAgIHZhciBjID0gYShiKSwKICAgICAgICAgIGQgPSBjWyJvZmZzZXRQYXJlbnQiIGluIGEuZm4gPyAib2Zmc2V0UGFyZW50IiA6ICJwYXJlbnQiXSgpOwogICAgICByZXR1cm4gZC5sZW5ndGggfHwgKGQgPSBhKCJib2R5IikpLCBwYXJzZUludChkLmNzcygiZm9udFNpemUiKSwgMTApIHx8IHBhcnNlSW50KGMuY3NzKCJmb250U2l6ZSIpLCAxMCkgfHwgMTY7CiAgICB9LAogICAgZ2V0UGFnZUhlaWdodDogZnVuY3Rpb24gZ2V0UGFnZUhlaWdodChiKSB7CiAgICAgIHJldHVybiBhKGIpLmhlaWdodCgpOwogICAgfSwKICAgIHNldHRpbmdzOiB7CiAgICAgIGFkanVzdE9sZERlbHRhczogITAsCiAgICAgIG5vcm1hbGl6ZU9mZnNldDogITAKICAgIH0KICB9OwogIGEuZm4uZXh0ZW5kKHsKICAgIG1vdXNld2hlZWw6IGZ1bmN0aW9uIG1vdXNld2hlZWwoYSkgewogICAgICByZXR1cm4gYSA/IHRoaXMuYmluZCgibW91c2V3aGVlbCIsIGEpIDogdGhpcy50cmlnZ2VyKCJtb3VzZXdoZWVsIik7CiAgICB9LAogICAgdW5tb3VzZXdoZWVsOiBmdW5jdGlvbiB1bm1vdXNld2hlZWwoYSkgewogICAgICByZXR1cm4gdGhpcy51bmJpbmQoIm1vdXNld2hlZWwiLCBhKTsKICAgIH0KICB9KTsKfSk7Ci8qID09IG1hbGlodSBqcXVlcnkgY3VzdG9tIHNjcm9sbGJhciBwbHVnaW4gPT0gVmVyc2lvbjogMy4xLjMsIExpY2Vuc2U6IE1JVCBMaWNlbnNlIChNSVQpICovCgohZnVuY3Rpb24gKGUpIHsKICAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzID8gbW9kdWxlLmV4cG9ydHMgPSBlIDogZShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpOwp9KGZ1bmN0aW9uIChlKSB7CiAgIWZ1bmN0aW9uICh0KSB7CiAgICB2YXIgbyA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kLAogICAgICAgIGEgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzLAogICAgICAgIG4gPSAiaHR0cHM6IiA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICJodHRwczoiIDogImh0dHA6IiwKICAgICAgICBpID0gImNkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qcXVlcnktbW91c2V3aGVlbC8zLjEuMTMvanF1ZXJ5Lm1vdXNld2hlZWwubWluLmpzIjsKICAgIG8gfHwgKGEgPyByZXF1aXJlKCJqcXVlcnktbW91c2V3aGVlbCIpKGUpIDogZS5ldmVudC5zcGVjaWFsLm1vdXNld2hlZWwgfHwgZSgiaGVhZCIpLmFwcGVuZChkZWNvZGVVUkkoIiUzQ3NjcmlwdCBzcmM9IiArIG4gKyAiLy8iICsgaSArICIlM0UlM0Mvc2NyaXB0JTNFIikpKSwgdCgpOwogIH0oZnVuY3Rpb24gKCkgewogICAgdmFyIHQsCiAgICAgICAgbyA9ICJtQ3VzdG9tU2Nyb2xsYmFyIiwKICAgICAgICBhID0gIm1DUyIsCiAgICAgICAgbiA9ICIubUN1c3RvbVNjcm9sbGJhciIsCiAgICAgICAgaSA9IHsKICAgICAgc2V0VG9wOiAwLAogICAgICBzZXRMZWZ0OiAwLAogICAgICBheGlzOiAieSIsCiAgICAgIHNjcm9sbGJhclBvc2l0aW9uOiAiaW5zaWRlIiwKICAgICAgc2Nyb2xsSW5lcnRpYTogOTUwLAogICAgICBhdXRvRHJhZ2dlckxlbmd0aDogITAsCiAgICAgIGFsd2F5c1Nob3dTY3JvbGxiYXI6IDAsCiAgICAgIHNuYXBPZmZzZXQ6IDAsCiAgICAgIG1vdXNlV2hlZWw6IHsKICAgICAgICBlbmFibGU6ICEwLAogICAgICAgIHNjcm9sbEFtb3VudDogImF1dG8iLAogICAgICAgIGF4aXM6ICJ5IiwKICAgICAgICBkZWx0YUZhY3RvcjogImF1dG8iLAogICAgICAgIGRpc2FibGVPdmVyOiBbInNlbGVjdCIsICJvcHRpb24iLCAia2V5Z2VuIiwgImRhdGFsaXN0IiwgInRleHRhcmVhIl0KICAgICAgfSwKICAgICAgc2Nyb2xsQnV0dG9uczogewogICAgICAgIHNjcm9sbFR5cGU6ICJzdGVwbGVzcyIsCiAgICAgICAgc2Nyb2xsQW1vdW50OiAiYXV0byIKICAgICAgfSwKICAgICAga2V5Ym9hcmQ6IHsKICAgICAgICBlbmFibGU6ICEwLAogICAgICAgIHNjcm9sbFR5cGU6ICJzdGVwbGVzcyIsCiAgICAgICAgc2Nyb2xsQW1vdW50OiAiYXV0byIKICAgICAgfSwKICAgICAgY29udGVudFRvdWNoU2Nyb2xsOiAyNSwKICAgICAgZG9jdW1lbnRUb3VjaFNjcm9sbDogITAsCiAgICAgIGFkdmFuY2VkOiB7CiAgICAgICAgYXV0b1Njcm9sbE9uRm9jdXM6ICJpbnB1dCx0ZXh0YXJlYSxzZWxlY3QsYnV0dG9uLGRhdGFsaXN0LGtleWdlbixhW3RhYmluZGV4XSxhcmVhLG9iamVjdCxbY29udGVudGVkaXRhYmxlPSd0cnVlJ10iLAogICAgICAgIHVwZGF0ZU9uQ29udGVudFJlc2l6ZTogITAsCiAgICAgICAgdXBkYXRlT25JbWFnZUxvYWQ6ICJhdXRvIiwKICAgICAgICBhdXRvVXBkYXRlVGltZW91dDogNjAKICAgICAgfSwKICAgICAgdGhlbWU6ICJsaWdodCIsCiAgICAgIGNhbGxiYWNrczogewogICAgICAgIG9uVG90YWxTY3JvbGxPZmZzZXQ6IDAsCiAgICAgICAgb25Ub3RhbFNjcm9sbEJhY2tPZmZzZXQ6IDAsCiAgICAgICAgYWx3YXlzVHJpZ2dlck9mZnNldHM6ICEwCiAgICAgIH0KICAgIH0sCiAgICAgICAgciA9IDAsCiAgICAgICAgbCA9IHt9LAogICAgICAgIHMgPSB3aW5kb3cuYXR0YWNoRXZlbnQgJiYgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyID8gMSA6IDAsCiAgICAgICAgYyA9ICExLAogICAgICAgIGQgPSBbIm1DU0JfZHJhZ2dlcl9vbkRyYWciLCAibUNTQl9zY3JvbGxUb29sc19vbkRyYWciLCAibUNTX2ltZ19sb2FkZWQiLCAibUNTX2Rpc2FibGVkIiwgIm1DU19kZXN0cm95ZWQiLCAibUNTX25vX3Njcm9sbGJhciIsICJtQ1MtYXV0b0hpZGUiLCAibUNTLWRpci1ydGwiLCAibUNTX25vX3Njcm9sbGJhcl95IiwgIm1DU19ub19zY3JvbGxiYXJfeCIsICJtQ1NfeV9oaWRkZW4iLCAibUNTX3hfaGlkZGVuIiwgIm1DU0JfZHJhZ2dlckNvbnRhaW5lciIsICJtQ1NCX2J1dHRvblVwIiwgIm1DU0JfYnV0dG9uRG93biIsICJtQ1NCX2J1dHRvbkxlZnQiLCAibUNTQl9idXR0b25SaWdodCJdLAogICAgICAgIHUgPSB7CiAgICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQodCkgewogICAgICAgIHZhciB0ID0gZS5leHRlbmQoITAsIHt9LCBpLCB0KSwKICAgICAgICAgICAgbyA9IGYuY2FsbCh0aGlzKTsKCiAgICAgICAgaWYgKHQubGl2ZSkgewogICAgICAgICAgdmFyIHMgPSB0LmxpdmVTZWxlY3RvciB8fCB0aGlzLnNlbGVjdG9yIHx8IG4sCiAgICAgICAgICAgICAgYyA9IGUocyk7CiAgICAgICAgICBpZiAoIm9mZiIgPT09IHQubGl2ZSkgcmV0dXJuIHZvaWQgbShzKTsKICAgICAgICAgIGxbc10gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgYy5tQ3VzdG9tU2Nyb2xsYmFyKHQpLCAib25jZSIgPT09IHQubGl2ZSAmJiBjLmxlbmd0aCAmJiBtKHMpOwogICAgICAgICAgfSwgNTAwKTsKICAgICAgICB9IGVsc2UgbShzKTsKCiAgICAgICAgcmV0dXJuIHQuc2V0V2lkdGggPSB0LnNldF93aWR0aCA/IHQuc2V0X3dpZHRoIDogdC5zZXRXaWR0aCwgdC5zZXRIZWlnaHQgPSB0LnNldF9oZWlnaHQgPyB0LnNldF9oZWlnaHQgOiB0LnNldEhlaWdodCwgdC5heGlzID0gdC5ob3Jpem9udGFsU2Nyb2xsID8gIngiIDogcCh0LmF4aXMpLCB0LnNjcm9sbEluZXJ0aWEgPSB0LnNjcm9sbEluZXJ0aWEgPiAwICYmIHQuc2Nyb2xsSW5lcnRpYSA8IDE3ID8gMTcgOiB0LnNjcm9sbEluZXJ0aWEsICJvYmplY3QiICE9IF90eXBlb2YodC5tb3VzZVdoZWVsKSAmJiAxID09IHQubW91c2VXaGVlbCAmJiAodC5tb3VzZVdoZWVsID0gewogICAgICAgICAgZW5hYmxlOiAhMCwKICAgICAgICAgIHNjcm9sbEFtb3VudDogImF1dG8iLAogICAgICAgICAgYXhpczogInkiLAogICAgICAgICAgcHJldmVudERlZmF1bHQ6ICExLAogICAgICAgICAgZGVsdGFGYWN0b3I6ICJhdXRvIiwKICAgICAgICAgIG5vcm1hbGl6ZURlbHRhOiAhMSwKICAgICAgICAgIGludmVydDogITEKICAgICAgICB9KSwgdC5tb3VzZVdoZWVsLnNjcm9sbEFtb3VudCA9IHQubW91c2VXaGVlbFBpeGVscyA/IHQubW91c2VXaGVlbFBpeGVscyA6IHQubW91c2VXaGVlbC5zY3JvbGxBbW91bnQsIHQubW91c2VXaGVlbC5ub3JtYWxpemVEZWx0YSA9IHQuYWR2YW5jZWQubm9ybWFsaXplTW91c2VXaGVlbERlbHRhID8gdC5hZHZhbmNlZC5ub3JtYWxpemVNb3VzZVdoZWVsRGVsdGEgOiB0Lm1vdXNlV2hlZWwubm9ybWFsaXplRGVsdGEsIHQuc2Nyb2xsQnV0dG9ucy5zY3JvbGxUeXBlID0gZyh0LnNjcm9sbEJ1dHRvbnMuc2Nyb2xsVHlwZSksIGgodCksIGUobykuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgbyA9IGUodGhpcyk7CgogICAgICAgICAgaWYgKCFvLmRhdGEoYSkpIHsKICAgICAgICAgICAgby5kYXRhKGEsIHsKICAgICAgICAgICAgICBpZHg6ICsrciwKICAgICAgICAgICAgICBvcHQ6IHQsCiAgICAgICAgICAgICAgc2Nyb2xsUmF0aW86IHsKICAgICAgICAgICAgICAgIHk6IG51bGwsCiAgICAgICAgICAgICAgICB4OiBudWxsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvdmVyZmxvd2VkOiBudWxsLAogICAgICAgICAgICAgIGNvbnRlbnRSZXNldDogewogICAgICAgICAgICAgICAgeTogbnVsbCwKICAgICAgICAgICAgICAgIHg6IG51bGwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGJpbmRFdmVudHM6ICExLAogICAgICAgICAgICAgIHR3ZWVuUnVubmluZzogITEsCiAgICAgICAgICAgICAgc2VxdWVudGlhbDoge30sCiAgICAgICAgICAgICAgbGFuZ0Rpcjogby5jc3MoImRpcmVjdGlvbiIpLAogICAgICAgICAgICAgIGNiT2Zmc2V0czogbnVsbCwKICAgICAgICAgICAgICB0cmlnZ2VyOiBudWxsLAogICAgICAgICAgICAgIHBvbGw6IHsKICAgICAgICAgICAgICAgIHNpemU6IHsKICAgICAgICAgICAgICAgICAgbzogMCwKICAgICAgICAgICAgICAgICAgbjogMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGltZzogewogICAgICAgICAgICAgICAgICBvOiAwLAogICAgICAgICAgICAgICAgICBuOiAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2hhbmdlOiB7CiAgICAgICAgICAgICAgICAgIG86IDAsCiAgICAgICAgICAgICAgICAgIG46IDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgbiA9IG8uZGF0YShhKSwKICAgICAgICAgICAgICAgIGkgPSBuLm9wdCwKICAgICAgICAgICAgICAgIGwgPSBvLmRhdGEoIm1jcy1heGlzIiksCiAgICAgICAgICAgICAgICBzID0gby5kYXRhKCJtY3Mtc2Nyb2xsYmFyLXBvc2l0aW9uIiksCiAgICAgICAgICAgICAgICBjID0gby5kYXRhKCJtY3MtdGhlbWUiKTsKICAgICAgICAgICAgbCAmJiAoaS5heGlzID0gbCksIHMgJiYgKGkuc2Nyb2xsYmFyUG9zaXRpb24gPSBzKSwgYyAmJiAoaS50aGVtZSA9IGMsIGgoaSkpLCB2LmNhbGwodGhpcyksIG4gJiYgaS5jYWxsYmFja3Mub25DcmVhdGUgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgaS5jYWxsYmFja3Mub25DcmVhdGUgJiYgaS5jYWxsYmFja3Mub25DcmVhdGUuY2FsbCh0aGlzKSwgZSgiI21DU0JfIiArIG4uaWR4ICsgIl9jb250YWluZXIgaW1nOm5vdCguIiArIGRbMl0gKyAiKSIpLmFkZENsYXNzKGRbMl0pLCB1LnVwZGF0ZS5jYWxsKG51bGwsIG8pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9LAogICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0LCBvKSB7CiAgICAgICAgdmFyIG4gPSB0IHx8IGYuY2FsbCh0aGlzKTsKICAgICAgICByZXR1cm4gZShuKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTsKCiAgICAgICAgICBpZiAodC5kYXRhKGEpKSB7CiAgICAgICAgICAgIHZhciBuID0gdC5kYXRhKGEpLAogICAgICAgICAgICAgICAgaSA9IG4ub3B0LAogICAgICAgICAgICAgICAgciA9IGUoIiNtQ1NCXyIgKyBuLmlkeCArICJfY29udGFpbmVyIiksCiAgICAgICAgICAgICAgICBsID0gZSgiI21DU0JfIiArIG4uaWR4KSwKICAgICAgICAgICAgICAgIHMgPSBbZSgiI21DU0JfIiArIG4uaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsIiksIGUoIiNtQ1NCXyIgKyBuLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsIildOwogICAgICAgICAgICBpZiAoIXIubGVuZ3RoKSByZXR1cm47CiAgICAgICAgICAgIG4udHdlZW5SdW5uaW5nICYmIE4odCksIG8gJiYgbiAmJiBpLmNhbGxiYWNrcy5vbkJlZm9yZVVwZGF0ZSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBpLmNhbGxiYWNrcy5vbkJlZm9yZVVwZGF0ZSAmJiBpLmNhbGxiYWNrcy5vbkJlZm9yZVVwZGF0ZS5jYWxsKHRoaXMpLCB0Lmhhc0NsYXNzKGRbM10pICYmIHQucmVtb3ZlQ2xhc3MoZFszXSksIHQuaGFzQ2xhc3MoZFs0XSkgJiYgdC5yZW1vdmVDbGFzcyhkWzRdKSwgbC5jc3MoIm1heC1oZWlnaHQiLCAibm9uZSIpLCBsLmhlaWdodCgpICE9PSB0LmhlaWdodCgpICYmIGwuY3NzKCJtYXgtaGVpZ2h0IiwgdC5oZWlnaHQoKSksIF8uY2FsbCh0aGlzKSwgInkiID09PSBpLmF4aXMgfHwgaS5hZHZhbmNlZC5hdXRvRXhwYW5kSG9yaXpvbnRhbFNjcm9sbCB8fCByLmNzcygid2lkdGgiLCB4KHIpKSwgbi5vdmVyZmxvd2VkID0geS5jYWxsKHRoaXMpLCBNLmNhbGwodGhpcyksIGkuYXV0b0RyYWdnZXJMZW5ndGggJiYgUy5jYWxsKHRoaXMpLCBiLmNhbGwodGhpcyksIFQuY2FsbCh0aGlzKTsKICAgICAgICAgICAgdmFyIGMgPSBbTWF0aC5hYnMoclswXS5vZmZzZXRUb3ApLCBNYXRoLmFicyhyWzBdLm9mZnNldExlZnQpXTsKICAgICAgICAgICAgIngiICE9PSBpLmF4aXMgJiYgKG4ub3ZlcmZsb3dlZFswXSA/IHNbMF0uaGVpZ2h0KCkgPiBzWzBdLnBhcmVudCgpLmhlaWdodCgpID8gQi5jYWxsKHRoaXMpIDogKFYodCwgY1swXS50b1N0cmluZygpLCB7CiAgICAgICAgICAgICAgZGlyOiAieSIsCiAgICAgICAgICAgICAgZHVyOiAwLAogICAgICAgICAgICAgIG92ZXJ3cml0ZTogIm5vbmUiCiAgICAgICAgICAgIH0pLCBuLmNvbnRlbnRSZXNldC55ID0gbnVsbCkgOiAoQi5jYWxsKHRoaXMpLCAieSIgPT09IGkuYXhpcyA/IGsuY2FsbCh0aGlzKSA6ICJ5eCIgPT09IGkuYXhpcyAmJiBuLm92ZXJmbG93ZWRbMV0gJiYgVih0LCBjWzFdLnRvU3RyaW5nKCksIHsKICAgICAgICAgICAgICBkaXI6ICJ4IiwKICAgICAgICAgICAgICBkdXI6IDAsCiAgICAgICAgICAgICAgb3ZlcndyaXRlOiAibm9uZSIKICAgICAgICAgICAgfSkpKSwgInkiICE9PSBpLmF4aXMgJiYgKG4ub3ZlcmZsb3dlZFsxXSA/IHNbMV0ud2lkdGgoKSA+IHNbMV0ucGFyZW50KCkud2lkdGgoKSA/IEIuY2FsbCh0aGlzKSA6IChWKHQsIGNbMV0udG9TdHJpbmcoKSwgewogICAgICAgICAgICAgIGRpcjogIngiLAogICAgICAgICAgICAgIGR1cjogMCwKICAgICAgICAgICAgICBvdmVyd3JpdGU6ICJub25lIgogICAgICAgICAgICB9KSwgbi5jb250ZW50UmVzZXQueCA9IG51bGwpIDogKEIuY2FsbCh0aGlzKSwgIngiID09PSBpLmF4aXMgPyBrLmNhbGwodGhpcykgOiAieXgiID09PSBpLmF4aXMgJiYgbi5vdmVyZmxvd2VkWzBdICYmIFYodCwgY1swXS50b1N0cmluZygpLCB7CiAgICAgICAgICAgICAgZGlyOiAieSIsCiAgICAgICAgICAgICAgZHVyOiAwLAogICAgICAgICAgICAgIG92ZXJ3cml0ZTogIm5vbmUiCiAgICAgICAgICAgIH0pKSksIG8gJiYgbiAmJiAoMiA9PT0gbyAmJiBpLmNhbGxiYWNrcy5vbkltYWdlTG9hZCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBpLmNhbGxiYWNrcy5vbkltYWdlTG9hZCA/IGkuY2FsbGJhY2tzLm9uSW1hZ2VMb2FkLmNhbGwodGhpcykgOiAzID09PSBvICYmIGkuY2FsbGJhY2tzLm9uU2VsZWN0b3JDaGFuZ2UgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgaS5jYWxsYmFja3Mub25TZWxlY3RvckNoYW5nZSA/IGkuY2FsbGJhY2tzLm9uU2VsZWN0b3JDaGFuZ2UuY2FsbCh0aGlzKSA6IGkuY2FsbGJhY2tzLm9uVXBkYXRlICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGkuY2FsbGJhY2tzLm9uVXBkYXRlICYmIGkuY2FsbGJhY2tzLm9uVXBkYXRlLmNhbGwodGhpcykpLCBYLmNhbGwodGhpcyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHNjcm9sbFRvOiBmdW5jdGlvbiBzY3JvbGxUbyh0LCBvKSB7CiAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB0ICYmIG51bGwgIT0gdCkgewogICAgICAgICAgdmFyIG4gPSBmLmNhbGwodGhpcyk7CiAgICAgICAgICByZXR1cm4gZShuKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIG4gPSBlKHRoaXMpOwoKICAgICAgICAgICAgaWYgKG4uZGF0YShhKSkgewogICAgICAgICAgICAgIHZhciBpID0gbi5kYXRhKGEpLAogICAgICAgICAgICAgICAgICByID0gaS5vcHQsCiAgICAgICAgICAgICAgICAgIGwgPSB7CiAgICAgICAgICAgICAgICB0cmlnZ2VyOiAiZXh0ZXJuYWwiLAogICAgICAgICAgICAgICAgc2Nyb2xsSW5lcnRpYTogci5zY3JvbGxJbmVydGlhLAogICAgICAgICAgICAgICAgc2Nyb2xsRWFzaW5nOiAibWNzRWFzZUluT3V0IiwKICAgICAgICAgICAgICAgIG1vdmVEcmFnZ2VyOiAhMSwKICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDYwLAogICAgICAgICAgICAgICAgY2FsbGJhY2tzOiAhMCwKICAgICAgICAgICAgICAgIG9uU3RhcnQ6ICEwLAogICAgICAgICAgICAgICAgb25VcGRhdGU6ICEwLAogICAgICAgICAgICAgICAgb25Db21wbGV0ZTogITAKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBzID0gZS5leHRlbmQoITAsIHt9LCBsLCBvKSwKICAgICAgICAgICAgICAgICAgYyA9IHEuY2FsbCh0aGlzLCB0KSwKICAgICAgICAgICAgICAgICAgZCA9IHMuc2Nyb2xsSW5lcnRpYSA+IDAgJiYgcy5zY3JvbGxJbmVydGlhIDwgMTcgPyAxNyA6IHMuc2Nyb2xsSW5lcnRpYTsKICAgICAgICAgICAgICBjWzBdID0gWS5jYWxsKHRoaXMsIGNbMF0sICJ5IiksIGNbMV0gPSBZLmNhbGwodGhpcywgY1sxXSwgIngiKSwgcy5tb3ZlRHJhZ2dlciAmJiAoY1swXSAqPSBpLnNjcm9sbFJhdGlvLnksIGNbMV0gKj0gaS5zY3JvbGxSYXRpby54KSwgcy5kdXIgPSBvZSgpID8gMCA6IGQsIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbnVsbCAhPT0gY1swXSAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgY1swXSAmJiAieCIgIT09IHIuYXhpcyAmJiBpLm92ZXJmbG93ZWRbMF0gJiYgKHMuZGlyID0gInkiLCBzLm92ZXJ3cml0ZSA9ICJhbGwiLCBWKG4sIGNbMF0udG9TdHJpbmcoKSwgcykpLCBudWxsICE9PSBjWzFdICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBjWzFdICYmICJ5IiAhPT0gci5heGlzICYmIGkub3ZlcmZsb3dlZFsxXSAmJiAocy5kaXIgPSAieCIsIHMub3ZlcndyaXRlID0gIm5vbmUiLCBWKG4sIGNbMV0udG9TdHJpbmcoKSwgcykpOwogICAgICAgICAgICAgIH0sIHMudGltZW91dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSwKICAgICAgc3RvcDogZnVuY3Rpb24gc3RvcCgpIHsKICAgICAgICB2YXIgdCA9IGYuY2FsbCh0aGlzKTsKICAgICAgICByZXR1cm4gZSh0KS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB0ID0gZSh0aGlzKTsKICAgICAgICAgIHQuZGF0YShhKSAmJiBOKHQpOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKHQpIHsKICAgICAgICB2YXIgbyA9IGYuY2FsbCh0aGlzKTsKICAgICAgICByZXR1cm4gZShvKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBvID0gZSh0aGlzKTsKCiAgICAgICAgICBpZiAoby5kYXRhKGEpKSB7CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBvLmRhdGEoYSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgWC5jYWxsKHRoaXMsICJyZW1vdmUiKSwgay5jYWxsKHRoaXMpLCB0ICYmIEIuY2FsbCh0aGlzKSwgTS5jYWxsKHRoaXMsICEwKSwgby5hZGRDbGFzcyhkWzNdKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgICB2YXIgdCA9IGYuY2FsbCh0aGlzKTsKICAgICAgICByZXR1cm4gZSh0KS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBuID0gZSh0aGlzKTsKCiAgICAgICAgICBpZiAobi5kYXRhKGEpKSB7CiAgICAgICAgICAgIHZhciBpID0gbi5kYXRhKGEpLAogICAgICAgICAgICAgICAgciA9IGkub3B0LAogICAgICAgICAgICAgICAgbCA9IGUoIiNtQ1NCXyIgKyBpLmlkeCksCiAgICAgICAgICAgICAgICBzID0gZSgiI21DU0JfIiArIGkuaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgICAgICAgIGMgPSBlKCIubUNTQl8iICsgaS5pZHggKyAiX3Njcm9sbGJhciIpOwogICAgICAgICAgICByLmxpdmUgJiYgbShyLmxpdmVTZWxlY3RvciB8fCBlKHQpLnNlbGVjdG9yKSwgWC5jYWxsKHRoaXMsICJyZW1vdmUiKSwgay5jYWxsKHRoaXMpLCBCLmNhbGwodGhpcyksIG4ucmVtb3ZlRGF0YShhKSwgSyh0aGlzLCAibWNzIiksIGMucmVtb3ZlKCksIHMuZmluZCgiaW1nLiIgKyBkWzJdKS5yZW1vdmVDbGFzcyhkWzJdKSwgbC5yZXBsYWNlV2l0aChzLmNvbnRlbnRzKCkpLCBuLnJlbW92ZUNsYXNzKG8gKyAiIF8iICsgYSArICJfIiArIGkuaWR4ICsgIiAiICsgZFs2XSArICIgIiArIGRbN10gKyAiICIgKyBkWzVdICsgIiAiICsgZFszXSkuYWRkQ2xhc3MoZFs0XSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAgICAgZiA9IGZ1bmN0aW9uIGYoKSB7CiAgICAgIHJldHVybiAib2JqZWN0IiAhPSBfdHlwZW9mKGUodGhpcykpIHx8IGUodGhpcykubGVuZ3RoIDwgMSA/IG4gOiB0aGlzOwogICAgfSwKICAgICAgICBoID0gZnVuY3Rpb24gaCh0KSB7CiAgICAgIHZhciBvID0gWyJyb3VuZGVkIiwgInJvdW5kZWQtZGFyayIsICJyb3VuZGVkLWRvdHMiLCAicm91bmRlZC1kb3RzLWRhcmsiXSwKICAgICAgICAgIGEgPSBbInJvdW5kZWQtZG90cyIsICJyb3VuZGVkLWRvdHMtZGFyayIsICIzZCIsICIzZC1kYXJrIiwgIjNkLXRoaWNrIiwgIjNkLXRoaWNrLWRhcmsiLCAiaW5zZXQiLCAiaW5zZXQtZGFyayIsICJpbnNldC0yIiwgImluc2V0LTItZGFyayIsICJpbnNldC0zIiwgImluc2V0LTMtZGFyayJdLAogICAgICAgICAgbiA9IFsibWluaW1hbCIsICJtaW5pbWFsLWRhcmsiXSwKICAgICAgICAgIGkgPSBbIm1pbmltYWwiLCAibWluaW1hbC1kYXJrIl0sCiAgICAgICAgICByID0gWyJtaW5pbWFsIiwgIm1pbmltYWwtZGFyayJdOwogICAgICB0LmF1dG9EcmFnZ2VyTGVuZ3RoID0gZS5pbkFycmF5KHQudGhlbWUsIG8pID4gLTEgPyAhMSA6IHQuYXV0b0RyYWdnZXJMZW5ndGgsIHQuYXV0b0V4cGFuZFNjcm9sbGJhciA9IGUuaW5BcnJheSh0LnRoZW1lLCBhKSA+IC0xID8gITEgOiB0LmF1dG9FeHBhbmRTY3JvbGxiYXIsIHQuc2Nyb2xsQnV0dG9ucy5lbmFibGUgPSBlLmluQXJyYXkodC50aGVtZSwgbikgPiAtMSA/ICExIDogdC5zY3JvbGxCdXR0b25zLmVuYWJsZSwgdC5hdXRvSGlkZVNjcm9sbGJhciA9IGUuaW5BcnJheSh0LnRoZW1lLCBpKSA+IC0xID8gITAgOiB0LmF1dG9IaWRlU2Nyb2xsYmFyLCB0LnNjcm9sbGJhclBvc2l0aW9uID0gZS5pbkFycmF5KHQudGhlbWUsIHIpID4gLTEgPyAib3V0c2lkZSIgOiB0LnNjcm9sbGJhclBvc2l0aW9uOwogICAgfSwKICAgICAgICBtID0gZnVuY3Rpb24gbShlKSB7CiAgICAgIGxbZV0gJiYgKGNsZWFyVGltZW91dChsW2VdKSwgSyhsLCBlKSk7CiAgICB9LAogICAgICAgIHAgPSBmdW5jdGlvbiBwKGUpIHsKICAgICAgcmV0dXJuICJ5eCIgPT09IGUgfHwgInh5IiA9PT0gZSB8fCAiYXV0byIgPT09IGUgPyAieXgiIDogIngiID09PSBlIHx8ICJob3Jpem9udGFsIiA9PT0gZSA/ICJ4IiA6ICJ5IjsKICAgIH0sCiAgICAgICAgZyA9IGZ1bmN0aW9uIGcoZSkgewogICAgICByZXR1cm4gInN0ZXBwZWQiID09PSBlIHx8ICJwaXhlbHMiID09PSBlIHx8ICJzdGVwIiA9PT0gZSB8fCAiY2xpY2siID09PSBlID8gInN0ZXBwZWQiIDogInN0ZXBsZXNzIjsKICAgIH0sCiAgICAgICAgdiA9IGZ1bmN0aW9uIHYoKSB7CiAgICAgIHZhciB0ID0gZSh0aGlzKSwKICAgICAgICAgIG4gPSB0LmRhdGEoYSksCiAgICAgICAgICBpID0gbi5vcHQsCiAgICAgICAgICByID0gaS5hdXRvRXhwYW5kU2Nyb2xsYmFyID8gIiAiICsgZFsxXSArICJfZXhwYW5kIiA6ICIiLAogICAgICAgICAgbCA9IFsiPGRpdiBpZD0nbUNTQl8iICsgbi5pZHggKyAiX3Njcm9sbGJhcl92ZXJ0aWNhbCcgY2xhc3M9J21DU0Jfc2Nyb2xsVG9vbHMgbUNTQl8iICsgbi5pZHggKyAiX3Njcm9sbGJhciBtQ1MtIiArIGkudGhlbWUgKyAiIG1DU0Jfc2Nyb2xsVG9vbHNfdmVydGljYWwiICsgciArICInPjxkaXYgY2xhc3M9JyIgKyBkWzEyXSArICInPjxkaXYgaWQ9J21DU0JfIiArIG4uaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsJyBjbGFzcz0nbUNTQl9kcmFnZ2VyJyBzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7JyBvbmNvbnRleHRtZW51PSdyZXR1cm4gZmFsc2U7Jz48ZGl2IGNsYXNzPSdtQ1NCX2RyYWdnZXJfYmFyJyAvPjwvZGl2PjxkaXYgY2xhc3M9J21DU0JfZHJhZ2dlclJhaWwnIC8+PC9kaXY+PC9kaXY+IiwgIjxkaXYgaWQ9J21DU0JfIiArIG4uaWR4ICsgIl9zY3JvbGxiYXJfaG9yaXpvbnRhbCcgY2xhc3M9J21DU0Jfc2Nyb2xsVG9vbHMgbUNTQl8iICsgbi5pZHggKyAiX3Njcm9sbGJhciBtQ1MtIiArIGkudGhlbWUgKyAiIG1DU0Jfc2Nyb2xsVG9vbHNfaG9yaXpvbnRhbCIgKyByICsgIic+PGRpdiBjbGFzcz0nIiArIGRbMTJdICsgIic+PGRpdiBpZD0nbUNTQl8iICsgbi5pZHggKyAiX2RyYWdnZXJfaG9yaXpvbnRhbCcgY2xhc3M9J21DU0JfZHJhZ2dlcicgc3R5bGU9J3Bvc2l0aW9uOmFic29sdXRlOycgb25jb250ZXh0bWVudT0ncmV0dXJuIGZhbHNlOyc+PGRpdiBjbGFzcz0nbUNTQl9kcmFnZ2VyX2JhcicgLz48L2Rpdj48ZGl2IGNsYXNzPSdtQ1NCX2RyYWdnZXJSYWlsJyAvPjwvZGl2PjwvZGl2PiJdLAogICAgICAgICAgcyA9ICJ5eCIgPT09IGkuYXhpcyA/ICJtQ1NCX3ZlcnRpY2FsX2hvcml6b250YWwiIDogIngiID09PSBpLmF4aXMgPyAibUNTQl9ob3Jpem9udGFsIiA6ICJtQ1NCX3ZlcnRpY2FsIiwKICAgICAgICAgIGMgPSAieXgiID09PSBpLmF4aXMgPyBsWzBdICsgbFsxXSA6ICJ4IiA9PT0gaS5heGlzID8gbFsxXSA6IGxbMF0sCiAgICAgICAgICB1ID0gInl4IiA9PT0gaS5heGlzID8gIjxkaXYgaWQ9J21DU0JfIiArIG4uaWR4ICsgIl9jb250YWluZXJfd3JhcHBlcicgY2xhc3M9J21DU0JfY29udGFpbmVyX3dyYXBwZXInIC8+IiA6ICIiLAogICAgICAgICAgZiA9IGkuYXV0b0hpZGVTY3JvbGxiYXIgPyAiICIgKyBkWzZdIDogIiIsCiAgICAgICAgICBoID0gIngiICE9PSBpLmF4aXMgJiYgInJ0bCIgPT09IG4ubGFuZ0RpciA/ICIgIiArIGRbN10gOiAiIjsKICAgICAgaS5zZXRXaWR0aCAmJiB0LmNzcygid2lkdGgiLCBpLnNldFdpZHRoKSwgaS5zZXRIZWlnaHQgJiYgdC5jc3MoImhlaWdodCIsIGkuc2V0SGVpZ2h0KSwgaS5zZXRMZWZ0ID0gInkiICE9PSBpLmF4aXMgJiYgInJ0bCIgPT09IG4ubGFuZ0RpciA/ICI5ODk5OTlweCIgOiBpLnNldExlZnQsIHQuYWRkQ2xhc3MobyArICIgXyIgKyBhICsgIl8iICsgbi5pZHggKyBmICsgaCkud3JhcElubmVyKCI8ZGl2IGlkPSdtQ1NCXyIgKyBuLmlkeCArICInIGNsYXNzPSdtQ3VzdG9tU2Nyb2xsQm94IG1DUy0iICsgaS50aGVtZSArICIgIiArIHMgKyAiJz48ZGl2IGlkPSdtQ1NCXyIgKyBuLmlkeCArICJfY29udGFpbmVyJyBjbGFzcz0nbUNTQl9jb250YWluZXInIHN0eWxlPSdwb3NpdGlvbjpyZWxhdGl2ZTsgdG9wOiIgKyBpLnNldFRvcCArICI7IGxlZnQ6IiArIGkuc2V0TGVmdCArICI7JyBkaXI9IiArIG4ubGFuZ0RpciArICIgLz48L2Rpdj4iKTsKICAgICAgdmFyIG0gPSBlKCIjbUNTQl8iICsgbi5pZHgpLAogICAgICAgICAgcCA9IGUoIiNtQ1NCXyIgKyBuLmlkeCArICJfY29udGFpbmVyIik7CiAgICAgICJ5IiA9PT0gaS5heGlzIHx8IGkuYWR2YW5jZWQuYXV0b0V4cGFuZEhvcml6b250YWxTY3JvbGwgfHwgcC5jc3MoIndpZHRoIiwgeChwKSksICJvdXRzaWRlIiA9PT0gaS5zY3JvbGxiYXJQb3NpdGlvbiA/ICgic3RhdGljIiA9PT0gdC5jc3MoInBvc2l0aW9uIikgJiYgdC5jc3MoInBvc2l0aW9uIiwgInJlbGF0aXZlIiksIHQuY3NzKCJvdmVyZmxvdyIsICJ2aXNpYmxlIiksIG0uYWRkQ2xhc3MoIm1DU0Jfb3V0c2lkZSIpLmFmdGVyKGMpKSA6IChtLmFkZENsYXNzKCJtQ1NCX2luc2lkZSIpLmFwcGVuZChjKSwgcC53cmFwKHUpKSwgdy5jYWxsKHRoaXMpOwogICAgICB2YXIgZyA9IFtlKCIjbUNTQl8iICsgbi5pZHggKyAiX2RyYWdnZXJfdmVydGljYWwiKSwgZSgiI21DU0JfIiArIG4uaWR4ICsgIl9kcmFnZ2VyX2hvcml6b250YWwiKV07CiAgICAgIGdbMF0uY3NzKCJtaW4taGVpZ2h0IiwgZ1swXS5oZWlnaHQoKSksIGdbMV0uY3NzKCJtaW4td2lkdGgiLCBnWzFdLndpZHRoKCkpOwogICAgfSwKICAgICAgICB4ID0gZnVuY3Rpb24geCh0KSB7CiAgICAgIHZhciBvID0gW3RbMF0uc2Nyb2xsV2lkdGgsIE1hdGgubWF4LmFwcGx5KE1hdGgsIHQuY2hpbGRyZW4oKS5tYXAoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBlKHRoaXMpLm91dGVyV2lkdGgoITApOwogICAgICB9KS5nZXQoKSldLAogICAgICAgICAgYSA9IHQucGFyZW50KCkud2lkdGgoKTsKICAgICAgcmV0dXJuIG9bMF0gPiBhID8gb1swXSA6IG9bMV0gPiBhID8gb1sxXSA6ICIxMDAlIjsKICAgIH0sCiAgICAgICAgXyA9IGZ1bmN0aW9uIF8oKSB7CiAgICAgIHZhciB0ID0gZSh0aGlzKSwKICAgICAgICAgIG8gPSB0LmRhdGEoYSksCiAgICAgICAgICBuID0gby5vcHQsCiAgICAgICAgICBpID0gZSgiI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIiKTsKCiAgICAgIGlmIChuLmFkdmFuY2VkLmF1dG9FeHBhbmRIb3Jpem9udGFsU2Nyb2xsICYmICJ5IiAhPT0gbi5heGlzKSB7CiAgICAgICAgaS5jc3MoewogICAgICAgICAgd2lkdGg6ICJhdXRvIiwKICAgICAgICAgICJtaW4td2lkdGgiOiAwLAogICAgICAgICAgIm92ZXJmbG93LXgiOiAic2Nyb2xsIgogICAgICAgIH0pOwogICAgICAgIHZhciByID0gTWF0aC5jZWlsKGlbMF0uc2Nyb2xsV2lkdGgpOwogICAgICAgIDMgPT09IG4uYWR2YW5jZWQuYXV0b0V4cGFuZEhvcml6b250YWxTY3JvbGwgfHwgMiAhPT0gbi5hZHZhbmNlZC5hdXRvRXhwYW5kSG9yaXpvbnRhbFNjcm9sbCAmJiByID4gaS5wYXJlbnQoKS53aWR0aCgpID8gaS5jc3MoewogICAgICAgICAgd2lkdGg6IHIsCiAgICAgICAgICAibWluLXdpZHRoIjogIjEwMCUiLAogICAgICAgICAgIm92ZXJmbG93LXgiOiAiaW5oZXJpdCIKICAgICAgICB9KSA6IGkuY3NzKHsKICAgICAgICAgICJvdmVyZmxvdy14IjogImluaGVyaXQiLAogICAgICAgICAgcG9zaXRpb246ICJhYnNvbHV0ZSIKICAgICAgICB9KS53cmFwKCI8ZGl2IGNsYXNzPSdtQ1NCX2hfd3JhcHBlcicgc3R5bGU9J3Bvc2l0aW9uOnJlbGF0aXZlOyBsZWZ0OjA7IHdpZHRoOjk5OTk5OXB4OycgLz4iKS5jc3MoewogICAgICAgICAgd2lkdGg6IE1hdGguY2VpbChpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0ICsgLjQpIC0gTWF0aC5mbG9vcihpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQpLAogICAgICAgICAgIm1pbi13aWR0aCI6ICIxMDAlIiwKICAgICAgICAgIHBvc2l0aW9uOiAicmVsYXRpdmUiCiAgICAgICAgfSkudW53cmFwKCk7CiAgICAgIH0KICAgIH0sCiAgICAgICAgdyA9IGZ1bmN0aW9uIHcoKSB7CiAgICAgIHZhciB0ID0gZSh0aGlzKSwKICAgICAgICAgIG8gPSB0LmRhdGEoYSksCiAgICAgICAgICBuID0gby5vcHQsCiAgICAgICAgICBpID0gZSgiLm1DU0JfIiArIG8uaWR4ICsgIl9zY3JvbGxiYXI6Zmlyc3QiKSwKICAgICAgICAgIHIgPSBlZShuLnNjcm9sbEJ1dHRvbnMudGFiaW5kZXgpID8gInRhYmluZGV4PSciICsgbi5zY3JvbGxCdXR0b25zLnRhYmluZGV4ICsgIiciIDogIiIsCiAgICAgICAgICBsID0gWyI8YSBocmVmPScjJyBjbGFzcz0nIiArIGRbMTNdICsgIicgb25jb250ZXh0bWVudT0ncmV0dXJuIGZhbHNlOycgIiArIHIgKyAiIC8+IiwgIjxhIGhyZWY9JyMnIGNsYXNzPSciICsgZFsxNF0gKyAiJyBvbmNvbnRleHRtZW51PSdyZXR1cm4gZmFsc2U7JyAiICsgciArICIgLz4iLCAiPGEgaHJlZj0nIycgY2xhc3M9JyIgKyBkWzE1XSArICInIG9uY29udGV4dG1lbnU9J3JldHVybiBmYWxzZTsnICIgKyByICsgIiAvPiIsICI8YSBocmVmPScjJyBjbGFzcz0nIiArIGRbMTZdICsgIicgb25jb250ZXh0bWVudT0ncmV0dXJuIGZhbHNlOycgIiArIHIgKyAiIC8+Il0sCiAgICAgICAgICBzID0gWyJ4IiA9PT0gbi5heGlzID8gbFsyXSA6IGxbMF0sICJ4IiA9PT0gbi5heGlzID8gbFszXSA6IGxbMV0sIGxbMl0sIGxbM11dOwogICAgICBuLnNjcm9sbEJ1dHRvbnMuZW5hYmxlICYmIGkucHJlcGVuZChzWzBdKS5hcHBlbmQoc1sxXSkubmV4dCgiLm1DU0Jfc2Nyb2xsVG9vbHMiKS5wcmVwZW5kKHNbMl0pLmFwcGVuZChzWzNdKTsKICAgIH0sCiAgICAgICAgUyA9IGZ1bmN0aW9uIFMoKSB7CiAgICAgIHZhciB0ID0gZSh0aGlzKSwKICAgICAgICAgIG8gPSB0LmRhdGEoYSksCiAgICAgICAgICBuID0gZSgiI21DU0JfIiArIG8uaWR4KSwKICAgICAgICAgIGkgPSBlKCIjbUNTQl8iICsgby5pZHggKyAiX2NvbnRhaW5lciIpLAogICAgICAgICAgciA9IFtlKCIjbUNTQl8iICsgby5pZHggKyAiX2RyYWdnZXJfdmVydGljYWwiKSwgZSgiI21DU0JfIiArIG8uaWR4ICsgIl9kcmFnZ2VyX2hvcml6b250YWwiKV0sCiAgICAgICAgICBsID0gW24uaGVpZ2h0KCkgLyBpLm91dGVySGVpZ2h0KCExKSwgbi53aWR0aCgpIC8gaS5vdXRlcldpZHRoKCExKV0sCiAgICAgICAgICBjID0gW3BhcnNlSW50KHJbMF0uY3NzKCJtaW4taGVpZ2h0IikpLCBNYXRoLnJvdW5kKGxbMF0gKiByWzBdLnBhcmVudCgpLmhlaWdodCgpKSwgcGFyc2VJbnQoclsxXS5jc3MoIm1pbi13aWR0aCIpKSwgTWF0aC5yb3VuZChsWzFdICogclsxXS5wYXJlbnQoKS53aWR0aCgpKV0sCiAgICAgICAgICBkID0gcyAmJiBjWzFdIDwgY1swXSA/IGNbMF0gOiBjWzFdLAogICAgICAgICAgdSA9IHMgJiYgY1szXSA8IGNbMl0gPyBjWzJdIDogY1szXTsKICAgICAgclswXS5jc3MoewogICAgICAgIGhlaWdodDogZCwKICAgICAgICAibWF4LWhlaWdodCI6IHJbMF0ucGFyZW50KCkuaGVpZ2h0KCkgLSAxMAogICAgICB9KS5maW5kKCIubUNTQl9kcmFnZ2VyX2JhciIpLmNzcyh7CiAgICAgICAgImxpbmUtaGVpZ2h0IjogY1swXSArICJweCIKICAgICAgfSksIHJbMV0uY3NzKHsKICAgICAgICB3aWR0aDogdSwKICAgICAgICAibWF4LXdpZHRoIjogclsxXS5wYXJlbnQoKS53aWR0aCgpIC0gMTAKICAgICAgfSk7CiAgICB9LAogICAgICAgIGIgPSBmdW5jdGlvbiBiKCkgewogICAgICB2YXIgdCA9IGUodGhpcyksCiAgICAgICAgICBvID0gdC5kYXRhKGEpLAogICAgICAgICAgbiA9IGUoIiNtQ1NCXyIgKyBvLmlkeCksCiAgICAgICAgICBpID0gZSgiI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIHIgPSBbZSgiI21DU0JfIiArIG8uaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsIiksIGUoIiNtQ1NCXyIgKyBvLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsIildLAogICAgICAgICAgbCA9IFtpLm91dGVySGVpZ2h0KCExKSAtIG4uaGVpZ2h0KCksIGkub3V0ZXJXaWR0aCghMSkgLSBuLndpZHRoKCldLAogICAgICAgICAgcyA9IFtsWzBdIC8gKHJbMF0ucGFyZW50KCkuaGVpZ2h0KCkgLSByWzBdLmhlaWdodCgpKSwgbFsxXSAvIChyWzFdLnBhcmVudCgpLndpZHRoKCkgLSByWzFdLndpZHRoKCkpXTsKICAgICAgby5zY3JvbGxSYXRpbyA9IHsKICAgICAgICB5OiBzWzBdLAogICAgICAgIHg6IHNbMV0KICAgICAgfTsKICAgIH0sCiAgICAgICAgQyA9IGZ1bmN0aW9uIEMoZSwgdCwgbykgewogICAgICB2YXIgYSA9IG8gPyBkWzBdICsgIl9leHBhbmRlZCIgOiAiIiwKICAgICAgICAgIG4gPSBlLmNsb3Nlc3QoIi5tQ1NCX3Njcm9sbFRvb2xzIik7CiAgICAgICJhY3RpdmUiID09PSB0ID8gKGUudG9nZ2xlQ2xhc3MoZFswXSArICIgIiArIGEpLCBuLnRvZ2dsZUNsYXNzKGRbMV0pLCBlWzBdLl9kcmFnZ2FibGUgPSBlWzBdLl9kcmFnZ2FibGUgPyAwIDogMSkgOiBlWzBdLl9kcmFnZ2FibGUgfHwgKCJoaWRlIiA9PT0gdCA/IChlLnJlbW92ZUNsYXNzKGRbMF0pLCBuLnJlbW92ZUNsYXNzKGRbMV0pKSA6IChlLmFkZENsYXNzKGRbMF0pLCBuLmFkZENsYXNzKGRbMV0pKSk7CiAgICB9LAogICAgICAgIHkgPSBmdW5jdGlvbiB5KCkgewogICAgICB2YXIgdCA9IGUodGhpcyksCiAgICAgICAgICBvID0gdC5kYXRhKGEpLAogICAgICAgICAgbiA9IGUoIiNtQ1NCXyIgKyBvLmlkeCksCiAgICAgICAgICBpID0gZSgiI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIHIgPSBudWxsID09IG8ub3ZlcmZsb3dlZCA/IGkuaGVpZ2h0KCkgOiBpLm91dGVySGVpZ2h0KCExKSwKICAgICAgICAgIGwgPSBudWxsID09IG8ub3ZlcmZsb3dlZCA/IGkud2lkdGgoKSA6IGkub3V0ZXJXaWR0aCghMSksCiAgICAgICAgICBzID0gaVswXS5zY3JvbGxIZWlnaHQsCiAgICAgICAgICBjID0gaVswXS5zY3JvbGxXaWR0aDsKICAgICAgcmV0dXJuIHMgPiByICYmIChyID0gcyksIGMgPiBsICYmIChsID0gYyksIFtyID4gbi5oZWlnaHQoKSwgbCA+IG4ud2lkdGgoKV07CiAgICB9LAogICAgICAgIEIgPSBmdW5jdGlvbiBCKCkgewogICAgICB2YXIgdCA9IGUodGhpcyksCiAgICAgICAgICBvID0gdC5kYXRhKGEpLAogICAgICAgICAgbiA9IG8ub3B0LAogICAgICAgICAgaSA9IGUoIiNtQ1NCXyIgKyBvLmlkeCksCiAgICAgICAgICByID0gZSgiI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIGwgPSBbZSgiI21DU0JfIiArIG8uaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsIiksIGUoIiNtQ1NCXyIgKyBvLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsIildOwoKICAgICAgaWYgKE4odCksICgieCIgIT09IG4uYXhpcyAmJiAhby5vdmVyZmxvd2VkWzBdIHx8ICJ5IiA9PT0gbi5heGlzICYmIG8ub3ZlcmZsb3dlZFswXSkgJiYgKGxbMF0uYWRkKHIpLmNzcygidG9wIiwgMCksIFYodCwgIl9yZXNldFkiKSksICJ5IiAhPT0gbi5heGlzICYmICFvLm92ZXJmbG93ZWRbMV0gfHwgIngiID09PSBuLmF4aXMgJiYgby5vdmVyZmxvd2VkWzFdKSB7CiAgICAgICAgdmFyIHMgPSBkeCA9IDA7CiAgICAgICAgInJ0bCIgPT09IG8ubGFuZ0RpciAmJiAocyA9IGkud2lkdGgoKSAtIHIub3V0ZXJXaWR0aCghMSksIGR4ID0gTWF0aC5hYnMocyAvIG8uc2Nyb2xsUmF0aW8ueCkpLCByLmNzcygibGVmdCIsIHMpLCBsWzFdLmNzcygibGVmdCIsIGR4KSwgVih0LCAiX3Jlc2V0WCIpOwogICAgICB9CiAgICB9LAogICAgICAgIFQgPSBmdW5jdGlvbiBUKCkgewogICAgICBmdW5jdGlvbiB0KCkgewogICAgICAgIHIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGUuZXZlbnQuc3BlY2lhbC5tb3VzZXdoZWVsID8gKGNsZWFyVGltZW91dChyKSwgUi5jYWxsKG9bMF0pKSA6IHQoKTsKICAgICAgICB9LCAxMDApOwogICAgICB9CgogICAgICB2YXIgbyA9IGUodGhpcyksCiAgICAgICAgICBuID0gby5kYXRhKGEpLAogICAgICAgICAgaSA9IG4ub3B0OwoKICAgICAgaWYgKCFuLmJpbmRFdmVudHMpIHsKICAgICAgICBpZiAoSS5jYWxsKHRoaXMpLCBpLmNvbnRlbnRUb3VjaFNjcm9sbCAmJiBELmNhbGwodGhpcyksIEUuY2FsbCh0aGlzKSwgaS5tb3VzZVdoZWVsLmVuYWJsZSkgewogICAgICAgICAgdmFyIHI7CiAgICAgICAgICB0KCk7CiAgICAgICAgfQoKICAgICAgICBMLmNhbGwodGhpcyksIFAuY2FsbCh0aGlzKSwgaS5hZHZhbmNlZC5hdXRvU2Nyb2xsT25Gb2N1cyAmJiB6LmNhbGwodGhpcyksIGkuc2Nyb2xsQnV0dG9ucy5lbmFibGUgJiYgSC5jYWxsKHRoaXMpLCBpLmtleWJvYXJkLmVuYWJsZSAmJiBVLmNhbGwodGhpcyksIG4uYmluZEV2ZW50cyA9ICEwOwogICAgICB9CiAgICB9LAogICAgICAgIGsgPSBmdW5jdGlvbiBrKCkgewogICAgICB2YXIgdCA9IGUodGhpcyksCiAgICAgICAgICBvID0gdC5kYXRhKGEpLAogICAgICAgICAgbiA9IG8ub3B0LAogICAgICAgICAgaSA9IGEgKyAiXyIgKyBvLmlkeCwKICAgICAgICAgIHIgPSAiLm1DU0JfIiArIG8uaWR4ICsgIl9zY3JvbGxiYXIiLAogICAgICAgICAgbCA9IGUoIiNtQ1NCXyIgKyBvLmlkeCArICIsI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIsI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXJfd3JhcHBlciwiICsgciArICIgLiIgKyBkWzEyXSArICIsI21DU0JfIiArIG8uaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsLCNtQ1NCXyIgKyBvLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsLCIgKyByICsgIj5hIiksCiAgICAgICAgICBzID0gZSgiI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIiKTsKICAgICAgbi5hZHZhbmNlZC5yZWxlYXNlRHJhZ2dhYmxlU2VsZWN0b3JzICYmIGwuYWRkKGUobi5hZHZhbmNlZC5yZWxlYXNlRHJhZ2dhYmxlU2VsZWN0b3JzKSksIG4uYWR2YW5jZWQuZXh0cmFEcmFnZ2FibGVTZWxlY3RvcnMgJiYgbC5hZGQoZShuLmFkdmFuY2VkLmV4dHJhRHJhZ2dhYmxlU2VsZWN0b3JzKSksIG8uYmluZEV2ZW50cyAmJiAoZShkb2N1bWVudCkuYWRkKGUoIVcoKSB8fCB0b3AuZG9jdW1lbnQpKS51bmJpbmQoIi4iICsgaSksIGwuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgZSh0aGlzKS51bmJpbmQoIi4iICsgaSk7CiAgICAgIH0pLCBjbGVhclRpbWVvdXQodFswXS5fZm9jdXNUaW1lb3V0KSwgSyh0WzBdLCAiX2ZvY3VzVGltZW91dCIpLCBjbGVhclRpbWVvdXQoby5zZXF1ZW50aWFsLnN0ZXApLCBLKG8uc2VxdWVudGlhbCwgInN0ZXAiKSwgY2xlYXJUaW1lb3V0KHNbMF0ub25Db21wbGV0ZVRpbWVvdXQpLCBLKHNbMF0sICJvbkNvbXBsZXRlVGltZW91dCIpLCBvLmJpbmRFdmVudHMgPSAhMSk7CiAgICB9LAogICAgICAgIE0gPSBmdW5jdGlvbiBNKHQpIHsKICAgICAgdmFyIG8gPSBlKHRoaXMpLAogICAgICAgICAgbiA9IG8uZGF0YShhKSwKICAgICAgICAgIGkgPSBuLm9wdCwKICAgICAgICAgIHIgPSBlKCIjbUNTQl8iICsgbi5pZHggKyAiX2NvbnRhaW5lcl93cmFwcGVyIiksCiAgICAgICAgICBsID0gci5sZW5ndGggPyByIDogZSgiI21DU0JfIiArIG4uaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIHMgPSBbZSgiI21DU0JfIiArIG4uaWR4ICsgIl9zY3JvbGxiYXJfdmVydGljYWwiKSwgZSgiI21DU0JfIiArIG4uaWR4ICsgIl9zY3JvbGxiYXJfaG9yaXpvbnRhbCIpXSwKICAgICAgICAgIGMgPSBbc1swXS5maW5kKCIubUNTQl9kcmFnZ2VyIiksIHNbMV0uZmluZCgiLm1DU0JfZHJhZ2dlciIpXTsKICAgICAgIngiICE9PSBpLmF4aXMgJiYgKG4ub3ZlcmZsb3dlZFswXSAmJiAhdCA/IChzWzBdLmFkZChjWzBdKS5hZGQoc1swXS5jaGlsZHJlbigiYSIpKS5jc3MoImRpc3BsYXkiLCAiYmxvY2siKSwgbC5yZW1vdmVDbGFzcyhkWzhdICsgIiAiICsgZFsxMF0pKSA6IChpLmFsd2F5c1Nob3dTY3JvbGxiYXIgPyAoMiAhPT0gaS5hbHdheXNTaG93U2Nyb2xsYmFyICYmIGNbMF0uY3NzKCJkaXNwbGF5IiwgIm5vbmUiKSwgbC5yZW1vdmVDbGFzcyhkWzEwXSkpIDogKHNbMF0uY3NzKCJkaXNwbGF5IiwgIm5vbmUiKSwgbC5hZGRDbGFzcyhkWzEwXSkpLCBsLmFkZENsYXNzKGRbOF0pKSksICJ5IiAhPT0gaS5heGlzICYmIChuLm92ZXJmbG93ZWRbMV0gJiYgIXQgPyAoc1sxXS5hZGQoY1sxXSkuYWRkKHNbMV0uY2hpbGRyZW4oImEiKSkuY3NzKCJkaXNwbGF5IiwgImJsb2NrIiksIGwucmVtb3ZlQ2xhc3MoZFs5XSArICIgIiArIGRbMTFdKSkgOiAoaS5hbHdheXNTaG93U2Nyb2xsYmFyID8gKDIgIT09IGkuYWx3YXlzU2hvd1Njcm9sbGJhciAmJiBjWzFdLmNzcygiZGlzcGxheSIsICJub25lIiksIGwucmVtb3ZlQ2xhc3MoZFsxMV0pKSA6IChzWzFdLmNzcygiZGlzcGxheSIsICJub25lIiksIGwuYWRkQ2xhc3MoZFsxMV0pKSwgbC5hZGRDbGFzcyhkWzldKSkpLCBuLm92ZXJmbG93ZWRbMF0gfHwgbi5vdmVyZmxvd2VkWzFdID8gby5yZW1vdmVDbGFzcyhkWzVdKSA6IG8uYWRkQ2xhc3MoZFs1XSk7CiAgICB9LAogICAgICAgIE8gPSBmdW5jdGlvbiBPKHQpIHsKICAgICAgdmFyIG8gPSB0LnR5cGUsCiAgICAgICAgICBhID0gdC50YXJnZXQub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgPyBbZShmcmFtZUVsZW1lbnQpLm9mZnNldCgpLnRvcCwgZShmcmFtZUVsZW1lbnQpLm9mZnNldCgpLmxlZnRdIDogbnVsbCwKICAgICAgICAgIG4gPSBXKCkgJiYgdC50YXJnZXQub3duZXJEb2N1bWVudCAhPT0gdG9wLmRvY3VtZW50ID8gW2UodC52aWV3LmZyYW1lRWxlbWVudCkub2Zmc2V0KCkudG9wLCBlKHQudmlldy5mcmFtZUVsZW1lbnQpLm9mZnNldCgpLmxlZnRdIDogWzAsIDBdOwoKICAgICAgc3dpdGNoIChvKSB7CiAgICAgICAgY2FzZSAicG9pbnRlcmRvd24iOgogICAgICAgIGNhc2UgIk1TUG9pbnRlckRvd24iOgogICAgICAgIGNhc2UgInBvaW50ZXJtb3ZlIjoKICAgICAgICBjYXNlICJNU1BvaW50ZXJNb3ZlIjoKICAgICAgICBjYXNlICJwb2ludGVydXAiOgogICAgICAgIGNhc2UgIk1TUG9pbnRlclVwIjoKICAgICAgICAgIHJldHVybiBhID8gW3Qub3JpZ2luYWxFdmVudC5wYWdlWSAtIGFbMF0gKyBuWzBdLCB0Lm9yaWdpbmFsRXZlbnQucGFnZVggLSBhWzFdICsgblsxXSwgITFdIDogW3Qub3JpZ2luYWxFdmVudC5wYWdlWSwgdC5vcmlnaW5hbEV2ZW50LnBhZ2VYLCAhMV07CgogICAgICAgIGNhc2UgInRvdWNoc3RhcnQiOgogICAgICAgIGNhc2UgInRvdWNobW92ZSI6CiAgICAgICAgY2FzZSAidG91Y2hlbmQiOgogICAgICAgICAgdmFyIGkgPSB0Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXSB8fCB0Lm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0sCiAgICAgICAgICAgICAgciA9IHQub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aCB8fCB0Lm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOwogICAgICAgICAgcmV0dXJuIHQudGFyZ2V0Lm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ID8gW2kuc2NyZWVuWSwgaS5zY3JlZW5YLCByID4gMV0gOiBbaS5wYWdlWSwgaS5wYWdlWCwgciA+IDFdOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIGEgPyBbdC5wYWdlWSAtIGFbMF0gKyBuWzBdLCB0LnBhZ2VYIC0gYVsxXSArIG5bMV0sICExXSA6IFt0LnBhZ2VZLCB0LnBhZ2VYLCAhMV07CiAgICAgIH0KICAgIH0sCiAgICAgICAgSSA9IGZ1bmN0aW9uIEkoKSB7CiAgICAgIGZ1bmN0aW9uIHQoZSkgewogICAgICAgIHZhciB0ID0gbS5maW5kKCJpZnJhbWUiKTsKCiAgICAgICAgaWYgKHQubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgbyA9IGUgPyAiYXV0byIgOiAibm9uZSI7CiAgICAgICAgICB0LmNzcygicG9pbnRlci1ldmVudHMiLCBvKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG8oZSwgdCwgbywgYSkgewogICAgICAgIGlmIChtWzBdLmlkbGVUaW1lciA9IHUuc2Nyb2xsSW5lcnRpYSA8IDIzMyA/IDI1MCA6IDAsIG4uYXR0cigiaWQiKSA9PT0gaFsxXSkgdmFyIGkgPSAieCIsCiAgICAgICAgICAgIHIgPSAoblswXS5vZmZzZXRMZWZ0IC0gdCArIGEpICogZC5zY3JvbGxSYXRpby54O2Vsc2UgdmFyIGkgPSAieSIsCiAgICAgICAgICAgIHIgPSAoblswXS5vZmZzZXRUb3AgLSBlICsgbykgKiBkLnNjcm9sbFJhdGlvLnk7CiAgICAgICAgVihsLCByLnRvU3RyaW5nKCksIHsKICAgICAgICAgIGRpcjogaSwKICAgICAgICAgIGRyYWc6ICEwCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBuLAogICAgICAgICAgaSwKICAgICAgICAgIHIsCiAgICAgICAgICBsID0gZSh0aGlzKSwKICAgICAgICAgIGQgPSBsLmRhdGEoYSksCiAgICAgICAgICB1ID0gZC5vcHQsCiAgICAgICAgICBmID0gYSArICJfIiArIGQuaWR4LAogICAgICAgICAgaCA9IFsibUNTQl8iICsgZC5pZHggKyAiX2RyYWdnZXJfdmVydGljYWwiLCAibUNTQl8iICsgZC5pZHggKyAiX2RyYWdnZXJfaG9yaXpvbnRhbCJdLAogICAgICAgICAgbSA9IGUoIiNtQ1NCXyIgKyBkLmlkeCArICJfY29udGFpbmVyIiksCiAgICAgICAgICBwID0gZSgiIyIgKyBoWzBdICsgIiwjIiArIGhbMV0pLAogICAgICAgICAgZyA9IHUuYWR2YW5jZWQucmVsZWFzZURyYWdnYWJsZVNlbGVjdG9ycyA/IHAuYWRkKGUodS5hZHZhbmNlZC5yZWxlYXNlRHJhZ2dhYmxlU2VsZWN0b3JzKSkgOiBwLAogICAgICAgICAgdiA9IHUuYWR2YW5jZWQuZXh0cmFEcmFnZ2FibGVTZWxlY3RvcnMgPyBlKCFXKCkgfHwgdG9wLmRvY3VtZW50KS5hZGQoZSh1LmFkdmFuY2VkLmV4dHJhRHJhZ2dhYmxlU2VsZWN0b3JzKSkgOiBlKCFXKCkgfHwgdG9wLmRvY3VtZW50KTsKICAgICAgcC5iaW5kKCJtb3VzZWRvd24uIiArIGYgKyAiIHRvdWNoc3RhcnQuIiArIGYgKyAiIHBvaW50ZXJkb3duLiIgKyBmICsgIiBNU1BvaW50ZXJEb3duLiIgKyBmLCBmdW5jdGlvbiAobykgewogICAgICAgIGlmIChvLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCBvLnByZXZlbnREZWZhdWx0KCksIFoobykpIHsKICAgICAgICAgIGMgPSAhMCwgcyAmJiAoZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgfSksIHQoITEpLCBOKGwpLCBuID0gZSh0aGlzKTsKICAgICAgICAgIHZhciBhID0gbi5vZmZzZXQoKSwKICAgICAgICAgICAgICBkID0gTyhvKVswXSAtIGEudG9wLAogICAgICAgICAgICAgIGYgPSBPKG8pWzFdIC0gYS5sZWZ0LAogICAgICAgICAgICAgIGggPSBuLmhlaWdodCgpICsgYS50b3AsCiAgICAgICAgICAgICAgbSA9IG4ud2lkdGgoKSArIGEubGVmdDsKICAgICAgICAgIGggPiBkICYmIGQgPiAwICYmIG0gPiBmICYmIGYgPiAwICYmIChpID0gZCwgciA9IGYpLCBDKG4sICJhY3RpdmUiLCB1LmF1dG9FeHBhbmRTY3JvbGxiYXIpOwogICAgICAgIH0KICAgICAgfSkuYmluZCgidG91Y2htb3ZlLiIgKyBmLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB2YXIgdCA9IG4ub2Zmc2V0KCksCiAgICAgICAgICAgIGEgPSBPKGUpWzBdIC0gdC50b3AsCiAgICAgICAgICAgIGwgPSBPKGUpWzFdIC0gdC5sZWZ0OwogICAgICAgIG8oaSwgciwgYSwgbCk7CiAgICAgIH0pLCBlKGRvY3VtZW50KS5hZGQodikuYmluZCgibW91c2Vtb3ZlLiIgKyBmICsgIiBwb2ludGVybW92ZS4iICsgZiArICIgTVNQb2ludGVyTW92ZS4iICsgZiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAobikgewogICAgICAgICAgdmFyIHQgPSBuLm9mZnNldCgpLAogICAgICAgICAgICAgIGEgPSBPKGUpWzBdIC0gdC50b3AsCiAgICAgICAgICAgICAgbCA9IE8oZSlbMV0gLSB0LmxlZnQ7CiAgICAgICAgICBpZiAoaSA9PT0gYSAmJiByID09PSBsKSByZXR1cm47CiAgICAgICAgICBvKGksIHIsIGEsIGwpOwogICAgICAgIH0KICAgICAgfSkuYWRkKGcpLmJpbmQoIm1vdXNldXAuIiArIGYgKyAiIHRvdWNoZW5kLiIgKyBmICsgIiBwb2ludGVydXAuIiArIGYgKyAiIE1TUG9pbnRlclVwLiIgKyBmLCBmdW5jdGlvbiAoZSkgewogICAgICAgIG4gJiYgKEMobiwgImFjdGl2ZSIsIHUuYXV0b0V4cGFuZFNjcm9sbGJhciksIG4gPSBudWxsKSwgYyA9ICExLCBzICYmIChkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gbnVsbCksIHQoITApOwogICAgICB9KTsKICAgIH0sCiAgICAgICAgRCA9IGZ1bmN0aW9uIEQoKSB7CiAgICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgIGlmICghJChlKSB8fCBjIHx8IE8oZSlbMl0pIHJldHVybiB2b2lkICh0ID0gMCk7CiAgICAgICAgdCA9IDEsIGIgPSAwLCBDID0gMCwgZCA9IDEsIHkucmVtb3ZlQ2xhc3MoIm1DU190b3VjaF9hY3Rpb24iKTsKICAgICAgICB2YXIgbyA9IEkub2Zmc2V0KCk7CiAgICAgICAgdSA9IE8oZSlbMF0gLSBvLnRvcCwgZiA9IE8oZSlbMV0gLSBvLmxlZnQsIHogPSBbTyhlKVswXSwgTyhlKVsxXV07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICAgIGlmICgkKGUpICYmICFjICYmICFPKGUpWzJdICYmIChULmRvY3VtZW50VG91Y2hTY3JvbGwgfHwgZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCAoIUMgfHwgYikgJiYgZCkpIHsKICAgICAgICAgIGcgPSBHKCk7CiAgICAgICAgICB2YXIgdCA9IE0ub2Zmc2V0KCksCiAgICAgICAgICAgICAgbyA9IE8oZSlbMF0gLSB0LnRvcCwKICAgICAgICAgICAgICBhID0gTyhlKVsxXSAtIHQubGVmdCwKICAgICAgICAgICAgICBuID0gIm1jc0xpbmVhck91dCI7CiAgICAgICAgICBpZiAoRS5wdXNoKG8pLCBSLnB1c2goYSksIHpbMl0gPSBNYXRoLmFicyhPKGUpWzBdIC0gelswXSksIHpbM10gPSBNYXRoLmFicyhPKGUpWzFdIC0gelsxXSksIEIub3ZlcmZsb3dlZFswXSkgdmFyIGkgPSBEWzBdLnBhcmVudCgpLmhlaWdodCgpIC0gRFswXS5oZWlnaHQoKSwKICAgICAgICAgICAgICByID0gdSAtIG8gPiAwICYmIG8gLSB1ID4gLShpICogQi5zY3JvbGxSYXRpby55KSAmJiAoMiAqIHpbM10gPCB6WzJdIHx8ICJ5eCIgPT09IFQuYXhpcyk7CiAgICAgICAgICBpZiAoQi5vdmVyZmxvd2VkWzFdKSB2YXIgbCA9IERbMV0ucGFyZW50KCkud2lkdGgoKSAtIERbMV0ud2lkdGgoKSwKICAgICAgICAgICAgICBoID0gZiAtIGEgPiAwICYmIGEgLSBmID4gLShsICogQi5zY3JvbGxSYXRpby54KSAmJiAoMiAqIHpbMl0gPCB6WzNdIHx8ICJ5eCIgPT09IFQuYXhpcyk7CiAgICAgICAgICByIHx8IGggPyAoVSB8fCBlLnByZXZlbnREZWZhdWx0KCksIGIgPSAxKSA6IChDID0gMSwgeS5hZGRDbGFzcygibUNTX3RvdWNoX2FjdGlvbiIpKSwgVSAmJiBlLnByZXZlbnREZWZhdWx0KCksIHcgPSAieXgiID09PSBULmF4aXMgPyBbdSAtIG8sIGYgLSBhXSA6ICJ4IiA9PT0gVC5heGlzID8gW251bGwsIGYgLSBhXSA6IFt1IC0gbywgbnVsbF0sIElbMF0uaWRsZVRpbWVyID0gMjUwLCBCLm92ZXJmbG93ZWRbMF0gJiYgcyh3WzBdLCBBLCBuLCAieSIsICJhbGwiLCAhMCksIEIub3ZlcmZsb3dlZFsxXSAmJiBzKHdbMV0sIEEsIG4sICJ4IiwgTCwgITApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgaWYgKCEkKGUpIHx8IGMgfHwgTyhlKVsyXSkgcmV0dXJuIHZvaWQgKHQgPSAwKTsKICAgICAgICB0ID0gMSwgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwgTih5KSwgcCA9IEcoKTsKICAgICAgICB2YXIgbyA9IE0ub2Zmc2V0KCk7CiAgICAgICAgaCA9IE8oZSlbMF0gLSBvLnRvcCwgbSA9IE8oZSlbMV0gLSBvLmxlZnQsIEUgPSBbXSwgUiA9IFtdOwogICAgICB9CgogICAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgICBpZiAoJChlKSAmJiAhYyAmJiAhTyhlKVsyXSkgewogICAgICAgICAgZCA9IDAsIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIGIgPSAwLCBDID0gMCwgdiA9IEcoKTsKICAgICAgICAgIHZhciB0ID0gTS5vZmZzZXQoKSwKICAgICAgICAgICAgICBvID0gTyhlKVswXSAtIHQudG9wLAogICAgICAgICAgICAgIGEgPSBPKGUpWzFdIC0gdC5sZWZ0OwoKICAgICAgICAgIGlmICghKHYgLSBnID4gMzApKSB7CiAgICAgICAgICAgIF8gPSAxZTMgLyAodiAtIHApOwogICAgICAgICAgICB2YXIgbiA9ICJtY3NFYXNlT3V0IiwKICAgICAgICAgICAgICAgIGkgPSAyLjUgPiBfLAogICAgICAgICAgICAgICAgciA9IGkgPyBbRVtFLmxlbmd0aCAtIDJdLCBSW1IubGVuZ3RoIC0gMl1dIDogWzAsIDBdOwogICAgICAgICAgICB4ID0gaSA/IFtvIC0gclswXSwgYSAtIHJbMV1dIDogW28gLSBoLCBhIC0gbV07CiAgICAgICAgICAgIHZhciB1ID0gW01hdGguYWJzKHhbMF0pLCBNYXRoLmFicyh4WzFdKV07CiAgICAgICAgICAgIF8gPSBpID8gW01hdGguYWJzKHhbMF0gLyA0KSwgTWF0aC5hYnMoeFsxXSAvIDQpXSA6IFtfLCBfXTsKICAgICAgICAgICAgdmFyIGYgPSBbTWF0aC5hYnMoSVswXS5vZmZzZXRUb3ApIC0geFswXSAqIGwodVswXSAvIF9bMF0sIF9bMF0pLCBNYXRoLmFicyhJWzBdLm9mZnNldExlZnQpIC0geFsxXSAqIGwodVsxXSAvIF9bMV0sIF9bMV0pXTsKICAgICAgICAgICAgdyA9ICJ5eCIgPT09IFQuYXhpcyA/IFtmWzBdLCBmWzFdXSA6ICJ4IiA9PT0gVC5heGlzID8gW251bGwsIGZbMV1dIDogW2ZbMF0sIG51bGxdLCBTID0gWzQgKiB1WzBdICsgVC5zY3JvbGxJbmVydGlhLCA0ICogdVsxXSArIFQuc2Nyb2xsSW5lcnRpYV07CiAgICAgICAgICAgIHZhciB5ID0gcGFyc2VJbnQoVC5jb250ZW50VG91Y2hTY3JvbGwpIHx8IDA7CiAgICAgICAgICAgIHdbMF0gPSB1WzBdID4geSA/IHdbMF0gOiAwLCB3WzFdID0gdVsxXSA+IHkgPyB3WzFdIDogMCwgQi5vdmVyZmxvd2VkWzBdICYmIHMod1swXSwgU1swXSwgbiwgInkiLCBMLCAhMSksIEIub3ZlcmZsb3dlZFsxXSAmJiBzKHdbMV0sIFNbMV0sIG4sICJ4IiwgTCwgITEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgZnVuY3Rpb24gbChlLCB0KSB7CiAgICAgICAgdmFyIG8gPSBbMS41ICogdCwgMiAqIHQsIHQgLyAxLjUsIHQgLyAyXTsKICAgICAgICByZXR1cm4gZSA+IDkwID8gdCA+IDQgPyBvWzBdIDogb1szXSA6IGUgPiA2MCA/IHQgPiAzID8gb1szXSA6IG9bMl0gOiBlID4gMzAgPyB0ID4gOCA/IG9bMV0gOiB0ID4gNiA/IG9bMF0gOiB0ID4gNCA/IHQgOiBvWzJdIDogdCA+IDggPyB0IDogb1szXTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcyhlLCB0LCBvLCBhLCBuLCBpKSB7CiAgICAgICAgZSAmJiBWKHksIGUudG9TdHJpbmcoKSwgewogICAgICAgICAgZHVyOiB0LAogICAgICAgICAgc2Nyb2xsRWFzaW5nOiBvLAogICAgICAgICAgZGlyOiBhLAogICAgICAgICAgb3ZlcndyaXRlOiBuLAogICAgICAgICAgZHJhZzogaQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgZCwKICAgICAgICAgIHUsCiAgICAgICAgICBmLAogICAgICAgICAgaCwKICAgICAgICAgIG0sCiAgICAgICAgICBwLAogICAgICAgICAgZywKICAgICAgICAgIHYsCiAgICAgICAgICB4LAogICAgICAgICAgXywKICAgICAgICAgIHcsCiAgICAgICAgICBTLAogICAgICAgICAgYiwKICAgICAgICAgIEMsCiAgICAgICAgICB5ID0gZSh0aGlzKSwKICAgICAgICAgIEIgPSB5LmRhdGEoYSksCiAgICAgICAgICBUID0gQi5vcHQsCiAgICAgICAgICBrID0gYSArICJfIiArIEIuaWR4LAogICAgICAgICAgTSA9IGUoIiNtQ1NCXyIgKyBCLmlkeCksCiAgICAgICAgICBJID0gZSgiI21DU0JfIiArIEIuaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIEQgPSBbZSgiI21DU0JfIiArIEIuaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsIiksIGUoIiNtQ1NCXyIgKyBCLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsIildLAogICAgICAgICAgRSA9IFtdLAogICAgICAgICAgUiA9IFtdLAogICAgICAgICAgQSA9IDAsCiAgICAgICAgICBMID0gInl4IiA9PT0gVC5heGlzID8gIm5vbmUiIDogImFsbCIsCiAgICAgICAgICB6ID0gW10sCiAgICAgICAgICBQID0gSS5maW5kKCJpZnJhbWUiKSwKICAgICAgICAgIEggPSBbInRvdWNoc3RhcnQuIiArIGsgKyAiIHBvaW50ZXJkb3duLiIgKyBrICsgIiBNU1BvaW50ZXJEb3duLiIgKyBrLCAidG91Y2htb3ZlLiIgKyBrICsgIiBwb2ludGVybW92ZS4iICsgayArICIgTVNQb2ludGVyTW92ZS4iICsgaywgInRvdWNoZW5kLiIgKyBrICsgIiBwb2ludGVydXAuIiArIGsgKyAiIE1TUG9pbnRlclVwLiIgKyBrXSwKICAgICAgICAgIFUgPSB2b2lkIDAgIT09IGRvY3VtZW50LmJvZHkuc3R5bGUudG91Y2hBY3Rpb247CgogICAgICBJLmJpbmQoSFswXSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBvKGUpOwogICAgICB9KS5iaW5kKEhbMV0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgbihlKTsKICAgICAgfSksIE0uYmluZChIWzBdLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGkoZSk7CiAgICAgIH0pLmJpbmQoSFsyXSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICByKGUpOwogICAgICB9KSwgUC5sZW5ndGggJiYgUC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBlKHRoaXMpLmxvYWQoZnVuY3Rpb24gKCkgewogICAgICAgICAgVyh0aGlzKSAmJiBlKHRoaXMuY29udGVudERvY3VtZW50IHx8IHRoaXMuY29udGVudFdpbmRvdy5kb2N1bWVudCkuYmluZChIWzBdLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBvKGUpLCBpKGUpOwogICAgICAgICAgfSkuYmluZChIWzFdLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBuKGUpOwogICAgICAgICAgfSkuYmluZChIWzJdLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICByKGUpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgICAgICBFID0gZnVuY3Rpb24gRSgpIHsKICAgICAgZnVuY3Rpb24gbygpIHsKICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbiA/IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpIDogZG9jdW1lbnQuc2VsZWN0aW9uICYmICJDb250cm9sIiAhPSBkb2N1bWVudC5zZWxlY3Rpb24udHlwZSA/IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQgOiAwOwogICAgICB9CgogICAgICBmdW5jdGlvbiBuKGUsIHQsIG8pIHsKICAgICAgICBkLnR5cGUgPSBvICYmIGkgPyAic3RlcHBlZCIgOiAic3RlcGxlc3MiLCBkLnNjcm9sbEFtb3VudCA9IDEwLCBGKHIsIGUsIHQsICJtY3NMaW5lYXJPdXQiLCBvID8gNjAgOiBudWxsKTsKICAgICAgfQoKICAgICAgdmFyIGksCiAgICAgICAgICByID0gZSh0aGlzKSwKICAgICAgICAgIGwgPSByLmRhdGEoYSksCiAgICAgICAgICBzID0gbC5vcHQsCiAgICAgICAgICBkID0gbC5zZXF1ZW50aWFsLAogICAgICAgICAgdSA9IGEgKyAiXyIgKyBsLmlkeCwKICAgICAgICAgIGYgPSBlKCIjbUNTQl8iICsgbC5pZHggKyAiX2NvbnRhaW5lciIpLAogICAgICAgICAgaCA9IGYucGFyZW50KCk7CiAgICAgIGYuYmluZCgibW91c2Vkb3duLiIgKyB1LCBmdW5jdGlvbiAoZSkgewogICAgICAgIHQgfHwgaSB8fCAoaSA9IDEsIGMgPSAhMCk7CiAgICAgIH0pLmFkZChkb2N1bWVudCkuYmluZCgibW91c2Vtb3ZlLiIgKyB1LCBmdW5jdGlvbiAoZSkgewogICAgICAgIGlmICghdCAmJiBpICYmIG8oKSkgewogICAgICAgICAgdmFyIGEgPSBmLm9mZnNldCgpLAogICAgICAgICAgICAgIHIgPSBPKGUpWzBdIC0gYS50b3AgKyBmWzBdLm9mZnNldFRvcCwKICAgICAgICAgICAgICBjID0gTyhlKVsxXSAtIGEubGVmdCArIGZbMF0ub2Zmc2V0TGVmdDsKICAgICAgICAgIHIgPiAwICYmIHIgPCBoLmhlaWdodCgpICYmIGMgPiAwICYmIGMgPCBoLndpZHRoKCkgPyBkLnN0ZXAgJiYgbigib2ZmIiwgbnVsbCwgInN0ZXBwZWQiKSA6ICgieCIgIT09IHMuYXhpcyAmJiBsLm92ZXJmbG93ZWRbMF0gJiYgKDAgPiByID8gbigib24iLCAzOCkgOiByID4gaC5oZWlnaHQoKSAmJiBuKCJvbiIsIDQwKSksICJ5IiAhPT0gcy5heGlzICYmIGwub3ZlcmZsb3dlZFsxXSAmJiAoMCA+IGMgPyBuKCJvbiIsIDM3KSA6IGMgPiBoLndpZHRoKCkgJiYgbigib24iLCAzOSkpKTsKICAgICAgICB9CiAgICAgIH0pLmJpbmQoIm1vdXNldXAuIiArIHUgKyAiIGRyYWdlbmQuIiArIHUsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdCB8fCAoaSAmJiAoaSA9IDAsIG4oIm9mZiIsIG51bGwpKSwgYyA9ICExKTsKICAgICAgfSk7CiAgICB9LAogICAgICAgIFIgPSBmdW5jdGlvbiBSKCkgewogICAgICBmdW5jdGlvbiB0KHQsIGEpIHsKICAgICAgICBpZiAoTihvKSwgIUEobywgdC50YXJnZXQpKSB7CiAgICAgICAgICB2YXIgciA9ICJhdXRvIiAhPT0gaS5tb3VzZVdoZWVsLmRlbHRhRmFjdG9yID8gcGFyc2VJbnQoaS5tb3VzZVdoZWVsLmRlbHRhRmFjdG9yKSA6IHMgJiYgdC5kZWx0YUZhY3RvciA8IDEwMCA/IDEwMCA6IHQuZGVsdGFGYWN0b3IgfHwgMTAwLAogICAgICAgICAgICAgIGQgPSBpLnNjcm9sbEluZXJ0aWE7CiAgICAgICAgICBpZiAoIngiID09PSBpLmF4aXMgfHwgIngiID09PSBpLm1vdXNlV2hlZWwuYXhpcykgdmFyIHUgPSAieCIsCiAgICAgICAgICAgICAgZiA9IFtNYXRoLnJvdW5kKHIgKiBuLnNjcm9sbFJhdGlvLngpLCBwYXJzZUludChpLm1vdXNlV2hlZWwuc2Nyb2xsQW1vdW50KV0sCiAgICAgICAgICAgICAgaCA9ICJhdXRvIiAhPT0gaS5tb3VzZVdoZWVsLnNjcm9sbEFtb3VudCA/IGZbMV0gOiBmWzBdID49IGwud2lkdGgoKSA/IC45ICogbC53aWR0aCgpIDogZlswXSwKICAgICAgICAgICAgICBtID0gTWF0aC5hYnMoZSgiI21DU0JfIiArIG4uaWR4ICsgIl9jb250YWluZXIiKVswXS5vZmZzZXRMZWZ0KSwKICAgICAgICAgICAgICBwID0gY1sxXVswXS5vZmZzZXRMZWZ0LAogICAgICAgICAgICAgIGcgPSBjWzFdLnBhcmVudCgpLndpZHRoKCkgLSBjWzFdLndpZHRoKCksCiAgICAgICAgICAgICAgdiA9IHQuZGVsdGFYIHx8IHQuZGVsdGFZIHx8IGE7ZWxzZSB2YXIgdSA9ICJ5IiwKICAgICAgICAgICAgICBmID0gW01hdGgucm91bmQociAqIG4uc2Nyb2xsUmF0aW8ueSksIHBhcnNlSW50KGkubW91c2VXaGVlbC5zY3JvbGxBbW91bnQpXSwKICAgICAgICAgICAgICBoID0gImF1dG8iICE9PSBpLm1vdXNlV2hlZWwuc2Nyb2xsQW1vdW50ID8gZlsxXSA6IGZbMF0gPj0gbC5oZWlnaHQoKSA/IC45ICogbC5oZWlnaHQoKSA6IGZbMF0sCiAgICAgICAgICAgICAgbSA9IE1hdGguYWJzKGUoIiNtQ1NCXyIgKyBuLmlkeCArICJfY29udGFpbmVyIilbMF0ub2Zmc2V0VG9wKSwKICAgICAgICAgICAgICBwID0gY1swXVswXS5vZmZzZXRUb3AsCiAgICAgICAgICAgICAgZyA9IGNbMF0ucGFyZW50KCkuaGVpZ2h0KCkgLSBjWzBdLmhlaWdodCgpLAogICAgICAgICAgICAgIHYgPSB0LmRlbHRhWSB8fCBhOwogICAgICAgICAgInkiID09PSB1ICYmICFuLm92ZXJmbG93ZWRbMF0gfHwgIngiID09PSB1ICYmICFuLm92ZXJmbG93ZWRbMV0gfHwgKChpLm1vdXNlV2hlZWwuaW52ZXJ0IHx8IHQud2Via2l0RGlyZWN0aW9uSW52ZXJ0ZWRGcm9tRGV2aWNlKSAmJiAodiA9IC12KSwgaS5tb3VzZVdoZWVsLm5vcm1hbGl6ZURlbHRhICYmICh2ID0gMCA+IHYgPyAtMSA6IDEpLCAodiA+IDAgJiYgMCAhPT0gcCB8fCAwID4gdiAmJiBwICE9PSBnIHx8IGkubW91c2VXaGVlbC5wcmV2ZW50RGVmYXVsdCkgJiYgKHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIHQucHJldmVudERlZmF1bHQoKSksIHQuZGVsdGFGYWN0b3IgPCAyICYmICFpLm1vdXNlV2hlZWwubm9ybWFsaXplRGVsdGEgJiYgKGggPSB0LmRlbHRhRmFjdG9yLCBkID0gMTcpLCBWKG8sIChtIC0gdiAqIGgpLnRvU3RyaW5nKCksIHsKICAgICAgICAgICAgZGlyOiB1LAogICAgICAgICAgICBkdXI6IGQKICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChlKHRoaXMpLmRhdGEoYSkpIHsKICAgICAgICB2YXIgbyA9IGUodGhpcyksCiAgICAgICAgICAgIG4gPSBvLmRhdGEoYSksCiAgICAgICAgICAgIGkgPSBuLm9wdCwKICAgICAgICAgICAgciA9IGEgKyAiXyIgKyBuLmlkeCwKICAgICAgICAgICAgbCA9IGUoIiNtQ1NCXyIgKyBuLmlkeCksCiAgICAgICAgICAgIGMgPSBbZSgiI21DU0JfIiArIG4uaWR4ICsgIl9kcmFnZ2VyX3ZlcnRpY2FsIiksIGUoIiNtQ1NCXyIgKyBuLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsIildLAogICAgICAgICAgICBkID0gZSgiI21DU0JfIiArIG4uaWR4ICsgIl9jb250YWluZXIiKS5maW5kKCJpZnJhbWUiKTsKICAgICAgICBkLmxlbmd0aCAmJiBkLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgZSh0aGlzKS5sb2FkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgVyh0aGlzKSAmJiBlKHRoaXMuY29udGVudERvY3VtZW50IHx8IHRoaXMuY29udGVudFdpbmRvdy5kb2N1bWVudCkuYmluZCgibW91c2V3aGVlbC4iICsgciwgZnVuY3Rpb24gKGUsIG8pIHsKICAgICAgICAgICAgICB0KGUsIG8pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pLCBsLmJpbmQoIm1vdXNld2hlZWwuIiArIHIsIGZ1bmN0aW9uIChlLCBvKSB7CiAgICAgICAgICB0KGUsIG8pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgICAgIFcgPSBmdW5jdGlvbiBXKGUpIHsKICAgICAgdmFyIHQgPSBudWxsOwoKICAgICAgaWYgKGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIG8gPSBlLmNvbnRlbnREb2N1bWVudCB8fCBlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgICAgICAgICB0ID0gby5ib2R5LmlubmVySFRNTDsKICAgICAgICB9IGNhdGNoIChhKSB7fQoKICAgICAgICByZXR1cm4gbnVsbCAhPT0gdDsKICAgICAgfQoKICAgICAgdHJ5IHsKICAgICAgICB2YXIgbyA9IHRvcC5kb2N1bWVudDsKICAgICAgICB0ID0gby5ib2R5LmlubmVySFRNTDsKICAgICAgfSBjYXRjaCAoYSkge30KCiAgICAgIHJldHVybiBudWxsICE9PSB0OwogICAgfSwKICAgICAgICBBID0gZnVuY3Rpb24gQSh0LCBvKSB7CiAgICAgIHZhciBuID0gby5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgaSA9IHQuZGF0YShhKS5vcHQubW91c2VXaGVlbC5kaXNhYmxlT3ZlciwKICAgICAgICAgIHIgPSBbInNlbGVjdCIsICJ0ZXh0YXJlYSJdOwogICAgICByZXR1cm4gZS5pbkFycmF5KG4sIGkpID4gLTEgJiYgIShlLmluQXJyYXkobiwgcikgPiAtMSAmJiAhZShvKS5pcygiOmZvY3VzIikpOwogICAgfSwKICAgICAgICBMID0gZnVuY3Rpb24gTCgpIHsKICAgICAgdmFyIHQsCiAgICAgICAgICBvID0gZSh0aGlzKSwKICAgICAgICAgIG4gPSBvLmRhdGEoYSksCiAgICAgICAgICBpID0gYSArICJfIiArIG4uaWR4LAogICAgICAgICAgciA9IGUoIiNtQ1NCXyIgKyBuLmlkeCArICJfY29udGFpbmVyIiksCiAgICAgICAgICBsID0gci5wYXJlbnQoKSwKICAgICAgICAgIHMgPSBlKCIubUNTQl8iICsgbi5pZHggKyAiX3Njcm9sbGJhciAuIiArIGRbMTJdKTsKICAgICAgcy5iaW5kKCJtb3VzZWRvd24uIiArIGkgKyAiIHRvdWNoc3RhcnQuIiArIGkgKyAiIHBvaW50ZXJkb3duLiIgKyBpICsgIiBNU1BvaW50ZXJEb3duLiIgKyBpLCBmdW5jdGlvbiAobykgewogICAgICAgIGMgPSAhMCwgZShvLnRhcmdldCkuaGFzQ2xhc3MoIm1DU0JfZHJhZ2dlciIpIHx8ICh0ID0gMSk7CiAgICAgIH0pLmJpbmQoInRvdWNoZW5kLiIgKyBpICsgIiBwb2ludGVydXAuIiArIGkgKyAiIE1TUG9pbnRlclVwLiIgKyBpLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGMgPSAhMTsKICAgICAgfSkuYmluZCgiY2xpY2suIiArIGksIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgaWYgKHQgJiYgKHQgPSAwLCBlKGEudGFyZ2V0KS5oYXNDbGFzcyhkWzEyXSkgfHwgZShhLnRhcmdldCkuaGFzQ2xhc3MoIm1DU0JfZHJhZ2dlclJhaWwiKSkpIHsKICAgICAgICAgIE4obyk7CiAgICAgICAgICB2YXIgaSA9IGUodGhpcyksCiAgICAgICAgICAgICAgcyA9IGkuZmluZCgiLm1DU0JfZHJhZ2dlciIpOwoKICAgICAgICAgIGlmIChpLnBhcmVudCgiLm1DU0Jfc2Nyb2xsVG9vbHNfaG9yaXpvbnRhbCIpLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgaWYgKCFuLm92ZXJmbG93ZWRbMV0pIHJldHVybjsKICAgICAgICAgICAgdmFyIGMgPSAieCIsCiAgICAgICAgICAgICAgICB1ID0gYS5wYWdlWCA+IHMub2Zmc2V0KCkubGVmdCA/IC0xIDogMSwKICAgICAgICAgICAgICAgIGYgPSBNYXRoLmFicyhyWzBdLm9mZnNldExlZnQpIC0gLjkgKiB1ICogbC53aWR0aCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKCFuLm92ZXJmbG93ZWRbMF0pIHJldHVybjsKICAgICAgICAgICAgdmFyIGMgPSAieSIsCiAgICAgICAgICAgICAgICB1ID0gYS5wYWdlWSA+IHMub2Zmc2V0KCkudG9wID8gLTEgOiAxLAogICAgICAgICAgICAgICAgZiA9IE1hdGguYWJzKHJbMF0ub2Zmc2V0VG9wKSAtIC45ICogdSAqIGwuaGVpZ2h0KCk7CiAgICAgICAgICB9CgogICAgICAgICAgVihvLCBmLnRvU3RyaW5nKCksIHsKICAgICAgICAgICAgZGlyOiBjLAogICAgICAgICAgICBzY3JvbGxFYXNpbmc6ICJtY3NFYXNlSW5PdXQiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgICAgICB6ID0gZnVuY3Rpb24geigpIHsKICAgICAgdmFyIHQgPSBlKHRoaXMpLAogICAgICAgICAgbyA9IHQuZGF0YShhKSwKICAgICAgICAgIG4gPSBvLm9wdCwKICAgICAgICAgIGkgPSBhICsgIl8iICsgby5pZHgsCiAgICAgICAgICByID0gZSgiI21DU0JfIiArIG8uaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIGwgPSByLnBhcmVudCgpOwogICAgICByLmJpbmQoImZvY3VzaW4uIiArIGksIGZ1bmN0aW9uIChvKSB7CiAgICAgICAgdmFyIGEgPSBlKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLAogICAgICAgICAgICBpID0gci5maW5kKCIubUN1c3RvbVNjcm9sbEJveCIpLmxlbmd0aCwKICAgICAgICAgICAgcyA9IDA7CiAgICAgICAgYS5pcyhuLmFkdmFuY2VkLmF1dG9TY3JvbGxPbkZvY3VzKSAmJiAoTih0KSwgY2xlYXJUaW1lb3V0KHRbMF0uX2ZvY3VzVGltZW91dCksIHRbMF0uX2ZvY3VzVGltZXIgPSBpID8gKHMgKyAxNykgKiBpIDogMCwgdFswXS5fZm9jdXNUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZSA9IFt0ZShhKVswXSwgdGUoYSlbMV1dLAogICAgICAgICAgICAgIG8gPSBbclswXS5vZmZzZXRUb3AsIHJbMF0ub2Zmc2V0TGVmdF0sCiAgICAgICAgICAgICAgaSA9IFtvWzBdICsgZVswXSA+PSAwICYmIG9bMF0gKyBlWzBdIDwgbC5oZWlnaHQoKSAtIGEub3V0ZXJIZWlnaHQoITEpLCBvWzFdICsgZVsxXSA+PSAwICYmIG9bMF0gKyBlWzFdIDwgbC53aWR0aCgpIC0gYS5vdXRlcldpZHRoKCExKV0sCiAgICAgICAgICAgICAgYyA9ICJ5eCIgIT09IG4uYXhpcyB8fCBpWzBdIHx8IGlbMV0gPyAiYWxsIiA6ICJub25lIjsKICAgICAgICAgICJ4IiA9PT0gbi5heGlzIHx8IGlbMF0gfHwgVih0LCBlWzBdLnRvU3RyaW5nKCksIHsKICAgICAgICAgICAgZGlyOiAieSIsCiAgICAgICAgICAgIHNjcm9sbEVhc2luZzogIm1jc0Vhc2VJbk91dCIsCiAgICAgICAgICAgIG92ZXJ3cml0ZTogYywKICAgICAgICAgICAgZHVyOiBzCiAgICAgICAgICB9KSwgInkiID09PSBuLmF4aXMgfHwgaVsxXSB8fCBWKHQsIGVbMV0udG9TdHJpbmcoKSwgewogICAgICAgICAgICBkaXI6ICJ4IiwKICAgICAgICAgICAgc2Nyb2xsRWFzaW5nOiAibWNzRWFzZUluT3V0IiwKICAgICAgICAgICAgb3ZlcndyaXRlOiBjLAogICAgICAgICAgICBkdXI6IHMKICAgICAgICAgIH0pOwogICAgICAgIH0sIHRbMF0uX2ZvY3VzVGltZXIpKTsKICAgICAgfSk7CiAgICB9LAogICAgICAgIFAgPSBmdW5jdGlvbiBQKCkgewogICAgICB2YXIgdCA9IGUodGhpcyksCiAgICAgICAgICBvID0gdC5kYXRhKGEpLAogICAgICAgICAgbiA9IGEgKyAiXyIgKyBvLmlkeCwKICAgICAgICAgIGkgPSBlKCIjbUNTQl8iICsgby5pZHggKyAiX2NvbnRhaW5lciIpLnBhcmVudCgpOwogICAgICBpLmJpbmQoInNjcm9sbC4iICsgbiwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAoMCAhPT0gaS5zY3JvbGxUb3AoKSB8fCAwICE9PSBpLnNjcm9sbExlZnQoKSkgJiYgZSgiLm1DU0JfIiArIG8uaWR4ICsgIl9zY3JvbGxiYXIiKS5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgIH0pOwogICAgfSwKICAgICAgICBIID0gZnVuY3Rpb24gSCgpIHsKICAgICAgdmFyIHQgPSBlKHRoaXMpLAogICAgICAgICAgbyA9IHQuZGF0YShhKSwKICAgICAgICAgIG4gPSBvLm9wdCwKICAgICAgICAgIGkgPSBvLnNlcXVlbnRpYWwsCiAgICAgICAgICByID0gYSArICJfIiArIG8uaWR4LAogICAgICAgICAgbCA9ICIubUNTQl8iICsgby5pZHggKyAiX3Njcm9sbGJhciIsCiAgICAgICAgICBzID0gZShsICsgIj5hIik7CiAgICAgIHMuYmluZCgibW91c2Vkb3duLiIgKyByICsgIiB0b3VjaHN0YXJ0LiIgKyByICsgIiBwb2ludGVyZG93bi4iICsgciArICIgTVNQb2ludGVyRG93bi4iICsgciArICIgbW91c2V1cC4iICsgciArICIgdG91Y2hlbmQuIiArIHIgKyAiIHBvaW50ZXJ1cC4iICsgciArICIgTVNQb2ludGVyVXAuIiArIHIgKyAiIG1vdXNlb3V0LiIgKyByICsgIiBwb2ludGVyb3V0LiIgKyByICsgIiBNU1BvaW50ZXJPdXQuIiArIHIgKyAiIGNsaWNrLiIgKyByLCBmdW5jdGlvbiAoYSkgewogICAgICAgIGZ1bmN0aW9uIHIoZSwgbykgewogICAgICAgICAgaS5zY3JvbGxBbW91bnQgPSBuLnNjcm9sbEJ1dHRvbnMuc2Nyb2xsQW1vdW50LCBGKHQsIGUsIG8pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGEucHJldmVudERlZmF1bHQoKSwgWihhKSkgewogICAgICAgICAgdmFyIGwgPSBlKHRoaXMpLmF0dHIoImNsYXNzIik7CgogICAgICAgICAgc3dpdGNoIChpLnR5cGUgPSBuLnNjcm9sbEJ1dHRvbnMuc2Nyb2xsVHlwZSwgYS50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgIm1vdXNlZG93biI6CiAgICAgICAgICAgIGNhc2UgInRvdWNoc3RhcnQiOgogICAgICAgICAgICBjYXNlICJwb2ludGVyZG93biI6CiAgICAgICAgICAgIGNhc2UgIk1TUG9pbnRlckRvd24iOgogICAgICAgICAgICAgIGlmICgic3RlcHBlZCIgPT09IGkudHlwZSkgcmV0dXJuOwogICAgICAgICAgICAgIGMgPSAhMCwgby50d2VlblJ1bm5pbmcgPSAhMSwgcigib24iLCBsKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgIm1vdXNldXAiOgogICAgICAgICAgICBjYXNlICJ0b3VjaGVuZCI6CiAgICAgICAgICAgIGNhc2UgInBvaW50ZXJ1cCI6CiAgICAgICAgICAgIGNhc2UgIk1TUG9pbnRlclVwIjoKICAgICAgICAgICAgY2FzZSAibW91c2VvdXQiOgogICAgICAgICAgICBjYXNlICJwb2ludGVyb3V0IjoKICAgICAgICAgICAgY2FzZSAiTVNQb2ludGVyT3V0IjoKICAgICAgICAgICAgICBpZiAoInN0ZXBwZWQiID09PSBpLnR5cGUpIHJldHVybjsKICAgICAgICAgICAgICBjID0gITEsIGkuZGlyICYmIHIoIm9mZiIsIGwpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAiY2xpY2siOgogICAgICAgICAgICAgIGlmICgic3RlcHBlZCIgIT09IGkudHlwZSB8fCBvLnR3ZWVuUnVubmluZykgcmV0dXJuOwogICAgICAgICAgICAgIHIoIm9uIiwgbCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAgICAgVSA9IGZ1bmN0aW9uIFUoKSB7CiAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgIGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICAgICAgci50eXBlID0gaS5rZXlib2FyZC5zY3JvbGxUeXBlLCByLnNjcm9sbEFtb3VudCA9IGkua2V5Ym9hcmQuc2Nyb2xsQW1vdW50LCAic3RlcHBlZCIgPT09IHIudHlwZSAmJiBuLnR3ZWVuUnVubmluZyB8fCBGKG8sIGUsIHQpOwogICAgICAgIH0KCiAgICAgICAgc3dpdGNoICh0LnR5cGUpIHsKICAgICAgICAgIGNhc2UgImJsdXIiOgogICAgICAgICAgICBuLnR3ZWVuUnVubmluZyAmJiByLmRpciAmJiBhKCJvZmYiLCBudWxsKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAia2V5ZG93biI6CiAgICAgICAgICBjYXNlICJrZXl1cCI6CiAgICAgICAgICAgIHZhciBsID0gdC5rZXlDb2RlID8gdC5rZXlDb2RlIDogdC53aGljaCwKICAgICAgICAgICAgICAgIHMgPSAib24iOwoKICAgICAgICAgICAgaWYgKCJ4IiAhPT0gaS5heGlzICYmICgzOCA9PT0gbCB8fCA0MCA9PT0gbCkgfHwgInkiICE9PSBpLmF4aXMgJiYgKDM3ID09PSBsIHx8IDM5ID09PSBsKSkgewogICAgICAgICAgICAgIGlmICgoMzggPT09IGwgfHwgNDAgPT09IGwpICYmICFuLm92ZXJmbG93ZWRbMF0gfHwgKDM3ID09PSBsIHx8IDM5ID09PSBsKSAmJiAhbi5vdmVyZmxvd2VkWzFdKSByZXR1cm47CiAgICAgICAgICAgICAgImtleXVwIiA9PT0gdC50eXBlICYmIChzID0gIm9mZiIpLCBlKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLmlzKHUpIHx8ICh0LnByZXZlbnREZWZhdWx0KCksIHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksIGEocywgbCkpOwogICAgICAgICAgICB9IGVsc2UgaWYgKDMzID09PSBsIHx8IDM0ID09PSBsKSB7CiAgICAgICAgICAgICAgaWYgKChuLm92ZXJmbG93ZWRbMF0gfHwgbi5vdmVyZmxvd2VkWzFdKSAmJiAodC5wcmV2ZW50RGVmYXVsdCgpLCB0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKSwgImtleXVwIiA9PT0gdC50eXBlKSB7CiAgICAgICAgICAgICAgICBOKG8pOwogICAgICAgICAgICAgICAgdmFyIGYgPSAzNCA9PT0gbCA/IC0xIDogMTsKICAgICAgICAgICAgICAgIGlmICgieCIgPT09IGkuYXhpcyB8fCAieXgiID09PSBpLmF4aXMgJiYgbi5vdmVyZmxvd2VkWzFdICYmICFuLm92ZXJmbG93ZWRbMF0pIHZhciBoID0gIngiLAogICAgICAgICAgICAgICAgICAgIG0gPSBNYXRoLmFicyhjWzBdLm9mZnNldExlZnQpIC0gLjkgKiBmICogZC53aWR0aCgpO2Vsc2UgdmFyIGggPSAieSIsCiAgICAgICAgICAgICAgICAgICAgbSA9IE1hdGguYWJzKGNbMF0ub2Zmc2V0VG9wKSAtIC45ICogZiAqIGQuaGVpZ2h0KCk7CiAgICAgICAgICAgICAgICBWKG8sIG0udG9TdHJpbmcoKSwgewogICAgICAgICAgICAgICAgICBkaXI6IGgsCiAgICAgICAgICAgICAgICAgIHNjcm9sbEVhc2luZzogIm1jc0Vhc2VJbk91dCIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIGlmICgoMzUgPT09IGwgfHwgMzYgPT09IGwpICYmICFlKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLmlzKHUpICYmICgobi5vdmVyZmxvd2VkWzBdIHx8IG4ub3ZlcmZsb3dlZFsxXSkgJiYgKHQucHJldmVudERlZmF1bHQoKSwgdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSksICJrZXl1cCIgPT09IHQudHlwZSkpIHsKICAgICAgICAgICAgICBpZiAoIngiID09PSBpLmF4aXMgfHwgInl4IiA9PT0gaS5heGlzICYmIG4ub3ZlcmZsb3dlZFsxXSAmJiAhbi5vdmVyZmxvd2VkWzBdKSB2YXIgaCA9ICJ4IiwKICAgICAgICAgICAgICAgICAgbSA9IDM1ID09PSBsID8gTWF0aC5hYnMoZC53aWR0aCgpIC0gYy5vdXRlcldpZHRoKCExKSkgOiAwO2Vsc2UgdmFyIGggPSAieSIsCiAgICAgICAgICAgICAgICAgIG0gPSAzNSA9PT0gbCA/IE1hdGguYWJzKGQuaGVpZ2h0KCkgLSBjLm91dGVySGVpZ2h0KCExKSkgOiAwOwogICAgICAgICAgICAgIFYobywgbS50b1N0cmluZygpLCB7CiAgICAgICAgICAgICAgICBkaXI6IGgsCiAgICAgICAgICAgICAgICBzY3JvbGxFYXNpbmc6ICJtY3NFYXNlSW5PdXQiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgbyA9IGUodGhpcyksCiAgICAgICAgICBuID0gby5kYXRhKGEpLAogICAgICAgICAgaSA9IG4ub3B0LAogICAgICAgICAgciA9IG4uc2VxdWVudGlhbCwKICAgICAgICAgIGwgPSBhICsgIl8iICsgbi5pZHgsCiAgICAgICAgICBzID0gZSgiI21DU0JfIiArIG4uaWR4KSwKICAgICAgICAgIGMgPSBlKCIjbUNTQl8iICsgbi5pZHggKyAiX2NvbnRhaW5lciIpLAogICAgICAgICAgZCA9IGMucGFyZW50KCksCiAgICAgICAgICB1ID0gImlucHV0LHRleHRhcmVhLHNlbGVjdCxkYXRhbGlzdCxrZXlnZW4sW2NvbnRlbnRlZGl0YWJsZT0ndHJ1ZSddIiwKICAgICAgICAgIGYgPSBjLmZpbmQoImlmcmFtZSIpLAogICAgICAgICAgaCA9IFsiYmx1ci4iICsgbCArICIga2V5ZG93bi4iICsgbCArICIga2V5dXAuIiArIGxdOwogICAgICBmLmxlbmd0aCAmJiBmLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIGUodGhpcykubG9hZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBXKHRoaXMpICYmIGUodGhpcy5jb250ZW50RG9jdW1lbnQgfHwgdGhpcy5jb250ZW50V2luZG93LmRvY3VtZW50KS5iaW5kKGhbMF0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHQoZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSksIHMuYXR0cigidGFiaW5kZXgiLCAiMCIpLmJpbmQoaFswXSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB0KGUpOwogICAgICB9KTsKICAgIH0sCiAgICAgICAgRiA9IGZ1bmN0aW9uIEYodCwgbywgbiwgaSwgcikgewogICAgICBmdW5jdGlvbiBsKGUpIHsKICAgICAgICB1LnNuYXBBbW91bnQgJiYgKGYuc2Nyb2xsQW1vdW50ID0gdS5zbmFwQW1vdW50IGluc3RhbmNlb2YgQXJyYXkgPyAieCIgPT09IGYuZGlyWzBdID8gdS5zbmFwQW1vdW50WzFdIDogdS5zbmFwQW1vdW50WzBdIDogdS5zbmFwQW1vdW50KTsKCiAgICAgICAgdmFyIG8gPSAic3RlcHBlZCIgIT09IGYudHlwZSwKICAgICAgICAgICAgYSA9IHIgPyByIDogZSA/IG8gPyBwIC8gMS41IDogZyA6IDFlMyAvIDYwLAogICAgICAgICAgICBuID0gZSA/IG8gPyA3LjUgOiA0MCA6IDIuNSwKICAgICAgICAgICAgcyA9IFtNYXRoLmFicyhoWzBdLm9mZnNldFRvcCksIE1hdGguYWJzKGhbMF0ub2Zmc2V0TGVmdCldLAogICAgICAgICAgICBkID0gW2Muc2Nyb2xsUmF0aW8ueSA+IDEwID8gMTAgOiBjLnNjcm9sbFJhdGlvLnksIGMuc2Nyb2xsUmF0aW8ueCA+IDEwID8gMTAgOiBjLnNjcm9sbFJhdGlvLnhdLAogICAgICAgICAgICBtID0gIngiID09PSBmLmRpclswXSA/IHNbMV0gKyBmLmRpclsxXSAqIGRbMV0gKiBuIDogc1swXSArIGYuZGlyWzFdICogZFswXSAqIG4sCiAgICAgICAgICAgIHYgPSAieCIgPT09IGYuZGlyWzBdID8gc1sxXSArIGYuZGlyWzFdICogcGFyc2VJbnQoZi5zY3JvbGxBbW91bnQpIDogc1swXSArIGYuZGlyWzFdICogcGFyc2VJbnQoZi5zY3JvbGxBbW91bnQpLAogICAgICAgICAgICB4ID0gImF1dG8iICE9PSBmLnNjcm9sbEFtb3VudCA/IHYgOiBtLAogICAgICAgICAgICBfID0gaSA/IGkgOiBlID8gbyA/ICJtY3NMaW5lYXJPdXQiIDogIm1jc0Vhc2VJbk91dCIgOiAibWNzTGluZWFyIiwKICAgICAgICAgICAgdyA9IGUgPyAhMCA6ICExOwoKICAgICAgICByZXR1cm4gZSAmJiAxNyA+IGEgJiYgKHggPSAieCIgPT09IGYuZGlyWzBdID8gc1sxXSA6IHNbMF0pLCBWKHQsIHgudG9TdHJpbmcoKSwgewogICAgICAgICAgZGlyOiBmLmRpclswXSwKICAgICAgICAgIHNjcm9sbEVhc2luZzogXywKICAgICAgICAgIGR1cjogYSwKICAgICAgICAgIG9uQ29tcGxldGU6IHcKICAgICAgICB9KSwgZSA/IHZvaWQgKGYuZGlyID0gITEpIDogKGNsZWFyVGltZW91dChmLnN0ZXApLCB2b2lkIChmLnN0ZXAgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGwoKTsKICAgICAgICB9LCBhKSkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBzKCkgewogICAgICAgIGNsZWFyVGltZW91dChmLnN0ZXApLCBLKGYsICJzdGVwIiksIE4odCk7CiAgICAgIH0KCiAgICAgIHZhciBjID0gdC5kYXRhKGEpLAogICAgICAgICAgdSA9IGMub3B0LAogICAgICAgICAgZiA9IGMuc2VxdWVudGlhbCwKICAgICAgICAgIGggPSBlKCIjbUNTQl8iICsgYy5pZHggKyAiX2NvbnRhaW5lciIpLAogICAgICAgICAgbSA9ICJzdGVwcGVkIiA9PT0gZi50eXBlID8gITAgOiAhMSwKICAgICAgICAgIHAgPSB1LnNjcm9sbEluZXJ0aWEgPCAyNiA/IDI2IDogdS5zY3JvbGxJbmVydGlhLAogICAgICAgICAgZyA9IHUuc2Nyb2xsSW5lcnRpYSA8IDEgPyAxNyA6IHUuc2Nyb2xsSW5lcnRpYTsKCiAgICAgIHN3aXRjaCAobykgewogICAgICAgIGNhc2UgIm9uIjoKICAgICAgICAgIGlmIChmLmRpciA9IFtuID09PSBkWzE2XSB8fCBuID09PSBkWzE1XSB8fCAzOSA9PT0gbiB8fCAzNyA9PT0gbiA/ICJ4IiA6ICJ5IiwgbiA9PT0gZFsxM10gfHwgbiA9PT0gZFsxNV0gfHwgMzggPT09IG4gfHwgMzcgPT09IG4gPyAtMSA6IDFdLCBOKHQpLCBlZShuKSAmJiAic3RlcHBlZCIgPT09IGYudHlwZSkgcmV0dXJuOwogICAgICAgICAgbChtKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJvZmYiOgogICAgICAgICAgcygpLCAobSB8fCBjLnR3ZWVuUnVubmluZyAmJiBmLmRpcikgJiYgbCghMCk7CiAgICAgIH0KICAgIH0sCiAgICAgICAgcSA9IGZ1bmN0aW9uIHEodCkgewogICAgICB2YXIgbyA9IGUodGhpcykuZGF0YShhKS5vcHQsCiAgICAgICAgICBuID0gW107CiAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmICh0ID0gdCgpKSwgdCBpbnN0YW5jZW9mIEFycmF5ID8gbiA9IHQubGVuZ3RoID4gMSA/IFt0WzBdLCB0WzFdXSA6ICJ4IiA9PT0gby5heGlzID8gW251bGwsIHRbMF1dIDogW3RbMF0sIG51bGxdIDogKG5bMF0gPSB0LnkgPyB0LnkgOiB0LnggfHwgIngiID09PSBvLmF4aXMgPyBudWxsIDogdCwgblsxXSA9IHQueCA/IHQueCA6IHQueSB8fCAieSIgPT09IG8uYXhpcyA/IG51bGwgOiB0KSwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgblswXSAmJiAoblswXSA9IG5bMF0oKSksICJmdW5jdGlvbiIgPT0gdHlwZW9mIG5bMV0gJiYgKG5bMV0gPSBuWzFdKCkpLCBuOwogICAgfSwKICAgICAgICBZID0gZnVuY3Rpb24gWSh0LCBvKSB7CiAgICAgIGlmIChudWxsICE9IHQgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHQpIHsKICAgICAgICB2YXIgbiA9IGUodGhpcyksCiAgICAgICAgICAgIGkgPSBuLmRhdGEoYSksCiAgICAgICAgICAgIHIgPSBpLm9wdCwKICAgICAgICAgICAgbCA9IGUoIiNtQ1NCXyIgKyBpLmlkeCArICJfY29udGFpbmVyIiksCiAgICAgICAgICAgIHMgPSBsLnBhcmVudCgpLAogICAgICAgICAgICBjID0gX3R5cGVvZih0KTsKCiAgICAgICAgbyB8fCAobyA9ICJ4IiA9PT0gci5heGlzID8gIngiIDogInkiKTsKICAgICAgICB2YXIgZCA9ICJ4IiA9PT0gbyA/IGwub3V0ZXJXaWR0aCghMSkgOiBsLm91dGVySGVpZ2h0KCExKSwKICAgICAgICAgICAgZiA9ICJ4IiA9PT0gbyA/IGxbMF0ub2Zmc2V0TGVmdCA6IGxbMF0ub2Zmc2V0VG9wLAogICAgICAgICAgICBoID0gIngiID09PSBvID8gImxlZnQiIDogInRvcCI7CgogICAgICAgIHN3aXRjaCAoYykgewogICAgICAgICAgY2FzZSAiZnVuY3Rpb24iOgogICAgICAgICAgICByZXR1cm4gdCgpOwoKICAgICAgICAgIGNhc2UgIm9iamVjdCI6CiAgICAgICAgICAgIHZhciBtID0gdC5qcXVlcnkgPyB0IDogZSh0KTsKICAgICAgICAgICAgaWYgKCFtLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICByZXR1cm4gIngiID09PSBvID8gdGUobSlbMV0gOiB0ZShtKVswXTsKCiAgICAgICAgICBjYXNlICJzdHJpbmciOgogICAgICAgICAgY2FzZSAibnVtYmVyIjoKICAgICAgICAgICAgaWYgKGVlKHQpKSByZXR1cm4gTWF0aC5hYnModCk7CiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5pbmRleE9mKCIlIikpIHJldHVybiBNYXRoLmFicyhkICogcGFyc2VJbnQodCkgLyAxMDApOwogICAgICAgICAgICBpZiAoLTEgIT09IHQuaW5kZXhPZigiLT0iKSkgcmV0dXJuIE1hdGguYWJzKGYgLSBwYXJzZUludCh0LnNwbGl0KCItPSIpWzFdKSk7CgogICAgICAgICAgICBpZiAoLTEgIT09IHQuaW5kZXhPZigiKz0iKSkgewogICAgICAgICAgICAgIHZhciBwID0gZiArIHBhcnNlSW50KHQuc3BsaXQoIis9IilbMV0pOwogICAgICAgICAgICAgIHJldHVybiBwID49IDAgPyAwIDogTWF0aC5hYnMocCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5pbmRleE9mKCJweCIpICYmIGVlKHQuc3BsaXQoInB4IilbMF0pKSByZXR1cm4gTWF0aC5hYnModC5zcGxpdCgicHgiKVswXSk7CiAgICAgICAgICAgIGlmICgidG9wIiA9PT0gdCB8fCAibGVmdCIgPT09IHQpIHJldHVybiAwOwogICAgICAgICAgICBpZiAoImJvdHRvbSIgPT09IHQpIHJldHVybiBNYXRoLmFicyhzLmhlaWdodCgpIC0gbC5vdXRlckhlaWdodCghMSkpOwogICAgICAgICAgICBpZiAoInJpZ2h0IiA9PT0gdCkgcmV0dXJuIE1hdGguYWJzKHMud2lkdGgoKSAtIGwub3V0ZXJXaWR0aCghMSkpOwoKICAgICAgICAgICAgaWYgKCJmaXJzdCIgPT09IHQgfHwgImxhc3QiID09PSB0KSB7CiAgICAgICAgICAgICAgdmFyIG0gPSBsLmZpbmQoIjoiICsgdCk7CiAgICAgICAgICAgICAgcmV0dXJuICJ4IiA9PT0gbyA/IHRlKG0pWzFdIDogdGUobSlbMF07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBlKHQpLmxlbmd0aCA/ICJ4IiA9PT0gbyA/IHRlKGUodCkpWzFdIDogdGUoZSh0KSlbMF0gOiAobC5jc3MoaCwgdCksIHZvaWQgdS51cGRhdGUuY2FsbChudWxsLCBuWzBdKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgICAgIFggPSBmdW5jdGlvbiBYKHQpIHsKICAgICAgZnVuY3Rpb24gbygpIHsKICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KGZbMF0uYXV0b1VwZGF0ZSksIDAgPT09IGwucGFyZW50cygiaHRtbCIpLmxlbmd0aCA/IHZvaWQgKGwgPSBudWxsKSA6IHZvaWQgKGZbMF0uYXV0b1VwZGF0ZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGMuYWR2YW5jZWQudXBkYXRlT25TZWxlY3RvckNoYW5nZSAmJiAocy5wb2xsLmNoYW5nZS5uID0gaSgpLCBzLnBvbGwuY2hhbmdlLm4gIT09IHMucG9sbC5jaGFuZ2UubykgPyAocy5wb2xsLmNoYW5nZS5vID0gcy5wb2xsLmNoYW5nZS5uLCB2b2lkIHIoMykpIDogYy5hZHZhbmNlZC51cGRhdGVPbkNvbnRlbnRSZXNpemUgJiYgKHMucG9sbC5zaXplLm4gPSBsWzBdLnNjcm9sbEhlaWdodCArIGxbMF0uc2Nyb2xsV2lkdGggKyBmWzBdLm9mZnNldEhlaWdodCArIGxbMF0ub2Zmc2V0SGVpZ2h0ICsgbFswXS5vZmZzZXRXaWR0aCwgcy5wb2xsLnNpemUubiAhPT0gcy5wb2xsLnNpemUubykgPyAocy5wb2xsLnNpemUubyA9IHMucG9sbC5zaXplLm4sIHZvaWQgcigxKSkgOiAhYy5hZHZhbmNlZC51cGRhdGVPbkltYWdlTG9hZCB8fCAiYXV0byIgPT09IGMuYWR2YW5jZWQudXBkYXRlT25JbWFnZUxvYWQgJiYgInkiID09PSBjLmF4aXMgfHwgKHMucG9sbC5pbWcubiA9IGYuZmluZCgiaW1nIikubGVuZ3RoLCBzLnBvbGwuaW1nLm4gPT09IHMucG9sbC5pbWcubykgPyB2b2lkICgoYy5hZHZhbmNlZC51cGRhdGVPblNlbGVjdG9yQ2hhbmdlIHx8IGMuYWR2YW5jZWQudXBkYXRlT25Db250ZW50UmVzaXplIHx8IGMuYWR2YW5jZWQudXBkYXRlT25JbWFnZUxvYWQpICYmIG8oKSkgOiAocy5wb2xsLmltZy5vID0gcy5wb2xsLmltZy5uLCB2b2lkIGYuZmluZCgiaW1nIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIG4odGhpcyk7CiAgICAgICAgICB9KSk7CiAgICAgICAgfSwgYy5hZHZhbmNlZC5hdXRvVXBkYXRlVGltZW91dCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBuKHQpIHsKICAgICAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0LmFwcGx5KGUsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYSgpIHsKICAgICAgICAgIHRoaXMub25sb2FkID0gbnVsbCwgZSh0KS5hZGRDbGFzcyhkWzJdKSwgcigyKTsKICAgICAgICB9CgogICAgICAgIGlmIChlKHQpLmhhc0NsYXNzKGRbMl0pKSByZXR1cm4gdm9pZCByKCk7CiAgICAgICAgdmFyIG4gPSBuZXcgSW1hZ2UoKTsKICAgICAgICBuLm9ubG9hZCA9IG8obiwgYSksIG4uc3JjID0gdC5zcmM7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgYy5hZHZhbmNlZC51cGRhdGVPblNlbGVjdG9yQ2hhbmdlID09PSAhMCAmJiAoYy5hZHZhbmNlZC51cGRhdGVPblNlbGVjdG9yQ2hhbmdlID0gIioiKTsKICAgICAgICB2YXIgZSA9IDAsCiAgICAgICAgICAgIHQgPSBmLmZpbmQoYy5hZHZhbmNlZC51cGRhdGVPblNlbGVjdG9yQ2hhbmdlKTsKICAgICAgICByZXR1cm4gYy5hZHZhbmNlZC51cGRhdGVPblNlbGVjdG9yQ2hhbmdlICYmIHQubGVuZ3RoID4gMCAmJiB0LmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgZSArPSB0aGlzLm9mZnNldEhlaWdodCArIHRoaXMub2Zmc2V0V2lkdGg7CiAgICAgICAgfSksIGU7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgIGNsZWFyVGltZW91dChmWzBdLmF1dG9VcGRhdGUpLCB1LnVwZGF0ZS5jYWxsKG51bGwsIGxbMF0sIGUpOwogICAgICB9CgogICAgICB2YXIgbCA9IGUodGhpcyksCiAgICAgICAgICBzID0gbC5kYXRhKGEpLAogICAgICAgICAgYyA9IHMub3B0LAogICAgICAgICAgZiA9IGUoIiNtQ1NCXyIgKyBzLmlkeCArICJfY29udGFpbmVyIik7CiAgICAgIHJldHVybiB0ID8gKGNsZWFyVGltZW91dChmWzBdLmF1dG9VcGRhdGUpLCB2b2lkIEsoZlswXSwgImF1dG9VcGRhdGUiKSkgOiB2b2lkIG8oKTsKICAgIH0sCiAgICAgICAgaiA9IGZ1bmN0aW9uIGooZSwgdCwgbykgewogICAgICByZXR1cm4gTWF0aC5yb3VuZChlIC8gdCkgKiB0IC0gbzsKICAgIH0sCiAgICAgICAgTiA9IGZ1bmN0aW9uIE4odCkgewogICAgICB2YXIgbyA9IHQuZGF0YShhKSwKICAgICAgICAgIG4gPSBlKCIjbUNTQl8iICsgby5pZHggKyAiX2NvbnRhaW5lciwjbUNTQl8iICsgby5pZHggKyAiX2NvbnRhaW5lcl93cmFwcGVyLCNtQ1NCXyIgKyBvLmlkeCArICJfZHJhZ2dlcl92ZXJ0aWNhbCwjbUNTQl8iICsgby5pZHggKyAiX2RyYWdnZXJfaG9yaXpvbnRhbCIpOwogICAgICBuLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgIEouY2FsbCh0aGlzKTsKICAgICAgfSk7CiAgICB9LAogICAgICAgIFYgPSBmdW5jdGlvbiBWKHQsIG8sIG4pIHsKICAgICAgZnVuY3Rpb24gaShlKSB7CiAgICAgICAgcmV0dXJuIHMgJiYgYy5jYWxsYmFja3NbZV0gJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgYy5jYWxsYmFja3NbZV07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHIoKSB7CiAgICAgICAgcmV0dXJuIFtjLmNhbGxiYWNrcy5hbHdheXNUcmlnZ2VyT2Zmc2V0cyB8fCB3ID49IFNbMF0gKyB5LCBjLmNhbGxiYWNrcy5hbHdheXNUcmlnZ2VyT2Zmc2V0cyB8fCAtQiA+PSB3XTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICB2YXIgZSA9IFtoWzBdLm9mZnNldFRvcCwgaFswXS5vZmZzZXRMZWZ0XSwKICAgICAgICAgICAgbyA9IFt4WzBdLm9mZnNldFRvcCwgeFswXS5vZmZzZXRMZWZ0XSwKICAgICAgICAgICAgYSA9IFtoLm91dGVySGVpZ2h0KCExKSwgaC5vdXRlcldpZHRoKCExKV0sCiAgICAgICAgICAgIGkgPSBbZi5oZWlnaHQoKSwgZi53aWR0aCgpXTsKICAgICAgICB0WzBdLm1jcyA9IHsKICAgICAgICAgIGNvbnRlbnQ6IGgsCiAgICAgICAgICB0b3A6IGVbMF0sCiAgICAgICAgICBsZWZ0OiBlWzFdLAogICAgICAgICAgZHJhZ2dlclRvcDogb1swXSwKICAgICAgICAgIGRyYWdnZXJMZWZ0OiBvWzFdLAogICAgICAgICAgdG9wUGN0OiBNYXRoLnJvdW5kKDEwMCAqIE1hdGguYWJzKGVbMF0pIC8gKE1hdGguYWJzKGFbMF0pIC0gaVswXSkpLAogICAgICAgICAgbGVmdFBjdDogTWF0aC5yb3VuZCgxMDAgKiBNYXRoLmFicyhlWzFdKSAvIChNYXRoLmFicyhhWzFdKSAtIGlbMV0pKSwKICAgICAgICAgIGRpcmVjdGlvbjogbi5kaXIKICAgICAgICB9OwogICAgICB9CgogICAgICB2YXIgcyA9IHQuZGF0YShhKSwKICAgICAgICAgIGMgPSBzLm9wdCwKICAgICAgICAgIGQgPSB7CiAgICAgICAgdHJpZ2dlcjogImludGVybmFsIiwKICAgICAgICBkaXI6ICJ5IiwKICAgICAgICBzY3JvbGxFYXNpbmc6ICJtY3NFYXNlT3V0IiwKICAgICAgICBkcmFnOiAhMSwKICAgICAgICBkdXI6IGMuc2Nyb2xsSW5lcnRpYSwKICAgICAgICBvdmVyd3JpdGU6ICJhbGwiLAogICAgICAgIGNhbGxiYWNrczogITAsCiAgICAgICAgb25TdGFydDogITAsCiAgICAgICAgb25VcGRhdGU6ICEwLAogICAgICAgIG9uQ29tcGxldGU6ICEwCiAgICAgIH0sCiAgICAgICAgICBuID0gZS5leHRlbmQoZCwgbiksCiAgICAgICAgICB1ID0gW24uZHVyLCBuLmRyYWcgPyAwIDogbi5kdXJdLAogICAgICAgICAgZiA9IGUoIiNtQ1NCXyIgKyBzLmlkeCksCiAgICAgICAgICBoID0gZSgiI21DU0JfIiArIHMuaWR4ICsgIl9jb250YWluZXIiKSwKICAgICAgICAgIG0gPSBoLnBhcmVudCgpLAogICAgICAgICAgcCA9IGMuY2FsbGJhY2tzLm9uVG90YWxTY3JvbGxPZmZzZXQgPyBxLmNhbGwodCwgYy5jYWxsYmFja3Mub25Ub3RhbFNjcm9sbE9mZnNldCkgOiBbMCwgMF0sCiAgICAgICAgICBnID0gYy5jYWxsYmFja3Mub25Ub3RhbFNjcm9sbEJhY2tPZmZzZXQgPyBxLmNhbGwodCwgYy5jYWxsYmFja3Mub25Ub3RhbFNjcm9sbEJhY2tPZmZzZXQpIDogWzAsIDBdOwoKICAgICAgaWYgKHMudHJpZ2dlciA9IG4udHJpZ2dlciwgKDAgIT09IG0uc2Nyb2xsVG9wKCkgfHwgMCAhPT0gbS5zY3JvbGxMZWZ0KCkpICYmIChlKCIubUNTQl8iICsgcy5pZHggKyAiX3Njcm9sbGJhciIpLmNzcygidmlzaWJpbGl0eSIsICJ2aXNpYmxlIiksIG0uc2Nyb2xsVG9wKDApLnNjcm9sbExlZnQoMCkpLCAiX3Jlc2V0WSIgIT09IG8gfHwgcy5jb250ZW50UmVzZXQueSB8fCAoaSgib25PdmVyZmxvd1lOb25lIikgJiYgYy5jYWxsYmFja3Mub25PdmVyZmxvd1lOb25lLmNhbGwodFswXSksIHMuY29udGVudFJlc2V0LnkgPSAxKSwgIl9yZXNldFgiICE9PSBvIHx8IHMuY29udGVudFJlc2V0LnggfHwgKGkoIm9uT3ZlcmZsb3dYTm9uZSIpICYmIGMuY2FsbGJhY2tzLm9uT3ZlcmZsb3dYTm9uZS5jYWxsKHRbMF0pLCBzLmNvbnRlbnRSZXNldC54ID0gMSksICJfcmVzZXRZIiAhPT0gbyAmJiAiX3Jlc2V0WCIgIT09IG8pIHsKICAgICAgICBpZiAoIXMuY29udGVudFJlc2V0LnkgJiYgdFswXS5tY3MgfHwgIXMub3ZlcmZsb3dlZFswXSB8fCAoaSgib25PdmVyZmxvd1kiKSAmJiBjLmNhbGxiYWNrcy5vbk92ZXJmbG93WS5jYWxsKHRbMF0pLCBzLmNvbnRlbnRSZXNldC54ID0gbnVsbCksICFzLmNvbnRlbnRSZXNldC54ICYmIHRbMF0ubWNzIHx8ICFzLm92ZXJmbG93ZWRbMV0gfHwgKGkoIm9uT3ZlcmZsb3dYIikgJiYgYy5jYWxsYmFja3Mub25PdmVyZmxvd1guY2FsbCh0WzBdKSwgcy5jb250ZW50UmVzZXQueCA9IG51bGwpLCBjLnNuYXBBbW91bnQpIHsKICAgICAgICAgIHZhciB2ID0gYy5zbmFwQW1vdW50IGluc3RhbmNlb2YgQXJyYXkgPyAieCIgPT09IG4uZGlyID8gYy5zbmFwQW1vdW50WzFdIDogYy5zbmFwQW1vdW50WzBdIDogYy5zbmFwQW1vdW50OwogICAgICAgICAgbyA9IGoobywgdiwgYy5zbmFwT2Zmc2V0KTsKICAgICAgICB9CgogICAgICAgIHN3aXRjaCAobi5kaXIpIHsKICAgICAgICAgIGNhc2UgIngiOgogICAgICAgICAgICB2YXIgeCA9IGUoIiNtQ1NCXyIgKyBzLmlkeCArICJfZHJhZ2dlcl9ob3Jpem9udGFsIiksCiAgICAgICAgICAgICAgICBfID0gImxlZnQiLAogICAgICAgICAgICAgICAgdyA9IGhbMF0ub2Zmc2V0TGVmdCwKICAgICAgICAgICAgICAgIFMgPSBbZi53aWR0aCgpIC0gaC5vdXRlcldpZHRoKCExKSwgeC5wYXJlbnQoKS53aWR0aCgpIC0geC53aWR0aCgpXSwKICAgICAgICAgICAgICAgIGIgPSBbbywgMCA9PT0gbyA/IDAgOiBvIC8gcy5zY3JvbGxSYXRpby54XSwKICAgICAgICAgICAgICAgIHkgPSBwWzFdLAogICAgICAgICAgICAgICAgQiA9IGdbMV0sCiAgICAgICAgICAgICAgICBUID0geSA+IDAgPyB5IC8gcy5zY3JvbGxSYXRpby54IDogMCwKICAgICAgICAgICAgICAgIGsgPSBCID4gMCA/IEIgLyBzLnNjcm9sbFJhdGlvLnggOiAwOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJ5IjoKICAgICAgICAgICAgdmFyIHggPSBlKCIjbUNTQl8iICsgcy5pZHggKyAiX2RyYWdnZXJfdmVydGljYWwiKSwKICAgICAgICAgICAgICAgIF8gPSAidG9wIiwKICAgICAgICAgICAgICAgIHcgPSBoWzBdLm9mZnNldFRvcCwKICAgICAgICAgICAgICAgIFMgPSBbZi5oZWlnaHQoKSAtIGgub3V0ZXJIZWlnaHQoITEpLCB4LnBhcmVudCgpLmhlaWdodCgpIC0geC5oZWlnaHQoKV0sCiAgICAgICAgICAgICAgICBiID0gW28sIDAgPT09IG8gPyAwIDogbyAvIHMuc2Nyb2xsUmF0aW8ueV0sCiAgICAgICAgICAgICAgICB5ID0gcFswXSwKICAgICAgICAgICAgICAgIEIgPSBnWzBdLAogICAgICAgICAgICAgICAgVCA9IHkgPiAwID8geSAvIHMuc2Nyb2xsUmF0aW8ueSA6IDAsCiAgICAgICAgICAgICAgICBrID0gQiA+IDAgPyBCIC8gcy5zY3JvbGxSYXRpby55IDogMDsKICAgICAgICB9CgogICAgICAgIGJbMV0gPCAwIHx8IDAgPT09IGJbMF0gJiYgMCA9PT0gYlsxXSA/IGIgPSBbMCwgMF0gOiBiWzFdID49IFNbMV0gPyBiID0gW1NbMF0sIFNbMV1dIDogYlswXSA9IC1iWzBdLCB0WzBdLm1jcyB8fCAobCgpLCBpKCJvbkluaXQiKSAmJiBjLmNhbGxiYWNrcy5vbkluaXQuY2FsbCh0WzBdKSksIGNsZWFyVGltZW91dChoWzBdLm9uQ29tcGxldGVUaW1lb3V0KSwgUSh4WzBdLCBfLCBNYXRoLnJvdW5kKGJbMV0pLCB1WzFdLCBuLnNjcm9sbEVhc2luZyksIChzLnR3ZWVuUnVubmluZyB8fCAhKDAgPT09IHcgJiYgYlswXSA+PSAwIHx8IHcgPT09IFNbMF0gJiYgYlswXSA8PSBTWzBdKSkgJiYgUShoWzBdLCBfLCBNYXRoLnJvdW5kKGJbMF0pLCB1WzBdLCBuLnNjcm9sbEVhc2luZywgbi5vdmVyd3JpdGUsIHsKICAgICAgICAgIG9uU3RhcnQ6IGZ1bmN0aW9uIG9uU3RhcnQoKSB7CiAgICAgICAgICAgIG4uY2FsbGJhY2tzICYmIG4ub25TdGFydCAmJiAhcy50d2VlblJ1bm5pbmcgJiYgKGkoIm9uU2Nyb2xsU3RhcnQiKSAmJiAobCgpLCBjLmNhbGxiYWNrcy5vblNjcm9sbFN0YXJ0LmNhbGwodFswXSkpLCBzLnR3ZWVuUnVubmluZyA9ICEwLCBDKHgpLCBzLmNiT2Zmc2V0cyA9IHIoKSk7CiAgICAgICAgICB9LAogICAgICAgICAgb25VcGRhdGU6IGZ1bmN0aW9uIG9uVXBkYXRlKCkgewogICAgICAgICAgICBuLmNhbGxiYWNrcyAmJiBuLm9uVXBkYXRlICYmIGkoIndoaWxlU2Nyb2xsaW5nIikgJiYgKGwoKSwgYy5jYWxsYmFja3Mud2hpbGVTY3JvbGxpbmcuY2FsbCh0WzBdKSk7CiAgICAgICAgICB9LAogICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gb25Db21wbGV0ZSgpIHsKICAgICAgICAgICAgaWYgKG4uY2FsbGJhY2tzICYmIG4ub25Db21wbGV0ZSkgewogICAgICAgICAgICAgICJ5eCIgPT09IGMuYXhpcyAmJiBjbGVhclRpbWVvdXQoaFswXS5vbkNvbXBsZXRlVGltZW91dCk7CiAgICAgICAgICAgICAgdmFyIGUgPSBoWzBdLmlkbGVUaW1lciB8fCAwOwogICAgICAgICAgICAgIGhbMF0ub25Db21wbGV0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGkoIm9uU2Nyb2xsIikgJiYgKGwoKSwgYy5jYWxsYmFja3Mub25TY3JvbGwuY2FsbCh0WzBdKSksIGkoIm9uVG90YWxTY3JvbGwiKSAmJiBiWzFdID49IFNbMV0gLSBUICYmIHMuY2JPZmZzZXRzWzBdICYmIChsKCksIGMuY2FsbGJhY2tzLm9uVG90YWxTY3JvbGwuY2FsbCh0WzBdKSksIGkoIm9uVG90YWxTY3JvbGxCYWNrIikgJiYgYlsxXSA8PSBrICYmIHMuY2JPZmZzZXRzWzFdICYmIChsKCksIGMuY2FsbGJhY2tzLm9uVG90YWxTY3JvbGxCYWNrLmNhbGwodFswXSkpLCBzLnR3ZWVuUnVubmluZyA9ICExLCBoWzBdLmlkbGVUaW1lciA9IDAsIEMoeCwgImhpZGUiKTsKICAgICAgICAgICAgICB9LCBlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgICAgIFEgPSBmdW5jdGlvbiBRKGUsIHQsIG8sIGEsIG4sIGksIHIpIHsKICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICBTLnN0b3AgfHwgKHggfHwgbS5jYWxsKCksIHggPSBHKCkgLSB2LCBzKCksIHggPj0gUy50aW1lICYmIChTLnRpbWUgPSB4ID4gUy50aW1lID8geCArIGYgLSAoeCAtIFMudGltZSkgOiB4ICsgZiAtIDEsIFMudGltZSA8IHggKyAxICYmIChTLnRpbWUgPSB4ICsgMSkpLCBTLnRpbWUgPCBhID8gUy5pZCA9IGgobCkgOiBnLmNhbGwoKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHMoKSB7CiAgICAgICAgYSA+IDAgPyAoUy5jdXJyVmFsID0gdShTLnRpbWUsIF8sIGIsIGEsIG4pLCB3W3RdID0gTWF0aC5yb3VuZChTLmN1cnJWYWwpICsgInB4IikgOiB3W3RdID0gbyArICJweCIsIHAuY2FsbCgpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgIGYgPSAxZTMgLyA2MCwgUy50aW1lID0geCArIGYsIGggPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gcygpLCBzZXRUaW1lb3V0KGUsIC4wMSk7CiAgICAgICAgfSwgUy5pZCA9IGgobCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGQoKSB7CiAgICAgICAgbnVsbCAhPSBTLmlkICYmICh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID8gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKFMuaWQpIDogY2xlYXJUaW1lb3V0KFMuaWQpLCBTLmlkID0gbnVsbCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHUoZSwgdCwgbywgYSwgbikgewogICAgICAgIHN3aXRjaCAobikgewogICAgICAgICAgY2FzZSAibGluZWFyIjoKICAgICAgICAgIGNhc2UgIm1jc0xpbmVhciI6CiAgICAgICAgICAgIHJldHVybiBvICogZSAvIGEgKyB0OwoKICAgICAgICAgIGNhc2UgIm1jc0xpbmVhck91dCI6CiAgICAgICAgICAgIHJldHVybiBlIC89IGEsIGUtLSwgbyAqIE1hdGguc3FydCgxIC0gZSAqIGUpICsgdDsKCiAgICAgICAgICBjYXNlICJlYXNlSW5PdXRTbW9vdGgiOgogICAgICAgICAgICByZXR1cm4gZSAvPSBhIC8gMiwgMSA+IGUgPyBvIC8gMiAqIGUgKiBlICsgdCA6IChlLS0sIC1vIC8gMiAqIChlICogKGUgLSAyKSAtIDEpICsgdCk7CgogICAgICAgICAgY2FzZSAiZWFzZUluT3V0U3Ryb25nIjoKICAgICAgICAgICAgcmV0dXJuIGUgLz0gYSAvIDIsIDEgPiBlID8gbyAvIDIgKiBNYXRoLnBvdygyLCAxMCAqIChlIC0gMSkpICsgdCA6IChlLS0sIG8gLyAyICogKC1NYXRoLnBvdygyLCAtMTAgKiBlKSArIDIpICsgdCk7CgogICAgICAgICAgY2FzZSAiZWFzZUluT3V0IjoKICAgICAgICAgIGNhc2UgIm1jc0Vhc2VJbk91dCI6CiAgICAgICAgICAgIHJldHVybiBlIC89IGEgLyAyLCAxID4gZSA/IG8gLyAyICogZSAqIGUgKiBlICsgdCA6IChlIC09IDIsIG8gLyAyICogKGUgKiBlICogZSArIDIpICsgdCk7CgogICAgICAgICAgY2FzZSAiZWFzZU91dFNtb290aCI6CiAgICAgICAgICAgIHJldHVybiBlIC89IGEsIGUtLSwgLW8gKiAoZSAqIGUgKiBlICogZSAtIDEpICsgdDsKCiAgICAgICAgICBjYXNlICJlYXNlT3V0U3Ryb25nIjoKICAgICAgICAgICAgcmV0dXJuIG8gKiAoLU1hdGgucG93KDIsIC0xMCAqIGUgLyBhKSArIDEpICsgdDsKCiAgICAgICAgICBjYXNlICJlYXNlT3V0IjoKICAgICAgICAgIGNhc2UgIm1jc0Vhc2VPdXQiOgogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgdmFyIGkgPSAoZSAvPSBhKSAqIGUsCiAgICAgICAgICAgICAgICByID0gaSAqIGU7CiAgICAgICAgICAgIHJldHVybiB0ICsgbyAqICguNDk5OTk5OTk5OTk5OTk3ICogciAqIGkgKyAtMi41ICogaSAqIGkgKyA1LjUgKiByICsgLTYuNSAqIGkgKyA0ICogZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBlLl9tVHdlZW4gfHwgKGUuX21Ud2VlbiA9IHsKICAgICAgICB0b3A6IHt9LAogICAgICAgIGxlZnQ6IHt9CiAgICAgIH0pOwoKICAgICAgdmFyIGYsCiAgICAgICAgICBoLAogICAgICAgICAgciA9IHIgfHwge30sCiAgICAgICAgICBtID0gci5vblN0YXJ0IHx8IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgcCA9IHIub25VcGRhdGUgfHwgZnVuY3Rpb24gKCkge30sCiAgICAgICAgICBnID0gci5vbkNvbXBsZXRlIHx8IGZ1bmN0aW9uICgpIHt9LAogICAgICAgICAgdiA9IEcoKSwKICAgICAgICAgIHggPSAwLAogICAgICAgICAgXyA9IGUub2Zmc2V0VG9wLAogICAgICAgICAgdyA9IGUuc3R5bGUsCiAgICAgICAgICBTID0gZS5fbVR3ZWVuW3RdOwoKICAgICAgImxlZnQiID09PSB0ICYmIChfID0gZS5vZmZzZXRMZWZ0KTsKICAgICAgdmFyIGIgPSBvIC0gXzsKICAgICAgUy5zdG9wID0gMCwgIm5vbmUiICE9PSBpICYmIGQoKSwgYygpOwogICAgfSwKICAgICAgICBHID0gZnVuY3Rpb24gRygpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2Uubm93ID8gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpIDogd2luZG93LnBlcmZvcm1hbmNlICYmIHdpbmRvdy5wZXJmb3JtYW5jZS53ZWJraXROb3cgPyB3aW5kb3cucGVyZm9ybWFuY2Uud2Via2l0Tm93KCkgOiBEYXRlLm5vdyA/IERhdGUubm93KCkgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgIH0sCiAgICAgICAgSiA9IGZ1bmN0aW9uIEooKSB7CiAgICAgIHZhciBlID0gdGhpczsKICAgICAgZS5fbVR3ZWVuIHx8IChlLl9tVHdlZW4gPSB7CiAgICAgICAgdG9wOiB7fSwKICAgICAgICBsZWZ0OiB7fQogICAgICB9KTsKCiAgICAgIGZvciAodmFyIHQgPSBbInRvcCIsICJsZWZ0Il0sIG8gPSAwOyBvIDwgdC5sZW5ndGg7IG8rKykgewogICAgICAgIHZhciBhID0gdFtvXTsKICAgICAgICBlLl9tVHdlZW5bYV0uaWQgJiYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPyB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUoZS5fbVR3ZWVuW2FdLmlkKSA6IGNsZWFyVGltZW91dChlLl9tVHdlZW5bYV0uaWQpLCBlLl9tVHdlZW5bYV0uaWQgPSBudWxsLCBlLl9tVHdlZW5bYV0uc3RvcCA9IDEpOwogICAgICB9CiAgICB9LAogICAgICAgIEsgPSBmdW5jdGlvbiBLKGUsIHQpIHsKICAgICAgdHJ5IHsKICAgICAgICBkZWxldGUgZVt0XTsKICAgICAgfSBjYXRjaCAobykgewogICAgICAgIGVbdF0gPSBudWxsOwogICAgICB9CiAgICB9LAogICAgICAgIFogPSBmdW5jdGlvbiBaKGUpIHsKICAgICAgcmV0dXJuICEoZS53aGljaCAmJiAxICE9PSBlLndoaWNoKTsKICAgIH0sCiAgICAgICAgJCA9IGZ1bmN0aW9uICQoZSkgewogICAgICB2YXIgdCA9IGUub3JpZ2luYWxFdmVudC5wb2ludGVyVHlwZTsKICAgICAgcmV0dXJuICEodCAmJiAidG91Y2giICE9PSB0ICYmIDIgIT09IHQpOwogICAgfSwKICAgICAgICBlZSA9IGZ1bmN0aW9uIGVlKGUpIHsKICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KGUpKSAmJiBpc0Zpbml0ZShlKTsKICAgIH0sCiAgICAgICAgdGUgPSBmdW5jdGlvbiB0ZShlKSB7CiAgICAgIHZhciB0ID0gZS5wYXJlbnRzKCIubUNTQl9jb250YWluZXIiKTsKICAgICAgcmV0dXJuIFtlLm9mZnNldCgpLnRvcCAtIHQub2Zmc2V0KCkudG9wLCBlLm9mZnNldCgpLmxlZnQgLSB0Lm9mZnNldCgpLmxlZnRdOwogICAgfSwKICAgICAgICBvZSA9IGZ1bmN0aW9uIG9lKCkgewogICAgICBmdW5jdGlvbiBlKCkgewogICAgICAgIHZhciBlID0gWyJ3ZWJraXQiLCAibW96IiwgIm1zIiwgIm8iXTsKICAgICAgICBpZiAoImhpZGRlbiIgaW4gZG9jdW1lbnQpIHJldHVybiAiaGlkZGVuIjsKCiAgICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICBpZiAoZVt0XSArICJIaWRkZW4iIGluIGRvY3VtZW50KSByZXR1cm4gZVt0XSArICJIaWRkZW4iOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciB0ID0gZSgpOwogICAgICByZXR1cm4gdCA/IGRvY3VtZW50W3RdIDogITE7CiAgICB9OwoKICAgIGUuZm5bb10gPSBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdVt0XSA/IHVbdF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSkgOiAib2JqZWN0IiAhPSBfdHlwZW9mKHQpICYmIHQgPyB2b2lkIGUuZXJyb3IoIk1ldGhvZCAiICsgdCArICIgZG9lcyBub3QgZXhpc3QiKSA6IHUuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfSwgZVtvXSA9IGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB1W3RdID8gdVt0XS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKSA6ICJvYmplY3QiICE9IF90eXBlb2YodCkgJiYgdCA/IHZvaWQgZS5lcnJvcigiTWV0aG9kICIgKyB0ICsgIiBkb2VzIG5vdCBleGlzdCIpIDogdS5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9LCBlW29dLmRlZmF1bHRzID0gaSwgd2luZG93W29dID0gITAsIGUod2luZG93KS5sb2FkKGZ1bmN0aW9uICgpIHsKICAgICAgZShuKVtvXSgpLCBlLmV4dGVuZChlLmV4cHJbIjoiXSwgewogICAgICAgIG1jc0luVmlldzogZS5leHByWyI6Il0ubWNzSW5WaWV3IHx8IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbywKICAgICAgICAgICAgICBhLAogICAgICAgICAgICAgIG4gPSBlKHQpLAogICAgICAgICAgICAgIGkgPSBuLnBhcmVudHMoIi5tQ1NCX2NvbnRhaW5lciIpOwogICAgICAgICAgaWYgKGkubGVuZ3RoKSByZXR1cm4gbyA9IGkucGFyZW50KCksIGEgPSBbaVswXS5vZmZzZXRUb3AsIGlbMF0ub2Zmc2V0TGVmdF0sIGFbMF0gKyB0ZShuKVswXSA+PSAwICYmIGFbMF0gKyB0ZShuKVswXSA8IG8uaGVpZ2h0KCkgLSBuLm91dGVySGVpZ2h0KCExKSAmJiBhWzFdICsgdGUobilbMV0gPj0gMCAmJiBhWzFdICsgdGUobilbMV0gPCBvLndpZHRoKCkgLSBuLm91dGVyV2lkdGgoITEpOwogICAgICAgIH0sCiAgICAgICAgbWNzT3ZlcmZsb3c6IGUuZXhwclsiOiJdLm1jc092ZXJmbG93IHx8IGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbyA9IGUodCkuZGF0YShhKTsKICAgICAgICAgIGlmIChvKSByZXR1cm4gby5vdmVyZmxvd2VkWzBdIHx8IG8ub3ZlcmZsb3dlZFsxXTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfSk7Cn0pOw=="},{"version":3,"sources":["E:/vue/xiaoxiao-blog-frontend/src/assets/js/plugins.js"],"names":["$","$$","ScrollSpy","element","options","process","proxy","$element","is","window","href","extend","fn","scrollspy","defaults","$scrollElement","on","selector","target","attr","replace","$body","refresh","prototype","constructor","self","$targets","offsets","targets","find","map","$el","data","$href","test","length","position","top","sort","a","b","each","push","scrollTop","offset","scrollHeight","maxScroll","height","activeTarget","i","last","activate","active","parent","removeClass","addClass","closest","trigger","option","$this","Constructor","$spy","jQuery","factory","define","amd","module","exports","require","jQueryBridget","arraySlice","Array","slice","console","logError","message","error","namespace","PluginClass","opts","isPlainObject","arg0","args","call","arguments","methodCall","plainCall","$elems","methodName","returnValue","pluginMethodStr","elem","instance","method","charAt","value","apply","undefined","_init","updateJQuery","bridget","global","EvEmitter","proto","eventName","listener","events","_events","listeners","indexOf","once","onceEvents","_onceEvents","onceListeners","off","index","splice","emitEvent","isOnce","getSize","getStyleSize","num","parseFloat","isValid","isNaN","noop","measurements","measurementsLength","getZeroSize","size","width","innerWidth","innerHeight","outerWidth","outerHeight","measurement","getStyle","style","getComputedStyle","isSetup","isBoxSizeOuter","setup","div","document","createElement","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","removeChild","querySelector","nodeType","display","offsetWidth","offsetHeight","isBorderBox","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesSelector","matchesMethod","ElemProto","Element","matches","prefixes","prefix","fizzyUIUtils","utils","prop","modulo","makeArray","obj","ary","isArray","removeFrom","getParent","parentNode","getQueryElement","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","getAttribute","JSON","parse","className","Outlayer","Item","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transform","transitionEndEvent","WebkitTransition","vendorProperties","layout","x","y","_create","Object","create","_transn","ingProperties","clean","onEnd","css","elemStyle","supportedProp","getPosition","isOriginLeft","_getOption","isOriginTop","xValue","yValue","layoutSize","parseInt","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","compareX","compareY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","transitionDuration","from","h","enableTransition","toDashedAll","transitionProps","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","propertyName","disableTransition","removeTransitionStyles","removeEventListener","cleanStyle","cleanTransitionStyle","removeElem","remove","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","destroy","left","right","bottom","GUID","instances","queryElement","id","outlayerGUID","isInitLayout","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","oldOption","compatOptions","horizontal","layoutInstant","reloadItems","stamps","stamp","canBindResize","bindResize","items","_itemize","children","itemElems","_filterFindItemElements","item","itemSelector","getItemElements","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","_getMeasurement","_getItemsForLayout","_layoutItems","_postLayout","filter","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","_positionItem","isResizingContainer","_getContainerSize","_setContainerMeasure","measure","isWidth","elemSize","Math","max","onComplete","dispatchEvent","count","doneCount","tick","emitArgs","$event","Event","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","_manageStamp","boundingRect","getBoundingClientRect","_boundingRect","_getElementOffset","thisRect","isResizeBound","unbindResize","onresize","needsResizeLayout","hasSizes","addItems","appended","prepended","previousItems","revealItemElements","getItems","hideItemElements","removeItems","removeData","Layout","subclass","Parent","SubClass","Masonry","fitWidth","measureColumns","colYs","cols","maxY","getContainerWidth","columnWidth","firstItem","firstItemElem","containerWidth","gutter","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colGroup","_getColGroup","minimumY","shortColIndex","setHeight","setSpan","groupCount","groupColYs","stampSize","firstX","lastX","firstCol","floor","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","e","toggleClass","j","d","f","k","g","l","animate","n","o","c","m","cssTransforms3d","webkitTransform","OTransform","msTransform","MozTransform","insertBefore","getPropertyValue","click","p","isMobile","createEvent","initCustomEvent","createEventObject","eventType","addEvent","attachEvent","removeEvent","detachEvent","clientHeight","WeakMap","MozWeakMap","keys","values","get","set","MutationObserver","WebkitMutationObserver","MozMutationObserver","warn","notSupported","observe","toUpperCase","currentStyle","WOW","scrollCallback","scrollHandler","resetAnimation","start","scrolled","config","util","scrollContainer","animationNameCache","wowEvent","boxClass","animateClass","mobile","live","init","finished","stopped","boxes","all","disabled","resetStyle","applyStyle","interval","setInterval","addedNodes","doSync","childList","subtree","stop","clearInterval","sync","show","customStyle","requestAnimationFrame","visibility","srcElement","trim","cacheAnimationName","vendorSet","animationDuration","animationDelay","animationIterationCount","animationName","cachedAnimationName","vendors","substr","vendorCSS","getPropertyCSSValue","cssText","isVisible","offsetTop","offsetParent","pageYOffset","_util","navigator","userAgent","COUNT_FRAMERATE","COUNT_MS_PER_FRAME","DIGIT_FORMAT","DIGIT_HTML","DIGIT_SPEEDBOOST","DURATION","FORMAT_MARK_HTML","FORMAT_PARSER","FRAMERATE","FRAMES_PER_VALUE","MS_PER_FRAME","Odometer","RIBBON_HTML","TRANSITION_END_EVENTS","TRANSITION_SUPPORT","VALUE_HTML","createFromHTML","fractionalPart","now","round","transitionCheckStyles","truncate","wrapJQuery","_jQueryWrapped","_old","_ref","_ref1","__slice","webkitTransition","mozTransition","oTransition","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","WebKitMutationObserver","html","el","innerHTML","name","RegExp","split","join","evt","initEvent","performance","Date","val","precision","pow","ceil","property","_i","_len","_results","old","odometer","update","v","_base","_ref2","duration","MAX_VALUES","resetFormat","cleanValue","renderInside","render","defineProperty","_ref3","inside","outerHTML","innerText","textContent","_error","watchForMutations","observer","mutations","newVal","watchMutations","startWatchingMutations","stopWatchingMutations","disconnect","format","radix","bindTransitionEnd","renderEnqueued","transitionEndBound","fractional","parsed","repeating","exec","Error","classes","cls","newClasses","theme","ribbons","formatDigits","digit","valueDigit","valueString","wholePart","_j","_len1","digits","formatFunction","reverse","renderDigit","insertDigit","addSpacer","toString","addDigit","newValue","diff","before","chr","extraClasses","spacer","resetted","substring","animation","animateCount","animateSlide","cur","delta","dist","fraction","getDigitCount","abs","log","getFractionalDigitCount","parser","parts","resetDigits","boosted","digitCount","end","fractionalCount","frame","frames","incr","mark","numEl","oldValue","_k","_l","_len2","_m","odometerOptions","elements","doScroll","onreadystatechange","auto","Zepto","q","r","s","t","u","w","ev","appendTo","triggerHandler","st","callbacks","z","currTemplate","closeBtn","closeMarkup","tClose","A","magnificPopup","B","pop","appVersion","isIE7","isIE8","isLowIE","isAndroid","isIOS","supportsTransition","probablyMobile","popupsCache","open","isObj","toArray","isOpen","updateItemHTML","types","mainEl","eq","key","fixedContentPos","modal","closeOnContentClick","closeOnBgClick","showCloseBtn","enableEscapeKey","bgOverlay","close","wrap","_checkIfClose","contentContainer","preloader","tLoading","modules","closeBtnInside","close_replaceWith","append","alignTop","overflow","overflowY","overflowX","fixedBgPos","keyCode","updateSize","wH","_hasScrollBar","_getScrollbarSize","mainClass","_addClassToMFP","add","prependTo","_lastFocusedEl","activeElement","content","_setFocus","_onFocusIn","removalDelay","_close","detach","empty","_removeClassFromMFP","removeAttr","currItem","autoFocusLast","focus","prevHeight","clientWidth","parseEl","markup","appendContent","preloaded","prepend","tagName","src","hasClass","addGroup","mfpEl","_openClick","delegate","midClick","which","ctrlKey","metaKey","altKey","shiftKey","disableOn","isFunction","preventDefault","stopPropagation","updateStatus","status","text","stopImmediatePropagation","contains","_parseMarkup","replaceWith","scrollbarSize","registerModule","C","D","E","F","G","after","hiddenClass","tNotFound","initInline","getInline","inline","inlineElement","H","I","J","K","req","abort","settings","cursor","tError","initAjax","ajax","getAjax","url","success","xhr","loadError","L","M","title","image","titleSrc","verticalFit","initImage","resizeImage","img","_onImageHasSize","hasSize","isCheckingImgSize","imgHidden","findImageSize","naturalWidth","getImage","complete","loaded","alt","clone","img_replaceWith","loading","N","O","enabled","easing","opener","initZoom","zoom","zIndex","_allowZoom","_getItemToZoom","_getOffset","P","Q","R","srcAction","patterns","youtube","vimeo","gmaps","initIframe","getIframe","iframe","lastIndexOf","S","T","arrowMarkup","preload","navigateByImgClick","arrows","tPrev","tNext","tCounter","initGallery","gallery","Boolean","mfpFastClick","direction","next","prev","counter","arrowLeft","arrowRight","_preloadTimeout","preloadNearbyImages","destroyMfpFastClick","_preloadItem","U","replaceSrc","ratio","initRetina","devicePixelRatio","retina","originalEvent","touches","clientX","clientY","emulatedIEMajorVersion","groups","ieVersionNum","ieMajorVersion","actualNonEmulatedIEMajorVersion","jscriptVersion","Function","ua","emulated","nonEmulated","alert","msViewportStyle","createTextNode","Holder","frameElement","hasOwnProperty","ctx","dimensions","template","holder","textmode","font","textAlign","textBaseline","fillStyle","background","fillRect","foreground","exact_dimensions","measureText","fillText","toDataURL","decodeURIComponent","setAttribute","holder_data","backgroundColor","backgroundImage","backgroundSize","hasAttribute","removeAttribute","fluid","themes","gray","sl","flags","output","colors","getContext","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","domain","images","bgnodes","social","industrial","sky","vine","lava","stylesheet","regex","getElementsByClassName","evaluate","iterateNext","getElementsByTagName","__proto__","add_theme","add_image","run","NodeList","Node","getElementById","nocss","styleSheet","attr_datasrc","app","win","preempted","fallback","canvas","dpr","bsr","resizable_images","contentLoaded","ret","text_size","bigSide","smallSide","scale","newHeight","draw","literal","exact","ts","text_height","text_width","mode","dimensions_caption","resizable_update","dimension_check","parse_flags","flag","node","imageNodes","holdercss","cssregex","bgsrc","attr_data_src","attr_src","transformicons","revert","toggle","currentTarget","classList","AjaxMonitor","Bar","DocumentMonitor","ElementMonitor","ElementTracker","EventLagMonitor","Evented","Events","NoTargetError","RequestIntercept","SOURCE_KEYS","Scaler","SocketRequestTracker","XHRRequestTracker","avgAmplitude","bar","cancelAnimation","cancelAnimationFrame","defaultOptions","extendNative","getFromDOM","getIntercept","handlePushState","ignoreStack","result","runAnimation","scalers","shouldTrack","source","sources","uniScaler","_WebSocket","_XDomainRequest","_XMLHttpRequest","_intercept","_pushState","_replaceState","__hasProp","__extends","child","ctor","__super__","__indexOf","catchupTime","initialRate","minTime","ghostTime","maxProgressPerFrame","easeFactor","startOnPageLoad","restartOnPushState","restartOnRequestAfter","checkInterval","selectors","eventLag","minSamples","sampleCount","lagThreshold","mozCancelAnimationFrame","out","arr","sum","json","handler","bindings","Pace","paceOptions","_super","progress","getElement","targetElement","firstChild","finish","fadeOut","prog","progressStr","lastRenderedProgress","done","binding","XMLHttpRequest","XDomainRequest","WebSocket","unshift","shift","track","trackWebSockets","trackMethods","monitorXHR","_open","async","request","protocols","_arg","running","stillActive","restart","watch","tracker","_onreadystatechange","ProgressEvent","lengthComputable","total","check","states","interactive","avg","points","samples","sinceLastUpdate","rate","catchup","lastProgress","frameTime","scaling","history","pushState","replaceState","_ref4","extraSources","go","enqueueNextFrame","remaining","scaler","scalerList","_options","matchHeight","_groups","byRow","_apply","_applyDataApi","_update","bind","gMap","latitude","longitude","icon","popup","google","maps","Map","Geocoder","address","geocode","setCenter","geometry","location","LatLng","markers","setZoom","setMapTypeId","MapTypeId","maptype","scrollwheel","disableDoubleClickZoom","doubleclickzoom","styles","controls","disableDefaultUI","setOptions","Marker","MarkerImage","Size","iconsize","anchor","Point","iconanchor","setIcon","shadow","shadowsize","shadowanchor","setShadow","panTo","setMap","getIcon","getShadow","InfoWindow","html_prepend","html_append","addListener","addListenerOnce","lat","lng","def","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","PI","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","backstretch","scrollTo","expr","centeredX","centeredY","fade","margin","border","maxHeight","maxWidth","isBody","$container","$root","first","$wrap","$img","relatedTarget","fadeIn","speed","paused","cycle","pause","resume","platform","operamini","flexVerticalCenter","cssAttribute","verticalOffset","parentSelector","debounceTimeout","deferTilWindowLoad","debounce","resizer","parentHeight","parents","load","fitVids","customSelector","head","childNodes","ignoreList","$allVideos","not","aspectRatio","videoName","_count","unbind","eventie","EventEmitter","getListeners","_getEvents","flattenListeners","getListenersAsObject","addOnceListener","defineEvent","defineEvents","removeListener","addListeners","manipulateListeners","removeListeners","removeAllListeners","_getOnceReturnValue","emit","setOnceReturnValue","_onceReturnValue","noConflict","getStyleProperty","runtimeStyle","pixelLeft","isReady","createDocumentFragment","isElement","nodeName","setText","MozTransition","OTransition","resizeTimeout","Isotope","itemGUID","sortData","updateSortData","random","getSortData","_sorters","LayoutMode","isotope","filteredItems","needsVerticalResizeLayout","getColumnWidth","getSegmentSize","getRowHeight","getFirstItemSize","modes","horizontalAlignment","String","layoutMode","isJQueryFiltering","sortAscending","_getSorters","sortHistory","_initLayoutMode","_updateItemsSortData","arrange","_layout","_getIsInstant","needReveal","needHide","_filter","_bindArrangeComplete","_isInstant","_noTransition","_sort","_getFilterTest","sortDataParsers","sortBy","_mode","_filterRevealAdded","insert","shuffle","getFilteredItemElements","imagesLoaded","getImages","jqDeferred","Deferred","addImage","debug","hasAnyBroken","isLoaded","notify","isComplete","promise","isConfirmed","confirm","isChecked","Image","onload","unbindProxyEvents","onerror","imageSrc","positionX","positionY","iosFix","backgroundPosition","androidFix","$mirror","$slider","one","naturalHeight","sliders","isFresh","requestRender","configure","getTime","bleed","overScrollFix","boxWidth","boxHeight","boxOffsetTop","boxOffsetLeft","boxOffsetBottom","winHeight","docHeight","imageWidth","imageHeight","offsetBaseTop","offsetLeft","scrollLeft","overScroll","mirrorTop","mirrorLeft","winWidth","docWidth","isBusy","parallax","fix","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","normalizeOffset","deltaFactor","offsetX","offsetY","dispatch","handle","adjustOldDeltas","documentMode","fixHooks","mouseHooks","special","mousewheel","version","onmousewheel","getLineHeight","getPageHeight","teardown","unmousewheel","protocol","decodeURI","setTop","setLeft","scrollbarPosition","scrollInertia","autoDraggerLength","alwaysShowScrollbar","snapOffset","mouseWheel","enable","scrollAmount","disableOver","scrollButtons","scrollType","keyboard","contentTouchScroll","documentTouchScroll","advanced","autoScrollOnFocus","updateOnContentResize","updateOnImageLoad","autoUpdateTimeout","onTotalScrollOffset","onTotalScrollBackOffset","alwaysTriggerOffsets","liveSelector","mCustomScrollbar","setWidth","set_width","set_height","horizontalScroll","normalizeDelta","invert","mouseWheelPixels","normalizeMouseWheelDelta","idx","opt","scrollRatio","overflowed","contentReset","bindEvents","tweenRunning","sequential","langDir","cbOffsets","poll","change","onCreate","onBeforeUpdate","_","autoExpandHorizontalScroll","V","dir","dur","overwrite","onImageLoad","onSelectorChange","onUpdate","X","scrollEasing","moveDragger","onStart","Y","oe","disable","contents","inArray","autoExpandScrollbar","autoHideScrollbar","wrapInner","scrollWidth","unwrap","ee","tabindex","_draggable","dx","releaseDraggableSelectors","extraDraggableSelectors","W","_focusTimeout","step","onCompleteTimeout","ownerDocument","view","pageY","pageX","changedTouches","screenY","screenX","idleTimer","drag","Z","onselectstart","touchAction","contentDocument","contentWindow","getSelection","selection","createRange","webkitDirectionInvertedFromDevice","_focusTimer","te","snapAmount","jquery","autoUpdate","updateOnSelectorChange","mcs","draggerTop","draggerLeft","topPct","leftPct","onOverflowYNone","onOverflowXNone","onOverflowY","onOverflowX","onInit","onScrollStart","whileScrolling","onScroll","onTotalScroll","onTotalScrollBack","time","currVal","_mTween","webkitNow","pointerType","isFinite","mcsInView","mcsOverflow"],"mappings":"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","sourcesContent":["/* =============================================================\n * bootstrap-scrollspy.js v2.0.4\n * http://twitter.github.com/bootstrap/javascript.html#scrollspy\n * =============================================================\n * Copyright 2012 Twitter, Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * ============================================================== */\nimport $ from \"jquery\"\nimport \"../bootstrap/js/bootstrap.min\"\n!function ($$) {\n  \"use strict\"; // jshint ;_;\n  /* SCROLLSPY CLASS DEFINITION\n   * ========================== */\n  function ScrollSpy( element, options) {\n    var process = $.proxy(this.process, this)\n      , $element = $(element).is('body') ? $(window) : $(element)\n      , href\n    this.options = $.extend({}, $.fn.scrollspy.defaults, options)\n    this.$scrollElement = $element.on('scroll.scroll.data-api', process)\n    this.selector = (this.options.target\n      || ((href = $(element).attr('href')) && href.replace(/.*(?=#[^\\s]+$)/, '')) //strip for ie7\n      || '') + ' .nav li > a'\n    this.$body = $('body')\n    this.refresh()\n    this.process()\n  }\n\n  ScrollSpy.prototype = {\n\n      constructor: ScrollSpy\n\n    , refresh: function () {\n        var self = this\n          , $targets\n\n        this.offsets = $([])\n        this.targets = $([])\n\n        $targets = this.$body\n          .find(this.selector)\n          .map(function () {\n            var $el = $(this)\n              , href = $el.data('target') || $el.attr('href')\n              , $href = /^#\\w/.test(href) && $(href)\n            return ( $href\n              && href.length\n              && [[ $href.position().top, href ]] ) || null\n          })\n          .sort(function (a, b) { return a[0] - b[0] })\n          .each(function () {\n            self.offsets.push(this[0])\n            self.targets.push(this[1])\n          })\n      }\n\n    , process: function () {\n        var scrollTop = this.$scrollElement.scrollTop() + this.options.offset\n          , scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight\n          , maxScroll = scrollHeight - this.$scrollElement.height()\n          , offsets = this.offsets\n          , targets = this.targets\n          , activeTarget = this.activeTarget\n          , i\n\n        if (scrollTop >= maxScroll) {\n          return activeTarget != (i = targets.last()[0])\n            && this.activate ( i )\n        }\n\n        for (i = offsets.length; i--;) {\n          activeTarget != targets[i]\n            && scrollTop >= offsets[i]\n            && (!offsets[i + 1] || scrollTop <= offsets[i + 1])\n            && this.activate( targets[i] )\n        }\n      }\n\n    , activate: function (target) {\n        var active\n          , selector\n\n        this.activeTarget = target\n\n        $(this.selector)\n          .parent('.active')\n          .removeClass('active')\n\n        selector = this.selector\n          + '[data-target=\"' + target + '\"],'\n          + this.selector + '[href=\"' + target + '\"]'\n\n        active = $(selector)\n          .parent('li')\n          .addClass('active')\n\n        if (active.parent('.dropdown-menu'))  {\n          active = active.closest('li.dropdown').addClass('active')\n        }\n\n        active.trigger('activate')\n      }\n\n  }\n\n\n /* SCROLLSPY PLUGIN DEFINITION\n  * =========================== */\n\n  $.fn.scrollspy = function ( option ) {\n    return this.each(function () {\n      var $this = $(this)\n        , data = $this.data('scrollspy')\n        , options = typeof option == 'object' && option\n      if (!data) $this.data('scrollspy', (data = new ScrollSpy(this, options)))\n      if (typeof option == 'string') data[option]()\n    })\n  }\n\n  $.fn.scrollspy.Constructor = ScrollSpy\n\n  $.fn.scrollspy.defaults = {\n    offset: 10\n  }\n\n\n /* SCROLLSPY DATA-API\n  * ================== */\n\n  $(function () {\n    $('[data-spy=\"scroll\"]').each(function () {\n      var $spy = $(this)\n      $spy.scrollspy($spy.data())\n    })\n  })\n\n}(window.jQuery);\n\n/*!\n * Masonry PACKAGED v4.0.0\n * Cascading grid layout library\n * http://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n/**\n * Bridget makes jQuery widgets\n * v2.0.0\n * MIT license\n */\n\n/* jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  'use strict';\n  /* globals define: false, module: false, require: false */\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\n      factory( window, jQuery );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('jquery')\n    );\n  } else {\n    // browser global\n    window.jQueryBridget = factory(\n      window,\n      window.jQuery\n    );\n  }\n\n}( window, function factory( window, jQuery ) {\n'use strict';\n\n// ----- utils ----- //\n\nvar arraySlice = Array.prototype.slice;\n\n// helper function for logging errors\n// $.error breaks jQuery chaining\nvar console = window.console;\nvar logError = typeof console == 'undefined' ? function() {} :\n  function( message ) {\n    console.error( message );\n  };\n\n// ----- jQueryBridget ----- //\n\nfunction jQueryBridget( namespace, PluginClass, $ ) {\n  $ = $ || jQuery || window.jQuery;\n  if ( !$ ) {\n    return;\n  }\n\n  // add option method -> $().plugin('option', {...})\n  if ( !PluginClass.prototype.option ) {\n    // option setter\n    PluginClass.prototype.option = function( opts ) {\n      // bail out if not an object\n      if ( !$.isPlainObject( opts ) ){\n        return;\n      }\n      this.options = $.extend( true, this.options, opts );\n    };\n  }\n\n  // make jQuery plugin\n  $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\n    if ( typeof arg0 == 'string' ) {\n      // method call $().plugin( 'methodName', { options } )\n      // shift arguments by 1\n      var args = arraySlice.call( arguments, 1 );\n      return methodCall( this, arg0, args );\n    }\n    // just $().plugin({ options })\n    plainCall( this, arg0 );\n    return this;\n  };\n\n  // $().plugin('methodName')\n  function methodCall( $elems, methodName, args ) {\n    var returnValue;\n    var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\n\n    $elems.each( function( i, elem ) {\n      // get instance\n      var instance = $.data( elem, namespace );\n      if ( !instance ) {\n        logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\n          pluginMethodStr );\n        return;\n      }\n\n      var method = instance[ methodName ];\n      if ( !method || methodName.charAt(0) == '_' ) {\n        logError( pluginMethodStr + ' is not a valid method' );\n        return;\n      }\n\n      // apply method, get return value\n      var value = method.apply( instance, args );\n      // set return value if value is returned, use only first value\n      returnValue = returnValue === undefined ? value : returnValue;\n    });\n\n    return returnValue !== undefined ? returnValue : $elems;\n  }\n\n  function plainCall( $elems, options ) {\n    $elems.each( function( i, elem ) {\n      var instance = $.data( elem, namespace );\n      if ( instance ) {\n        // set options & init\n        instance.option( options );\n        instance._init();\n      } else {\n        // initialize new instance\n        instance = new PluginClass( elem, options );\n        $.data( elem, namespace, instance );\n      }\n    });\n  }\n\n  updateJQuery( $ );\n\n}\n\n// ----- updateJQuery ----- //\n\n// set $.bridget for v1 backwards compatibility\nfunction updateJQuery( $ ) {\n  if ( !$ || ( $ && $.bridget ) ) {\n    return;\n  }\n  $.bridget = jQueryBridget;\n}\n\nupdateJQuery( jQuery || window.jQuery );\n\n// -----  ----- //\n\nreturn jQueryBridget;\n\n}));\n\n/**\n * EvEmitter v1.0.1\n * Lil' event emitter\n * MIT License\n */\n\n/* jshint unused: true, undef: true, strict: true */\n\n( function( global, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'ev-emitter/ev-emitter',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory();\n  } else {\n    // Browser globals\n\n  }\n\n}( this, function() {\n\n\n\nfunction EvEmitter() {}\n\nvar proto = EvEmitter.prototype;\n\nproto.on = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // set events hash\n  var events = this._events = this._events || {};\n  // set listeners array\n  var listeners = events[ eventName ] = events[ eventName ] || [];\n  // only add once\n  if ( listeners.indexOf( listener ) == -1 ) {\n    listeners.push( listener );\n  }\n\n  return this;\n};\n\nproto.once = function( eventName, listener ) {\n  if ( !eventName || !listener ) {\n    return;\n  }\n  // add event\n  this.on( eventName, listener );\n  // set once flag\n  // set onceEvents hash\n  var onceEvents = this._onceEvents = this._onceEvents || {};\n  // set onceListeners array\n  var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || [];\n  // set flag\n  onceListeners[ listener ] = true;\n\n  return this;\n};\n\nproto.off = function( eventName, listener ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var index = listeners.indexOf( listener );\n  if ( index != -1 ) {\n    listeners.splice( index, 1 );\n  }\n\n  return this;\n};\n\nproto.emitEvent = function( eventName, args ) {\n  var listeners = this._events && this._events[ eventName ];\n  if ( !listeners || !listeners.length ) {\n    return;\n  }\n  var i = 0;\n  var listener = listeners[i];\n  args = args || [];\n  // once stuff\n  var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\n\n  while ( listener ) {\n    var isOnce = onceListeners && onceListeners[ listener ];\n    if ( isOnce ) {\n      // remove listener\n      // remove before trigger to prevent recursion\n      this.off( eventName, listener );\n      // unset once flag\n      delete onceListeners[ listener ];\n    }\n    // trigger listener\n    listener.apply( this, args );\n    // get next listener\n    i += isOnce ? 0 : 1;\n    listener = listeners[i];\n  }\n\n  return this;\n};\n\nreturn EvEmitter;\n\n}));\n\n/*!\n * getSize v2.0.2\n * measure size of elements\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false, console: false */\n\n( function( window, factory ) {\n  'use strict';\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'get-size/get-size',[],function() {\n      return factory();\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.getSize = factory();\n  }\n\n})( window, function factory() {\n'use strict';\n\n// -------------------------- helpers -------------------------- //\n\n// get a number from a string, not a percentage\nfunction getStyleSize( value ) {\n  var num = parseFloat( value );\n  // not a percent like '100%', and a number\n  var isValid = value.indexOf('%') == -1 && !isNaN( num );\n  return isValid && num;\n}\n\nfunction noop() {}\n\nvar logError = typeof console == 'undefined' ? noop :\n  function( message ) {\n    console.error( message );\n  };\n\n// -------------------------- measurements -------------------------- //\n\nvar measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n];\n\nvar measurementsLength = measurements.length;\n\nfunction getZeroSize() {\n  var size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  };\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    size[ measurement ] = 0;\n  }\n  return size;\n}\n\n// -------------------------- getStyle -------------------------- //\n\n/**\n * getStyle, get style of element, check for Firefox bug\n * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n */\nfunction getStyle( elem ) {\n  var style = getComputedStyle( elem );\n  if ( !style ) {\n    logError( 'Style returned ' + style +\n      '. Are you running this code in a hidden iframe on Firefox? ' +\n      'See http://bit.ly/getsizebug1' );\n  }\n  return style;\n}\n\n// -------------------------- setup -------------------------- //\n\nvar isSetup = false;\n\nvar isBoxSizeOuter;\n\n/**\n * setup\n * check isBoxSizerOuter\n * do on first getSize() rather than on page load for Firefox bug\n */\nfunction setup() {\n  // setup once\n  if ( isSetup ) {\n    return;\n  }\n  isSetup = true;\n\n  // -------------------------- box sizing -------------------------- //\n\n  /**\n   * WebKit measures the outer-width on style.width on border-box elems\n   * IE & Firefox<29 measures the inner-width\n   */\n  var div = document.createElement('div');\n  div.style.width = '200px';\n  div.style.padding = '1px 2px 3px 4px';\n  div.style.borderStyle = 'solid';\n  div.style.borderWidth = '1px 2px 3px 4px';\n  div.style.boxSizing = 'border-box';\n\n  var body = document.body || document.documentElement;\n  body.appendChild( div );\n  var style = getStyle( div );\n\n  getSize.isBoxSizeOuter = isBoxSizeOuter = getStyleSize( style.width ) == 200;\n  body.removeChild( div );\n\n}\n\n// -------------------------- getSize -------------------------- //\n\nfunction getSize( elem ) {\n  setup();\n\n  // use querySeletor if elem is string\n  if ( typeof elem == 'string' ) {\n    elem = document.querySelector( elem );\n  }\n\n  // do not proceed on non-objects\n  if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\n    return;\n  }\n\n  var style = getStyle( elem );\n\n  // if hidden, everything is 0\n  if ( style.display == 'none' ) {\n    return getZeroSize();\n  }\n\n  var size = {};\n  size.width = elem.offsetWidth;\n  size.height = elem.offsetHeight;\n\n  var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\n\n  // get all measurements\n  for ( var i=0; i < measurementsLength; i++ ) {\n    var measurement = measurements[i];\n    var value = style[ measurement ];\n    var num = parseFloat( value );\n    // any 'auto', 'medium' value will be 0\n    size[ measurement ] = !isNaN( num ) ? num : 0;\n  }\n\n  var paddingWidth = size.paddingLeft + size.paddingRight;\n  var paddingHeight = size.paddingTop + size.paddingBottom;\n  var marginWidth = size.marginLeft + size.marginRight;\n  var marginHeight = size.marginTop + size.marginBottom;\n  var borderWidth = size.borderLeftWidth + size.borderRightWidth;\n  var borderHeight = size.borderTopWidth + size.borderBottomWidth;\n\n  var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  var styleWidth = getStyleSize( style.width );\n  if ( styleWidth !== false ) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\n  }\n\n  var styleHeight = getStyleSize( style.height );\n  if ( styleHeight !== false ) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\n  }\n\n  size.innerWidth = size.width - ( paddingWidth + borderWidth );\n  size.innerHeight = size.height - ( paddingHeight + borderHeight );\n\n  size.outerWidth = size.width + marginWidth;\n  size.outerHeight = size.height + marginHeight;\n\n  return size;\n}\n\nreturn getSize;\n\n});\n\n/**\n * matchesSelector v2.0.1\n * matchesSelector( element, '.selector' )\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false */\n  'use strict';\n  // universal module definition\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'matches-selector/matches-selector',factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // browser global\n    window.matchesSelector = factory();\n  }\n\n}( window, function factory() {\n  'use strict';\n\n  var matchesMethod = ( function() {\n    var ElemProto = Element.prototype;\n    // check for the standard method name first\n    if ( ElemProto.matches ) {\n      return 'matches';\n    }\n    // check un-prefixed\n    if ( ElemProto.matchesSelector ) {\n      return 'matchesSelector';\n    }\n    // check vendor prefixes\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\n\n    for ( var i=0; i < prefixes.length; i++ ) {\n      var prefix = prefixes[i];\n      var method = prefix + 'MatchesSelector';\n      if ( ElemProto[ method ] ) {\n        return method;\n      }\n    }\n  })();\n\n  return function matchesSelector( elem, selector ) {\n    return elem[ matchesMethod ]( selector );\n  };\n\n}));\n\n/**\n * Fizzy UI utils v2.0.0\n * MIT license\n */\n\n/*jshint browser: true, undef: true, unused: true, strict: true */\n\n( function( window, factory ) {\n  /*global define: false, module: false, require: false */\n  'use strict';\n  // universal module definition\n\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( 'fizzy-ui-utils/utils',[\n      'matches-selector/matches-selector'\n    ], function( matchesSelector ) {\n      return factory( window, matchesSelector );\n    });\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      window,\n      require('desandro-matches-selector')\n    );\n  } else {\n    // browser global\n    window.fizzyUIUtils = factory(\n      window,\n      window.matchesSelector\n    );\n  }\n\n}( window, function factory( window, matchesSelector ) {\n\n\n\nvar utils = {};\n\n// ----- extend ----- //\n\n// extends objects\nutils.extend = function( a, b ) {\n  for ( var prop in b ) {\n    a[ prop ] = b[ prop ];\n  }\n  return a;\n};\n\n// ----- modulo ----- //\n\nutils.modulo = function( num, div ) {\n  return ( ( num % div ) + div ) % div;\n};\n\n// ----- makeArray ----- //\n\n// turn element or nodeList into an array\nutils.makeArray = function( obj ) {\n  var ary = [];\n  if ( Array.isArray( obj ) ) {\n    // use object if already an array\n    ary = obj;\n  } else if ( obj && typeof obj.length == 'number' ) {\n    // convert nodeList to array\n    for ( var i=0; i < obj.length; i++ ) {\n      ary.push( obj[i] );\n    }\n  } else {\n    // array of single index\n    ary.push( obj );\n  }\n  return ary;\n};\n\n// ----- removeFrom ----- //\n\nutils.removeFrom = function( ary, obj ) {\n  var index = ary.indexOf( obj );\n  if ( index != -1 ) {\n    ary.splice( index, 1 );\n  }\n};\n\n// ----- getParent ----- //\n\nutils.getParent = function( elem, selector ) {\n  while ( elem != document.body ) {\n    elem = elem.parentNode;\n    if ( matchesSelector( elem, selector ) ) {\n      return elem;\n    }\n  }\n};\n\n// ----- getQueryElement ----- //\n\n// use element as selector string\nutils.getQueryElement = function( elem ) {\n  if ( typeof elem == 'string' ) {\n    return document.querySelector( elem );\n  }\n  return elem;\n};\n\n// ----- handleEvent ----- //\n\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\nutils.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\n// ----- filterFindElements ----- //\n\nutils.filterFindElements = function( elems, selector ) {\n  // make array of elems\n  elems = utils.makeArray( elems );\n  var ffElems = [];\n\n  elems.forEach( function( elem ) {\n    // check that elem is an actual element\n    if ( !( elem instanceof HTMLElement ) ) {\n      return;\n    }\n    // add elem if no selector\n    if ( !selector ) {\n      ffElems.push( elem );\n      return;\n    }\n    // filter & find items if we have a selector\n    // filter\n    if ( matchesSelector( elem, selector ) ) {\n      ffElems.push( elem );\n    }\n    // find children\n    var childElems = elem.querySelectorAll( selector );\n    // concat childElems to filterFound array\n    for ( var i=0; i < childElems.length; i++ ) {\n      ffElems.push( childElems[i] );\n    }\n  });\n\n  return ffElems;\n};\n\n// ----- debounceMethod ----- //\n\nutils.debounceMethod = function( _class, methodName, threshold ) {\n  // original method\n  var method = _class.prototype[ methodName ];\n  var timeoutName = methodName + 'Timeout';\n\n  _class.prototype[ methodName ] = function() {\n    var timeout = this[ timeoutName ];\n    if ( timeout ) {\n      clearTimeout( timeout );\n    }\n    var args = arguments;\n\n    var _this = this;\n    this[ timeoutName ] = setTimeout( function() {\n      method.apply( _this, args );\n      delete _this[ timeoutName ];\n    }, threshold || 100 );\n  };\n};\n\n// ----- docReady ----- //\n\nutils.docReady = function( callback ) {\n  if ( document.readyState == 'complete' ) {\n    callback();\n  } else {\n    document.addEventListener( 'DOMContentLoaded', callback );\n  }\n};\n\n// ----- htmlInit ----- //\n\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\nutils.toDashed = function( str ) {\n  return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\n    return $1 + '-' + $2;\n  }).toLowerCase();\n};\n\nvar console = window.console;\n/**\n * allow user to initialize classes via [data-namespace] or .js-namespace class\n * htmlInit( Widget, 'widgetName' )\n * options are parsed from data-namespace-options\n */\nutils.htmlInit = function( WidgetClass, namespace ) {\n  utils.docReady( function() {\n    var dashedNamespace = utils.toDashed( namespace );\n    var dataAttr = 'data-' + dashedNamespace;\n    var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\n    var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\n    var elems = utils.makeArray( dataAttrElems )\n      .concat( utils.makeArray( jsDashElems ) );\n    var dataOptionsAttr = dataAttr + '-options';\n    var jQuery = window.jQuery;\n\n    elems.forEach( function( elem ) {\n      var attr = elem.getAttribute( dataAttr ) ||\n        elem.getAttribute( dataOptionsAttr );\n      var options;\n      try {\n        options = attr && JSON.parse( attr );\n      } catch ( error ) {\n        // log error, do not initialize\n        if ( console ) {\n          console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\n          ': ' + error );\n        }\n        return;\n      }\n      // initialize\n      var instance = new WidgetClass( elem, options );\n      // make available via $().data('layoutname')\n      if ( jQuery ) {\n        jQuery.data( elem, namespace, instance );\n      }\n    });\n\n  });\n};\n\n// -----  ----- //\n\nreturn utils;\n\n}));\n\n/**\n * Outlayer Item\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'outlayer/item',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size'\n      ],\n      function( EvEmitter, getSize ) {\n        return factory( window, EvEmitter, getSize );\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Outlayer = {};\n    window.Outlayer.Item = factory(\n      window,\n      window.EvEmitter,\n      window.getSize\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize ) {\n'use strict';\n\n// ----- helpers ----- //\n\nfunction isEmptyObj( obj ) {\n  for ( var prop in obj ) {\n    return false;\n  }\n  prop = null;\n  return true;\n}\n\n// -------------------------- CSS3 support -------------------------- //\n\n\nvar docElemStyle = document.documentElement.style;\n\nvar transitionProperty = typeof docElemStyle.transition == 'string' ?\n  'transition' : 'WebkitTransition';\nvar transformProperty = typeof docElemStyle.transform == 'string' ?\n  'transform' : 'WebkitTransform';\n\nvar transitionEndEvent = {\n  WebkitTransition: 'webkitTransitionEnd',\n  transition: 'transitionend'\n}[ transitionProperty ];\n\n// cache all vendor properties\nvar vendorProperties = [\n  transformProperty,\n  transitionProperty,\n  transitionProperty + 'Duration',\n  transitionProperty + 'Property'\n];\n\n// -------------------------- Item -------------------------- //\n\nfunction Item( element, layout ) {\n  if ( !element ) {\n    return;\n  }\n\n  this.element = element;\n  // parent layout class, i.e. Masonry, Isotope, or Packery\n  this.layout = layout;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n\n  this._create();\n}\n\n// inherit EvEmitter\nconst proto = Item.prototype = Object.create( EvEmitter.prototype )\nproto.constructor = Item\n\nproto._create = function() {\n  // transition objects\n  this._transn = {\n    ingProperties: {},\n    clean: {},\n    onEnd: {}\n  };\n\n  this.css({\n    position: 'absolute'\n  });\n};\n\n// trigger specified handler for event type\nproto.handleEvent = function( event ) {\n  var method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * apply CSS styles to element\n * @param {Object} style\n */\nproto.css = function( style ) {\n  var elemStyle = this.element.style;\n\n  for ( var prop in style ) {\n    // use vendor property if available\n    var supportedProp = vendorProperties[ prop ] || prop;\n    elemStyle[ supportedProp ] = style[ prop ];\n  }\n};\n\n // measure position, and sets it\nproto.getPosition = function() {\n  var style = getComputedStyle( this.element );\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  var xValue = style[ isOriginLeft ? 'left' : 'right' ];\n  var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\n  // convert percent to pixels\n  var layoutSize = this.layout.size;\n  var x = xValue.indexOf('%') != -1 ?\n    ( parseFloat( xValue ) / 100 ) * layoutSize.width : parseInt( xValue, 10 );\n  var y = yValue.indexOf('%') != -1 ?\n    ( parseFloat( yValue ) / 100 ) * layoutSize.height : parseInt( yValue, 10 );\n\n  // clean up 'auto' or other non-integer values\n  x = isNaN( x ) ? 0 : x;\n  y = isNaN( y ) ? 0 : y;\n  // remove padding from measurement\n  x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\n  y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\n\n  this.position.x = x;\n  this.position.y = y;\n};\n\n// set settled position, apply padding\nproto.layoutPosition = function() {\n  var layoutSize = this.layout.size;\n  var style = {};\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n\n  // x\n  var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\n  var xProperty = isOriginLeft ? 'left' : 'right';\n  var xResetProperty = isOriginLeft ? 'right' : 'left';\n\n  var x = this.position.x + layoutSize[ xPadding ];\n  // set in percentage or pixels\n  style[ xProperty ] = this.getXValue( x );\n  // reset other property\n  style[ xResetProperty ] = '';\n\n  // y\n  var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\n  var yProperty = isOriginTop ? 'top' : 'bottom';\n  var yResetProperty = isOriginTop ? 'bottom' : 'top';\n\n  var y = this.position.y + layoutSize[ yPadding ];\n  // set in percentage or pixels\n  style[ yProperty ] = this.getYValue( y );\n  // reset other property\n  style[ yResetProperty ] = '';\n\n  this.css( style );\n  this.emitEvent( 'layout', [ this ] );\n};\n\nproto.getXValue = function( x ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && !isHorizontal ?\n    ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\n};\n\nproto.getYValue = function( y ) {\n  var isHorizontal = this.layout._getOption('horizontal');\n  return this.layout.options.percentPosition && isHorizontal ?\n    ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\n};\n\nproto._transitionTo = function( x, y ) {\n  this.getPosition();\n  // get current x & y from top/left\n  var curX = this.position.x;\n  var curY = this.position.y;\n\n  var compareX = parseInt( x, 10 );\n  var compareY = parseInt( y, 10 );\n  var didNotMove = compareX === this.position.x && compareY === this.position.y;\n\n  // save end position\n  this.setPosition( x, y );\n\n  // if did not move and not transitioning, just go to layout\n  if ( didNotMove && !this.isTransitioning ) {\n    this.layoutPosition();\n    return;\n  }\n\n  var transX = x - curX;\n  var transY = y - curY;\n  var transitionStyle = {};\n  transitionStyle.transform = this.getTranslate( transX, transY );\n\n  this.transition({\n    to: transitionStyle,\n    onTransitionEnd: {\n      transform: this.layoutPosition\n    },\n    isCleaning: true\n  });\n};\n\nproto.getTranslate = function( x, y ) {\n  // flip cooridinates if origin on right or bottom\n  var isOriginLeft = this.layout._getOption('originLeft');\n  var isOriginTop = this.layout._getOption('originTop');\n  x = isOriginLeft ? x : -x;\n  y = isOriginTop ? y : -y;\n  return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\n};\n\n// non transition + transform support\nproto.goTo = function( x, y ) {\n  this.setPosition( x, y );\n  this.layoutPosition();\n};\n\nproto.moveTo = proto._transitionTo;\n\nproto.setPosition = function( x, y ) {\n  this.position.x = parseInt( x, 10 );\n  this.position.y = parseInt( y, 10 );\n};\n\n// ----- transition ----- //\n\n/**\n * @param {Object} style - CSS\n * @param {Function} onTransitionEnd\n */\n\n// non transition, just trigger callback\nproto._nonTransition = function( args ) {\n  this.css( args.to );\n  if ( args.isCleaning ) {\n    this._removeStyles( args.to );\n  }\n  for ( var prop in args.onTransitionEnd ) {\n    args.onTransitionEnd[ prop ].call( this );\n  }\n};\n\n/**\n * proper transition\n * @param {Object} args - arguments\n *   @param {Object} to - style to transition to\n *   @param {Object} from - style to start transition from\n *   @param {Boolean} isCleaning - removes transition styles after transition\n *   @param {Function} onTransitionEnd - callback\n */\nproto._transition = function( args ) {\n  // redirect to nonTransition if no transition duration\n  if ( !parseFloat( this.layout.options.transitionDuration ) ) {\n    this._nonTransition( args );\n    return;\n  }\n\n  var _transition = this._transn;\n  // keep track of onTransitionEnd callback by css property\n  for ( var prop in args.onTransitionEnd ) {\n    _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\n  }\n  // keep track of properties that are transitioning\n  for ( prop in args.to ) {\n    _transition.ingProperties[ prop ] = true;\n    // keep track of properties to clean up when transition is done\n    if ( args.isCleaning ) {\n      _transition.clean[ prop ] = true;\n    }\n  }\n\n  // set from styles\n  if ( args.from ) {\n    this.css( args.from );\n    // force redraw. http://blog.alexmaccaw.com/css-transitions\n    var h = this.element.offsetHeight;\n    // hack for JSHint to hush about unused var\n    h = null;\n  }\n  // enable transition\n  this.enableTransition( args.to );\n  // set styles that are transitioning\n  this.css( args.to );\n\n  this.isTransitioning = true;\n\n};\n\n// dash before all cap letters, including first for\n// WebkitTransform => -webkit-transform\nfunction toDashedAll( str ) {\n  return str.replace( /([A-Z])/g, function( $1 ) {\n    return '-' + $1.toLowerCase();\n  });\n}\n\nvar transitionProps = 'opacity,' +\n  toDashedAll( vendorProperties.transform || 'transform' );\n\nproto.enableTransition = function(/* style */) {\n  // HACK changing transitionProperty during a transition\n  // will cause transition to jump\n  if ( this.isTransitioning ) {\n    return;\n  }\n\n  // make `transition: foo, bar, baz` from style object\n  // HACK un-comment this when enableTransition can work\n  // while a transition is happening\n  // var transitionValues = [];\n  // for ( var prop in style ) {\n  //   // dash-ify camelCased properties like WebkitTransition\n  //   prop = vendorProperties[ prop ] || prop;\n  //   transitionValues.push( toDashedAll( prop ) );\n  // }\n  // enable transition styles\n  this.css({\n    transitionProperty: transitionProps,\n    transitionDuration: this.layout.options.transitionDuration\n  });\n  // listen for transition end event\n  this.element.addEventListener( transitionEndEvent, this, false );\n};\n\nproto.transition = Item.prototype[ transitionProperty ? '_transition' : '_nonTransition' ];\n\n// ----- events ----- //\n\nproto.onwebkitTransitionEnd = function( event ) {\n  this.ontransitionend( event );\n};\n\nproto.onotransitionend = function( event ) {\n  this.ontransitionend( event );\n};\n\n// properties that I munge to make my life easier\nvar dashedVendorProperties = {\n  '-webkit-transform': 'transform'\n};\n\nproto.ontransitionend = function( event ) {\n  // disregard bubbled events from children\n  if ( event.target !== this.element ) {\n    return;\n  }\n  var _transition = this._transn;\n  // get property name of transitioned property, convert to prefix-free\n  var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\n\n  // remove property that has completed transitioning\n  delete _transition.ingProperties[ propertyName ];\n  // check if any properties are still transitioning\n  if ( isEmptyObj( _transition.ingProperties ) ) {\n    // all properties have completed transitioning\n    this.disableTransition();\n  }\n  // clean style\n  if ( propertyName in _transition.clean ) {\n    // clean up style\n    this.element.style[ event.propertyName ] = '';\n    delete _transition.clean[ propertyName ];\n  }\n  // trigger onTransitionEnd callback\n  if ( propertyName in _transition.onEnd ) {\n    var onTransitionEnd = _transition.onEnd[ propertyName ];\n    onTransitionEnd.call( this );\n    delete _transition.onEnd[ propertyName ];\n  }\n\n  this.emitEvent( 'transitionEnd', [ this ] );\n};\n\nproto.disableTransition = function() {\n  this.removeTransitionStyles();\n  this.element.removeEventListener( transitionEndEvent, this, false );\n  this.isTransitioning = false;\n};\n\n/**\n * removes style property from element\n * @param {Object} style\n**/\nproto._removeStyles = function( style ) {\n  // clean up transition styles\n  var cleanStyle = {};\n  for ( var prop in style ) {\n    cleanStyle[ prop ] = '';\n  }\n  this.css( cleanStyle );\n};\n\nvar cleanTransitionStyle = {\n  transitionProperty: '',\n  transitionDuration: ''\n};\n\nproto.removeTransitionStyles = function() {\n  // remove transition\n  this.css( cleanTransitionStyle );\n};\n\n// ----- show/hide/remove ----- //\n\n// remove element from DOM\nproto.removeElem = function() {\n  this.element.parentNode.removeChild( this.element );\n  // remove display: none\n  this.css({ display: '' });\n  this.emitEvent( 'remove', [ this ] );\n};\n\nproto.remove = function() {\n  // just remove element if no transition support or no transition\n  if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\n    this.removeElem();\n    return;\n  }\n\n  // start transition\n  this.once( 'transitionEnd', function() {\n    this.removeElem();\n  });\n  this.hide();\n};\n\nproto.reveal = function() {\n  delete this.isHidden;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\n\n  this.transition({\n    from: options.hiddenStyle,\n    to: options.visibleStyle,\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onRevealTransitionEnd = function() {\n  // check if still visible\n  // during transition, item may have been hidden\n  if ( !this.isHidden ) {\n    this.emitEvent('reveal');\n  }\n};\n\n/**\n * get style property use for hide/reveal transition end\n * @param {String} styleProperty - hiddenStyle/visibleStyle\n * @returns {String}\n */\nproto.getHideRevealTransitionEndProperty = function( styleProperty ) {\n  var optionStyle = this.layout.options[ styleProperty ];\n  // use opacity\n  if ( optionStyle.opacity ) {\n    return 'opacity';\n  }\n  // get first property\n  for ( var prop in optionStyle ) {\n    return prop;\n  }\n};\n\nproto.hide = function() {\n  // set flag\n  this.isHidden = true;\n  // remove display: none\n  this.css({ display: '' });\n\n  var options = this.layout.options;\n\n  var onTransitionEnd = {};\n  var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\n  onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\n\n  this.transition({\n    from: options.visibleStyle,\n    to: options.hiddenStyle,\n    // keep hidden stuff hidden\n    isCleaning: true,\n    onTransitionEnd: onTransitionEnd\n  });\n};\n\nproto.onHideTransitionEnd = function() {\n  // check if still hidden\n  // during transition, item may have been un-hidden\n  if ( this.isHidden ) {\n    this.css({ display: 'none' });\n    this.emitEvent('hide');\n  }\n};\n\nproto.destroy = function() {\n  this.css({\n    position: '',\n    left: '',\n    right: '',\n    top: '',\n    bottom: '',\n    transition: '',\n    transform: ''\n  });\n};\n\nreturn Item;\n\n}));\n\n/*!\n * Outlayer v2.0.0\n * the brains and guts of a layout library\n * MIT license\n */\n\n( function( window, factory ) {\n  'use strict';\n  // universal module definition\n  /* jshint strict: false */ /* globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD - RequireJS\n    define( 'outlayer/outlayer',[\n        'ev-emitter/ev-emitter',\n        'get-size/get-size',\n        'fizzy-ui-utils/utils',\n        './item'\n      ],\n      function( EvEmitter, getSize, utils, Item ) {\n        return factory( window, EvEmitter, getSize, utils, Item);\n      }\n    );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS - Browserify, Webpack\n    module.exports = factory(\n      window,\n      require('ev-emitter'),\n      require('get-size'),\n      require('fizzy-ui-utils'),\n      require('./item')\n    );\n  } else {\n    // browser global\n    window.Outlayer = factory(\n      window,\n      window.EvEmitter,\n      window.getSize,\n      window.fizzyUIUtils,\n      window.Outlayer.Item\n    );\n  }\n\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\n'use strict';\n\n// ----- vars ----- //\n\nvar console = window.console;\nvar jQuery = window.jQuery;\nvar noop = function() {};\n\n// -------------------------- Outlayer -------------------------- //\n\n// globally unique identifiers\nvar GUID = 0;\n// internal store of all Outlayer intances\nvar instances = {};\n\n\n/**\n * @param {Element, String} element\n * @param {Object} options\n * @constructor\n */\nfunction Outlayer( element, options ) {\n  var queryElement = utils.getQueryElement( element );\n  if ( !queryElement ) {\n    if ( console ) {\n      console.error( 'Bad element for ' + this.constructor.namespace +\n        ': ' + ( queryElement || element ) );\n    }\n    return;\n  }\n  this.element = queryElement;\n  // add jQuery\n  if ( jQuery ) {\n    this.$element = jQuery( this.element );\n  }\n\n  // options\n  this.options = utils.extend( {}, this.constructor.defaults );\n  this.option( options );\n\n  // add id for Outlayer.getFromElement\n  var id = ++GUID;\n  this.element.outlayerGUID = id; // expando\n  instances[ id ] = this; // associate via id\n\n  // kick it off\n  this._create();\n\n  var isInitLayout = this._getOption('initLayout');\n  if ( isInitLayout ) {\n    this.layout();\n  }\n}\n\n// settings are for internal use only\nOutlayer.namespace = 'outlayer';\nOutlayer.Item = Item;\n\n// default options\nOutlayer.defaults = {\n  containerStyle: {\n    position: 'relative'\n  },\n  initLayout: true,\n  originLeft: true,\n  originTop: true,\n  resize: true,\n  resizeContainer: true,\n  // item options\n  transitionDuration: '0.4s',\n  hiddenStyle: {\n    opacity: 0,\n    transform: 'scale(0.001)'\n  },\n  visibleStyle: {\n    opacity: 1,\n    transform: 'scale(1)'\n  }\n};\n\nvar proto = Outlayer.prototype;\n// inherit EvEmitter\nutils.extend( proto, EvEmitter.prototype );\n\n/**\n * set options\n * @param {Object} opts\n */\nproto.option = function( opts ) {\n  utils.extend( this.options, opts );\n};\n\n/**\n * get backwards compatible option value, check old name\n */\nproto._getOption = function( option ) {\n  var oldOption = this.constructor.compatOptions[ option ];\n  return oldOption && this.options[ oldOption ] !== undefined ?\n    this.options[ oldOption ] : this.options[ option ];\n};\n\nOutlayer.compatOptions = {\n  // currentName: oldName\n  initLayout: 'isInitLayout',\n  horizontal: 'isHorizontal',\n  layoutInstant: 'isLayoutInstant',\n  originLeft: 'isOriginLeft',\n  originTop: 'isOriginTop',\n  resize: 'isResizeBound',\n  resizeContainer: 'isResizingContainer'\n};\n\nproto._create = function() {\n  // get items from children\n  this.reloadItems();\n  // elements that affect layout, but are not laid out\n  this.stamps = [];\n  this.stamp( this.options.stamp );\n  // set container style\n  utils.extend( this.element.style, this.options.containerStyle );\n\n  // bind resize method\n  var canBindResize = this._getOption('resize');\n  if ( canBindResize ) {\n    this.bindResize();\n  }\n};\n\n// goes through all children again and gets bricks in proper order\nproto.reloadItems = function() {\n  // collection of item elements\n  this.items = this._itemize( this.element.children );\n};\n\n\n/**\n * turn elements into Outlayer.Items to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - collection of new Outlayer Items\n */\nproto._itemize = function( elems ) {\n\n  var itemElems = this._filterFindItemElements( elems );\n  var Item = this.constructor.Item;\n\n  // create new Outlayer Items for collection\n  var items = [];\n  for ( var i=0; i < itemElems.length; i++ ) {\n    var elem = itemElems[i];\n    var item = new Item( elem, this );\n    items.push( item );\n  }\n\n  return items;\n};\n\n/**\n * get item elements to be used in layout\n * @param {Array or NodeList or HTMLElement} elems\n * @returns {Array} items - item elements\n */\nproto._filterFindItemElements = function( elems ) {\n  return utils.filterFindElements( elems, this.options.itemSelector );\n};\n\n/**\n * getter method for getting item elements\n * @returns {Array} elems - collection of item elements\n */\nproto.getItemElements = function() {\n  return this.items.map( function( item ) {\n    return item.element;\n  });\n};\n\n// ----- init & layout ----- //\n\n/**\n * lays out all items\n */\nproto.layout = function() {\n  this._resetLayout();\n  this._manageStamps();\n\n  // don't animate first layout\n  var layoutInstant = this._getOption('layoutInstant');\n  var isInstant = layoutInstant !== undefined ?\n    layoutInstant : !this._isLayoutInited;\n  this.layoutItems( this.items, isInstant );\n\n  // flag for initalized\n  this._isLayoutInited = true;\n};\n\n// _init is alias for layout\nproto._init = proto.layout;\n\n/**\n * logic before any new layout\n */\nproto._resetLayout = function() {\n  this.getSize();\n};\n\n\nproto.getSize = function() {\n  this.size = getSize( this.element );\n};\n\n/**\n * get measurement from option, for columnWidth, rowHeight, gutter\n * if option is String -> get element from selector string, & get size of element\n * if option is Element -> get size of element\n * else use option as a number\n *\n * @param {String} measurement\n * @param {String} size - width or height\n * @private\n */\nproto._getMeasurement = function( measurement, size ) {\n  var option = this.options[ measurement ];\n  var elem;\n  if ( !option ) {\n    // default to 0\n    this[ measurement ] = 0;\n  } else {\n    // use option as an element\n    if ( typeof option == 'string' ) {\n      elem = this.element.querySelector( option );\n    } else if ( option instanceof HTMLElement ) {\n      elem = option;\n    }\n    // use size of element, if element\n    this[ measurement ] = elem ? getSize( elem )[ size ] : option;\n  }\n};\n\n/**\n * layout a collection of item elements\n * @api public\n */\nproto.layoutItems = function( items, isInstant ) {\n  items = this._getItemsForLayout( items );\n\n  this._layoutItems( items, isInstant );\n\n  this._postLayout();\n};\n\n/**\n * get the items to be laid out\n * you may want to skip over some items\n * @param {Array} items\n * @returns {Array} items\n */\nproto._getItemsForLayout = function( items ) {\n  return items.filter( function( item ) {\n    return !item.isIgnored;\n  });\n};\n\n/**\n * layout items\n * @param {Array} items\n * @param {Boolean} isInstant\n */\nproto._layoutItems = function( items, isInstant ) {\n  this._emitCompleteOnItems( 'layout', items );\n\n  if ( !items || !items.length ) {\n    // no items, emit event with empty array\n    return;\n  }\n\n  var queue = [];\n\n  items.forEach( function( item ) {\n    // get x/y object from method\n    var position = this._getItemLayoutPosition( item );\n    // enqueue\n    position.item = item;\n    position.isInstant = isInstant || item.isLayoutInstant;\n    queue.push( position );\n  }, this );\n\n  this._processLayoutQueue( queue );\n};\n\n/**\n * get item layout position\n * @param {Outlayer.Item} item\n * @returns {Object} x and y position\n */\nproto._getItemLayoutPosition = function( /* item */ ) {\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n/**\n * iterate over array and position each item\n * Reason being - separating this logic prevents 'layout invalidation'\n * thx @paul_irish\n * @param {Array} queue\n */\nproto._processLayoutQueue = function( queue ) {\n  queue.forEach( function( obj ) {\n    this._positionItem( obj.item, obj.x, obj.y, obj.isInstant );\n  }, this );\n};\n\n/**\n * Sets position of item in DOM\n * @param {Outlayer.Item} item\n * @param {Number} x - horizontal position\n * @param {Number} y - vertical position\n * @param {Boolean} isInstant - disables transitions\n */\nproto._positionItem = function( item, x, y, isInstant ) {\n  if ( isInstant ) {\n    // if not transition, just set CSS\n    item.goTo( x, y );\n  } else {\n    item.moveTo( x, y );\n  }\n};\n\n/**\n * Any logic you want to do after each layout,\n * i.e. size the container\n */\nproto._postLayout = function() {\n  this.resizeContainer();\n};\n\nproto.resizeContainer = function() {\n  var isResizingContainer = this._getOption('resizeContainer');\n  if ( !isResizingContainer ) {\n    return;\n  }\n  var size = this._getContainerSize();\n  if ( size ) {\n    this._setContainerMeasure( size.width, true );\n    this._setContainerMeasure( size.height, false );\n  }\n};\n\n/**\n * Sets width or height of container if returned\n * @returns {Object} size\n *   @param {Number} width\n *   @param {Number} height\n */\nproto._getContainerSize = noop;\n\n/**\n * @param {Number} measure - size of width or height\n * @param {Boolean} isWidth\n */\nproto._setContainerMeasure = function( measure, isWidth ) {\n  if ( measure === undefined ) {\n    return;\n  }\n\n  var elemSize = this.size;\n  // add padding and border width if border box\n  if ( elemSize.isBorderBox ) {\n    measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\n      elemSize.borderLeftWidth + elemSize.borderRightWidth :\n      elemSize.paddingBottom + elemSize.paddingTop +\n      elemSize.borderTopWidth + elemSize.borderBottomWidth;\n  }\n\n  measure = Math.max( measure, 0 );\n  this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\n};\n\n/**\n * emit eventComplete on a collection of items events\n * @param {String} eventName\n * @param {Array} items - Outlayer.Items\n */\nproto._emitCompleteOnItems = function( eventName, items ) {\n  var _this = this;\n  function onComplete() {\n    _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\n  }\n\n  var count = items.length;\n  if ( !items || !count ) {\n    onComplete();\n    return;\n  }\n\n  var doneCount = 0;\n  function tick() {\n    doneCount++;\n    if ( doneCount == count ) {\n      onComplete();\n    }\n  }\n\n  // bind callback\n  items.forEach( function( item ) {\n    item.once( eventName, tick );\n  });\n};\n\n/**\n * emits events via EvEmitter and jQuery events\n * @param {String} type - name of event\n * @param {Event} event - original event\n * @param {Array} args - extra arguments\n */\nproto.dispatchEvent = function( type, event, args ) {\n  // add original event to arguments\n  var emitArgs = event ? [ event ].concat( args ) : args;\n  this.emitEvent( type, emitArgs );\n\n  if ( jQuery ) {\n    // set this.$element\n    this.$element = this.$element || jQuery( this.element );\n    if ( event ) {\n      // create jQuery event\n      var $event = jQuery.Event( event );\n      $event.type = type;\n      this.$element.trigger( $event, args );\n    } else {\n      // just trigger with type if no event available\n      this.$element.trigger( type, args );\n    }\n  }\n};\n\n// -------------------------- ignore & stamps -------------------------- //\n\n\n/**\n * keep item in collection, but do not lay it out\n * ignored items do not get skipped in layout\n * @param {Element} elem\n */\nproto.ignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    item.isIgnored = true;\n  }\n};\n\n/**\n * return item to layout collection\n * @param {Element} elem\n */\nproto.unignore = function( elem ) {\n  var item = this.getItem( elem );\n  if ( item ) {\n    delete item.isIgnored;\n  }\n};\n\n/**\n * adds elements to stamps\n * @param {NodeList, Array, Element, or String} elems\n */\nproto.stamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ) {\n    return;\n  }\n\n  this.stamps = this.stamps.concat( elems );\n  // ignore\n  elems.forEach( this.ignore, this );\n};\n\n/**\n * removes elements to stamps\n * @param {NodeList, Array, or Element} elems\n */\nproto.unstamp = function( elems ) {\n  elems = this._find( elems );\n  if ( !elems ){\n    return;\n  }\n\n  elems.forEach( function( elem ) {\n    // filter out removed stamp elements\n    utils.removeFrom( this.stamps, elem );\n    this.unignore( elem );\n  }, this );\n};\n\n/**\n * finds child elements\n * @param {NodeList, Array, Element, or String} elems\n * @returns {Array} elems\n */\nproto._find = function( elems ) {\n  if ( !elems ) {\n    return;\n  }\n  // if string, use argument as selector string\n  if ( typeof elems == 'string' ) {\n    elems = this.element.querySelectorAll( elems );\n  }\n  elems = utils.makeArray( elems );\n  return elems;\n};\n\nproto._manageStamps = function() {\n  if ( !this.stamps || !this.stamps.length ) {\n    return;\n  }\n\n  this._getBoundingRect();\n\n  this.stamps.forEach( this._manageStamp, this );\n};\n\n// update boundingLeft / Top\nproto._getBoundingRect = function() {\n  // get bounding rect for container element\n  var boundingRect = this.element.getBoundingClientRect();\n  var size = this.size;\n  this._boundingRect = {\n    left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\n    top: boundingRect.top + size.paddingTop + size.borderTopWidth,\n    right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\n    bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\n  };\n};\n\n/**\n * @param {Element} stamp\n**/\nproto._manageStamp = noop;\n\n/**\n * get x/y position of element relative to container element\n * @param {Element} elem\n * @returns {Object} offset - has left, top, right, bottom\n */\nproto._getElementOffset = function( elem ) {\n  var boundingRect = elem.getBoundingClientRect();\n  var thisRect = this._boundingRect;\n  var size = getSize( elem );\n  var offset = {\n    left: boundingRect.left - thisRect.left - size.marginLeft,\n    top: boundingRect.top - thisRect.top - size.marginTop,\n    right: thisRect.right - boundingRect.right - size.marginRight,\n    bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\n  };\n  return offset;\n};\n\n// -------------------------- resize -------------------------- //\n\n// enable event handlers for listeners\n// i.e. resize -> onresize\nproto.handleEvent = utils.handleEvent;\n\n/**\n * Bind layout to window resizing\n */\nproto.bindResize = function() {\n  window.addEventListener( 'resize', this );\n  this.isResizeBound = true;\n};\n\n/**\n * Unbind layout to window resizing\n */\nproto.unbindResize = function() {\n  window.removeEventListener( 'resize', this );\n  this.isResizeBound = false;\n};\n\nproto.onresize = function() {\n  this.resize();\n};\n\nutils.debounceMethod( Outlayer, 'onresize', 100 );\n\nproto.resize = function() {\n  // don't trigger if size did not change\n  // or if resize was unbound. See #9\n  if ( !this.isResizeBound || !this.needsResizeLayout() ) {\n    return;\n  }\n\n  this.layout();\n};\n\n/**\n * check if layout is needed post layout\n * @returns Boolean\n */\nproto.needsResizeLayout = function() {\n  var size = getSize( this.element );\n  // check that this.size and size are there\n  // IE8 triggers resize on body size change, so they might not be\n  var hasSizes = this.size && size;\n  return hasSizes && size.innerWidth !== this.size.innerWidth;\n};\n\n// -------------------------- methods -------------------------- //\n\n/**\n * add items to Outlayer instance\n * @param {Array or NodeList or Element} elems\n * @returns {Array} items - Outlayer.Items\n**/\nproto.addItems = function( elems ) {\n  var items = this._itemize( elems );\n  // add items to collection\n  if ( items.length ) {\n    this.items = this.items.concat( items );\n  }\n  return items;\n};\n\n/**\n * Layout newly-appended item elements\n * @param {Array or NodeList or Element} elems\n */\nproto.appended = function( elems ) {\n  var items = this.addItems( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // layout and reveal just the new items\n  this.layoutItems( items, true );\n  this.reveal( items );\n};\n\n/**\n * Layout prepended elements\n * @param {Array or NodeList or Element} elems\n */\nproto.prepended = function( elems ) {\n  var items = this._itemize( elems );\n  if ( !items.length ) {\n    return;\n  }\n  // add items to beginning of collection\n  var previousItems = this.items.slice(0);\n  this.items = items.concat( previousItems );\n  // start new layout\n  this._resetLayout();\n  this._manageStamps();\n  // layout new stuff without transition\n  this.layoutItems( items, true );\n  this.reveal( items );\n  // layout previous items\n  this.layoutItems( previousItems );\n};\n\n/**\n * reveal a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.reveal = function( items ) {\n  this._emitCompleteOnItems( 'reveal', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  items.forEach( function( item ) {\n    item.reveal();\n  });\n};\n\n/**\n * hide a collection of items\n * @param {Array of Outlayer.Items} items\n */\nproto.hide = function( items ) {\n  this._emitCompleteOnItems( 'hide', items );\n  if ( !items || !items.length ) {\n    return;\n  }\n  items.forEach( function( item ) {\n    item.hide();\n  });\n};\n\n/**\n * reveal item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.revealItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.reveal( items );\n};\n\n/**\n * hide item elements\n * @param {Array}, {Element}, {NodeList} items\n */\nproto.hideItemElements = function( elems ) {\n  var items = this.getItems( elems );\n  this.hide( items );\n};\n\n/**\n * get Outlayer.Item, given an Element\n * @param {Element} elem\n * @param {Function} callback\n * @returns {Outlayer.Item} item\n */\nproto.getItem = function( elem ) {\n  // loop through items to get the one that matches\n  for ( var i=0; i < this.items.length; i++ ) {\n    var item = this.items[i];\n    if ( item.element == elem ) {\n      // return item\n      return item;\n    }\n  }\n};\n\n/**\n * get collection of Outlayer.Items, given Elements\n * @param {Array} elems\n * @returns {Array} items - Outlayer.Items\n */\nproto.getItems = function( elems ) {\n  elems = utils.makeArray( elems );\n  var items = [];\n  elems.forEach( function( elem ) {\n    var item = this.getItem( elem );\n    if ( item ) {\n      items.push( item );\n    }\n  }, this );\n\n  return items;\n};\n\n/**\n * remove element(s) from instance and DOM\n * @param {Array or NodeList or Element} elems\n */\nproto.remove = function( elems ) {\n  var removeItems = this.getItems( elems );\n\n  this._emitCompleteOnItems( 'remove', removeItems );\n\n  // bail if no items to remove\n  if ( !removeItems || !removeItems.length ) {\n    return;\n  }\n\n  removeItems.forEach( function( item ) {\n    item.remove();\n    // remove item from collection\n    utils.removeFrom( this.items, item );\n  }, this );\n};\n\n// ----- destroy ----- //\n\n// remove and disable Outlayer instance\nproto.destroy = function() {\n  // clean up dynamic styles\n  var style = this.element.style;\n  style.height = '';\n  style.position = '';\n  style.width = '';\n  // destroy items\n  this.items.forEach( function( item ) {\n    item.destroy();\n  });\n\n  this.unbindResize();\n\n  var id = this.element.outlayerGUID;\n  delete instances[ id ]; // remove reference to instance by id\n  delete this.element.outlayerGUID;\n  // remove data for jQuery\n  if ( jQuery ) {\n    jQuery.removeData( this.element, this.constructor.namespace );\n  }\n\n};\n\n// -------------------------- data -------------------------- //\n\n/**\n * get Outlayer instance from element\n * @param {Element} elem\n * @returns {Outlayer}\n */\nOutlayer.data = function( elem ) {\n  elem = utils.getQueryElement( elem );\n  var id = elem && elem.outlayerGUID;\n  return id && instances[ id ];\n};\n\n\n// -------------------------- create Outlayer class -------------------------- //\n\n/**\n * create a layout class\n * @param {String} namespace\n */\nOutlayer.create = function( namespace, options ) {\n  // sub-class Outlayer\n  var Layout = subclass( Outlayer );\n  // apply new options and compatOptions\n  Layout.defaults = utils.extend( {}, Outlayer.defaults );\n  utils.extend( Layout.defaults, options );\n  Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\n\n  Layout.namespace = namespace;\n\n  Layout.data = Outlayer.data;\n\n  // sub-class Item\n  Layout.Item = subclass( Item );\n\n  // -------------------------- declarative -------------------------- //\n\n  utils.htmlInit( Layout, namespace );\n\n  // -------------------------- jQuery bridge -------------------------- //\n\n  // make into jQuery plugin\n  if ( jQuery && jQuery.bridget ) {\n    jQuery.bridget( namespace, Layout );\n  }\n\n  return Layout;\n};\n\nfunction subclass( Parent ) {\n  function SubClass() {\n    Parent.apply( this, arguments );\n  }\n\n  SubClass.prototype = Object.create( Parent.prototype );\n  SubClass.prototype.constructor = SubClass;\n\n  return SubClass;\n}\n\n// ----- fin ----- //\n\n// back in global\nOutlayer.Item = Item;\n\nreturn Outlayer;\n\n}));\n\n/*!\n * Masonry v4.0.0\n * Cascading grid layout library\n * http://masonry.desandro.com\n * MIT License\n * by David DeSandro\n */\n\n( function( window, factory ) {\n  // universal module definition\n  /* jshint strict: false */ /*globals define, module, require */\n  if ( typeof define == 'function' && define.amd ) {\n    // AMD\n    define( [\n        'outlayer/outlayer',\n        'get-size/get-size'\n      ],\n      factory );\n  } else if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory(\n      require('outlayer'),\n      require('get-size')\n    );\n  } else {\n    // browser global\n    window.Masonry = factory(\n      window.Outlayer,\n      window.getSize\n    );\n  }\n\n}( window, function factory( Outlayer, getSize ) {\n\n\n\n// -------------------------- masonryDefinition -------------------------- //\n\n  // create an Outlayer layout class\n  var Masonry = Outlayer.create('masonry');\n  // isFitWidth -> fitWidth\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\n\n  Masonry.prototype._resetLayout = function() {\n    this.getSize();\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\n    this._getMeasurement( 'gutter', 'outerWidth' );\n    this.measureColumns();\n\n    // reset column Y\n    this.colYs = [];\n    for ( var i=0; i < this.cols; i++ ) {\n      this.colYs.push( 0 );\n    }\n\n    this.maxY = 0;\n  };\n\n  Masonry.prototype.measureColumns = function() {\n    this.getContainerWidth();\n    // if columnWidth is 0, default to outerWidth of first item\n    if ( !this.columnWidth ) {\n      var firstItem = this.items[0];\n      var firstItemElem = firstItem && firstItem.element;\n      // columnWidth fall back to item of first element\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\n        // if first elem has no width, default to size of container\n        this.containerWidth;\n    }\n\n    var columnWidth = this.columnWidth += this.gutter;\n\n    // calculate columns\n    var containerWidth = this.containerWidth + this.gutter;\n    var cols = containerWidth / columnWidth;\n    // fix rounding errors, typically with gutters\n    var excess = columnWidth - containerWidth % columnWidth;\n    // if overshoot is less than a pixel, round up, otherwise floor it\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\n    cols = Math[ mathMethod ]( cols );\n    this.cols = Math.max( cols, 1 );\n  };\n\n  Masonry.prototype.getContainerWidth = function() {\n    // container is parent if fit width\n    var isFitWidth = this._getOption('fitWidth');\n    var container = isFitWidth ? this.element.parentNode : this.element;\n    // check that this.size and size are there\n    // IE8 triggers resize on body size change, so they might not be\n    var size = getSize( container );\n    this.containerWidth = size && size.innerWidth;\n  };\n\n  Masonry.prototype._getItemLayoutPosition = function( item ) {\n    item.getSize();\n    // how many columns does this brick span\n    var remainder = item.size.outerWidth % this.columnWidth;\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\n    // round if off by 1 pixel, otherwise use ceil\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\n    colSpan = Math.min( colSpan, this.cols );\n\n    var colGroup = this._getColGroup( colSpan );\n    // get the minimum Y value from the columns\n    var minimumY = Math.min.apply( Math, colGroup );\n    var shortColIndex = colGroup.indexOf( minimumY );\n\n    // position the brick\n    var position = {\n      x: this.columnWidth * shortColIndex,\n      y: minimumY\n    };\n\n    // apply setHeight to necessary columns\n    var setHeight = minimumY + item.size.outerHeight;\n    var setSpan = this.cols + 1 - colGroup.length;\n    for ( var i = 0; i < setSpan; i++ ) {\n      this.colYs[ shortColIndex + i ] = setHeight;\n    }\n\n    return position;\n  };\n\n  /**\n   * @param {Number} colSpan - number of columns the element spans\n   * @returns {Array} colGroup\n   */\n  Masonry.prototype._getColGroup = function( colSpan ) {\n    if ( colSpan < 2 ) {\n      // if brick spans only one column, use all the column Ys\n      return this.colYs;\n    }\n\n    var colGroup = [];\n    // how many different places could this brick fit horizontally\n    var groupCount = this.cols + 1 - colSpan;\n    // for each group potential horizontal position\n    for ( var i = 0; i < groupCount; i++ ) {\n      // make an array of colY values for that one group\n      var groupColYs = this.colYs.slice( i, i + colSpan );\n      // and get the max value of the array\n      colGroup[i] = Math.max.apply( Math, groupColYs );\n    }\n    return colGroup;\n  };\n\n  Masonry.prototype._manageStamp = function( stamp ) {\n    var stampSize = getSize( stamp );\n    var offset = this._getElementOffset( stamp );\n    // get the columns that this stamp affects\n    var isOriginLeft = this._getOption('originLeft');\n    var firstX = isOriginLeft ? offset.left : offset.right;\n    var lastX = firstX + stampSize.outerWidth;\n    var firstCol = Math.floor( firstX / this.columnWidth );\n    firstCol = Math.max( 0, firstCol );\n    var lastCol = Math.floor( lastX / this.columnWidth );\n    // lastCol should not go over if multiple of columnWidth #425\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\n    lastCol = Math.min( this.cols - 1, lastCol );\n    // set colYs to bottom of the stamp\n\n    var isOriginTop = this._getOption('originTop');\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\n      stampSize.outerHeight;\n    for ( var i = firstCol; i <= lastCol; i++ ) {\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\n    }\n  };\n\n  Masonry.prototype._getContainerSize = function() {\n    this.maxY = Math.max.apply( Math, this.colYs );\n    var size = {\n      height: this.maxY\n    };\n\n    if ( this._getOption('fitWidth') ) {\n      size.width = this._getContainerFitWidth();\n    }\n\n    return size;\n  };\n\n  Masonry.prototype._getContainerFitWidth = function() {\n    var unusedCols = 0;\n    // count unused columns\n    var i = this.cols;\n    while ( --i ) {\n      if ( this.colYs[i] !== 0 ) {\n        break;\n      }\n      unusedCols++;\n    }\n    // fit container to columns that have been used\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\n  };\n\n  Masonry.prototype.needsResizeLayout = function() {\n    var previousWidth = this.containerWidth;\n    this.getContainerWidth();\n    return previousWidth != this.containerWidth;\n  };\n\n  return Masonry;\n\n}));\n\n$(function() {\n    function a() {\n        e.toggleClass(j), d.toggleClass(i), f.toggleClass(k), g.toggleClass(l)\n    }\n\n    function b() {\n        e.addClass(j), d.animate({\n            left: \"0px\"\n        }, n), f.animate({\n            left: o\n        }, n), g.animate({\n            left: o\n        }, n)\n    }\n\n    function c() {\n        e.removeClass(j), d.animate({\n            left: \"-\" + o\n        }, n), f.animate({\n            left: \"0px\"\n        }, n), g.animate({\n            left: \"0px\"\n        }, n)\n    }\n    var d = $(\".pushy\"),\n        e = $(\"body\"),\n        f = $(\"#container\"),\n        g = $(\".push\"),\n        h = $(\".site-overlay\"),\n        i = \"pushy-left pushy-open\",\n        j = \"pushy-active\",\n        k = \"container-push\",\n        l = \"push-push\",\n        m = $(\".menu-btn, .pushy a:not(.submenu-link)\"),\n        n = 200,\n        o = d.width() + \"px\";\n    if (cssTransforms3d = function() {\n            var a = document.createElement(\"p\"),\n                b = !1,\n                c = {\n                    webkitTransform: \"-webkit-transform\",\n                    OTransform: \"-o-transform\",\n                    msTransform: \"-ms-transform\",\n                    MozTransform: \"-moz-transform\",\n                    transform: \"transform\"\n                };\n            document.body.insertBefore(a, null);\n            for (var d in c) void 0 !== a.style[d] && (a.style[d] = \"translate3d(1px,1px,1px)\", b = window.getComputedStyle(a).getPropertyValue(c[d]));\n            return document.body.removeChild(a), void 0 !== b && b.length > 0 && \"none\" !== b\n        }()) m.click(function() {\n        a()\n    }), h.click(function() {\n        a()\n    });\n    else {\n        d.css({\n            left: \"-\" + o\n        }), f.css({\n            \"overflow-x\": \"hidden\"\n        });\n        var p = !0;\n        m.click(function() {\n            p ? (b(), p = !1) : (c(), p = !0)\n        }), h.click(function() {\n            p ? (b(), p = !1) : (c(), p = !0)\n        })\n    }\n});\n\n/*! WOW - v1.1.2 - 2015-08-19\n* Copyright (c) 2015 Matthieu Aussaguel; Licensed MIT */(function(){var a,b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};b=function(){function a(){}return a.prototype.extend=function(a,b){var c,d;for(c in b)d=b[c],null==a[c]&&(a[c]=d);return a},a.prototype.isMobile=function(a){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},a.prototype.createEvent=function(a,b,c,d){var e;return null==b&&(b=!1),null==c&&(c=!1),null==d&&(d=null),null!=document.createEvent?(e=document.createEvent(\"CustomEvent\"),e.initCustomEvent(a,b,c,d)):null!=document.createEventObject?(e=document.createEventObject(),e.eventType=a):e.eventName=a,e},a.prototype.emitEvent=function(a,b){return null!=a.dispatchEvent?a.dispatchEvent(b):b in(null!=a)?a[b]():\"on\"+b in(null!=a)?a[\"on\"+b]():void 0},a.prototype.addEvent=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):null!=a.attachEvent?a.attachEvent(\"on\"+b,c):a[b]=c},a.prototype.removeEvent=function(a,b,c){return null!=a.removeEventListener?a.removeEventListener(b,c,!1):null!=a.detachEvent?a.detachEvent(\"on\"+b,c):delete a[b]},a.prototype.innerHeight=function(){return\"innerHeight\"in window?window.innerHeight:document.documentElement.clientHeight},a}(),c=this.WeakMap||this.MozWeakMap||(c=function(){function a(){this.keys=[],this.values=[]}return a.prototype.get=function(a){var b,c,d,e,f;for(f=this.keys,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c===a)return this.values[b]},a.prototype.set=function(a,b){var c,d,e,f,g;for(g=this.keys,c=e=0,f=g.length;f>e;c=++e)if(d=g[c],d===a)return void(this.values[c]=b);return this.keys.push(a),this.values.push(b)},a}()),a=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(a=function(){function a(){\"undefined\"!=typeof console&&null!==console&&console.warn(\"MutationObserver is not supported by your browser.\"),\"undefined\"!=typeof console&&null!==console&&console.warn(\"WOW.js cannot detect dom mutations, please call .sync() after loading new content.\")}return a.notSupported=!0,a.prototype.observe=function(){},a}()),d=this.getComputedStyle||function(a){return this.getPropertyValue=function(b){var c;return\"float\"===b&&(b=\"styleFloat\"),e.test(b)&&b.replace(e,function(a,b){return b.toUpperCase()}),(null!=(c=a.currentStyle)?c[b]:void 0)||null},this},e=/(\\-([a-z]){1})/g,this.WOW=function(){function e(a){null==a&&(a={}),this.scrollCallback=f(this.scrollCallback,this),this.scrollHandler=f(this.scrollHandler,this),this.resetAnimation=f(this.resetAnimation,this),this.start=f(this.start,this),this.scrolled=!0,this.config=this.util().extend(a,this.defaults),null!=a.scrollContainer&&(this.config.scrollContainer=document.querySelector(a.scrollContainer)),this.animationNameCache=new c,this.wowEvent=this.util().createEvent(this.config.boxClass)}return e.prototype.defaults={boxClass:\"wow\",animateClass:\"animated\",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},e.prototype.init=function(){var a;return this.element=window.document.documentElement,\"interactive\"===(a=document.readyState)||\"complete\"===a?this.start():this.util().addEvent(document,\"DOMContentLoaded\",this.start),this.finished=[]},e.prototype.start=function(){var b,c,d,e;if(this.stopped=!1,this.boxes=function(){var a,c,d,e;for(d=this.element.querySelectorAll(\".\"+this.config.boxClass),e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.all=function(){var a,c,d,e;for(d=this.boxes,e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b);return e}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(e=this.boxes,c=0,d=e.length;d>c;c++)b=e[c],this.applyStyle(b,!0);return this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,\"scroll\",this.scrollHandler),this.util().addEvent(window,\"resize\",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live?new a(function(a){return function(b){var c,d,e,f,g;for(g=[],c=0,d=b.length;d>c;c++)f=b[c],g.push(function(){var a,b,c,d;for(c=f.addedNodes||[],d=[],a=0,b=c.length;b>a;a++)e=c[a],d.push(this.doSync(e));return d}.call(a));return g}}(this)).observe(document.body,{childList:!0,subtree:!0}):void 0},e.prototype.stop=function(){return this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,\"scroll\",this.scrollHandler),this.util().removeEvent(window,\"resize\",this.scrollHandler),null!=this.interval?clearInterval(this.interval):void 0},e.prototype.sync=function(){return a.notSupported?this.doSync(this.element):void 0},e.prototype.doSync=function(a){var b,c,d,e,f;if(null==a&&(a=this.element),1===a.nodeType){for(a=a.parentNode||a,e=a.querySelectorAll(\".\"+this.config.boxClass),f=[],c=0,d=e.length;d>c;c++)b=e[c],g.call(this.all,b)<0?(this.boxes.push(b),this.all.push(b),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(b,!0),f.push(this.scrolled=!0)):f.push(void 0);return f}},e.prototype.show=function(a){return this.applyStyle(a),a.className=a.className+\" \"+this.config.animateClass,null!=this.config.callback&&this.config.callback(a),this.util().emitEvent(a,this.wowEvent),this.util().addEvent(a,\"animationend\",this.resetAnimation),this.util().addEvent(a,\"oanimationend\",this.resetAnimation),this.util().addEvent(a,\"webkitAnimationEnd\",this.resetAnimation),this.util().addEvent(a,\"MSAnimationEnd\",this.resetAnimation),a},e.prototype.applyStyle=function(a,b){var c,d,e;return d=a.getAttribute(\"data-wow-duration\"),c=a.getAttribute(\"data-wow-delay\"),e=a.getAttribute(\"data-wow-iteration\"),this.animate(function(f){return function(){return f.customStyle(a,b,d,c,e)}}(this))},e.prototype.animate=function(){return\"requestAnimationFrame\"in window?function(a){return window.requestAnimationFrame(a)}:function(a){return a()}}(),e.prototype.resetStyle=function(){var a,b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.style.visibility=\"visible\");return e},e.prototype.resetAnimation=function(a){var b;return a.type.toLowerCase().indexOf(\"animationend\")>=0?(b=a.target||a.srcElement,b.className=b.className.replace(this.config.animateClass,\"\").trim()):void 0},e.prototype.customStyle=function(a,b,c,d,e){return b&&this.cacheAnimationName(a),a.style.visibility=b?\"hidden\":\"visible\",c&&this.vendorSet(a.style,{animationDuration:c}),d&&this.vendorSet(a.style,{animationDelay:d}),e&&this.vendorSet(a.style,{animationIterationCount:e}),this.vendorSet(a.style,{animationName:b?\"none\":this.cachedAnimationName(a)}),a},e.prototype.vendors=[\"moz\",\"webkit\"],e.prototype.vendorSet=function(a,b){var c,d,e,f;d=[];for(c in b)e=b[c],a[\"\"+c]=e,d.push(function(){var b,d,g,h;for(g=this.vendors,h=[],b=0,d=g.length;d>b;b++)f=g[b],h.push(a[\"\"+f+c.charAt(0).toUpperCase()+c.substr(1)]=e);return h}.call(this));return d},e.prototype.vendorCSS=function(a,b){var c,e,f,g,h,i;for(h=d(a),g=h.getPropertyCSSValue(b),f=this.vendors,c=0,e=f.length;e>c;c++)i=f[c],g=g||h.getPropertyCSSValue(\"-\"+i+\"-\"+b);return g},e.prototype.animationName=function(a){var b;try{b=this.vendorCSS(a,\"animation-name\").cssText}catch(c){b=d(a).getPropertyValue(\"animation-name\")}return\"none\"===b?\"\":b},e.prototype.cacheAnimationName=function(a){return this.animationNameCache.set(a,this.animationName(a))},e.prototype.cachedAnimationName=function(a){return this.animationNameCache.get(a)},e.prototype.scrollHandler=function(){return this.scrolled=!0},e.prototype.scrollCallback=function(){var a;return!this.scrolled||(this.scrolled=!1,this.boxes=function(){var b,c,d,e;for(d=this.boxes,e=[],b=0,c=d.length;c>b;b++)a=d[b],a&&(this.isVisible(a)?this.show(a):e.push(a));return e}.call(this),this.boxes.length||this.config.live)?void 0:this.stop()},e.prototype.offsetTop=function(a){for(var b;void 0===a.offsetTop;)a=a.parentNode;for(b=a.offsetTop;a=a.offsetParent;)b+=a.offsetTop;return b},e.prototype.isVisible=function(a){var b,c,d,e,f;return c=a.getAttribute(\"data-wow-offset\")||this.config.offset,f=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,e=f+Math.min(this.element.clientHeight,this.util().innerHeight())-c,d=this.offsetTop(a),b=d+a.clientHeight,e>=d&&b>=f},e.prototype.util=function(){return null!=this._util?this._util:this._util=new b},e.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},e}()}).call(this);\n\n(function() {\n  var COUNT_FRAMERATE, COUNT_MS_PER_FRAME, DIGIT_FORMAT, DIGIT_HTML, DIGIT_SPEEDBOOST, DURATION, FORMAT_MARK_HTML, FORMAT_PARSER, FRAMERATE, FRAMES_PER_VALUE, MS_PER_FRAME, MutationObserver, Odometer, RIBBON_HTML, TRANSITION_END_EVENTS, TRANSITION_SUPPORT, VALUE_HTML, addClass, createFromHTML, fractionalPart, now, removeClass, requestAnimationFrame, round, transitionCheckStyles, trigger, truncate, wrapJQuery, _jQueryWrapped, _old, _ref, _ref1,\n    __slice = [].slice;\n\n  VALUE_HTML = '<span class=\"odometer-value\"></span>';\n\n  RIBBON_HTML = '<span class=\"odometer-ribbon\"><span class=\"odometer-ribbon-inner\">' + VALUE_HTML + '</span></span>';\n\n  DIGIT_HTML = '<span class=\"odometer-digit\"><span class=\"odometer-digit-spacer\">8</span><span class=\"odometer-digit-inner\">' + RIBBON_HTML + '</span></span>';\n\n  FORMAT_MARK_HTML = '<span class=\"odometer-formatting-mark\"></span>';\n\n  DIGIT_FORMAT = '(,ddd).dd';\n\n  FORMAT_PARSER = /^\\(?([^)]*)\\)?(?:(.)(d+))?$/;\n\n  FRAMERATE = 30;\n\n  DURATION = 2000;\n\n  COUNT_FRAMERATE = 20;\n\n  FRAMES_PER_VALUE = 2;\n\n  DIGIT_SPEEDBOOST = .5;\n\n  MS_PER_FRAME = 1000 / FRAMERATE;\n\n  COUNT_MS_PER_FRAME = 1000 / COUNT_FRAMERATE;\n\n  TRANSITION_END_EVENTS = 'transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd';\n\n  transitionCheckStyles = document.createElement('div').style;\n\n  TRANSITION_SUPPORT = (transitionCheckStyles.transition != null) || (transitionCheckStyles.webkitTransition != null) || (transitionCheckStyles.mozTransition != null) || (transitionCheckStyles.oTransition != null);\n\n  requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\n  MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n\n  createFromHTML = function(html) {\n    var el;\n    el = document.createElement('div');\n    el.innerHTML = html;\n    return el.children[0];\n  };\n\n  removeClass = function(el, name) {\n    return el.className = el.className.replace(new RegExp(\"(^| )\" + (name.split(' ').join('|')) + \"( |$)\", 'gi'), ' ');\n  };\n\n  addClass = function(el, name) {\n    removeClass(el, name);\n    return el.className += \" \" + name;\n  };\n\n  trigger = function(el, name) {\n    var evt;\n    if (document.createEvent != null) {\n      evt = document.createEvent('HTMLEvents');\n      evt.initEvent(name, true, true);\n      return el.dispatchEvent(evt);\n    }\n  };\n\n  now = function() {\n    var _ref, _ref1;\n    return (_ref = (_ref1 = window.performance) != null ? typeof _ref1.now === \"function\" ? _ref1.now() : void 0 : void 0) != null ? _ref : +(new Date);\n  };\n\n  round = function(val, precision) {\n    if (precision == null) {\n      precision = 0;\n    }\n    if (!precision) {\n      return Math.round(val);\n    }\n    val *= Math.pow(10, precision);\n    val += 0.5;\n    val = Math.floor(val);\n    return val /= Math.pow(10, precision);\n  };\n\n  truncate = function(val) {\n    if (val < 0) {\n      return Math.ceil(val);\n    } else {\n      return Math.floor(val);\n    }\n  };\n\n  fractionalPart = function(val) {\n    return val - round(val);\n  };\n\n  _jQueryWrapped = false;\n\n  (wrapJQuery = function() {\n    var property, _i, _len, _ref, _results;\n    if (_jQueryWrapped) {\n      return;\n    }\n    if (window.jQuery != null) {\n      _jQueryWrapped = true;\n      _ref = ['html', 'text'];\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        property = _ref[_i];\n        _results.push((function(property) {\n          var old;\n          old = window.jQuery.fn[property];\n          return window.jQuery.fn[property] = function(val) {\n            var _ref1;\n            if ((val == null) || (((_ref1 = this[0]) != null ? _ref1.odometer : void 0) == null)) {\n              return old.apply(this, arguments);\n            }\n            return this[0].odometer.update(val);\n          };\n        })(property));\n      }\n      return _results;\n    }\n  })();\n\n  setTimeout(wrapJQuery, 0);\n\n  Odometer = (function() {\n    function Odometer(options) {\n      var e, k, property, v, _base, _i, _len, _ref, _ref1, _ref2,\n        _this = this;\n      this.options = options;\n      this.el = this.options.el;\n      if (this.el.odometer != null) {\n        return this.el.odometer;\n      }\n      this.el.odometer = this;\n      _ref = Odometer.options;\n      for (k in _ref) {\n        v = _ref[k];\n        if (this.options[k] == null) {\n          this.options[k] = v;\n        }\n      }\n      if ((_base = this.options).duration == null) {\n        _base.duration = DURATION;\n      }\n      this.MAX_VALUES = ((this.options.duration / MS_PER_FRAME) / FRAMES_PER_VALUE) | 0;\n      this.resetFormat();\n      this.value = this.cleanValue((_ref1 = this.options.value) != null ? _ref1 : '');\n      this.renderInside();\n      this.render();\n      try {\n        _ref2 = ['innerHTML', 'innerText', 'textContent'];\n        for (_i = 0, _len = _ref2.length; _i < _len; _i++) {\n          property = _ref2[_i];\n          if (this.el[property] != null) {\n            (function(property) {\n              return Object.defineProperty(_this.el, property, {\n                get: function() {\n                  var _ref3;\n                  if (property === 'innerHTML') {\n                    return _this.inside.outerHTML;\n                  } else {\n                    return (_ref3 = _this.inside.innerText) != null ? _ref3 : _this.inside.textContent;\n                  }\n                },\n                set: function(val) {\n                  return _this.update(val);\n                }\n              });\n            })(property);\n          }\n        }\n      } catch (_error) {\n        e = _error;\n        this.watchForMutations();\n      }\n      this;\n    }\n\n    Odometer.prototype.renderInside = function() {\n      this.inside = document.createElement('div');\n      this.inside.className = 'odometer-inside';\n      this.el.innerHTML = '';\n      return this.el.appendChild(this.inside);\n    };\n\n    Odometer.prototype.watchForMutations = function() {\n      var e,\n        _this = this;\n      if (MutationObserver == null) {\n        return;\n      }\n      try {\n        if (this.observer == null) {\n          this.observer = new MutationObserver(function(mutations) {\n            var newVal;\n            newVal = _this.el.innerText;\n            _this.renderInside();\n            _this.render(_this.value);\n            return _this.update(newVal);\n          });\n        }\n        this.watchMutations = true;\n        return this.startWatchingMutations();\n      } catch (_error) {\n        e = _error;\n      }\n    };\n\n    Odometer.prototype.startWatchingMutations = function() {\n      if (this.watchMutations) {\n        return this.observer.observe(this.el, {\n          childList: true\n        });\n      }\n    };\n\n    Odometer.prototype.stopWatchingMutations = function() {\n      var _ref;\n      return (_ref = this.observer) != null ? _ref.disconnect() : void 0;\n    };\n\n    Odometer.prototype.cleanValue = function(val) {\n      var _ref;\n      if (typeof val === 'string') {\n        val = val.replace((_ref = this.format.radix) != null ? _ref : '.', '<radix>');\n        val = val.replace(/[.,]/g, '');\n        val = val.replace('<radix>', '.');\n        val = parseFloat(val, 10) || 0;\n      }\n      return round(val, this.format.precision);\n    };\n\n    Odometer.prototype.bindTransitionEnd = function() {\n      var event, renderEnqueued, _i, _len, _ref, _results,\n        _this = this;\n      if (this.transitionEndBound) {\n        return;\n      }\n      this.transitionEndBound = true;\n      renderEnqueued = false;\n      _ref = TRANSITION_END_EVENTS.split(' ');\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        event = _ref[_i];\n        _results.push(this.el.addEventListener(event, function() {\n          if (renderEnqueued) {\n            return true;\n          }\n          renderEnqueued = true;\n          setTimeout(function() {\n            _this.render();\n            renderEnqueued = false;\n            return trigger(_this.el, 'odometerdone');\n          }, 0);\n          return true;\n        }, false));\n      }\n      return _results;\n    };\n\n    Odometer.prototype.resetFormat = function() {\n      var format, fractional, parsed, precision, radix, repeating, _ref, _ref1;\n      format = (_ref = this.options.format) != null ? _ref : DIGIT_FORMAT;\n      format || (format = 'd');\n      parsed = FORMAT_PARSER.exec(format);\n      if (!parsed) {\n        throw new Error(\"Odometer: Unparsable digit format\");\n      }\n      _ref1 = parsed.slice(1, 4), repeating = _ref1[0], radix = _ref1[1], fractional = _ref1[2];\n      precision = (fractional != null ? fractional.length : void 0) || 0;\n      return this.format = {\n        repeating: repeating,\n        radix: radix,\n        precision: precision\n      };\n    };\n\n    Odometer.prototype.render = function(value) {\n      var classes, cls, match, newClasses, theme, _i, _len;\n      if (value == null) {\n        value = this.value;\n      }\n      this.stopWatchingMutations();\n      this.resetFormat();\n      this.inside.innerHTML = '';\n      theme = this.options.theme;\n      classes = this.el.className.split(' ');\n      newClasses = [];\n      for (_i = 0, _len = classes.length; _i < _len; _i++) {\n        cls = classes[_i];\n        if (!cls.length) {\n          continue;\n        }\n        if (match = /^odometer-theme-(.+)$/.exec(cls)) {\n          theme = match[1];\n          continue;\n        }\n        if (/^odometer(-|$)/.test(cls)) {\n          continue;\n        }\n        newClasses.push(cls);\n      }\n      newClasses.push('odometer');\n      if (!TRANSITION_SUPPORT) {\n        newClasses.push('odometer-no-transitions');\n      }\n      if (theme) {\n        newClasses.push(\"odometer-theme-\" + theme);\n      } else {\n        newClasses.push(\"odometer-auto-theme\");\n      }\n      this.el.className = newClasses.join(' ');\n      this.ribbons = {};\n      this.formatDigits(value);\n      return this.startWatchingMutations();\n    };\n\n    Odometer.prototype.formatDigits = function(value) {\n      var digit, valueDigit, valueString, wholePart, _i, _j, _len, _len1, _ref, _ref1;\n      this.digits = [];\n      if (this.options.formatFunction) {\n        valueString = this.options.formatFunction(value);\n        _ref = valueString.split('').reverse();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          valueDigit = _ref[_i];\n          if (valueDigit.match(/0-9/)) {\n            digit = this.renderDigit();\n            digit.querySelector('.odometer-value').innerHTML = valueDigit;\n            this.digits.push(digit);\n            this.insertDigit(digit);\n          } else {\n            this.addSpacer(valueDigit);\n          }\n        }\n      } else {\n        wholePart = !this.format.precision || !fractionalPart(value) || false;\n        _ref1 = value.toString().split('').reverse();\n        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n          digit = _ref1[_j];\n          if (digit === '.') {\n            wholePart = true;\n          }\n          this.addDigit(digit, wholePart);\n        }\n      }\n    };\n\n    Odometer.prototype.update = function(newValue) {\n      var diff,\n        _this = this;\n      newValue = this.cleanValue(newValue);\n      if (!(diff = newValue - this.value)) {\n        return;\n      }\n      removeClass(this.el, 'odometer-animating-up odometer-animating-down odometer-animating');\n      if (diff > 0) {\n        addClass(this.el, 'odometer-animating-up');\n      } else {\n        addClass(this.el, 'odometer-animating-down');\n      }\n      this.stopWatchingMutations();\n      this.animate(newValue);\n      this.startWatchingMutations();\n      setTimeout(function() {\n        _this.el.offsetHeight;\n        return addClass(_this.el, 'odometer-animating');\n      }, 0);\n      return this.value = newValue;\n    };\n\n    Odometer.prototype.renderDigit = function() {\n      return createFromHTML(DIGIT_HTML);\n    };\n\n    Odometer.prototype.insertDigit = function(digit, before) {\n      if (before != null) {\n        return this.inside.insertBefore(digit, before);\n      } else if (!this.inside.children.length) {\n        return this.inside.appendChild(digit);\n      } else {\n        return this.inside.insertBefore(digit, this.inside.children[0]);\n      }\n    };\n\n    Odometer.prototype.addSpacer = function(chr, before, extraClasses) {\n      var spacer;\n      spacer = createFromHTML(FORMAT_MARK_HTML);\n      spacer.innerHTML = chr;\n      if (extraClasses) {\n        addClass(spacer, extraClasses);\n      }\n      return this.insertDigit(spacer, before);\n    };\n\n    Odometer.prototype.addDigit = function(value, repeating) {\n      var chr, digit, resetted, _ref;\n      if (repeating == null) {\n        repeating = true;\n      }\n      if (value === '-') {\n        return this.addSpacer(value, null, 'odometer-negation-mark');\n      }\n      if (value === '.') {\n        return this.addSpacer((_ref = this.format.radix) != null ? _ref : '.', null, 'odometer-radix-mark');\n      }\n      if (repeating) {\n        resetted = false;\n        while (true) {\n          if (!this.format.repeating.length) {\n            if (resetted) {\n              throw new Error(\"Bad odometer format without digits\");\n            }\n            this.resetFormat();\n            resetted = true;\n          }\n          chr = this.format.repeating[this.format.repeating.length - 1];\n          this.format.repeating = this.format.repeating.substring(0, this.format.repeating.length - 1);\n          if (chr === 'd') {\n            break;\n          }\n          this.addSpacer(chr);\n        }\n      }\n      digit = this.renderDigit();\n      digit.querySelector('.odometer-value').innerHTML = value;\n      this.digits.push(digit);\n      return this.insertDigit(digit);\n    };\n\n    Odometer.prototype.animate = function(newValue) {\n      if (!TRANSITION_SUPPORT || this.options.animation === 'count') {\n        return this.animateCount(newValue);\n      } else {\n        return this.animateSlide(newValue);\n      }\n    };\n\n    Odometer.prototype.animateCount = function(newValue) {\n      var cur, diff, last, start, tick,\n        _this = this;\n      if (!(diff = +newValue - this.value)) {\n        return;\n      }\n      start = last = now();\n      cur = this.value;\n      return (tick = function() {\n        var delta, dist, fraction;\n        if ((now() - start) > _this.options.duration) {\n          _this.value = newValue;\n          _this.render();\n          trigger(_this.el, 'odometerdone');\n          return;\n        }\n        delta = now() - last;\n        if (delta > COUNT_MS_PER_FRAME) {\n          last = now();\n          fraction = delta / _this.options.duration;\n          dist = diff * fraction;\n          cur += dist;\n          _this.render(Math.round(cur));\n        }\n        if (requestAnimationFrame != null) {\n          return requestAnimationFrame(tick);\n        } else {\n          return setTimeout(tick, COUNT_MS_PER_FRAME);\n        }\n      })();\n    };\n\n    Odometer.prototype.getDigitCount = function() {\n      var i, max, value, values, _i, _len;\n      values = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      for (i = _i = 0, _len = values.length; _i < _len; i = ++_i) {\n        value = values[i];\n        values[i] = Math.abs(value);\n      }\n      max = Math.max.apply(Math, values);\n      return Math.ceil(Math.log(max + 1) / Math.log(10));\n    };\n\n    Odometer.prototype.getFractionalDigitCount = function() {\n      var i, parser, parts, value, values, _i, _len;\n      values = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      parser = /^\\-?\\d*\\.(\\d*?)0*$/;\n      for (i = _i = 0, _len = values.length; _i < _len; i = ++_i) {\n        value = values[i];\n        values[i] = value.toString();\n        parts = parser.exec(values[i]);\n        if (parts == null) {\n          values[i] = 0;\n        } else {\n          values[i] = parts[1].length;\n        }\n      }\n      return Math.max.apply(Math, values);\n    };\n\n    Odometer.prototype.resetDigits = function() {\n      this.digits = [];\n      this.ribbons = [];\n      this.inside.innerHTML = '';\n      return this.resetFormat();\n    };\n\n    Odometer.prototype.animateSlide = function(newValue) {\n      var boosted, cur, diff, digitCount, digits, dist, end, fractionalCount, frame, frames, i, incr, j, mark, numEl, oldValue, start, _base, _i, _j, _k, _l, _len, _len1, _len2, _m, _ref, _results;\n      oldValue = this.value;\n      fractionalCount = this.getFractionalDigitCount(oldValue, newValue);\n      if (fractionalCount) {\n        newValue = newValue * Math.pow(10, fractionalCount);\n        oldValue = oldValue * Math.pow(10, fractionalCount);\n      }\n      if (!(diff = newValue - oldValue)) {\n        return;\n      }\n      this.bindTransitionEnd();\n      digitCount = this.getDigitCount(oldValue, newValue);\n      digits = [];\n      boosted = 0;\n      for (i = _i = 0; 0 <= digitCount ? _i < digitCount : _i > digitCount; i = 0 <= digitCount ? ++_i : --_i) {\n        start = truncate(oldValue / Math.pow(10, digitCount - i - 1));\n        end = truncate(newValue / Math.pow(10, digitCount - i - 1));\n        dist = end - start;\n        if (Math.abs(dist) > this.MAX_VALUES) {\n          frames = [];\n          incr = dist / (this.MAX_VALUES + this.MAX_VALUES * boosted * DIGIT_SPEEDBOOST);\n          cur = start;\n          while ((dist > 0 && cur < end) || (dist < 0 && cur > end)) {\n            frames.push(Math.round(cur));\n            cur += incr;\n          }\n          if (frames[frames.length - 1] !== end) {\n            frames.push(end);\n          }\n          boosted++;\n        } else {\n          frames = (function() {\n            _results = [];\n            for (var _j = start; start <= end ? _j <= end : _j >= end; start <= end ? _j++ : _j--){ _results.push(_j); }\n            return _results;\n          }).apply(this);\n        }\n        for (i = _k = 0, _len = frames.length; _k < _len; i = ++_k) {\n          frame = frames[i];\n          frames[i] = Math.abs(frame % 10);\n        }\n        digits.push(frames);\n      }\n      this.resetDigits();\n      _ref = digits.reverse();\n      for (i = _l = 0, _len1 = _ref.length; _l < _len1; i = ++_l) {\n        frames = _ref[i];\n        if (!this.digits[i]) {\n          this.addDigit(' ', i >= fractionalCount);\n        }\n        if ((_base = this.ribbons)[i] == null) {\n          _base[i] = this.digits[i].querySelector('.odometer-ribbon-inner');\n        }\n        this.ribbons[i].innerHTML = '';\n        if (diff < 0) {\n          frames = frames.reverse();\n        }\n        for (j = _m = 0, _len2 = frames.length; _m < _len2; j = ++_m) {\n          frame = frames[j];\n          numEl = document.createElement('div');\n          numEl.className = 'odometer-value';\n          numEl.innerHTML = frame;\n          this.ribbons[i].appendChild(numEl);\n          if (j === frames.length - 1) {\n            addClass(numEl, 'odometer-last-value');\n          }\n          if (j === 0) {\n            addClass(numEl, 'odometer-first-value');\n          }\n        }\n      }\n      if (start < 0) {\n        this.addDigit('-');\n      }\n      mark = this.inside.querySelector('.odometer-radix-mark');\n      if (mark != null) {\n        mark.parent.removeChild(mark);\n      }\n      if (fractionalCount) {\n        return this.addSpacer(this.format.radix, this.digits[fractionalCount - 1], 'odometer-radix-mark');\n      }\n    };\n\n    return Odometer;\n\n  })();\n\n  Odometer.options = (_ref = window.odometerOptions) != null ? _ref : {};\n\n  setTimeout(function() {\n    var k, v, _base, _ref1, _results;\n    if (window.odometerOptions) {\n      _ref1 = window.odometerOptions;\n      _results = [];\n      for (k in _ref1) {\n        v = _ref1[k];\n        _results.push((_base = Odometer.options)[k] != null ? (_base = Odometer.options)[k] : _base[k] = v);\n      }\n      return _results;\n    }\n  }, 0);\n\n  Odometer.init = function() {\n    var el, elements, _i, _len, _ref1, _results;\n    if (document.querySelectorAll == null) {\n      return;\n    }\n    elements = document.querySelectorAll(Odometer.options.selector || '.odometer');\n    _results = [];\n    for (_i = 0, _len = elements.length; _i < _len; _i++) {\n      el = elements[_i];\n      _results.push(el.odometer = new Odometer({\n        el: el,\n        value: (_ref1 = el.innerText) != null ? _ref1 : el.textContent\n      }));\n    }\n    return _results;\n  };\n\n  if ((((_ref1 = document.documentElement) != null ? _ref1.doScroll : void 0) != null) && (document.createEventObject != null)) {\n    _old = document.onreadystatechange;\n    document.onreadystatechange = function() {\n      if (document.readyState === 'complete' && Odometer.options.auto !== false) {\n        Odometer.init();\n      }\n      return _old != null ? _old.apply(this, arguments) : void 0;\n    };\n  } else {\n    document.addEventListener('DOMContentLoaded', function() {\n      if (Odometer.options.auto !== false) {\n        return Odometer.init();\n      }\n    }, false);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], function() {\n      return Odometer;\n    });\n  } else if (typeof exports !== \"undefined\" && exports !== null) {\n    module.exports = Odometer;\n  } else {\n    window.Odometer = Odometer;\n  }\n\n}).call(this);\n\n/*! Magnific Popup - v1.0.1 - 2015-12-30\n* http://dimsemenov.com/plugins/magnific-popup/\n* Copyright (c) 2015 Dmitry Semenov; */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(\"object\"==typeof exports?require(\"jquery\"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h=\"Close\",i=\"BeforeClose\",j=\"AfterClose\",k=\"BeforeAppend\",l=\"MarkupParse\",m=\"Open\",n=\"Change\",o=\"mfp\",p=\".\"+o,q=\"mfp-ready\",r=\"mfp-removing\",s=\"mfp-prevent-close\",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement(\"div\");return f.className=\"mfp-\"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace(\"%title%\",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement(\"p\").style,b=[\"ms\",\"O\",\"Moz\",\"Webkit\"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+\"Transition\"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isIE7=-1!==c.indexOf(\"MSIE 7.\"),b.isIE8=-1!==c.indexOf(\"MSIE 8.\"),b.isLowIE=b.isIE7||b.isIE8,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f=\"\",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos=\"auto\"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x(\"bg\").on(\"click\"+p,function(){b.close()}),b.wrap=x(\"wrap\").attr(\"tabindex\",-1).on(\"click\"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x(\"container\",b.wrap)),b.contentContainer=x(\"content\"),b.st.preloader&&(b.preloader=x(\"preloader\",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b[\"init\"+j].call(b)}y(\"BeforeOpen\"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=\" mfp-close-btn-in\"):b.wrap.append(z())),b.st.alignTop&&(f+=\" mfp-align-top\"),b.fixedContentPos?b.wrap.css({overflow:b.st.overflowY,overflowX:\"hidden\",overflowY:b.st.overflowY}):b.wrap.css({top:v.scrollTop(),position:\"absolute\"}),(b.st.fixedBgPos===!1||\"auto\"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:\"absolute\"}),b.st.enableEscapeKey&&d.on(\"keyup\"+p,function(a){27===a.keyCode&&b.close()}),v.on(\"resize\"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=\" mfp-auto-cursor\"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a(\"body, html\").css(\"overflow\",\"hidden\"):n.overflow=\"hidden\");var r=b.st.mainClass;return b.isIE7&&(r+=\" mfp-ie7\"),r&&b._addClassToMFP(r),b.updateItemHTML(),y(\"BuildControls\"),a(\"html\").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on(\"focusin\"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+\" \"+q+\" \";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+\" \"),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:\"\"};b.isIE7?a(\"body, html\").css(\"overflow\",\"\"):e.overflow=\"\",a(\"html\").css(e)}d.off(\"keyup\"+p+\" focusin\"+p),b.ev.off(p),b.wrap.attr(\"class\",\"mfp-wrap\").removeAttr(\"style\"),b.bgOverlay.attr(\"class\",\"mfp-bg\"),b.container.attr(\"class\",\"mfp-container\"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b.st.autoFocusLast&&b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css(\"height\",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css(\"height\",b.wH),y(\"Resize\")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y(\"BeforeChange\",[b.currItem?b.currItem.type:\"\",d]),b.currItem=c,!b.currTemplate[d]){var f=b.st[d]?b.st[d].markup:!1;y(\"FirstMarkupParse\",f),f?b.currTemplate[d]=a(f):b.currTemplate[d]=!0}e&&e!==c.type&&b.container.removeClass(\"mfp-\"+e+\"-holder\");var g=b[\"get\"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y(\"AfterChange\")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(\".mfp-close\").length||b.content.append(z()):b.content=a:b.content=\"\",y(k),b.container.addClass(\"mfp-\"+c+\"-holder\"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass(\"mfp-\"+f[g])){d=f[g];break}e.src=e.el.attr(\"data-mfp-src\"),e.src||(e.src=e.el.attr(\"href\"))}return e.type=d||b.st.type||\"inline\",e.index=c,e.parsed=!0,b.items[c]=e,y(\"ElementParse\",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e=\"click.magnificPopup\";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||!(2===c.which||c.ctrlKey||c.metaKey||c.altKey||c.shiftKey)){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass(\"mfp-s-\"+c),d||\"loading\"!==a||(d=b.st.tLoading);var e={status:a,text:d};y(\"UpdateStatus\",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find(\"a\").on(\"click\",function(a){a.stopImmediatePropagation()}),b.container.addClass(\"mfp-s-\"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass(\"mfp-close\")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(a,c){if(void 0===c||c===!1)return!0;if(e=a.split(\"_\"),e.length>1){var d=b.find(p+\"-\"+e[0]);if(d.length>0){var f=e[1];\"replaceWith\"===f?d[0]!==c[0]&&d.replaceWith(c):\"img\"===f?d.is(\"img\")?d.attr(\"src\",c):d.replaceWith('<img src=\"'+c+'\" class=\"'+d.attr(\"class\")+'\" />'):d.attr(e[1],c)}}else b.find(p+\"-\"+a).html(c)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement(\"div\");a.style.cssText=\"width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;\",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:\"\",preloader:!0,focus:\"\",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:\"auto\",fixedBgPos:\"auto\",overflowY:\"auto\",closeMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-close\">&#215;</button>',tClose:\"Close (Esc)\",tLoading:\"Loading...\",autoFocusLast:!0}},a.fn.magnificPopup=function(c){A();var d=a(this);if(\"string\"==typeof c)if(\"open\"===c){var e,f=u?d.data(\"magnificPopup\"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data(\"magnificPopup\",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F=\"inline\",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:\"hide\",markup:\"\",tNotFound:\"Content not found\"},proto:{initInline:function(){b.types.push(F),w(h+\".\"+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C=\"mfp-\"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus(\"ready\")}else b.updateStatus(\"error\",e.tNotFound),f=a(\"<div>\");return c.inlineElement=f,f}return b.updateStatus(\"ready\"),b._parseMarkup(d,{},c),d}}});var H,I=\"ajax\",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:\"mfp-ajax-cur\",tError:'<a href=\"%url%\">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+\".\"+I,K),w(\"BeforeChange.\"+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus(\"loading\");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y(\"ParseAjax\",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus(\"ready\"),y(\"AjaxContentAdded\")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus(\"error\",b.st.ajax.tError.replace(\"%url%\",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),\"\"}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||\"\"}return\"\"};a.magnificPopup.registerModule(\"image\",{options:{markup:'<div class=\"mfp-figure\"><div class=\"mfp-close\"></div><figure><div class=\"mfp-img\"></div><figcaption><div class=\"mfp-bottom-bar\"><div class=\"mfp-title\"></div><div class=\"mfp-counter\"></div></div></figcaption></figure></div>',cursor:\"mfp-zoom-out-cur\",titleSrc:\"title\",verticalFit:!0,tError:'<a href=\"%url%\">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=\".image\";b.types.push(\"image\"),w(m+d,function(){\"image\"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off(\"resize\"+p)}),w(\"Resize\"+d,b.resizeImage),b.isLowIE&&w(\"AfterChange\",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css(\"padding-top\"),10)+parseInt(a.img.css(\"padding-bottom\"),10)),a.img.css(\"max-height\",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y(\"ImageHasSize\",a),a.imgHidden&&(b.content&&b.content.removeClass(\"mfp-loading\"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(\".mfploader\"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus(\"ready\")),c.hasSize=!0,c.loaded=!0,y(\"ImageLoadComplete\")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(\".mfploader\"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus(\"error\",h.tError.replace(\"%url%\",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(\".mfp-img\");if(i.length){var j=document.createElement(\"img\");j.className=\"mfp-img\",c.el&&c.el.find(\"img\").length&&(j.alt=c.el.find(\"img\").attr(\"alt\")),c.img=a(j).on(\"load.mfploader\",f).on(\"error.mfploader\",g),j.src=c.src,i.is(\"img\")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass(\"mfp-loading\"),b.updateStatus(\"error\",h.tError.replace(\"%url%\",c.src))):(d.removeClass(\"mfp-loading\"),b.updateStatus(\"ready\")),d):(b.updateStatus(\"loading\"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass(\"mfp-loading\"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement(\"p\").style.MozTransform),N};a.magnificPopup.registerModule(\"zoom\",{options:{enabled:!1,easing:\"ease-in-out\",duration:300,opener:function(a){return a.is(\"img\")?a:a.find(\"img\")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=\".zoom\";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr(\"style\").removeAttr(\"class\").addClass(\"mfp-animated-image\"),d=\"all \"+c.duration/1e3+\"s \"+c.easing,e={position:\"fixed\",zIndex:9999,left:0,top:0,\"-webkit-backface-visibility\":\"hidden\"},f=\"transition\";return e[\"-webkit-\"+f]=e[\"-moz-\"+f]=e[\"-o-\"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css(\"visibility\",\"visible\")};w(\"BuildControls\"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css(\"visibility\",\"hidden\"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y(\"ZoomAnimationEnded\")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css(\"visibility\",\"hidden\"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return\"image\"===b.currItem.type},_getItemToZoom:function(){return b.currItem.hasSize?b.currItem.img:!1},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css(\"padding-top\"),10),g=parseInt(d.css(\"padding-bottom\"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h[\"-moz-transform\"]=h.transform=\"translate(\"+e.left+\"px,\"+e.top+\"px)\":(h.left=e.left,h.top=e.top),h}}});var P=\"iframe\",Q=\"//about:blank\",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find(\"iframe\");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css(\"display\",a?\"block\":\"none\"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class=\"mfp-iframe-scaler\"><div class=\"mfp-close\"></div><iframe class=\"mfp-iframe\" src=\"//about:blank\" frameborder=\"0\" allowfullscreen></iframe></div>',srcAction:\"iframe_src\",patterns:{youtube:{index:\"youtube.com\",id:\"v=\",src:\"//www.youtube.com/embed/%id%?autoplay=1\"},vimeo:{index:\"vimeo.com/\",id:\"/\",src:\"//player.vimeo.com/video/%id%?autoplay=1\"},gmaps:{index:\"//maps.google.\",src:\"%id%&output=embed\"}}},proto:{initIframe:function(){b.types.push(P),w(\"BeforeChange\",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+\".\"+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e=\"string\"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace(\"%id%\",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus(\"ready\"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule(\"gallery\",{options:{enabled:!1,arrowMarkup:'<button title=\"%title%\" type=\"button\" class=\"mfp-arrow mfp-arrow-%dir%\"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:\"Previous (Left arrow key)\",tNext:\"Next (Right arrow key)\",tCounter:\"%curr% of %total%\"},proto:{initGallery:function(){var c=b.st.gallery,e=\".mfp-gallery\",g=Boolean(a.fn.mfpFastClick);return b.direction=!0,c&&c.enabled?(f+=\" mfp-gallery\",w(m+e,function(){c.navigateByImgClick&&b.wrap.on(\"click\"+e,\".mfp-img\",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on(\"keydown\"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w(\"UpdateStatus\"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):\"\"}),w(\"BuildControls\"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,\"left\")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,\"right\")).addClass(s),h=g?\"mfpFastClick\":\"click\";e[h](function(){b.prev()}),f[h](function(){b.next()}),b.isIE7&&(x(\"b\",e[0],!1,!0),x(\"a\",e[0],!1,!0),x(\"b\",f[0],!1,!0),x(\"a\",f[0],!1,!0)),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off(\"click\"+e),b.arrowLeft&&g&&b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(),b.arrowRight=b.arrowLeft=null})):!1},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y(\"LazyLoad\",d),\"image\"===d.type&&(d.img=a('<img class=\"mfp-img\" />').on(\"load.mfploader\",function(){d.hasSize=!0}).on(\"error.mfploader\",function(){d.hasSize=!0,d.loadError=!0,y(\"LazyLoadError\",d)}).attr(\"src\",d.src)),d.preloaded=!0}}}});var U=\"retina\";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\\.\\w+$/,function(a){return\"@2x\"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w(\"ImageHasSize.\"+U,function(a,b){b.img.css({\"max-width\":b.img[0].naturalWidth/c,width:\"100%\"})}),w(\"ElementParse.\"+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),function(){var b=1e3,c=\"ontouchstart\"in window,d=function(){v.off(\"touchmove\"+f+\" touchend\"+f)},e=\"mfpFastClick\",f=\".\"+e;a.fn.mfpFastClick=function(e){return a(this).each(function(){var g,h=a(this);if(c){var i,j,k,l,m,n;h.on(\"touchstart\"+f,function(a){l=!1,n=1,m=a.originalEvent?a.originalEvent.touches[0]:a.touches[0],j=m.clientX,k=m.clientY,v.on(\"touchmove\"+f,function(a){m=a.originalEvent?a.originalEvent.touches:a.touches,n=m.length,m=m[0],(Math.abs(m.clientX-j)>10||Math.abs(m.clientY-k)>10)&&(l=!0,d())}).on(\"touchend\"+f,function(a){d(),l||n>1||(g=!0,a.preventDefault(),clearTimeout(i),i=setTimeout(function(){g=!1},b),e())})})}h.on(\"click\"+f,function(){g||e()})})},a.fn.destroyMfpFastClick=function(){a(this).off(\"touchstart\"+f+\" click\"+f),c&&v.off(\"touchmove\"+f+\" touchend\"+f)}}(),A()});\n\n// NOTICE!! DO NOT USE ANY OF THIS JAVASCRIPT\n// IT'S JUST JUNK FOR OUR DOCS!\n// ++++++++++++++++++++++++++++++++++++++++++\n/*!\n * Copyright 2014-2015 Twitter, Inc.\n *\n * Licensed under the Creative Commons Attribution 3.0 Unported License. For\n * details, see https://creativecommons.org/licenses/by/3.0/.\n */\n// Intended to prevent false-positive bug reports about Bootstrap not working properly in old versions of IE due to folks testing using IE's unreliable emulation modes.\n(function () {\n  'use strict';\n\n  function emulatedIEMajorVersion() {\n    var groups = /MSIE ([0-9.]+)/.exec(window.navigator.userAgent)\n    if (groups === null) {\n      return null\n    }\n    var ieVersionNum = parseInt(groups[1], 10)\n    var ieMajorVersion = Math.floor(ieVersionNum)\n    return ieMajorVersion\n  }\n\n  function actualNonEmulatedIEMajorVersion() {\n    // Detects the actual version of IE in use, even if it's in an older-IE emulation mode.\n    // IE JavaScript conditional compilation docs: https://msdn.microsoft.com/library/121hztk3%28v=vs.94%29.aspx\n    // @cc_on docs: https://msdn.microsoft.com/library/8ka90k2e%28v=vs.94%29.aspx\n    var jscriptVersion = new Function('/*@cc_on return @_jscript_version; @*/')() // jshint ignore:line\n    if (jscriptVersion === undefined) {\n      return 11 // IE11+ not in emulation mode\n    }\n    if (jscriptVersion < 9) {\n      return 8 // IE8 (or lower; haven't tested on IE<8)\n    }\n    return jscriptVersion // IE9 or IE10 in any mode, or IE11 in non-IE11 mode\n  }\n\n  var ua = window.navigator.userAgent\n  if (ua.indexOf('Opera') > -1 || ua.indexOf('Presto') > -1) {\n    return // Opera, which might pretend to be IE\n  }\n  var emulated = emulatedIEMajorVersion()\n  if (emulated === null) {\n    return // Not IE\n  }\n  var nonEmulated = actualNonEmulatedIEMajorVersion()\n\n  if (emulated !== nonEmulated) {\n    window.alert('WARNING: You appear to be using IE' + nonEmulated + ' in IE' + emulated + ' emulation mode.\\nIE emulation modes can behave significantly differently from ACTUAL older versions of IE.\\nPLEASE DON\\'T FILE BOOTSTRAP BUGS based on testing in IE emulation modes!')\n  }\n})();\n\n/*!\n * IE10 viewport hack for Surface/desktop Windows 8 bug\n * Copyright 2014-2015 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n */\n\n// See the Getting Started docs for more information:\n// http://getbootstrap.com/getting-started/#support-ie10-width\n\n(function () {\n  'use strict';\n\n  if (navigator.userAgent.match(/IEMobile\\/10\\.0/)) {\n    var msViewportStyle = document.createElement('style')\n    msViewportStyle.appendChild(\n      document.createTextNode(\n        '@-ms-viewport{width:auto!important}'\n      )\n    )\n    document.querySelector('head').appendChild(msViewportStyle)\n  }\n\n})();\n\nvar Holder=Holder||{};!function(e,t){function n(e,t){var n=\"complete\",i=\"readystatechange\",o=!1,a=o,r=!0,s=e.document,d=s.documentElement,l=s.addEventListener?\"addEventListener\":\"attachEvent\",u=s.addEventListener?\"removeEventListener\":\"detachEvent\",h=s.addEventListener?\"\":\"on\",c=function(r){(r.type!=i||s.readyState==n)&&((\"load\"==r.type?e:s)[u](h+r.type,c,o),!a&&(a=!0)&&t.call(e,null))},g=function(){try{d.doScroll(\"left\")}catch(e){return setTimeout(g,50),void 0}c(\"poll\")};if(s.readyState==n)t.call(e,\"lazy\");else{if(s.createEventObject&&d.doScroll){try{r=!e.frameElement}catch(f){}r&&g()}s[l](h+\"DOMContentLoaded\",c,o),s[l](h+i,c,o),e[l](h+\"load\",c,o)}}function i(e){e=e.match(/^(\\W)?(.*)/);var t=document[\"getElement\"+(e[1]?\"#\"==e[1]?\"ById\":\"sByClassName\":\"sByTagName\")](e[2]),n=[];return null!==t&&(n=t.length?t:0===t.length?t:[t]),n}function o(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function a(e,t,n){t=parseInt(t,10),e=parseInt(e,10);var i=Math.max(t,e),o=Math.min(t,e),a=1/12,r=Math.min(.75*o,.75*i*a);return{height:Math.round(Math.max(n.size,r))}}function r(e){var t=e.ctx,n=e.dimensions,i=e.template,o=e.ratio,r=e.holder,s=\"literal\"==r.textmode,d=\"exact\"==r.textmode,l=a(n.width,n.height,i),u=l.height,h=n.width*o,c=n.height*o,f=i.font?i.font:\"sans-serif\";g.width=h,g.height=c,t.textAlign=\"center\",t.textBaseline=\"middle\",t.fillStyle=i.background,t.fillRect(0,0,h,c),t.fillStyle=i.foreground,t.font=\"bold \"+u+\"px \"+f;var m=i.text?i.text:Math.floor(n.width)+\"x\"+Math.floor(n.height);if(s){var n=r.dimensions;m=n.width+\"x\"+n.height}else if(d&&r.exact_dimensions){var n=r.exact_dimensions;m=Math.floor(n.width)+\"x\"+Math.floor(n.height)}var x=t.measureText(m).width;return x/h>=.75&&(u=Math.floor(.75*u*(h/x))),t.font=\"bold \"+u*o+\"px \"+f,t.fillText(m,h/2,c/2,h),g.toDataURL(\"image/png\")}function s(e,t,n,i){var a=n.dimensions,s=n.theme,d=n.text?decodeURIComponent(n.text):n.text,u=a.width+\"x\"+a.height;s=d?o(s,{text:d}):s,s=n.font?o(s,{font:n.font}):s,t.setAttribute(\"data-src\",i),n.theme=s,t.holder_data=n,\"image\"==e?(t.setAttribute(\"alt\",d?d:s.text?s.text+\" [\"+u+\"]\":u),(c||!n.auto)&&(t.style.width=a.width+\"px\",t.style.height=a.height+\"px\"),c?t.style.backgroundColor=s.background:(t.setAttribute(\"src\",r({ctx:p,dimensions:a,template:s,ratio:y,holder:n})),n.textmode&&\"exact\"==n.textmode&&(x.push(t),l(t)))):\"background\"==e?c||(t.style.backgroundImage=\"url(\"+r({ctx:p,dimensions:a,template:s,ratio:y,holder:n})+\")\",t.style.backgroundSize=a.width+\"px \"+a.height+\"px\"):\"fluid\"==e&&(t.setAttribute(\"alt\",d?d:s.text?s.text+\" [\"+u+\"]\":u),t.style.height=\"%\"==a.height.slice(-1)?a.height:a.height+\"px\",t.style.width=\"%\"==a.width.slice(-1)?a.width:a.width+\"px\",(\"inline\"==t.style.display||\"\"===t.style.display||\"none\"==t.style.display)&&(t.style.display=\"block\"),c?t.style.backgroundColor=s.background:(x.push(t),l(t)))}function d(e,t){var n={height:e.clientHeight,width:e.clientWidth};if(!n.height&&!n.width){if(e.hasAttribute(\"data-holder-invisible\"))throw new Error(\"Holder: placeholder is not visible\");return e.setAttribute(\"data-holder-invisible\",!0),setTimeout(function(){t.call(this,e)},1),null}return e.removeAttribute(\"data-holder-invisible\"),n}function l(e){var t;t=null==e.nodeType?x:[e];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i.holder_data){var o=i.holder_data,a=d(i,l);a&&(o.fluid&&i.setAttribute(\"src\",r({ctx:p,dimensions:a,template:o.theme,ratio:y,holder:o})),o.textmode&&\"exact\"==o.textmode&&(o.exact_dimensions=a,i.setAttribute(\"src\",r({ctx:p,dimensions:o.dimensions,template:o.theme,ratio:y,holder:o}))))}}}function u(t,n){var i={theme:o(v.themes.gray,{})},a=!1;for(sl=t.length,j=0;sl>j;j++){var r=t[j];e.flags.dimensions.match(r)?(a=!0,i.dimensions=e.flags.dimensions.output(r)):e.flags.fluid.match(r)?(a=!0,i.dimensions=e.flags.fluid.output(r),i.fluid=!0):e.flags.textmode.match(r)?i.textmode=e.flags.textmode.output(r):e.flags.colors.match(r)?i.theme=e.flags.colors.output(r):n.themes[r]?n.themes.hasOwnProperty(r)&&(i.theme=o(n.themes[r],{})):e.flags.font.match(r)?i.font=e.flags.font.output(r):e.flags.auto.match(r)?i.auto=!0:e.flags.text.match(r)&&(i.text=e.flags.text.output(r))}return a?i:!1}var h=!1,c=!1,g=document.createElement(\"canvas\"),f=1,m=1,x=[];if(g.getContext)if(g.toDataURL(\"image/png\").indexOf(\"data:image/png\")<0)c=!0;else var p=g.getContext(\"2d\");else c=!0;c||(f=window.devicePixelRatio||1,m=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1);var y=f/m,v={domain:\"holder.js\",images:\"img\",bgnodes:\".holderjs\",themes:{gray:{background:\"#eee\",foreground:\"#aaa\",size:12},social:{background:\"#3a5a97\",foreground:\"#fff\",size:12},industrial:{background:\"#434A52\",foreground:\"#C2F200\",size:12},sky:{background:\"#0D8FDB\",foreground:\"#fff\",size:12},vine:{background:\"#39DBAC\",foreground:\"#1E292C\",size:12},lava:{background:\"#F8591A\",foreground:\"#1C2846\",size:12}},stylesheet:\"\"};e.flags={dimensions:{regex:/^(\\d+)x(\\d+)$/,output:function(e){var t=this.regex.exec(e);return{width:+t[1],height:+t[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(e){var t=this.regex.exec(e);return{width:t[1],height:t[2]}}},colors:{regex:/#([0-9a-f]{3,})\\:#([0-9a-f]{3,})/i,output:function(e){var t=this.regex.exec(e);return{size:v.themes.gray.size,foreground:\"#\"+t[2],background:\"#\"+t[1]}}},text:{regex:/text\\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},font:{regex:/font\\:(.*)/,output:function(e){return this.regex.exec(e)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\\:(.*)/,output:function(e){return this.regex.exec(e)[1]}}},document.getElementsByClassName||(document.getElementsByClassName=function(e){var t,n,i,o=document,a=[];if(o.querySelectorAll)return o.querySelectorAll(\".\"+e);if(o.evaluate)for(n=\".//*[contains(concat(' ', @class, ' '), ' \"+e+\" ')]\",t=o.evaluate(n,o,null,0,null);i=t.iterateNext();)a.push(i);else for(t=o.getElementsByTagName(\"*\"),n=new RegExp(\"(^|\\\\s)\"+e+\"(\\\\s|$)\"),i=0;i<t.length;i++)n.test(t[i].className)&&a.push(t[i]);return a}),window.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var n=/(\\-([a-z]){1})/g;return\"float\"==t&&(t=\"styleFloat\"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e){var t=this.__proto__||this.constructor.prototype;return e in this&&(!(e in t)||t[e]!==this[e])});for(var w in e.flags)e.flags.hasOwnProperty(w)&&(e.flags[w].match=function(e){return e.match(this.regex)});e.add_theme=function(t,n){return null!=t&&null!=n&&(v.themes[t]=n),e},e.add_image=function(t,n){var o=i(n);if(o.length)for(var a=0,r=o.length;r>a;a++){var s=document.createElement(\"img\");s.setAttribute(\"data-src\",t),o[a].appendChild(s)}return e},e.run=function(t){h=!0;var n=o(v,t),a=[],r=[],d=[];for(\"string\"==typeof n.images?r=i(n.images):window.NodeList&&n.images instanceof window.NodeList?r=n.images:window.Node&&n.images instanceof window.Node&&(r=[n.images]),\"string\"==typeof n.bgnodes?d=i(n.bgnodes):window.NodeList&&n.elements instanceof window.NodeList?d=n.bgnodes:window.Node&&n.bgnodes instanceof window.Node&&(d=[n.bgnodes]),f=0,g=r.length;g>f;f++)a.push(r[f]);var l=document.getElementById(\"holderjs-style\");l||(l=document.createElement(\"style\"),l.setAttribute(\"id\",\"holderjs-style\"),l.type=\"text/css\",document.getElementsByTagName(\"head\")[0].appendChild(l)),n.nocss||(l.styleSheet?l.styleSheet.cssText+=n.stylesheet:l.appendChild(document.createTextNode(n.stylesheet)));for(var c=new RegExp(n.domain+'/(.*?)\"?\\\\)'),g=d.length,f=0;g>f;f++){var m=window.getComputedStyle(d[f],null).getPropertyValue(\"background-image\"),x=m.match(c),p=d[f].getAttribute(\"data-background-src\");if(x){var y=u(x[1].split(\"/\"),n);y&&s(\"background\",d[f],y,m)}else if(null!=p){var y=u(p.substr(p.lastIndexOf(n.domain)+n.domain.length+1).split(\"/\"),n);y&&s(\"background\",d[f],y,m)}}for(g=a.length,f=0;g>f;f++){var w,b;b=w=m=null;try{b=a[f].getAttribute(\"src\"),attr_datasrc=a[f].getAttribute(\"data-src\")}catch(k){}if(null==attr_datasrc&&b&&b.indexOf(n.domain)>=0?m=b:attr_datasrc&&attr_datasrc.indexOf(n.domain)>=0&&(m=attr_datasrc),m){var y=u(m.substr(m.lastIndexOf(n.domain)+n.domain.length+1).split(\"/\"),n);y&&(y.fluid?s(\"fluid\",a[f],y,m):s(\"image\",a[f],y,m))}}return e},n(t,function(){window.addEventListener?(window.addEventListener(\"resize\",l,!1),window.addEventListener(\"orientationchange\",l,!1)):window.attachEvent(\"onresize\",l),h||e.run()}),\"function\"==typeof define&&define.amd&&define([],function(){return e})}(Holder,window);\n\n/*\n\nHolder - 2.2 - client side image placeholders\n(c) 2012-2013 Ivan Malopinsky / http://imsky.co\n\nProvided under the MIT License.\nCommercial use requires attribution.\n\n*/\n\nvar Holder = Holder || {};\n(function (app, win) {\n\nvar preempted = false,\nfallback = false,\ncanvas = document.createElement('canvas');\nvar dpr = 1, bsr = 1;\nvar resizable_images = [];\n\nif (!canvas.getContext) {\n  fallback = true;\n} else {\n  if (canvas.toDataURL(\"image/png\")\n    .indexOf(\"data:image/png\") < 0) {\n    //Android doesn't support data URI\n    fallback = true;\n  } else {\n    var ctx = canvas.getContext(\"2d\");\n  }\n}\n\nif(!fallback){\n    dpr = window.devicePixelRatio || 1,\n    bsr = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n}\n\nvar ratio = dpr / bsr;\n\nvar settings = {\n  domain: \"holder.js\",\n  images: \"img\",\n  bgnodes: \".holderjs\",\n  themes: {\n    \"gray\": {\n      background: \"#eee\",\n      foreground: \"#aaa\",\n      size: 12\n    },\n    \"social\": {\n      background: \"#3a5a97\",\n      foreground: \"#fff\",\n      size: 12\n    },\n    \"industrial\": {\n      background: \"#434A52\",\n      foreground: \"#C2F200\",\n      size: 12\n    },\n    \"sky\": {\n      background: \"#0D8FDB\",\n      foreground: \"#fff\",\n      size: 12\n    },\n    \"vine\": {\n      background: \"#39DBAC\",\n      foreground: \"#1E292C\",\n      size: 12\n    },\n    \"lava\": {\n      background: \"#F8591A\",\n      foreground: \"#1C2846\",\n      size: 12\n    }\n  },\n  stylesheet: \"\"\n};\napp.flags = {\n  dimensions: {\n    regex: /^(\\d+)x(\\d+)$/,\n    output: function (val) {\n      var exec = this.regex.exec(val);\n      return {\n        width: +exec[1],\n        height: +exec[2]\n      }\n    }\n  },\n  fluid: {\n    regex: /^([0-9%]+)x([0-9%]+)$/,\n    output: function (val) {\n      var exec = this.regex.exec(val);\n      return {\n        width: exec[1],\n        height: exec[2]\n      }\n    }\n  },\n  colors: {\n    regex: /#([0-9a-f]{3,})\\:#([0-9a-f]{3,})/i,\n    output: function (val) {\n      var exec = this.regex.exec(val);\n      return {\n        size: settings.themes.gray.size,\n        foreground: \"#\" + exec[2],\n        background: \"#\" + exec[1]\n      }\n    }\n  },\n  text: {\n    regex: /text\\:(.*)/,\n    output: function (val) {\n      return this.regex.exec(val)[1];\n    }\n  },\n  font: {\n    regex: /font\\:(.*)/,\n    output: function (val) {\n      return this.regex.exec(val)[1];\n    }\n  },\n  auto: {\n    regex: /^auto$/\n  },\n  textmode: {\n    regex: /textmode\\:(.*)/,\n    output: function(val){\n      return this.regex.exec(val)[1];\n    }\n  }\n}\n\n//getElementsByClassName polyfill\ndocument.getElementsByClassName||(document.getElementsByClassName=function(e){var t=document,n,r,i,s=[];if(t.querySelectorAll)return t.querySelectorAll(\".\"+e);if(t.evaluate){r=\".//*[contains(concat(' ', @class, ' '), ' \"+e+\" ')]\",n=t.evaluate(r,t,null,0,null);while(i=n.iterateNext())s.push(i)}else{n=t.getElementsByTagName(\"*\"),r=new RegExp(\"(^|\\\\s)\"+e+\"(\\\\s|$)\");for(i=0;i<n.length;i++)r.test(n[i].className)&&s.push(n[i])}return s})\n\n//getComputedStyle polyfill\nwindow.getComputedStyle||(window.getComputedStyle=function(e){return this.el=e,this.getPropertyValue=function(t){var n=/(\\-([a-z]){1})/g;return t==\"float\"&&(t=\"styleFloat\"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null},this})\n\n//http://javascript.nwbox.com/ContentLoaded by Diego Perini with modifications\nfunction contentLoaded(n,t){var l=\"complete\",s=\"readystatechange\",u=!1,h=u,c=!0,i=n.document,a=i.documentElement,e=i.addEventListener?\"addEventListener\":\"attachEvent\",v=i.addEventListener?\"removeEventListener\":\"detachEvent\",f=i.addEventListener?\"\":\"on\",r=function(e){(e.type!=s||i.readyState==l)&&((e.type==\"load\"?n:i)[v](f+e.type,r,u),!h&&(h=!0)&&t.call(n,null))},o=function(){try{a.doScroll(\"left\")}catch(n){setTimeout(o,50);return}r(\"poll\")};if(i.readyState==l)t.call(n,\"lazy\");else{if(i.createEventObject&&a.doScroll){try{c=!n.frameElement}catch(y){}c&&o()}i[e](f+\"DOMContentLoaded\",r,u),i[e](f+s,r,u),n[e](f+\"load\",r,u)}}\n\n//https://gist.github.com/991057 by Jed Schmidt with modifications\nfunction selector(a){\n  a=a.match(/^(\\W)?(.*)/);var b=document[\"getElement\"+(a[1]?a[1]==\"#\"?\"ById\":\"sByClassName\":\"sByTagName\")](a[2]);\n  var ret=[]; b!==null&&(b.length?ret=b:b.length===0?ret=b:ret=[b]);  return ret;\n}\n\n//shallow object property extend\nfunction extend(a,b){\n  var c={};\n  for(var i in a){\n    if(a.hasOwnProperty(i)){\n      c[i]=a[i];\n    }\n  }\n  for(var i in b){\n    if(b.hasOwnProperty(i)){\n      c[i]=b[i];\n    }\n  }\n  return c\n}\n\n//hasOwnProperty polyfill\nif (!Object.prototype.hasOwnProperty)\n    /*jshint -W001, -W103 */\n    Object.prototype.hasOwnProperty = function(prop) {\n    var proto = this.__proto__ || this.constructor.prototype;\n    return (prop in this) && (!(prop in proto) || proto[prop] !== this[prop]);\n  }\n    /*jshint +W001, +W103 */\n\nfunction text_size(width, height, template) {\n  height = parseInt(height, 10);\n  width = parseInt(width, 10);\n  var bigSide = Math.max(height, width)\n  var smallSide = Math.min(height, width)\n  var scale = 1 / 12;\n  var newHeight = Math.min(smallSide * 0.75, 0.75 * bigSide * scale);\n  return {\n    height: Math.round(Math.max(template.size, newHeight))\n  }\n}\n\nfunction draw(args) {\n  var ctx = args.ctx;\n  var dimensions = args.dimensions;\n  var template = args.template;\n  var ratio = args.ratio;\n  var holder = args.holder;\n  var literal = holder.textmode == \"literal\";\n  var exact = holder.textmode == \"exact\";\n\n  var ts = text_size(dimensions.width, dimensions.height, template);\n  var text_height = ts.height;\n  var width = dimensions.width * ratio,\n    height = dimensions.height * ratio;\n  var font = template.font ? template.font : \"sans-serif\";\n  canvas.width = width;\n  canvas.height = height;\n  ctx.textAlign = \"center\";\n  ctx.textBaseline = \"middle\";\n  ctx.fillStyle = template.background;\n  ctx.fillRect(0, 0, width, height);\n  ctx.fillStyle = template.foreground;\n  ctx.font = \"bold \" + text_height + \"px \" + font;\n  var text = template.text ? template.text : (Math.floor(dimensions.width) + \"x\" + Math.floor(dimensions.height));\n  if (literal) {\n    var dimensions = holder.dimensions;\n    text = dimensions.width + \"x\" + dimensions.height;\n  }\n  else if(exact && holder.exact_dimensions){\n    var dimensions = holder.exact_dimensions;\n    text = (Math.floor(dimensions.width) + \"x\" + Math.floor(dimensions.height));\n  }\n  var text_width = ctx.measureText(text).width;\n  if (text_width / width >= 0.75) {\n    text_height = Math.floor(text_height * 0.75 * (width / text_width));\n  }\n  //Resetting font size if necessary\n  ctx.font = \"bold \" + (text_height * ratio) + \"px \" + font;\n  ctx.fillText(text, (width / 2), (height / 2), width);\n  return canvas.toDataURL(\"image/png\");\n}\n\nfunction render(mode, el, holder, src) {\n  \n  var dimensions = holder.dimensions,\n    theme = holder.theme,\n    text = holder.text ? decodeURIComponent(holder.text) : holder.text;\n  var dimensions_caption = dimensions.width + \"x\" + dimensions.height;\n  theme = (text ? extend(theme, {\n    text: text\n  }) : theme);\n  theme = (holder.font ? extend(theme, {\n    font: holder.font\n  }) : theme);\n  el.setAttribute(\"data-src\", src);\n  holder.theme = theme;\n  el.holder_data = holder;\n  \n  if (mode == \"image\") {\n    el.setAttribute(\"alt\", text ? text : theme.text ? theme.text + \" [\" + dimensions_caption + \"]\" : dimensions_caption);\n    if (fallback || !holder.auto) {\n      el.style.width = dimensions.width + \"px\";\n      el.style.height = dimensions.height + \"px\";\n    }\n    if (fallback) {\n      el.style.backgroundColor = theme.background;\n    } else {\n      el.setAttribute(\"src\", draw({ctx: ctx, dimensions: dimensions, template: theme, ratio:ratio, holder: holder}));\n      \n      if(holder.textmode && holder.textmode == \"exact\"){\n        resizable_images.push(el);\n        resizable_update(el);\n      }\n      \n    }\n  } else if (mode == \"background\") {\n    if (!fallback) {\n      el.style.backgroundImage = \"url(\" + draw({ctx:ctx, dimensions: dimensions, template: theme, ratio: ratio, holder: holder}) + \")\";\n      el.style.backgroundSize = dimensions.width + \"px \" + dimensions.height + \"px\";\n    }\n  } else if (mode == \"fluid\") {\n    el.setAttribute(\"alt\", text ? text : theme.text ? theme.text + \" [\" + dimensions_caption + \"]\" : dimensions_caption);\n    if (dimensions.height.slice(-1) == \"%\") {\n      el.style.height = dimensions.height\n    } else {\n      el.style.height = dimensions.height + \"px\"\n    }\n    if (dimensions.width.slice(-1) == \"%\") {\n      el.style.width = dimensions.width\n    } else {\n      el.style.width = dimensions.width + \"px\"\n    }\n    if (el.style.display == \"inline\" || el.style.display === \"\" || el.style.display == \"none\") {\n      el.style.display = \"block\";\n    }\n    if (fallback) {\n      el.style.backgroundColor = theme.background;\n    } else {\n      resizable_images.push(el);\n      resizable_update(el);\n    }\n  }\n}\n\nfunction dimension_check(el, callback) {\n  var dimensions = {\n    height: el.clientHeight,\n    width: el.clientWidth\n  };\n  if (!dimensions.height && !dimensions.width) {\n    if (el.hasAttribute(\"data-holder-invisible\")) {\n      throw new Error(\"Holder: placeholder is not visible\");\n    } else {\n      el.setAttribute(\"data-holder-invisible\", true)\n      setTimeout(function () {\n        callback.call(this, el)\n      }, 1)\n      return null;\n    }\n  } else {\n    el.removeAttribute(\"data-holder-invisible\")\n  }\n  return dimensions;\n}\n\nfunction resizable_update(element) {\n  var images;\n  if (element.nodeType == null) {\n    images = resizable_images;\n  } else {\n    images = [element]\n  }\n  for (var i in images) {\n    if (!images.hasOwnProperty(i)) {\n      continue;\n    }\n    var el = images[i]\n    if (el.holder_data) {\n      var holder = el.holder_data;\n      var dimensions = dimension_check(el, resizable_update)\n      if(dimensions){\n        if(holder.fluid){\n          el.setAttribute(\"src\", draw({\n            ctx: ctx,\n            dimensions: dimensions,\n            template: holder.theme,\n            ratio: ratio,\n            holder: holder\n          }))\n        }\n        if(holder.textmode && holder.textmode == \"exact\"){\n          holder.exact_dimensions = dimensions;\n          el.setAttribute(\"src\", draw({\n            ctx: ctx,\n            dimensions: holder.dimensions,\n            template: holder.theme,\n            ratio: ratio,\n            holder: holder\n          }))\n        }\n      }\n    }\n  }\n}\n\nfunction parse_flags(flags, options) {\n  var ret = {\n    theme: extend(settings.themes.gray, {})\n  };\n  var render = false;\n  for (sl = flags.length, j = 0; j < sl; j++) {\n    var flag = flags[j];\n    if (app.flags.dimensions.match(flag)) {\n      render = true;\n      ret.dimensions = app.flags.dimensions.output(flag);\n    } else if (app.flags.fluid.match(flag)) {\n      render = true;\n      ret.dimensions = app.flags.fluid.output(flag);\n      ret.fluid = true;\n    } else if (app.flags.textmode.match(flag)) {\n      ret.textmode = app.flags.textmode.output(flag)\n    } else if (app.flags.colors.match(flag)) {\n      ret.theme = app.flags.colors.output(flag);\n    } else if (options.themes[flag]) {\n      //If a theme is specified, it will override custom colors\n      if(options.themes.hasOwnProperty(flag)){\n        ret.theme = extend(options.themes[flag], {});\n      }\n    } else if (app.flags.font.match(flag)) {\n      ret.font = app.flags.font.output(flag);\n    } else if (app.flags.auto.match(flag)) {\n      ret.auto = true;\n    } else if (app.flags.text.match(flag)) {\n      ret.text = app.flags.text.output(flag);\n    }\n  }\n  return render ? ret : false;\n}\n\nfor (var flag in app.flags) {\n  if (!app.flags.hasOwnProperty(flag)) continue;\n  app.flags[flag].match = function (val) {\n    return val.match(this.regex)\n  }\n}\napp.add_theme = function (name, theme) {\n  name != null && theme != null && (settings.themes[name] = theme);\n  return app;\n};\napp.add_image = function (src, el) {\n  var node = selector(el);\n  if (node.length) {\n    for (var i = 0, l = node.length; i < l; i++) {\n      var img = document.createElement(\"img\")\n      img.setAttribute(\"data-src\", src);\n      node[i].appendChild(img);\n    }\n  }\n  return app;\n};\napp.run = function (o) {\n  preempted = true;\n  \n  var options = extend(settings, o),\n    images = [],\n    imageNodes = [],\n    bgnodes = [];\n  if (typeof (options.images) == \"string\") {\n    imageNodes = selector(options.images);\n  } else if (window.NodeList && options.images instanceof window.NodeList) {\n    imageNodes = options.images;\n  } else if (window.Node && options.images instanceof window.Node) {\n    imageNodes = [options.images];\n  }\n  \n  if (typeof (options.bgnodes) == \"string\") {\n    bgnodes = selector(options.bgnodes);\n  } else if (window.NodeList && options.elements instanceof window.NodeList) {\n    bgnodes = options.bgnodes;\n  } else if (window.Node && options.bgnodes instanceof window.Node) {\n    bgnodes = [options.bgnodes];\n  }\n  for (i = 0, l = imageNodes.length; i < l; i++) images.push(imageNodes[i]);\n  var holdercss = document.getElementById(\"holderjs-style\");\n  if (!holdercss) {\n    holdercss = document.createElement(\"style\");\n    holdercss.setAttribute(\"id\", \"holderjs-style\");\n    holdercss.type = \"text/css\";\n    document.getElementsByTagName(\"head\")[0].appendChild(holdercss);\n  }\n  if (!options.nocss) {\n    if (holdercss.styleSheet) {\n      holdercss.styleSheet.cssText += options.stylesheet;\n    } else {\n      holdercss.appendChild(document.createTextNode(options.stylesheet));\n    }\n  }\n  var cssregex = new RegExp(options.domain + \"\\/(.*?)\\\"?\\\\)\");\n  for (var l = bgnodes.length, i = 0; i < l; i++) {\n    var src = window.getComputedStyle(bgnodes[i], null)\n      .getPropertyValue(\"background-image\");\n    var flags = src.match(cssregex);\n    var bgsrc = bgnodes[i].getAttribute(\"data-background-src\");\n    if (flags) {\n      var holder = parse_flags(flags[1].split(\"/\"), options);\n      if (holder) {\n        render(\"background\", bgnodes[i], holder, src);\n      }\n    } else if (bgsrc != null) {\n      var holder = parse_flags(bgsrc.substr(bgsrc.lastIndexOf(options.domain) + options.domain.length + 1)\n        .split(\"/\"), options);\n      if (holder) {\n        render(\"background\", bgnodes[i], holder, src);\n      }\n    }\n  }\n  for (l = images.length, i = 0; i < l; i++) {\n    var attr_data_src, attr_src;\n    attr_src = attr_data_src = src = null;\n    try {\n      attr_src = images[i].getAttribute(\"src\");\n      attr_datasrc = images[i].getAttribute(\"data-src\");\n    } catch (e) {}\n    if (attr_datasrc == null && !! attr_src && attr_src.indexOf(options.domain) >= 0) {\n      src = attr_src;\n    } else if ( !! attr_datasrc && attr_datasrc.indexOf(options.domain) >= 0) {\n      src = attr_datasrc;\n    }\n    if (src) {\n      var holder = parse_flags(src.substr(src.lastIndexOf(options.domain) + options.domain.length + 1)\n        .split(\"/\"), options);\n      if (holder) {\n        if (holder.fluid) {\n          render(\"fluid\", images[i], holder, src)\n        } else {\n          render(\"image\", images[i], holder, src);\n        }\n      }\n    }\n  }\n  return app;\n};\ncontentLoaded(win, function () {\n  if (window.addEventListener) {\n    window.addEventListener(\"resize\", resizable_update, false);\n    window.addEventListener(\"orientationchange\", resizable_update, false);\n  } else {\n    window.attachEvent(\"onresize\", resizable_update)\n  }\n  preempted || app.run();\n});\nif (typeof define === \"function\" && define.amd) {\n  define([], function () {\n    return app;\n  });\n}\n\n})(Holder, window);\n\n\n!function(n,r){\"function\"==typeof define&&define.amd?define(r):\"object\"==typeof exports?module.exports=r():n.transformicons=r()}(this||window,function(){\"use strict\";var n={},r=\"tcon-transform\",t={transform:[\"click\"],revert:[\"click\"]},e=function(n){return\"string\"==typeof n?Array.prototype.slice.call(document.querySelectorAll(n)):\"undefined\"==typeof n||n instanceof Array?n:[n]},o=function(n){return\"string\"==typeof n?n.toLowerCase().split(\" \"):n},f=function(n,r,f){var c=(f?\"remove\":\"add\")+\"EventListener\",u=e(n),s=u.length,a={};for(var l in t)a[l]=r&&r[l]?o(r[l]):t[l];for(;s--;)for(var d in a)for(var v=a[d].length;v--;)u[s][c](a[d][v],i)},i=function(r){n.toggle(r.currentTarget)};return n.add=function(r,t){return f(r,t),n},n.remove=function(r,t){return f(r,t,!0),n},n.transform=function(t){return e(t).forEach(function(n){n.classList.add(r)}),n},n.revert=function(t){return e(t).forEach(function(n){n.classList.remove(r)}),n},n.toggle=function(t){return e(t).forEach(function(t){n[t.classList.contains(r)?\"revert\":\"transform\"](t)}),n},n});\n\n//transformicons.add('.tcon');\n\n/* PACE */\n/*! pace 0.5.6 */\n(function(){var AjaxMonitor,Bar,DocumentMonitor,ElementMonitor,ElementTracker,EventLagMonitor,Evented,Events,NoTargetError,RequestIntercept,SOURCE_KEYS,Scaler,SocketRequestTracker,XHRRequestTracker,animation,avgAmplitude,bar,cancelAnimation,cancelAnimationFrame,defaultOptions,extend,extendNative,getFromDOM,getIntercept,handlePushState,ignoreStack,init,now,options,requestAnimationFrame,result,runAnimation,scalers,shouldTrack,source,sources,uniScaler,_WebSocket,_XDomainRequest,_XMLHttpRequest,_i,_intercept,_len,_pushState,_ref,_ref1,_replaceState,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};defaultOptions={catchupTime:500,initialRate:.03,minTime:500,ghostTime:500,maxProgressPerFrame:10,easeFactor:1.25,startOnPageLoad:true,restartOnPushState:true,restartOnRequestAfter:500,target:'.preloader',elements:{checkInterval:100,selectors:['.preloader']},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax: false};now=function(){var _ref;return(_ref=typeof performance!==\"undefined\"&&performance!==null?typeof performance.now===\"function\"?performance.now():void 0:void 0)!=null?_ref:+(new Date);};requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame;if(requestAnimationFrame==null){requestAnimationFrame=function(fn){return setTimeout(fn,50);};cancelAnimationFrame=function(id){return clearTimeout(id);};}\nrunAnimation=function(fn){var last,tick;last=now();tick=function(){var diff;diff=now()- last;if(diff>=33){last=now();return fn(diff,function(){return requestAnimationFrame(tick);});}else{return setTimeout(tick,33- diff);}};return tick();};result=function(){var args,key,obj;obj=arguments[0],key=arguments[1],args=3<=arguments.length?__slice.call(arguments,2):[];if(typeof obj[key]==='function'){return obj[key].apply(obj,args);}else{return obj[key];}};extend=function(){var key,out,source,sources,val,_i,_len;out=arguments[0],sources=2<=arguments.length?__slice.call(arguments,1):[];for(_i=0,_len=sources.length;_i<_len;_i++){source=sources[_i];if(source){for(key in source){if(!__hasProp.call(source,key))continue;val=source[key];if((out[key]!=null)&&typeof out[key]==='object'&&(val!=null)&&typeof val==='object'){extend(out[key],val);}else{out[key]=val;}}}}\nreturn out;};avgAmplitude=function(arr){var count,sum,v,_i,_len;sum=count=0;for(_i=0,_len=arr.length;_i<_len;_i++){v=arr[_i];sum+=Math.abs(v);count++;}\nreturn sum/count;};getFromDOM=function(key,json){var data,e,el;if(key==null){key='options';}\nif(json==null){json=true;}\nel=document.querySelector(\"[data-pace-\"+ key+\"]\");if(!el){return;}\ndata=el.getAttribute(\"data-pace-\"+ key);if(!json){return data;}\ntry{return JSON.parse(data);}catch(_error){e=_error;return typeof console!==\"undefined\"&&console!==null?console.error(\"Error parsing inline pace options\",e):void 0;}};Evented=(function(){function Evented(){}\nEvented.prototype.on=function(event,handler,ctx,once){var _base;if(once==null){once=false;}\nif(this.bindings==null){this.bindings={};}\nif((_base=this.bindings)[event]==null){_base[event]=[];}\nreturn this.bindings[event].push({handler:handler,ctx:ctx,once:once});};Evented.prototype.once=function(event,handler,ctx){return this.on(event,handler,ctx,true);};Evented.prototype.off=function(event,handler){var i,_ref,_results;if(((_ref=this.bindings)!=null?_ref[event]:void 0)==null){return;}\nif(handler==null){return delete this.bindings[event];}else{i=0;_results=[];while(i<this.bindings[event].length){if(this.bindings[event][i].handler===handler){_results.push(this.bindings[event].splice(i,1));}else{_results.push(i++);}}\nreturn _results;}};Evented.prototype.trigger=function(){var args,ctx,event,handler,i,once,_ref,_ref1,_results;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((_ref=this.bindings)!=null?_ref[event]:void 0){i=0;_results=[];while(i<this.bindings[event].length){_ref1=this.bindings[event][i],handler=_ref1.handler,ctx=_ref1.ctx,once=_ref1.once;handler.apply(ctx!=null?ctx:this,args);if(once){_results.push(this.bindings[event].splice(i,1));}else{_results.push(i++);}}\nreturn _results;}};return Evented;})();if(window.Pace==null){window.Pace={};}\nextend(Pace,Evented.prototype);options=Pace.options=extend({},defaultOptions,window.paceOptions,getFromDOM());_ref=['ajax','document','eventLag','elements'];for(_i=0,_len=_ref.length;_i<_len;_i++){source=_ref[_i];if(options[source]===true){options[source]=defaultOptions[source];}}\nNoTargetError=(function(_super){__extends(NoTargetError,_super);function NoTargetError(){_ref1=NoTargetError.__super__.constructor.apply(this,arguments);return _ref1;}\nreturn NoTargetError;})(Error);Bar=(function(){function Bar(){this.progress=0;}\nBar.prototype.getElement=function(){var targetElement;if(this.el==null){targetElement=document.querySelector(options.target);if(!targetElement){throw new NoTargetError;}\nthis.el=document.createElement('div');this.el.className=\"pace pace-active\";document.body.className=document.body.className.replace('pace-done','');document.body.className+=' pace-running';this.el.innerHTML='<div class=\"pace-progress\">\\n  <div class=\"pace-progress-inner\"></div>\\n</div>\\n<div class=\"pace-activity\"></div>';if(targetElement.firstChild!=null){targetElement.insertBefore(this.el,targetElement.firstChild);}else{targetElement.appendChild(this.el);}}\nreturn this.el;};Bar.prototype.finish=function(){$('.preloader').fadeOut(500);var el;el=this.getElement();el.className=el.className.replace('pace-active','');el.className+=' pace-inactive';document.body.className=document.body.className.replace('pace-running','');return document.body.className+=' pace-done';};Bar.prototype.update=function(prog){this.progress=prog;return this.render();};Bar.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement());}catch(_error){NoTargetError=_error;}\nreturn this.el=void 0;};Bar.prototype.render=function(){var el,progressStr;if(document.querySelector(options.target)==null){return false;}\nel=this.getElement();el.children[0].style.width=\"\"+ this.progress+\"%\";if(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0){el.children[0].setAttribute('data-progress-text',\"\"+(this.progress|0)+\"%\");if(this.progress>=100){progressStr='99';}else{progressStr=this.progress<10?\"0\":\"\";progressStr+=this.progress|0;}\nel.children[0].setAttribute('data-progress',\"\"+ progressStr);}\nreturn this.lastRenderedProgress=this.progress;};Bar.prototype.done=function(){return this.progress>=100;};return Bar;})();Events=(function(){function Events(){this.bindings={};}\nEvents.prototype.trigger=function(name,val){var binding,_j,_len1,_ref2,_results;if(this.bindings[name]!=null){_ref2=this.bindings[name];_results=[];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){binding=_ref2[_j];_results.push(binding.call(this,val));}\nreturn _results;}};Events.prototype.on=function(name,fn){var _base;if((_base=this.bindings)[name]==null){_base[name]=[];}\nreturn this.bindings[name].push(fn);};return Events;})();_XMLHttpRequest=window.XMLHttpRequest;_XDomainRequest=window.XDomainRequest;_WebSocket=window.WebSocket;extendNative=function(to,from){var e,key,val,_results;_results=[];for(key in from.prototype){try{val=from.prototype[key];if((to[key]==null)&&typeof val!=='function'){_results.push(to[key]=val);}else{_results.push(void 0);}}catch(_error){e=_error;}}\nreturn _results;};ignoreStack=[];Pace.ignore=function(){var args,fn,ret;fn=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];ignoreStack.unshift('ignore');ret=fn.apply(null,args);ignoreStack.shift();return ret;};Pace.track=function(){var args,fn,ret;fn=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];ignoreStack.unshift('track');ret=fn.apply(null,args);ignoreStack.shift();return ret;};shouldTrack=function(method){var _ref2;if(method==null){method='GET';}\nif(ignoreStack[0]==='track'){return'force';}\nif(!ignoreStack.length&&options.ajax){if(method==='socket'&&options.ajax.trackWebSockets){return true;}else if(_ref2=method.toUpperCase(),__indexOf.call(options.ajax.trackMethods,_ref2)>=0){return true;}}\nreturn false;};RequestIntercept=(function(_super){__extends(RequestIntercept,_super);function RequestIntercept(){var monitorXHR,_this=this;RequestIntercept.__super__.constructor.apply(this,arguments);monitorXHR=function(req){var _open;_open=req.open;return req.open=function(type,url,async){if(shouldTrack(type)){_this.trigger('request',{type:type,url:url,request:req});}\nreturn _open.apply(req,arguments);};};window.XMLHttpRequest=function(flags){var req;req=new _XMLHttpRequest(flags);monitorXHR(req);return req;};extendNative(window.XMLHttpRequest,_XMLHttpRequest);if(_XDomainRequest!=null){window.XDomainRequest=function(){var req;req=new _XDomainRequest;monitorXHR(req);return req;};extendNative(window.XDomainRequest,_XDomainRequest);}\nif((_WebSocket!=null)&&options.ajax.trackWebSockets){window.WebSocket=function(url,protocols){var req;req=new _WebSocket(url,protocols);if(shouldTrack('socket')){_this.trigger('request',{type:'socket',url:url,protocols:protocols,request:req});}\nreturn req;};extendNative(window.WebSocket,_WebSocket);}}\nreturn RequestIntercept;})(Events);_intercept=null;getIntercept=function(){if(_intercept==null){_intercept=new RequestIntercept;}\nreturn _intercept;};getIntercept().on('request',function(_arg){var after,args,request,type;type=_arg.type,request=_arg.request;if(!Pace.running&&(options.restartOnRequestAfter!==false||shouldTrack(type)==='force')){args=arguments;after=options.restartOnRequestAfter||0;if(typeof after==='boolean'){after=0;}\nreturn setTimeout(function(){var stillActive,_j,_len1,_ref2,_ref3,_results;if(type==='socket'){stillActive=request.readyState<2;}else{stillActive=(0<(_ref2=request.readyState)&&_ref2<4);}\nif(stillActive){Pace.restart();_ref3=Pace.sources;_results=[];for(_j=0,_len1=_ref3.length;_j<_len1;_j++){source=_ref3[_j];if(source instanceof AjaxMonitor){source.watch.apply(source,args);break;}else{_results.push(void 0);}}\nreturn _results;}},after);}});AjaxMonitor=(function(){function AjaxMonitor(){var _this=this;this.elements=[];getIntercept().on('request',function(){return _this.watch.apply(_this,arguments);});}\nAjaxMonitor.prototype.watch=function(_arg){var request,tracker,type;type=_arg.type,request=_arg.request;if(type==='socket'){tracker=new SocketRequestTracker(request);}else{tracker=new XHRRequestTracker(request);}\nreturn this.elements.push(tracker);};return AjaxMonitor;})();XHRRequestTracker=(function(){function XHRRequestTracker(request){var event,size,_j,_len1,_onreadystatechange,_ref2,_this=this;this.progress=0;if(window.ProgressEvent!=null){size=null;request.addEventListener('progress',function(evt){if(evt.lengthComputable){return _this.progress=100*evt.loaded/evt.total;}else{return _this.progress=_this.progress+(100- _this.progress)/2;}});_ref2=['load','abort','timeout','error'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){event=_ref2[_j];request.addEventListener(event,function(){return _this.progress=100;});}}else{_onreadystatechange=request.onreadystatechange;request.onreadystatechange=function(){var _ref3;if((_ref3=request.readyState)===0||_ref3===4){_this.progress=100;}else if(request.readyState===3){_this.progress=50;}\nreturn typeof _onreadystatechange===\"function\"?_onreadystatechange.apply(null,arguments):void 0;};}}\nreturn XHRRequestTracker;})();SocketRequestTracker=(function(){function SocketRequestTracker(request){var event,_j,_len1,_ref2,_this=this;this.progress=0;_ref2=['error','open'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){event=_ref2[_j];request.addEventListener(event,function(){return _this.progress=100;});}}\nreturn SocketRequestTracker;})();ElementMonitor=(function(){function ElementMonitor(options){var selector,_j,_len1,_ref2;if(options==null){options={};}\nthis.elements=[];if(options.selectors==null){options.selectors=[];}\n_ref2=options.selectors;for(_j=0,_len1=_ref2.length;_j<_len1;_j++){selector=_ref2[_j];this.elements.push(new ElementTracker(selector));}}\nreturn ElementMonitor;})();ElementTracker=(function(){function ElementTracker(selector){this.selector=selector;this.progress=0;this.check();}\nElementTracker.prototype.check=function(){var _this=this;if(document.querySelector(this.selector)){return this.done();}else{return setTimeout((function(){return _this.check();}),options.elements.checkInterval);}};ElementTracker.prototype.done=function(){return this.progress=100;};return ElementTracker;})();DocumentMonitor=(function(){DocumentMonitor.prototype.states={loading:0,interactive:50,complete:100};function DocumentMonitor(){var _onreadystatechange,_ref2,_this=this;this.progress=(_ref2=this.states[document.readyState])!=null?_ref2:100;_onreadystatechange=document.onreadystatechange;document.onreadystatechange=function(){if(_this.states[document.readyState]!=null){_this.progress=_this.states[document.readyState];}\nreturn typeof _onreadystatechange===\"function\"?_onreadystatechange.apply(null,arguments):void 0;};}\nreturn DocumentMonitor;})();EventLagMonitor=(function(){function EventLagMonitor(){var avg,interval,last,points,samples,_this=this;this.progress=0;avg=0;samples=[];points=0;last=now();interval=setInterval(function(){var diff;diff=now()- last- 50;last=now();samples.push(diff);if(samples.length>options.eventLag.sampleCount){samples.shift();}\navg=avgAmplitude(samples);if(++points>=options.eventLag.minSamples&&avg<options.eventLag.lagThreshold){_this.progress=100;return clearInterval(interval);}else{return _this.progress=100*(3/(avg+ 3));}},50);}\nreturn EventLagMonitor;})();Scaler=(function(){function Scaler(source){this.source=source;this.last=this.sinceLastUpdate=0;this.rate=options.initialRate;this.catchup=0;this.progress=this.lastProgress=0;if(this.source!=null){this.progress=result(this.source,'progress');}}\nScaler.prototype.tick=function(frameTime,val){var scaling;if(val==null){val=result(this.source,'progress');}\nif(val>=100){this.done=true;}\nif(val===this.last){this.sinceLastUpdate+=frameTime;}else{if(this.sinceLastUpdate){this.rate=(val- this.last)/this.sinceLastUpdate;}\nthis.catchup=(val- this.progress)/options.catchupTime;this.sinceLastUpdate=0;this.last=val;}\nif(val>this.progress){this.progress+=this.catchup*frameTime;}\nscaling=1- Math.pow(this.progress/100,options.easeFactor);this.progress+=scaling*this.rate*frameTime;this.progress=Math.min(this.lastProgress+ options.maxProgressPerFrame,this.progress);this.progress=Math.max(0,this.progress);this.progress=Math.min(100,this.progress);this.lastProgress=this.progress;return this.progress;};return Scaler;})();sources=null;scalers=null;bar=null;uniScaler=null;animation=null;cancelAnimation=null;Pace.running=false;handlePushState=function(){if(options.restartOnPushState){return Pace.restart();}};if(window.history.pushState!=null){_pushState=window.history.pushState;window.history.pushState=function(){handlePushState();return _pushState.apply(window.history,arguments);};}\nif(window.history.replaceState!=null){_replaceState=window.history.replaceState;window.history.replaceState=function(){handlePushState();return _replaceState.apply(window.history,arguments);};}\nSOURCE_KEYS={ajax:AjaxMonitor,elements:ElementMonitor,document:DocumentMonitor,eventLag:EventLagMonitor};(init=function(){var type,_j,_k,_len1,_len2,_ref2,_ref3,_ref4;Pace.sources=sources=[];_ref2=['ajax','elements','document','eventLag'];for(_j=0,_len1=_ref2.length;_j<_len1;_j++){type=_ref2[_j];if(options[type]!==false){sources.push(new SOURCE_KEYS[type](options[type]));}}\n_ref4=(_ref3=options.extraSources)!=null?_ref3:[];for(_k=0,_len2=_ref4.length;_k<_len2;_k++){source=_ref4[_k];sources.push(new source(options));}\nPace.bar=bar=new Bar;scalers=[];return uniScaler=new Scaler;})();Pace.stop=function(){Pace.trigger('stop');Pace.running=false;bar.destroy();cancelAnimation=true;if(animation!=null){if(typeof cancelAnimationFrame===\"function\"){cancelAnimationFrame(animation);}\nanimation=null;}\nreturn init();};Pace.restart=function(){Pace.trigger('restart');Pace.stop();return Pace.start();};Pace.go=function(){Pace.running=true;bar.render();cancelAnimation=false;return animation=runAnimation(function(frameTime,enqueueNextFrame){var avg,count,done,element,elements,i,j,remaining,scaler,scalerList,start,sum,_j,_k,_len1,_len2,_ref2;remaining=100- bar.progress;count=sum=0;done=true;for(i=_j=0,_len1=sources.length;_j<_len1;i=++_j){source=sources[i];scalerList=scalers[i]!=null?scalers[i]:scalers[i]=[];elements=(_ref2=source.elements)!=null?_ref2:[source];for(j=_k=0,_len2=elements.length;_k<_len2;j=++_k){element=elements[j];scaler=scalerList[j]!=null?scalerList[j]:scalerList[j]=new Scaler(element);done&=scaler.done;if(scaler.done){continue;}\ncount++;sum+=scaler.tick(frameTime);}}\navg=sum/count;bar.update(uniScaler.tick(frameTime,avg));start=now();if(bar.done()||done||cancelAnimation){bar.update(100);Pace.trigger('done');return setTimeout(function(){bar.finish();Pace.running=false;return Pace.trigger('hide');},Math.max(options.ghostTime,Math.min(options.minTime,now()- start)));}else{return enqueueNextFrame();}});};Pace.start=function(_options){extend(options,_options);Pace.running=true;try{bar.render();}catch(_error){NoTargetError=_error;}\nif(!document.querySelector('.pace')){return setTimeout(Pace.start,50);}else{Pace.trigger('start');return Pace.go();}};if(typeof define==='function'&&define.amd){define(function(){return Pace;});}else if(typeof exports==='object'){module.exports=Pace;}else{if(options.startOnPageLoad){Pace.start();}}}).call(this);\n\n/**\n* jquery.matchHeight-min.js v0.5.1\n* http://brm.io/jquery-match-height/\n* License: MIT\n*/\n(function(b){b.fn.matchHeight=function(a){if(1>=this.length)return this;a=\"undefined\"!==typeof a?a:!0;b.fn.matchHeight._groups.push({elements:this,byRow:a});b.fn.matchHeight._apply(this,a);return this};b.fn.matchHeight._apply=function(a,d){var c=b(a),e=[c];d&&(c.css({display:\"block\",\"padding-top\":\"0\",\"padding-bottom\":\"0\",\"border-top\":\"0\",\"border-bottom\":\"0\",height:\"100px\"}),e=k(c),c.css({display:\"\",\"padding-top\":\"\",\"padding-bottom\":\"\",\"border-top\":\"\",\"border-bottom\":\"\",height:\"\"}));b.each(e,function(a,\nc){var d=b(c),e=0;d.each(function(){var a=b(this);a.css({display:\"block\",height:\"\"});a.outerHeight(!1)>e&&(e=a.outerHeight(!1))});d.each(function(){var a=b(this),c=0;\"border-box\"!==a.css(\"box-sizing\")&&(c+=f(a.css(\"border-top-width\"))+f(a.css(\"border-bottom-width\")),c+=f(a.css(\"padding-top\"))+f(a.css(\"padding-bottom\")));a.css(\"height\",e-c)})});return this};b.fn.matchHeight._applyDataApi=function(){var a={};b(\"[data-match-height], [data-mh]\").each(function(){var d=b(this),c=d.attr(\"data-match-height\");\na[c]=c in a?a[c].add(d):d});b.each(a,function(){this.matchHeight(!0)})};b.fn.matchHeight._groups=[];var g=-1;b.fn.matchHeight._update=function(a){if(a&&\"resize\"===a.type){a=b(window).width();if(a===g)return;g=a}b.each(b.fn.matchHeight._groups,function(){b.fn.matchHeight._apply(this.elements,this.byRow)})};b(b.fn.matchHeight._applyDataApi);b(window).bind(\"load resize orientationchange\",b.fn.matchHeight._update);var k=function(a){var d=null,c=[];b(a).each(function(){var a=b(this),g=a.offset().top-f(a.css(\"margin-top\")),\nh=0<c.length?c[c.length-1]:null;null===h?c.push(a):1>=Math.floor(Math.abs(d-g))?c[c.length-1]=h.add(a):c.push(a);d=g});return c},f=function(a){return parseFloat(a)||0}})(jQuery);\n\n/*\n* jquery.gmap\n* Version 2.1.5 2013-10-30\n* @requires jQuery >= 1.6.1 or later\n*\n* Homepage: http://labs.mario.ec/jquery-gmap/\n* Author: Mario Estrada <me@mario.ec>\n* License: MIT\n*/\n(function(e){e.fn.gMap=function(t,n){switch(t){case\"addMarker\":return e(this).trigger(\"gMap.addMarker\",[n.latitude,n.longitude,n.content,n.icon,n.popup]);case\"centerAt\":return e(this).trigger(\"gMap.centerAt\",[n.latitude,n.longitude,n.zoom]);case\"clearMarkers\":return e(this).trigger(\"gMap.clearMarkers\")}var r=e.extend({},e.fn.gMap.defaults,t);return this.each(function(){var t=new google.maps.Map(this);e(this).data(\"gMap.reference\",t);var n=new google.maps.Geocoder;if(r.address){n.geocode({address:r.address},function(e,n){if(e&&e.length){t.setCenter(e[0].geometry.location)}})}else{if(r.latitude&&r.longitude){t.setCenter(new google.maps.LatLng(r.latitude,r.longitude))}else{if(e.isArray(r.markers)&&r.markers.length>0){if(r.markers[0].address){n.geocode({address:r.markers[0].address},function(e,n){if(e&&e.length>0){t.setCenter(e[0].geometry.location)}})}else{t.setCenter(new google.maps.LatLng(r.markers[0].latitude,r.markers[0].longitude))}}else{t.setCenter(new google.maps.LatLng(34.885931,9.84375))}}}t.setZoom(r.zoom);t.setMapTypeId(google.maps.MapTypeId[r.maptype]);var i={scrollwheel:r.scrollwheel,disableDoubleClickZoom:!r.doubleclickzoom,styles:r.styles};if(r.controls===false){e.extend(i,{disableDefaultUI:true})}else if(r.controls.length!==0){e.extend(i,r.controls,{disableDefaultUI:true})}t.setOptions(i);var s=new google.maps.Marker;var o;var u;o=new google.maps.MarkerImage(r.icon.image);o.size=new google.maps.Size(r.icon.iconsize[0],r.icon.iconsize[1]);o.anchor=new google.maps.Point(r.icon.iconanchor[0],r.icon.iconanchor[1]);s.setIcon(o);if(r.icon.shadow){u=new google.maps.MarkerImage(r.icon.shadow);u.size=new google.maps.Size(r.icon.shadowsize[0],r.icon.shadowsize[1]);u.anchor=new google.maps.Point(r.icon.shadowanchor[0],r.icon.shadowanchor[1]);s.setShadow(u)}e(this).bind(\"gMap.centerAt\",function(e,n,r,i){if(i){t.setZoom(i)}t.panTo(new google.maps.LatLng(parseFloat(n),parseFloat(r)))});var a=[];e(this).bind(\"gMap.clearMarkers\",function(){while(a[0]){a.pop().setMap(null)}});var f;e(this).bind(\"gMap.addMarker\",function(e,n,i,o,u,l){var c;var h;var p=new google.maps.LatLng(parseFloat(n),parseFloat(i));var d=new google.maps.Marker({position:p});if(u){c=new google.maps.MarkerImage(u.image);c.size=new google.maps.Size(u.iconsize[0],u.iconsize[1]);c.anchor=new google.maps.Point(u.iconanchor[0],u.iconanchor[1]);d.setIcon(c);if(u.shadow){h=new google.maps.MarkerImage(u.shadow);h.size=new google.maps.Size(u.shadowsize[0],u.shadowsize[1]);h.anchor=new google.maps.Point(u.shadowanchor[0],u.shadowanchor[1]);s.setShadow(h)}}else{d.setIcon(s.getIcon());d.setShadow(s.getShadow())}if(o){if(o===\"_latlng\"){o=n+\", \"+i}var v=new google.maps.InfoWindow({content:r.html_prepend+o+r.html_append});google.maps.event.addListener(d,\"click\",function(){if(f){f.close()}v.open(t,d);f=v});if(l){google.maps.event.addListenerOnce(t,\"tilesloaded\",function(){v.open(t,d)})}}d.setMap(t);a.push(d)});var l;var c=this;var h=function(t){return function(n,r){if(n&&n.length>0){e(c).trigger(\"gMap.addMarker\",[n[0].geometry.location.lat(),n[0].geometry.location.lng(),t.html,t.icon,t.popup])}}};for(var p=0;p<r.markers.length;p++){l=r.markers[p];if(l.address){if(l.html===\"_address\"){l.html=l.address}n.geocode({address:l.address},h(l))}else{e(this).trigger(\"gMap.addMarker\",[l.latitude,l.longitude,l.html,l.icon,l.popup])}}})};e.fn.gMap.defaults={address:\"\",latitude:0,longitude:0,zoom:1,markers:[],controls:[],scrollwheel:false,doubleclickzoom:true,maptype:\"ROADMAP\",html_prepend:'<div class=\"gmap_marker\">',html_append:\"</div>\",icon:{image:\"http://www.google.com/mapfiles/marker.png\",shadow:\"http://www.google.com/mapfiles/shadow50.png\",iconsize:[20,34],shadowsize:[37,34],iconanchor:[9,34],shadowanchor:[6,34]}}})(jQuery);\n\n\n\njQuery.easing[\"jswing\"]=jQuery.easing[\"swing\"];jQuery.extend(jQuery.easing,{def:\"easeOutQuad\",swing:function(e,t,n,r,i){return jQuery.easing[jQuery.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t+n;return-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t+n;return r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t+n;return-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){if((t/=i/2)<1)return r/2*t*t*t*t*t+n;return r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){if(t==0)return n;if(t==i)return n+r;if((t/=i/2)<1)return r/2*Math.pow(2,10*(t-1))+n;return r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){if((t/=i/2)<1)return-r/2*(Math.sqrt(1-t*t)-1)+n;return r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i)==1)return n+r;if(!o)o=i*.3;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i)==1)return n+r;if(!o)o=i*.3;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158;var o=0;var u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;if(!o)o=i*.3*1.5;if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);if(t<1)return-.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n;return u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){if(s==undefined)s=1.70158;return r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){if(s==undefined)s=1.70158;return r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){if(s==undefined)s=1.70158;if((t/=i/2)<1)return r/2*t*t*(((s*=1.525)+1)*t-s)+n;return r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){if((t/=i)<1/2.75){return r*7.5625*t*t+n}else if(t<2/2.75){return r*(7.5625*(t-=1.5/2.75)*t+.75)+n}else if(t<2.5/2.75){return r*(7.5625*(t-=2.25/2.75)*t+.9375)+n}else{return r*(7.5625*(t-=2.625/2.75)*t+.984375)+n}},easeInOutBounce:function(e,t,n,r,i){if(t<i/2)return jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n;return jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}});\n\n/*! Backstretch - v2.0.4 - 2013-06-19\n* http://srobbin.com/jquery-plugins/backstretch/\n* Copyright (c) 2013 Scott Robbin; Licensed MIT */\n(function(a,d,p){a.fn.backstretch=function(c,b){(c===p||0===c.length)&&a.error(\"No images were supplied for Backstretch\");0===a(d).scrollTop()&&d.scrollTo(0,0);return this.each(function(){var d=a(this),g=d.data(\"backstretch\");if(g){if(\"string\"==typeof c&&\"function\"==typeof g[c]){g[c](b);return}b=a.extend(g.options,b);g.destroy(!0)}g=new q(this,c,b);d.data(\"backstretch\",g)})};a.backstretch=function(c,b){return a(\"body\").backstretch(c,b).data(\"backstretch\")};a.expr[\":\"].backstretch=function(c){return a(c).data(\"backstretch\")!==p};a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5E3,fade:0};var r={left:0,top:0,overflow:\"hidden\",margin:0,padding:0,height:\"100%\",width:\"100%\",zIndex:-999999},s={position:\"absolute\",display:\"none\",margin:0,padding:0,border:\"none\",width:\"auto\",height:\"auto\",maxHeight:\"none\",maxWidth:\"none\",zIndex:-999999},q=function(c,b,e){this.options=a.extend({},a.fn.backstretch.defaults,e||{});this.images=a.isArray(b)?b:[b];a.each(this.images,function(){a(\"<img />\")[0].src=this});this.isBody=c===document.body;this.$container=a(c);this.$root=this.isBody?l?a(d):a(document):this.$container;c=this.$container.children(\".backstretch\").first();this.$wrap=c.length?c:a('<div class=\"backstretch\"></div>').css(r).appendTo(this.$container);this.isBody||(c=this.$container.css(\"position\"),b=this.$container.css(\"zIndex\"),this.$container.css({position:\"static\"===c?\"relative\":c,zIndex:\"auto\"===b?0:b,background:\"none\"}),this.$wrap.css({zIndex:-999998}));this.$wrap.css({position:this.isBody&&l?\"fixed\":\"absolute\"});this.index=0;this.show(this.index);a(d).on(\"resize.backstretch\",a.proxy(this.resize,this)).on(\"orientationchange.backstretch\",a.proxy(function(){this.isBody&&0===d.pageYOffset&&(d.scrollTo(0,1),this.resize())},this))};q.prototype={resize:function(){try{var a={left:0,top:0},b=this.isBody?this.$root.width():this.$root.innerWidth(),e=b,g=this.isBody?d.innerHeight?d.innerHeight:this.$root.height():this.$root.innerHeight(),j=e/this.$img.data(\"ratio\"),f;j>=g?(f=(j-g)/2,this.options.centeredY&&(a.top=\"-\"+f+\"px\")):(j=g,e=j*this.$img.data(\"ratio\"),f=(e-b)/2,this.options.centeredX&&(a.left=\"-\"+f+\"px\"));this.$wrap.css({width:b,height:g}).find(\"img:not(.deleteable)\").css({width:e,height:j}).css(a)}catch(h){}return this},show:function(c){if(!(Math.abs(c)>this.images.length-1)){var b=this,e=b.$wrap.find(\"img\").addClass(\"deleteable\"),d={relatedTarget:b.$container[0]};b.$container.trigger(a.Event(\"backstretch.before\",d),[b,c]);this.index=c;clearInterval(b.interval);b.$img=a(\"<img />\").css(s).bind(\"load\",function(f){var h=this.width||a(f.target).width();f=this.height||a(f.target).height();a(this).data(\"ratio\",h/f);a(this).fadeIn(b.options.speed||b.options.fade,function(){e.remove();b.paused||b.cycle();a([\"after\",\"show\"]).each(function(){b.$container.trigger(a.Event(\"backstretch.\"+this,d),[b,c])})});b.resize()}).appendTo(b.$wrap);b.$img.attr(\"src\",b.images[c]);return b}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){this.paused=!0;return this},resume:function(){this.paused=!1;this.next();return this},cycle:function(){1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration));return this},destroy:function(c){a(d).off(\"resize.backstretch orientationchange.backstretch\");clearInterval(this.interval);c||this.$wrap.remove();this.$container.removeData(\"backstretch\")}};var l,f=navigator.userAgent,m=navigator.platform,e=f.match(/AppleWebKit\\/([0-9]+)/),e=!!e&&e[1],h=f.match(/Fennec\\/([0-9]+)/),h=!!h&&h[1],n=f.match(/Opera Mobi\\/([0-9]+)/),t=!!n&&n[1],k=f.match(/MSIE ([0-9]+)/),k=!!k&&k[1];l=!((-1<m.indexOf(\"iPhone\")||-1<m.indexOf(\"iPad\")||-1<m.indexOf(\"iPod\"))&&e&&534>e||d.operamini&&\"[object OperaMini]\"==={}.toString.call(d.operamini)||n&&7458>t||-1<f.indexOf(\"Android\")&&e&&533>e||h&&6>h||\"palmGetResource\"in d&&e&&534>e||-1<f.indexOf(\"MeeGo\")&&-1<f.indexOf(\"NokiaBrowser/8.5.0\")||k&&6>=k)})(jQuery,window);\n\n/*global jQuery */\n/*!\n* FlexVerticalCenter.js 1.0\n*\n* Copyright 2011, Paul Sprangers http://paulsprangers.com\n* Released under the WTFPL license\n* http://sam.zoy.org/wtfpl/\n*\n* Date: Fri Oct 28 19:12:00 2011 +0100\n*/\n(function( $ ){\n\n  $.fn.flexVerticalCenter = function( options ) {\n    var settings = $.extend({\n      cssAttribute:   'margin-top', // the attribute to apply the calculated value to\n      verticalOffset: 0,            // the number of pixels to offset the vertical alignment by\n      parentSelector: null,         // a selector representing the parent to vertically center this element within\n      debounceTimeout: 25,          // a default debounce timeout in milliseconds\n      deferTilWindowLoad: false     // if true, nothing will take effect until the $(window).load event\n    }, options || {});\n\n    return this.each(function(){\n      var $this   = $(this); // store the object\n      var debounce;\n\n      // recalculate the distance to the top of the element to keep it centered\n      var resizer = function () {\n\n        var parentHeight = (settings.parentSelector && $this.parents(settings.parentSelector).length) ?\n          $this.parents(settings.parentSelector).first().height() : $this.parent().height();\n\n        $this.css(\n          settings.cssAttribute, ( ( ( parentHeight - $this.height() ) / 2 ) + parseInt(settings.verticalOffset) )\n        );\n        if (settings.complete !== undefined) {\n         settings.complete();\n        }\n      };\n\n      // Call on resize. Opera debounces their resize by default.\n      $(window).resize(function () {\n          clearTimeout(debounce);\n          debounce = setTimeout(resizer, settings.debounceTimeout);\n      });\n\n      if (!settings.deferTilWindowLoad) {\n        // call it once, immediately.\n        resizer();\n      }\n\n      // Call again to set after window (frames, images, etc) loads.\n      $(window).load(function () {\n          resizer();\n      });\n\n    });\n\n  };\n\n})( jQuery );\n\n/*jshint browser:true */\n/*!\n* FitVids 1.1\n*\n* Copyright 2013, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com\n* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/\n* Released under the WTFPL license - http://sam.zoy.org/wtfpl/\n*\n*/\n\n;(function( $ ){\n\n  'use strict';\n\n  $.fn.fitVids = function( options ) {\n    var settings = {\n      customSelector: null,\n      ignore: null\n    };\n\n    if(!document.getElementById('fit-vids-style')) {\n      // appendStyles: https://github.com/toddmotto/fluidvids/blob/master/dist/fluidvids.js\n      var head = document.head || document.getElementsByTagName('head')[0];\n      var css = '.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}';\n      var div = document.createElement(\"div\");\n      div.innerHTML = '<p>x</p><style id=\"fit-vids-style\">' + css + '</style>';\n      head.appendChild(div.childNodes[1]);\n    }\n\n    if ( options ) {\n      $.extend( settings, options );\n    }\n\n    return this.each(function(){\n      var selectors = [\n        'iframe[src*=\"player.vimeo.com\"]',\n        'iframe[src*=\"youtube.com\"]',\n        'iframe[src*=\"youtube-nocookie.com\"]',\n        'iframe[src*=\"kickstarter.com\"][src*=\"video.html\"]',\n        'object',\n        'embed'\n      ];\n\n      if (settings.customSelector) {\n        selectors.push(settings.customSelector);\n      }\n\n      var ignoreList = '.fitvidsignore';\n\n      if(settings.ignore) {\n        ignoreList = ignoreList + ', ' + settings.ignore;\n      }\n\n      var $allVideos = $(this).find(selectors.join(','));\n      $allVideos = $allVideos.not('object object'); // SwfObj conflict patch\n      $allVideos = $allVideos.not(ignoreList); // Disable FitVids on this video.\n\n      $allVideos.each(function(){\n        var $this = $(this);\n        if($this.parents(ignoreList).length > 0) {\n          return; // Disable FitVids on this video.\n        }\n        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }\n        if ((!$this.css('height') && !$this.css('width')) && (isNaN($this.attr('height')) || isNaN($this.attr('width'))))\n        {\n          $this.attr('height', 9);\n          $this.attr('width', 16);\n        }\n        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),\n            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),\n            aspectRatio = height / width;\n        if(!$this.attr('name')){\n          var videoName = 'fitvid' + $.fn.fitVids._count;\n          $this.attr('name', videoName);\n          $.fn.fitVids._count++;\n        }\n        $this.wrap('<div class=\"fluid-width-video-wrapper\"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+'%');\n        $this.removeAttr('height').removeAttr('width');\n      });\n    });\n  };\n  \n  // Internal counter for unique video names.\n  $.fn.fitVids._count = 0;\n  \n// Works with either jQuery or Zepto\n})( window.jQuery || window.Zepto );\n\n/*!\n * Isotope PACKAGED v2.2.0\n *\n * Licensed GPLv3 for open source use\n * or Isotope Commercial License for commercial use\n *\n * http://isotope.metafizzy.co\n * Copyright 2015 Metafizzy\n */\n\n!function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if(\"string\"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&\"_\"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f(\"no such method '\"+e+\"' for \"+b+\" instance\");else f(\"cannot call methods on \"+b+\" prior to initialization; attempted to call '\"+e+\"'\")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f=\"undefined\"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;\"function\"==typeof define&&define.amd?define(\"jquery-bridget/jquery.bridget\",[\"jquery\"],c):c(\"object\"==typeof exports?require(\"jquery\"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent(\"on\"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent(\"on\"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};\"function\"==typeof define&&define.amd?define(\"eventie/eventie\",f):\"object\"==typeof exports?module.exports=f:a.eventie=f}(window),function(){\"use strict\";function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f=\"object\"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c(\"addListener\"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c(\"addOnceListener\"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c(\"removeListener\"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if(\"object\"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&(\"function\"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if(\"string\"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c(\"removeEvent\"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c(\"emitEvent\"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty(\"_onceReturnValue\")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},\"function\"==typeof define&&define.amd?define(\"eventEmitter/EventEmitter\",[],function(){return a}):\"object\"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if(\"string\"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,\"string\"==typeof d[b])return b}}var c=\"Webkit Moz ms Ms O\".split(\" \"),d=document.documentElement.style;\"function\"==typeof define&&define.amd?define(\"get-style-property/get-style-property\",[],function(){return b}):\"object\"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a,b){function c(a){var b=parseFloat(a),c=-1===a.indexOf(\"%\")&&!isNaN(b);return c&&b}function d(){}function e(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=h.length;c>b;b++){var d=h[b];a[d]=0}return a}function f(b){function d(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||g(\"Style returned \"+c+\". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1\"),c}}(),k=b(\"boxSizing\")){var e=document.createElement(\"div\");e.style.width=\"200px\",e.style.padding=\"1px 2px 3px 4px\",e.style.borderStyle=\"solid\",e.style.borderWidth=\"1px 2px 3px 4px\",e.style[k]=\"border-box\";var f=document.body||document.documentElement;f.appendChild(e);var h=j(e);l=200===c(h.width),f.removeChild(e)}}}function f(a){if(d(),\"string\"==typeof a&&(a=document.querySelector(a)),a&&\"object\"==typeof a&&a.nodeType){var b=j(a);if(\"none\"===b.display)return e();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var g=f.isBorderBox=!(!k||!b[k]||\"border-box\"!==b[k]),m=0,n=h.length;n>m;m++){var o=h[m],p=b[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=g&&l,y=c(b.width);y!==!1&&(f.width=y+(x?0:r+v));var z=c(b.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf(\"%\"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return f}var g=\"undefined\"==typeof console?d:function(a){console.error(a)},h=[\"paddingLeft\",\"paddingRight\",\"paddingTop\",\"paddingBottom\",\"marginLeft\",\"marginRight\",\"marginTop\",\"marginBottom\",\"borderLeftWidth\",\"borderRightWidth\",\"borderTopWidth\",\"borderBottomWidth\"];\"function\"==typeof define&&define.amd?define(\"get-size/get-size\",[\"get-style-property/get-style-property\"],f):\"object\"==typeof exports?module.exports=f(require(\"desandro-get-style-property\")):a.getSize=f(a.getStyleProperty)}(window),function(a){function b(a){\"function\"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c=\"readystatechange\"===a.type&&\"complete\"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return\"complete\"===f.readyState?d():(e.bind(f,\"DOMContentLoaded\",c),e.bind(f,\"readystatechange\",c),e.bind(a,\"load\",c)),b}var f=a.document,g=[];b.isReady=!1,\"function\"==typeof define&&define.amd?define(\"doc-ready/doc-ready\",[\"eventie/eventie\"],e):\"object\"==typeof exports?module.exports=e(require(\"eventie\")):a.docReady=e(a.eventie)}(window),function(a){\"use strict\";function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matches)return\"matches\";if(a.matchesSelector)return\"matchesSelector\";for(var b=[\"webkit\",\"moz\",\"ms\",\"o\"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+\"MatchesSelector\";if(a[f])return f}}();if(g){var h=document.createElement(\"div\"),i=b(h,\"div\");f=i?b:e}else f=d;\"function\"==typeof define&&define.amd?define(\"matches-selector/matches-selector\",[],function(){return f}):\"object\"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"fizzy-ui-utils/utils\",[\"doc-ready/doc-ready\",\"matches-selector/matches-selector\"],function(c,d){return b(a,c,d)}):\"object\"==typeof exports?module.exports=b(a,require(\"doc-ready\"),require(\"desandro-matches-selector\")):a.fizzyUIUtils=b(a,a.docReady,a.matchesSelector)}(window,function(a,b,c){var d={};d.extend=function(a,b){for(var c in b)a[c]=b[c];return a},d.modulo=function(a,b){return(a%b+b)%b};var e=Object.prototype.toString;d.isArray=function(a){return\"[object Array]\"==e.call(a)},d.makeArray=function(a){var b=[];if(d.isArray(a))b=a;else if(a&&\"number\"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b},d.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},d.removeFrom=function(a,b){var c=d.indexOf(a,b);-1!=c&&a.splice(c,1)},d.isElement=\"function\"==typeof HTMLElement||\"object\"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&\"object\"==typeof a&&1==a.nodeType&&\"string\"==typeof a.nodeName},d.setText=function(){function a(a,c){b=b||(void 0!==document.documentElement.textContent?\"textContent\":\"innerText\"),a[b]=c}var b;return a}(),d.getParent=function(a,b){for(;a!=document.body;)if(a=a.parentNode,c(a,b))return a},d.getQueryElement=function(a){return\"string\"==typeof a?document.querySelector(a):a},d.handleEvent=function(a){var b=\"on\"+a.type;this[b]&&this[b](a)},d.filterFindElements=function(a,b){a=d.makeArray(a);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f];if(d.isElement(h))if(b){c(h,b)&&e.push(h);for(var i=h.querySelectorAll(b),j=0,k=i.length;k>j;j++)e.push(i[j])}else e.push(h)}return e},d.debounceMethod=function(a,b,c){var d=a.prototype[b],e=b+\"Timeout\";a.prototype[b]=function(){var a=this[e];a&&clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c||100)}},d.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+\"-\"+c}).toLowerCase()};var f=a.console;return d.htmlInit=function(c,e){b(function(){for(var b=d.toDashed(e),g=document.querySelectorAll(\".js-\"+b),h=\"data-\"+b+\"-options\",i=0,j=g.length;j>i;i++){var k,l=g[i],m=l.getAttribute(h);try{k=m&&JSON.parse(m)}catch(n){f&&f.error(\"Error parsing \"+h+\" on \"+l.nodeName.toLowerCase()+(l.id?\"#\"+l.id:\"\")+\": \"+n);continue}var o=new c(l,k),p=a.jQuery;p&&p.data(l,e,o)}})},d}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"outlayer/item\",[\"eventEmitter/EventEmitter\",\"get-size/get-size\",\"get-style-property/get-style-property\",\"fizzy-ui-utils/utils\"],function(c,d,e,f){return b(a,c,d,e,f)}):\"object\"==typeof exports?module.exports=b(a,require(\"wolfy87-eventemitter\"),require(\"get-size\"),require(\"desandro-get-style-property\"),require(\"fizzy-ui-utils\")):(a.Outlayer={},a.Outlayer.Item=b(a,a.EventEmitter,a.getSize,a.getStyleProperty,a.fizzyUIUtils))}(window,function(a,b,c,d,e){\"use strict\";function f(a){for(var b in a)return!1;return b=null,!0}function g(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}function h(a){return a.replace(/([A-Z])/g,function(a){return\"-\"+a.toLowerCase()})}var i=a.getComputedStyle,j=i?function(a){return i(a,null)}:function(a){return a.currentStyle},k=d(\"transition\"),l=d(\"transform\"),m=k&&l,n=!!d(\"perspective\"),o={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"otransitionend\",transition:\"transitionend\"}[k],p=[\"transform\",\"transition\",\"transitionDuration\",\"transitionProperty\"],q=function(){for(var a={},b=0,c=p.length;c>b;b++){var e=p[b],f=d(e);f&&f!==e&&(a[e]=f)}return a}();e.extend(g.prototype,b.prototype),g.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:\"absolute\"})},g.prototype.handleEvent=function(a){var b=\"on\"+a.type;this[b]&&this[b](a)},g.prototype.getSize=function(){this.size=c(this.element)},g.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=q[c]||c;b[d]=a[c]}},g.prototype.getPosition=function(){var a=j(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=a[c?\"left\":\"right\"],f=a[d?\"top\":\"bottom\"],g=parseInt(e,10),h=parseInt(f,10),i=this.layout.size;g=-1!=e.indexOf(\"%\")?g/100*i.width:g,h=-1!=f.indexOf(\"%\")?h/100*i.height:h,g=isNaN(g)?0:g,h=isNaN(h)?0:h,g-=c?i.paddingLeft:i.paddingRight,h-=d?i.paddingTop:i.paddingBottom,this.position.x=g,this.position.y=h},g.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={},d=b.isOriginLeft?\"paddingLeft\":\"paddingRight\",e=b.isOriginLeft?\"left\":\"right\",f=b.isOriginLeft?\"right\":\"left\",g=this.position.x+a[d];c[e]=this.getXValue(g),c[f]=\"\";var h=b.isOriginTop?\"paddingTop\":\"paddingBottom\",i=b.isOriginTop?\"top\":\"bottom\",j=b.isOriginTop?\"bottom\":\"top\",k=this.position.y+a[h];c[i]=this.getYValue(k),c[j]=\"\",this.css(c),this.emitEvent(\"layout\",[this])},g.prototype.getXValue=function(a){var b=this.layout.options;return b.percentPosition&&!b.isHorizontal?a/this.layout.size.width*100+\"%\":a+\"px\"},g.prototype.getYValue=function(a){var b=this.layout.options;return b.percentPosition&&b.isHorizontal?a/this.layout.size.height*100+\"%\":a+\"px\"},g.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={};j.transform=this.getTranslate(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},g.prototype.getTranslate=function(a,b){var c=this.layout.options;return a=c.isOriginLeft?a:-a,b=c.isOriginTop?b:-b,a=this.getXValue(a),b=this.getYValue(b),n?\"translate3d(\"+a+\", \"+b+\", 0)\":\"translate(\"+a+\", \"+b+\")\"},g.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},g.prototype.moveTo=m?g.prototype._transitionTo:g.prototype.goTo,g.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},g.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},g.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var r=\"opacity,\"+h(q.transform||\"transform\");g.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:r,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(o,this,!1))},g.prototype.transition=g.prototype[k?\"_transition\":\"_nonTransition\"],g.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},g.prototype.onotransitionend=function(a){this.ontransitionend(a)};var s={\"-webkit-transform\":\"transform\",\"-moz-transform\":\"transform\",\"-o-transform\":\"transform\"};g.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=s[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],f(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]=\"\",delete b.clean[c]),c in b.onEnd){var d=b.onEnd[c];d.call(this),delete b.onEnd[c]}this.emitEvent(\"transitionEnd\",[this])}},g.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},g.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]=\"\";this.css(b)};var t={transitionProperty:\"\",transitionDuration:\"\"};return g.prototype.removeTransitionStyles=function(){this.css(t)},g.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:\"\"}),this.emitEvent(\"remove\",[this])},g.prototype.remove=function(){if(!k||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.once(\"transitionEnd\",function(){a.removeElem()}),this.hide()},g.prototype.reveal=function(){delete this.isHidden,this.css({display:\"\"});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty(\"visibleStyle\");b[c]=this.onRevealTransitionEnd,this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent(\"reveal\")},g.prototype.getHideRevealTransitionEndProperty=function(a){var b=this.layout.options[a];if(b.opacity)return\"opacity\";for(var c in b)return c},g.prototype.hide=function(){this.isHidden=!0,this.css({display:\"\"});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty(\"hiddenStyle\");b[c]=this.onHideTransitionEnd,this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:\"none\"}),this.emitEvent(\"hide\"))},g.prototype.destroy=function(){this.css({position:\"\",left:\"\",right:\"\",top:\"\",bottom:\"\",transition:\"\",transform:\"\"})},g}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"outlayer/outlayer\",[\"eventie/eventie\",\"eventEmitter/EventEmitter\",\"get-size/get-size\",\"fizzy-ui-utils/utils\",\"./item\"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):\"object\"==typeof exports?module.exports=b(a,require(\"eventie\"),require(\"wolfy87-eventemitter\"),require(\"get-size\"),require(\"fizzy-ui-utils\"),require(\"./item\")):a.Outlayer=b(a,a.eventie,a.EventEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(a,b,c,d,e,f){\"use strict\";function g(a,b){var c=e.getQueryElement(a);if(!c)return void(h&&h.error(\"Bad element for \"+this.constructor.namespace+\": \"+(c||a)));this.element=c,i&&(this.$element=i(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(b);var d=++k;this.element.outlayerGUID=d,l[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var h=a.console,i=a.jQuery,j=function(){},k=0,l={};return g.namespace=\"outlayer\",g.Item=f,g.defaults={containerStyle:{position:\"relative\"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:\"0.4s\",hiddenStyle:{opacity:0,transform:\"scale(0.001)\"},visibleStyle:{opacity:1,transform:\"scale(1)\"}},e.extend(g.prototype,c.prototype),g.prototype.option=function(a){e.extend(this.options,a)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},g.prototype._filterFindItemElements=function(a){return e.filterFindElements(a,this.options.itemSelector)},g.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=d(this.element)},g.prototype._getMeasurement=function(a,b){var c,f=this.options[a];f?(\"string\"==typeof f?c=this.element.querySelector(f):e.isElement(f)&&(c=f),this[a]=c?d(c)[b]:f):this[a]=0},g.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},g.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},g.prototype._layoutItems=function(a,b){if(this._emitCompleteOnItems(\"layout\",a),a&&a.length){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b||f.isLayoutInstant,c.push(g)}this._processLayoutQueue(c)}},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},g.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},g.prototype._getContainerSize=j,g.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?\"width\":\"height\"]=a+\"px\"}},g.prototype._emitCompleteOnItems=function(a,b){function c(){e.dispatchEvent(a+\"Complete\",null,[b])}function d(){g++,g===f&&c()}var e=this,f=b.length;if(!b||!f)return void c();for(var g=0,h=0,i=b.length;i>h;h++){var j=b[h];j.once(a,d)}},g.prototype.dispatchEvent=function(a,b,c){var d=b?[b].concat(c):c;if(this.emitEvent(a,d),i)if(this.$element=this.$element||i(this.element),b){var e=i.Event(b);e.type=a,this.$element.trigger(e,c)}else this.$element.trigger(a,c)},g.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},g.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},g.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},g.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e.removeFrom(this.stamps,d),this.unignore(d)}},g.prototype._find=function(a){return a?(\"string\"==typeof a&&(a=this.element.querySelectorAll(a)),a=e.makeArray(a)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},g.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},g.prototype._manageStamp=j,g.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,e=d(a),f={left:b.left-c.left-e.marginLeft,top:b.top-c.top-e.marginTop,right:c.right-b.right-e.marginRight,bottom:c.bottom-b.bottom-e.marginBottom};return f},g.prototype.handleEvent=function(a){var b=\"on\"+a.type;this[b]&&this[b](a)},g.prototype.bindResize=function(){this.isResizeBound||(b.bind(a,\"resize\",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&b.unbind(a,\"resize\",this),this.isResizeBound=!1},g.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},g.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},g.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},g.prototype.reveal=function(a){this._emitCompleteOnItems(\"reveal\",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.reveal()}},g.prototype.hide=function(a){this._emitCompleteOnItems(\"hide\",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.hide()}},g.prototype.revealItemElements=function(a){var b=this.getItems(a);this.reveal(b)},g.prototype.hideItemElements=function(a){var b=this.getItems(a);this.hide(b)},g.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},g.prototype.getItems=function(a){a=e.makeArray(a);for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c],g=this.getItem(f);g&&b.push(g)}return b},g.prototype.remove=function(a){var b=this.getItems(a);if(this._emitCompleteOnItems(\"remove\",b),b&&b.length)for(var c=0,d=b.length;d>c;c++){var f=b[c];f.remove(),e.removeFrom(this.items,f)}},g.prototype.destroy=function(){var a=this.element.style;a.height=\"\",a.position=\"\",a.width=\"\";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete l[e],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},g.data=function(a){a=e.getQueryElement(a);var b=a&&a.outlayerGUID;return b&&l[b]},g.create=function(a,b){function c(){g.apply(this,arguments)}return Object.create?c.prototype=Object.create(g.prototype):e.extend(c.prototype,g.prototype),c.prototype.constructor=c,c.defaults=e.extend({},g.defaults),e.extend(c.defaults,b),c.prototype.settings={},c.namespace=a,c.data=g.data,c.Item=function(){f.apply(this,arguments)},c.Item.prototype=new f,e.htmlInit(c,a),i&&i.bridget&&i.bridget(a,c),c},g.Item=f,g}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"isotope/js/item\",[\"outlayer/outlayer\"],b):\"object\"==typeof exports?module.exports=b(require(\"outlayer\")):(a.Isotope=a.Isotope||{},a.Isotope.Item=b(a.Outlayer))}(window,function(a){\"use strict\";function b(){a.Item.apply(this,arguments)}b.prototype=new a.Item,b.prototype._create=function(){this.id=this.layout.itemGUID++,a.Item.prototype._create.call(this),this.sortData={}},b.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData[\"original-order\"]=this.id,this.sortData.random=Math.random();var a=this.layout.options.getSortData,b=this.layout._sorters;for(var c in a){var d=b[c];this.sortData[c]=d(this.element,this)}}};var c=b.prototype.destroy;return b.prototype.destroy=function(){c.apply(this,arguments),this.css({display:\"\"})},b}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"isotope/js/layout-mode\",[\"get-size/get-size\",\"outlayer/outlayer\"],b):\"object\"==typeof exports?module.exports=b(require(\"get-size\"),require(\"outlayer\")):(a.Isotope=a.Isotope||{},a.Isotope.LayoutMode=b(a.getSize,a.Outlayer))}(window,function(a,b){\"use strict\";function c(a){this.isotope=a,a&&(this.options=a.options[this.namespace],this.element=a.element,this.items=a.filteredItems,this.size=a.size)}return function(){function a(a){return function(){return b.prototype[a].apply(this.isotope,arguments)}}for(var d=[\"_resetLayout\",\"_getItemLayoutPosition\",\"_manageStamp\",\"_getContainerSize\",\"_getElementOffset\",\"needsResizeLayout\"],e=0,f=d.length;f>e;e++){var g=d[e];c.prototype[g]=a(g)}}(),c.prototype.needsVerticalResizeLayout=function(){var b=a(this.isotope.element),c=this.isotope.size&&b;return c&&b.innerHeight!=this.isotope.size.innerHeight},c.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},c.prototype.getColumnWidth=function(){this.getSegmentSize(\"column\",\"Width\")},c.prototype.getRowHeight=function(){this.getSegmentSize(\"row\",\"Height\")},c.prototype.getSegmentSize=function(a,b){var c=a+b,d=\"outer\"+b;if(this._getMeasurement(c,d),!this[c]){var e=this.getFirstItemSize();this[c]=e&&e[d]||this.isotope.size[\"inner\"+b]}},c.prototype.getFirstItemSize=function(){var b=this.isotope.filteredItems[0];return b&&b.element&&a(b.element)},c.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},c.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},c.modes={},c.create=function(a,b){function d(){c.apply(this,arguments)}return d.prototype=new c,b&&(d.options=b),d.prototype.namespace=a,c.modes[a]=d,d},c}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"masonry/masonry\",[\"outlayer/outlayer\",\"get-size/get-size\",\"fizzy-ui-utils/utils\"],b):\"object\"==typeof exports?module.exports=b(require(\"outlayer\"),require(\"get-size\"),require(\"fizzy-ui-utils\")):a.Masonry=b(a.Outlayer,a.getSize,a.fizzyUIUtils)}(window,function(a,b,c){var d=a.create(\"masonry\");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement(\"columnWidth\",\"outerWidth\"),this._getMeasurement(\"gutter\",\"outerWidth\"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}var d=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,f=e/d,g=d-e%d,h=g&&1>g?\"round\":\"floor\";f=Math[h](f),this.cols=Math.max(f,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?\"round\":\"ceil\",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c.indexOf(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"isotope/js/layout-modes/masonry\",[\"../layout-mode\",\"masonry/masonry\"],b):\"object\"==typeof exports?module.exports=b(require(\"../layout-mode\"),require(\"masonry-layout\")):b(a.Isotope.LayoutMode,a.Masonry)}(window,function(a,b){\"use strict\";function c(a,b){for(var c in b)a[c]=b[c];return a}var d=a.create(\"masonry\"),e=d.prototype._getElementOffset,f=d.prototype.layout,g=d.prototype._getMeasurement;\nc(d.prototype,b.prototype),d.prototype._getElementOffset=e,d.prototype.layout=f,d.prototype._getMeasurement=g;var h=d.prototype.measureColumns;d.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,h.call(this)};var i=d.prototype._manageStamp;return d.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,i.apply(this,arguments)},d}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"isotope/js/layout-modes/fit-rows\",[\"../layout-mode\"],b):\"object\"==typeof exports?module.exports=b(require(\"../layout-mode\")):b(a.Isotope.LayoutMode)}(window,function(a){\"use strict\";var b=a.create(\"fitRows\");return b.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement(\"gutter\",\"outerWidth\")},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth+this.gutter,c=this.isotope.size.innerWidth+this.gutter;0!==this.x&&b+this.x>c&&(this.x=0,this.y=this.maxY);var d={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+a.size.outerHeight),this.x+=b,d},b.prototype._getContainerSize=function(){return{height:this.maxY}},b}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define(\"isotope/js/layout-modes/vertical\",[\"../layout-mode\"],b):\"object\"==typeof exports?module.exports=b(require(\"../layout-mode\")):b(a.Isotope.LayoutMode)}(window,function(a){\"use strict\";var b=a.create(\"vertical\",{horizontalAlignment:0});return b.prototype._resetLayout=function(){this.y=0},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=(this.isotope.size.innerWidth-a.size.outerWidth)*this.options.horizontalAlignment,c=this.y;return this.y+=a.size.outerHeight,{x:b,y:c}},b.prototype._getContainerSize=function(){return{height:this.y}},b}),function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define([\"outlayer/outlayer\",\"get-size/get-size\",\"matches-selector/matches-selector\",\"fizzy-ui-utils/utils\",\"isotope/js/item\",\"isotope/js/layout-mode\",\"isotope/js/layout-modes/masonry\",\"isotope/js/layout-modes/fit-rows\",\"isotope/js/layout-modes/vertical\"],function(c,d,e,f,g,h){return b(a,c,d,e,f,g,h)}):\"object\"==typeof exports?module.exports=b(a,require(\"outlayer\"),require(\"get-size\"),require(\"desandro-matches-selector\"),require(\"fizzy-ui-utils\"),require(\"./item\"),require(\"./layout-mode\"),require(\"./layout-modes/masonry\"),require(\"./layout-modes/fit-rows\"),require(\"./layout-modes/vertical\")):a.Isotope=b(a,a.Outlayer,a.getSize,a.matchesSelector,a.fizzyUIUtils,a.Isotope.Item,a.Isotope.LayoutMode)}(window,function(a,b,c,d,e,f,g){function h(a,b){return function(c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e],h=c.sortData[g],i=d.sortData[g];if(h>i||i>h){var j=void 0!==b[g]?b[g]:b,k=j?1:-1;return(h>i?1:-1)*k}}return 0}}var i=a.jQuery,j=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\\s+|\\s+$/g,\"\")},k=document.documentElement,l=k.textContent?function(a){return a.textContent}:function(a){return a.innerText},m=b.create(\"isotope\",{layoutMode:\"masonry\",isJQueryFiltering:!0,sortAscending:!0});m.Item=f,m.LayoutMode=g,m.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),b.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=[\"original-order\"];for(var a in g.modes)this._initLayoutMode(a)},m.prototype.reloadItems=function(){this.itemGUID=0,b.prototype.reloadItems.call(this)},m.prototype._itemize=function(){for(var a=b.prototype._itemize.apply(this,arguments),c=0,d=a.length;d>c;c++){var e=a[c];e.id=this.itemGUID++}return this._updateItemsSortData(a),a},m.prototype._initLayoutMode=function(a){var b=g.modes[a],c=this.options[a]||{};this.options[a]=b.options?e.extend(b.options,c):c,this.modes[a]=new b(this)},m.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},m.prototype._layout=function(){var a=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,a),this._isLayoutInited=!0},m.prototype.arrange=function(a){function b(){d.reveal(c.needReveal),d.hide(c.needHide)}this.option(a),this._getIsInstant();var c=this._filter(this.items);this.filteredItems=c.matches;var d=this;this._bindArrangeComplete(),this._isInstant?this._noTransition(b):b(),this._sort(),this._layout()},m.prototype._init=m.prototype.arrange,m.prototype._getIsInstant=function(){var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=a,a},m.prototype._bindArrangeComplete=function(){function a(){b&&c&&d&&e.dispatchEvent(\"arrangeComplete\",null,[e.filteredItems])}var b,c,d,e=this;this.once(\"layoutComplete\",function(){b=!0,a()}),this.once(\"hideComplete\",function(){c=!0,a()}),this.once(\"revealComplete\",function(){d=!0,a()})},m.prototype._filter=function(a){var b=this.options.filter;b=b||\"*\";for(var c=[],d=[],e=[],f=this._getFilterTest(b),g=0,h=a.length;h>g;g++){var i=a[g];if(!i.isIgnored){var j=f(i);j&&c.push(i),j&&i.isHidden?d.push(i):j||i.isHidden||e.push(i)}}return{matches:c,needReveal:d,needHide:e}},m.prototype._getFilterTest=function(a){return i&&this.options.isJQueryFiltering?function(b){return i(b.element).is(a)}:\"function\"==typeof a?function(b){return a(b.element)}:function(b){return d(b.element,a)}},m.prototype.updateSortData=function(a){var b;a?(a=e.makeArray(a),b=this.getItems(a)):b=this.items,this._getSorters(),this._updateItemsSortData(b)},m.prototype._getSorters=function(){var a=this.options.getSortData;for(var b in a){var c=a[b];this._sorters[b]=n(c)}},m.prototype._updateItemsSortData=function(a){for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.updateSortData()}};var n=function(){function a(a){if(\"string\"!=typeof a)return a;var c=j(a).split(\" \"),d=c[0],e=d.match(/^\\[(.+)\\]$/),f=e&&e[1],g=b(f,d),h=m.sortDataParsers[c[1]];return a=h?function(a){return a&&h(g(a))}:function(a){return a&&g(a)}}function b(a,b){var c;return c=a?function(b){return b.getAttribute(a)}:function(a){var c=a.querySelector(b);return c&&l(c)}}return a}();m.sortDataParsers={parseInt:function(a){return parseInt(a,10)},parseFloat:function(a){return parseFloat(a)}},m.prototype._sort=function(){var a=this.options.sortBy;if(a){var b=[].concat.apply(a,this.sortHistory),c=h(b,this.options.sortAscending);this.filteredItems.sort(c),a!=this.sortHistory[0]&&this.sortHistory.unshift(a)}},m.prototype._mode=function(){var a=this.options.layoutMode,b=this.modes[a];if(!b)throw new Error(\"No layout mode: \"+a);return b.options=this.options[a],b},m.prototype._resetLayout=function(){b.prototype._resetLayout.call(this),this._mode()._resetLayout()},m.prototype._getItemLayoutPosition=function(a){return this._mode()._getItemLayoutPosition(a)},m.prototype._manageStamp=function(a){this._mode()._manageStamp(a)},m.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},m.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},m.prototype.appended=function(a){var b=this.addItems(a);if(b.length){var c=this._filterRevealAdded(b);this.filteredItems=this.filteredItems.concat(c)}},m.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){this._resetLayout(),this._manageStamps();var c=this._filterRevealAdded(b);this.layoutItems(this.filteredItems),this.filteredItems=c.concat(this.filteredItems),this.items=b.concat(this.items)}},m.prototype._filterRevealAdded=function(a){var b=this._filter(a);return this.hide(b.needHide),this.reveal(b.matches),this.layoutItems(b.matches,!0),b.matches},m.prototype.insert=function(a){var b=this.addItems(a);if(b.length){var c,d,e=b.length;for(c=0;e>c;c++)d=b[c],this.element.appendChild(d.element);var f=this._filter(b).matches;for(c=0;e>c;c++)b[c].isLayoutInstant=!0;for(this.arrange(),c=0;e>c;c++)delete b[c].isLayoutInstant;this.reveal(f)}};var o=m.prototype.remove;return m.prototype.remove=function(a){a=e.makeArray(a);var b=this.getItems(a);o.call(this,a);var c=b&&b.length;if(c)for(var d=0;c>d;d++){var f=b[d];e.removeFrom(this.filteredItems,f)}},m.prototype.shuffle=function(){for(var a=0,b=this.items.length;b>a;a++){var c=this.items[a];c.sortData.random=Math.random()}this.options.sortBy=\"random\",this._sort(),this._layout()},m.prototype._noTransition=function(a){var b=this.options.transitionDuration;this.options.transitionDuration=0;var c=a.call(this);return this.options.transitionDuration=b,c},m.prototype.getFilteredItemElements=function(){for(var a=[],b=0,c=this.filteredItems.length;c>b;b++)a.push(this.filteredItems[b].element);return a},m});\n/*!\n * imagesLoaded PACKAGED v3.1.8\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if(\"object\"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o=\"object\"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n(\"addListener\"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n(\"addOnceListener\"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n(\"removeListener\"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if(\"object\"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&(\"function\"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if(\"string\"===n)delete i[e];else if(\"object\"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n(\"removeEvent\"),i.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n(\"emitEvent\"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty(\"_onceReturnValue\")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},\"function\"==typeof define&&define.amd?define(\"eventEmitter/EventEmitter\",[],function(){return e}):\"object\"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent(\"on\"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent(\"on\"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};\"function\"==typeof define&&define.amd?define(\"eventie/eventie\",o):e.eventie=o}(this),function(e,t){\"function\"==typeof define&&define.amd?define([\"eventEmitter/EventEmitter\",\"eventie/eventie\"],function(n,i){return t(e,n,i)}):\"object\"==typeof exports?module.exports=t(e,require(\"wolfy87-eventemitter\"),require(\"eventie\")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return\"[object Array]\"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if(\"number\"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);\"string\"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),\"function\"==typeof t?n=t:i(this.options,t),n&&this.on(\"always\",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=u!==void 0,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];\"IMG\"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll(\"img\"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log(\"confirm\",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on(\"confirm\",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit(\"progress\",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?\"fail\":\"done\";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit(\"always\",t),t.jqDeferred){var n=t.hasAnyBroken?\"reject\":\"resolve\";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,\"cached was confirmed\"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,\"naturalWidth\"),void 0;var t=this;e.on(\"confirm\",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit(\"confirm\",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,\"load\",this),n.bind(e,\"error\",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t=\"on\"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,\"onload\"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,\"onerror\"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit(\"confirm\",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,\"load\",this),n.unbind(e.target,\"error\",this)},s});\n\n\n/*!\n * parallax.js v1.4.2 (http://pixelcog.github.io/parallax.js/)\n * @copyright 2016 PixelCog, Inc.\n * @license MIT (https://github.com/pixelcog/parallax.js/blob/master/LICENSE)\n */\n!function(t,i,e,s){function o(i,e){var h=this;\"object\"==typeof e&&(delete e.refresh,delete e.render,t.extend(this,e)),this.$element=t(i),!this.imageSrc&&this.$element.is(\"img\")&&(this.imageSrc=this.$element.attr(\"src\"));var r=(this.position+\"\").toLowerCase().match(/\\S+/g)||[];if(r.length<1&&r.push(\"center\"),1==r.length&&r.push(r[0]),(\"top\"==r[0]||\"bottom\"==r[0]||\"left\"==r[1]||\"right\"==r[1])&&(r=[r[1],r[0]]),this.positionX!=s&&(r[0]=this.positionX.toLowerCase()),this.positionY!=s&&(r[1]=this.positionY.toLowerCase()),h.positionX=r[0],h.positionY=r[1],\"left\"!=this.positionX&&\"right\"!=this.positionX&&(this.positionX=isNaN(parseInt(this.positionX))?\"center\":parseInt(this.positionX)),\"top\"!=this.positionY&&\"bottom\"!=this.positionY&&(this.positionY=isNaN(parseInt(this.positionY))?\"center\":parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?\"\":\"px\")+\" \"+this.positionY+(isNaN(this.positionY)?\"\":\"px\"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is(\"img\")&&this.$element.css({backgroundImage:\"url(\"+this.imageSrc+\")\",backgroundSize:\"cover\",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is(\"img\")&&this.$element.css({backgroundImage:\"url(\"+this.imageSrc+\")\",backgroundSize:\"cover\",backgroundPosition:this.position}),this;this.$mirror=t(\"<div />\").prependTo(\"body\");var a=this.$element.find(\">.parallax-slider\"),n=!1;0==a.length?this.$slider=t(\"<img />\").prependTo(this.$mirror):(this.$slider=a.prependTo(this.$mirror),n=!0),this.$mirror.addClass(\"parallax-mirror\").css({visibility:\"hidden\",zIndex:this.zIndex,position:\"fixed\",top:0,left:0,overflow:\"hidden\"}),this.$slider.addClass(\"parallax-slider\").one(\"load\",function(){h.naturalHeight&&h.naturalWidth||(h.naturalHeight=this.naturalHeight||this.height||1,h.naturalWidth=this.naturalWidth||this.width||1),h.aspectRatio=h.naturalWidth/h.naturalHeight,o.isSetup||o.setup(),o.sliders.push(h),o.isFresh=!1,o.requestRender()}),n||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||a.length>0)&&this.$slider.trigger(\"load\")}function h(s){return this.each(function(){var h=t(this),r=\"object\"==typeof s&&s;this==i||this==e||h.is(\"body\")?o.configure(r):h.data(\"px.parallax\")?\"object\"==typeof s&&t.extend(h.data(\"px.parallax\"),r):(r=t.extend({},h.data(),r),h.data(\"px.parallax\",new o(this,r))),\"string\"==typeof s&&(\"destroy\"==s?o.destroy(this):o[s]())})}!function(){for(var t=0,e=[\"ms\",\"moz\",\"webkit\",\"o\"],s=0;s<e.length&&!i.requestAnimationFrame;++s)i.requestAnimationFrame=i[e[s]+\"RequestAnimationFrame\"],i.cancelAnimationFrame=i[e[s]+\"CancelAnimationFrame\"]||i[e[s]+\"CancelRequestAnimationFrame\"];i.requestAnimationFrame||(i.requestAnimationFrame=function(e){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),h=i.setTimeout(function(){e(s+o)},o);return t=s+o,h}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.extend(o.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:\"center\",overScrollFix:!1,refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t=o.winHeight,i=o.docHeight,e=Math.min(this.boxOffsetTop,i-t),s=Math.max(this.boxOffsetTop+this.boxHeight-t,0),h=this.boxHeight+(e-s)*(1-this.speed)|0,r=(this.boxOffsetTop-e)*(1-this.speed)|0;if(h*this.aspectRatio>=this.boxWidth){this.imageWidth=h*this.aspectRatio|0,this.imageHeight=h,this.offsetBaseTop=r;var a=this.imageWidth-this.boxWidth;this.offsetLeft=\"left\"==this.positionX?0:\"right\"==this.positionX?-a:isNaN(this.positionX)?-a/2|0:Math.max(this.positionX,-a)}else{this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0;var a=this.imageHeight-h;this.offsetBaseTop=\"top\"==this.positionY?r:\"bottom\"==this.positionY?r-a:isNaN(this.positionY)?r-a/2|0:r+Math.max(this.positionY,-a)}},render:function(){var t=o.scrollTop,i=o.scrollLeft,e=this.overScrollFix?o.overScroll:0,s=t+o.winHeight;this.boxOffsetBottom>t&&this.boxOffsetTop<=s?(this.visibility=\"visible\",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-i,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility=\"hidden\",this.$mirror.css({transform:\"translate3d(0px, 0px, 0px)\",visibility:this.visibility,top:this.mirrorTop-e,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:\"translate3d(0px, 0px, 0px)\",position:\"absolute\",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth,maxWidth:\"none\"})}}),t.extend(o,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var s=t(e),h=t(i),r=function(){o.winHeight=h.height(),o.winWidth=h.width(),o.docHeight=s.height(),o.docWidth=s.width()},a=function(){var t=h.scrollTop(),i=o.docHeight-o.winHeight,e=o.docWidth-o.winWidth;o.scrollTop=Math.max(0,Math.min(i,t)),o.scrollLeft=Math.max(0,Math.min(e,h.scrollLeft())),o.overScroll=Math.max(t-i,Math.min(t,0))};h.on(\"resize.px.parallax load.px.parallax\",function(){r(),o.isFresh=!1,o.requestRender()}).on(\"scroll.px.parallax load.px.parallax\",function(){a(),o.requestRender()}),r(),a(),this.isReady=!0}},configure:function(i){\"object\"==typeof i&&(delete i.refresh,delete i.render,t.extend(this.prototype,i))},refresh:function(){t.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),t.each(this.sliders,function(){this.render()})},requestRender:function(){var t=this;this.isBusy||(this.isBusy=!0,i.requestAnimationFrame(function(){t.render(),t.isBusy=!1}))},destroy:function(e){var s,h=t(e).data(\"px.parallax\");for(h.$mirror.remove(),s=0;s<this.sliders.length;s+=1)this.sliders[s]==h&&this.sliders.splice(s,1);t(e).data(\"px.parallax\",!1),0===this.sliders.length&&(t(i).off(\"scroll.px.parallax resize.px.parallax load.px.parallax\"),this.isReady=!1,o.isSetup=!1)}});var r=t.fn.parallax;t.fn.parallax=h,t.fn.parallax.Constructor=o,t.fn.parallax.noConflict=function(){return t.fn.parallax=r,this},t(e).on(\"ready.px.parallax.data-api\",function(){t('[data-parallax=\"scroll\"]').parallax()})}(jQuery,window,document);\n\n/* == jquery mousewheel plugin == Version: 3.1.13, License: MIT License (MIT) */\n!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type=\"mousewheel\",\"detail\"in g&&(m=-1*g.detail),\"wheelDelta\"in g&&(m=g.wheelDelta),\"wheelDeltaY\"in g&&(m=g.wheelDeltaY),\"wheelDeltaX\"in g&&(l=-1*g.wheelDeltaX),\"axis\"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,\"deltaY\"in g&&(m=-1*g.deltaY,j=m),\"deltaX\"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,\"mousewheel-line-height\");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,\"mousewheel-page-height\");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?\"floor\":\"ceil\"](j/f),l=Math[l>=1?\"floor\":\"ceil\"](l/f),m=Math[m>=1?\"floor\":\"ceil\"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&\"mousewheel\"===a.type&&b%120===0}var e,f,g=[\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"],h=\"onwheel\"in document||document.documentMode>=9?[\"wheel\"]:[\"mousewheel\",\"DomMouseScroll\",\"MozMousePixelScroll\"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:\"3.1.12\",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,\"mousewheel-line-height\",k.getLineHeight(this)),a.data(this,\"mousewheel-page-height\",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,\"mousewheel-line-height\"),a.removeData(this,\"mousewheel-page-height\")},getLineHeight:function(b){var c=a(b),d=c[\"offsetParent\"in a.fn?\"offsetParent\":\"parent\"]();return d.length||(d=a(\"body\")),parseInt(d.css(\"fontSize\"),10)||parseInt(c.css(\"fontSize\"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}})});!function(a){\"function\"==typeof define&&define.amd?define([\"jquery\"],a):\"object\"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type=\"mousewheel\",\"detail\"in g&&(m=-1*g.detail),\"wheelDelta\"in g&&(m=g.wheelDelta),\"wheelDeltaY\"in g&&(m=g.wheelDeltaY),\"wheelDeltaX\"in g&&(l=-1*g.wheelDeltaX),\"axis\"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,\"deltaY\"in g&&(m=-1*g.deltaY,j=m),\"deltaX\"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,\"mousewheel-line-height\");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,\"mousewheel-page-height\");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?\"floor\":\"ceil\"](j/f),l=Math[l>=1?\"floor\":\"ceil\"](l/f),m=Math[m>=1?\"floor\":\"ceil\"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&\"mousewheel\"===a.type&&b%120===0}var e,f,g=[\"wheel\",\"mousewheel\",\"DOMMouseScroll\",\"MozMousePixelScroll\"],h=\"onwheel\"in document||document.documentMode>=9?[\"wheel\"]:[\"mousewheel\",\"DomMouseScroll\",\"MozMousePixelScroll\"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:\"3.1.12\",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,\"mousewheel-line-height\",k.getLineHeight(this)),a.data(this,\"mousewheel-page-height\",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,\"mousewheel-line-height\"),a.removeData(this,\"mousewheel-page-height\")},getLineHeight:function(b){var c=a(b),d=c[\"offsetParent\"in a.fn?\"offsetParent\":\"parent\"]();return d.length||(d=a(\"body\")),parseInt(d.css(\"fontSize\"),10)||parseInt(c.css(\"fontSize\"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}})});\n/* == malihu jquery custom scrollbar plugin == Version: 3.1.3, License: MIT License (MIT) */\n!function(e){\"undefined\"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var o=\"function\"==typeof define&&define.amd,a=\"undefined\"!=typeof module&&module.exports,n=\"https:\"==document.location.protocol?\"https:\":\"http:\",i=\"cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js\";o||(a?require(\"jquery-mousewheel\")(e):e.event.special.mousewheel||e(\"head\").append(decodeURI(\"%3Cscript src=\"+n+\"//\"+i+\"%3E%3C/script%3E\"))),t()}(function(){var t,o=\"mCustomScrollbar\",a=\"mCS\",n=\".mCustomScrollbar\",i={setTop:0,setLeft:0,axis:\"y\",scrollbarPosition:\"inside\",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:\"auto\",axis:\"y\",deltaFactor:\"auto\",disableOver:[\"select\",\"option\",\"keygen\",\"datalist\",\"textarea\"]},scrollButtons:{scrollType:\"stepless\",scrollAmount:\"auto\"},keyboard:{enable:!0,scrollType:\"stepless\",scrollAmount:\"auto\"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:\"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']\",updateOnContentResize:!0,updateOnImageLoad:\"auto\",autoUpdateTimeout:60},theme:\"light\",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},s=window.attachEvent&&!window.addEventListener?1:0,c=!1,d=[\"mCSB_dragger_onDrag\",\"mCSB_scrollTools_onDrag\",\"mCS_img_loaded\",\"mCS_disabled\",\"mCS_destroyed\",\"mCS_no_scrollbar\",\"mCS-autoHide\",\"mCS-dir-rtl\",\"mCS_no_scrollbar_y\",\"mCS_no_scrollbar_x\",\"mCS_y_hidden\",\"mCS_x_hidden\",\"mCSB_draggerContainer\",\"mCSB_buttonUp\",\"mCSB_buttonDown\",\"mCSB_buttonLeft\",\"mCSB_buttonRight\"],u={init:function(t){var t=e.extend(!0,{},i,t),o=f.call(this);if(t.live){var s=t.liveSelector||this.selector||n,c=e(s);if(\"off\"===t.live)return void m(s);l[s]=setTimeout(function(){c.mCustomScrollbar(t),\"once\"===t.live&&c.length&&m(s)},500)}else m(s);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?\"x\":p(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,\"object\"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:\"auto\",axis:\"y\",preventDefault:!1,deltaFactor:\"auto\",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),h(t),e(o).each(function(){var o=e(this);if(!o.data(a)){o.data(a,{idx:++r,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:o.css(\"direction\"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var n=o.data(a),i=n.opt,l=o.data(\"mcs-axis\"),s=o.data(\"mcs-scrollbar-position\"),c=o.data(\"mcs-theme\");l&&(i.axis=l),s&&(i.scrollbarPosition=s),c&&(i.theme=c,h(i)),v.call(this),n&&i.callbacks.onCreate&&\"function\"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),e(\"#mCSB_\"+n.idx+\"_container img:not(.\"+d[2]+\")\").addClass(d[2]),u.update.call(null,o)}})},update:function(t,o){var n=t||f.call(this);return e(n).each(function(){var t=e(this);if(t.data(a)){var n=t.data(a),i=n.opt,r=e(\"#mCSB_\"+n.idx+\"_container\"),l=e(\"#mCSB_\"+n.idx),s=[e(\"#mCSB_\"+n.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+n.idx+\"_dragger_horizontal\")];if(!r.length)return;n.tweenRunning&&N(t),o&&n&&i.callbacks.onBeforeUpdate&&\"function\"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(d[3])&&t.removeClass(d[3]),t.hasClass(d[4])&&t.removeClass(d[4]),l.css(\"max-height\",\"none\"),l.height()!==t.height()&&l.css(\"max-height\",t.height()),_.call(this),\"y\"===i.axis||i.advanced.autoExpandHorizontalScroll||r.css(\"width\",x(r)),n.overflowed=y.call(this),M.call(this),i.autoDraggerLength&&S.call(this),b.call(this),T.call(this);var c=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];\"x\"!==i.axis&&(n.overflowed[0]?s[0].height()>s[0].parent().height()?B.call(this):(V(t,c[0].toString(),{dir:\"y\",dur:0,overwrite:\"none\"}),n.contentReset.y=null):(B.call(this),\"y\"===i.axis?k.call(this):\"yx\"===i.axis&&n.overflowed[1]&&V(t,c[1].toString(),{dir:\"x\",dur:0,overwrite:\"none\"}))),\"y\"!==i.axis&&(n.overflowed[1]?s[1].width()>s[1].parent().width()?B.call(this):(V(t,c[1].toString(),{dir:\"x\",dur:0,overwrite:\"none\"}),n.contentReset.x=null):(B.call(this),\"x\"===i.axis?k.call(this):\"yx\"===i.axis&&n.overflowed[0]&&V(t,c[0].toString(),{dir:\"y\",dur:0,overwrite:\"none\"}))),o&&n&&(2===o&&i.callbacks.onImageLoad&&\"function\"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===o&&i.callbacks.onSelectorChange&&\"function\"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&\"function\"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(t,o){if(\"undefined\"!=typeof t&&null!=t){var n=f.call(this);return e(n).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l={trigger:\"external\",scrollInertia:r.scrollInertia,scrollEasing:\"mcsEaseInOut\",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=e.extend(!0,{},l,o),c=q.call(this,t),d=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;c[0]=Y.call(this,c[0],\"y\"),c[1]=Y.call(this,c[1],\"x\"),s.moveDragger&&(c[0]*=i.scrollRatio.y,c[1]*=i.scrollRatio.x),s.dur=oe()?0:d,setTimeout(function(){null!==c[0]&&\"undefined\"!=typeof c[0]&&\"x\"!==r.axis&&i.overflowed[0]&&(s.dir=\"y\",s.overwrite=\"all\",V(n,c[0].toString(),s)),null!==c[1]&&\"undefined\"!=typeof c[1]&&\"y\"!==r.axis&&i.overflowed[1]&&(s.dir=\"x\",s.overwrite=\"none\",V(n,c[1].toString(),s))},s.timeout)}})}},stop:function(){var t=f.call(this);return e(t).each(function(){var t=e(this);t.data(a)&&N(t)})},disable:function(t){var o=f.call(this);return e(o).each(function(){var o=e(this);if(o.data(a)){{o.data(a)}X.call(this,\"remove\"),k.call(this),t&&B.call(this),M.call(this,!0),o.addClass(d[3])}})},destroy:function(){var t=f.call(this);return e(t).each(function(){var n=e(this);if(n.data(a)){var i=n.data(a),r=i.opt,l=e(\"#mCSB_\"+i.idx),s=e(\"#mCSB_\"+i.idx+\"_container\"),c=e(\".mCSB_\"+i.idx+\"_scrollbar\");r.live&&m(r.liveSelector||e(t).selector),X.call(this,\"remove\"),k.call(this),B.call(this),n.removeData(a),K(this,\"mcs\"),c.remove(),s.find(\"img.\"+d[2]).removeClass(d[2]),l.replaceWith(s.contents()),n.removeClass(o+\" _\"+a+\"_\"+i.idx+\" \"+d[6]+\" \"+d[7]+\" \"+d[5]+\" \"+d[3]).addClass(d[4])}})}},f=function(){return\"object\"!=typeof e(this)||e(this).length<1?n:this},h=function(t){var o=[\"rounded\",\"rounded-dark\",\"rounded-dots\",\"rounded-dots-dark\"],a=[\"rounded-dots\",\"rounded-dots-dark\",\"3d\",\"3d-dark\",\"3d-thick\",\"3d-thick-dark\",\"inset\",\"inset-dark\",\"inset-2\",\"inset-2-dark\",\"inset-3\",\"inset-3-dark\"],n=[\"minimal\",\"minimal-dark\"],i=[\"minimal\",\"minimal-dark\"],r=[\"minimal\",\"minimal-dark\"];t.autoDraggerLength=e.inArray(t.theme,o)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,a)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,n)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,i)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,r)>-1?\"outside\":t.scrollbarPosition},m=function(e){l[e]&&(clearTimeout(l[e]),K(l,e))},p=function(e){return\"yx\"===e||\"xy\"===e||\"auto\"===e?\"yx\":\"x\"===e||\"horizontal\"===e?\"x\":\"y\"},g=function(e){return\"stepped\"===e||\"pixels\"===e||\"step\"===e||\"click\"===e?\"stepped\":\"stepless\"},v=function(){var t=e(this),n=t.data(a),i=n.opt,r=i.autoExpandScrollbar?\" \"+d[1]+\"_expand\":\"\",l=[\"<div id='mCSB_\"+n.idx+\"_scrollbar_vertical' class='mCSB_scrollTools mCSB_\"+n.idx+\"_scrollbar mCS-\"+i.theme+\" mCSB_scrollTools_vertical\"+r+\"'><div class='\"+d[12]+\"'><div id='mCSB_\"+n.idx+\"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>\",\"<div id='mCSB_\"+n.idx+\"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_\"+n.idx+\"_scrollbar mCS-\"+i.theme+\" mCSB_scrollTools_horizontal\"+r+\"'><div class='\"+d[12]+\"'><div id='mCSB_\"+n.idx+\"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>\"],s=\"yx\"===i.axis?\"mCSB_vertical_horizontal\":\"x\"===i.axis?\"mCSB_horizontal\":\"mCSB_vertical\",c=\"yx\"===i.axis?l[0]+l[1]:\"x\"===i.axis?l[1]:l[0],u=\"yx\"===i.axis?\"<div id='mCSB_\"+n.idx+\"_container_wrapper' class='mCSB_container_wrapper' />\":\"\",f=i.autoHideScrollbar?\" \"+d[6]:\"\",h=\"x\"!==i.axis&&\"rtl\"===n.langDir?\" \"+d[7]:\"\";i.setWidth&&t.css(\"width\",i.setWidth),i.setHeight&&t.css(\"height\",i.setHeight),i.setLeft=\"y\"!==i.axis&&\"rtl\"===n.langDir?\"989999px\":i.setLeft,t.addClass(o+\" _\"+a+\"_\"+n.idx+f+h).wrapInner(\"<div id='mCSB_\"+n.idx+\"' class='mCustomScrollBox mCS-\"+i.theme+\" \"+s+\"'><div id='mCSB_\"+n.idx+\"_container' class='mCSB_container' style='position:relative; top:\"+i.setTop+\"; left:\"+i.setLeft+\";' dir=\"+n.langDir+\" /></div>\");var m=e(\"#mCSB_\"+n.idx),p=e(\"#mCSB_\"+n.idx+\"_container\");\"y\"===i.axis||i.advanced.autoExpandHorizontalScroll||p.css(\"width\",x(p)),\"outside\"===i.scrollbarPosition?(\"static\"===t.css(\"position\")&&t.css(\"position\",\"relative\"),t.css(\"overflow\",\"visible\"),m.addClass(\"mCSB_outside\").after(c)):(m.addClass(\"mCSB_inside\").append(c),p.wrap(u)),w.call(this);var g=[e(\"#mCSB_\"+n.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+n.idx+\"_dragger_horizontal\")];g[0].css(\"min-height\",g[0].height()),g[1].css(\"min-width\",g[1].width())},x=function(t){var o=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],a=t.parent().width();return o[0]>a?o[0]:o[1]>a?o[1]:\"100%\"},_=function(){var t=e(this),o=t.data(a),n=o.opt,i=e(\"#mCSB_\"+o.idx+\"_container\");if(n.advanced.autoExpandHorizontalScroll&&\"y\"!==n.axis){i.css({width:\"auto\",\"min-width\":0,\"overflow-x\":\"scroll\"});var r=Math.ceil(i[0].scrollWidth);3===n.advanced.autoExpandHorizontalScroll||2!==n.advanced.autoExpandHorizontalScroll&&r>i.parent().width()?i.css({width:r,\"min-width\":\"100%\",\"overflow-x\":\"inherit\"}):i.css({\"overflow-x\":\"inherit\",position:\"absolute\"}).wrap(\"<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />\").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),\"min-width\":\"100%\",position:\"relative\"}).unwrap()}},w=function(){var t=e(this),o=t.data(a),n=o.opt,i=e(\".mCSB_\"+o.idx+\"_scrollbar:first\"),r=ee(n.scrollButtons.tabindex)?\"tabindex='\"+n.scrollButtons.tabindex+\"'\":\"\",l=[\"<a href='#' class='\"+d[13]+\"' oncontextmenu='return false;' \"+r+\" />\",\"<a href='#' class='\"+d[14]+\"' oncontextmenu='return false;' \"+r+\" />\",\"<a href='#' class='\"+d[15]+\"' oncontextmenu='return false;' \"+r+\" />\",\"<a href='#' class='\"+d[16]+\"' oncontextmenu='return false;' \"+r+\" />\"],s=[\"x\"===n.axis?l[2]:l[0],\"x\"===n.axis?l[3]:l[1],l[2],l[3]];n.scrollButtons.enable&&i.prepend(s[0]).append(s[1]).next(\".mCSB_scrollTools\").prepend(s[2]).append(s[3])},S=function(){var t=e(this),o=t.data(a),n=e(\"#mCSB_\"+o.idx),i=e(\"#mCSB_\"+o.idx+\"_container\"),r=[e(\"#mCSB_\"+o.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+o.idx+\"_dragger_horizontal\")],l=[n.height()/i.outerHeight(!1),n.width()/i.outerWidth(!1)],c=[parseInt(r[0].css(\"min-height\")),Math.round(l[0]*r[0].parent().height()),parseInt(r[1].css(\"min-width\")),Math.round(l[1]*r[1].parent().width())],d=s&&c[1]<c[0]?c[0]:c[1],u=s&&c[3]<c[2]?c[2]:c[3];r[0].css({height:d,\"max-height\":r[0].parent().height()-10}).find(\".mCSB_dragger_bar\").css({\"line-height\":c[0]+\"px\"}),r[1].css({width:u,\"max-width\":r[1].parent().width()-10})},b=function(){var t=e(this),o=t.data(a),n=e(\"#mCSB_\"+o.idx),i=e(\"#mCSB_\"+o.idx+\"_container\"),r=[e(\"#mCSB_\"+o.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+o.idx+\"_dragger_horizontal\")],l=[i.outerHeight(!1)-n.height(),i.outerWidth(!1)-n.width()],s=[l[0]/(r[0].parent().height()-r[0].height()),l[1]/(r[1].parent().width()-r[1].width())];o.scrollRatio={y:s[0],x:s[1]}},C=function(e,t,o){var a=o?d[0]+\"_expanded\":\"\",n=e.closest(\".mCSB_scrollTools\");\"active\"===t?(e.toggleClass(d[0]+\" \"+a),n.toggleClass(d[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||(\"hide\"===t?(e.removeClass(d[0]),n.removeClass(d[1])):(e.addClass(d[0]),n.addClass(d[1])))},y=function(){var t=e(this),o=t.data(a),n=e(\"#mCSB_\"+o.idx),i=e(\"#mCSB_\"+o.idx+\"_container\"),r=null==o.overflowed?i.height():i.outerHeight(!1),l=null==o.overflowed?i.width():i.outerWidth(!1),s=i[0].scrollHeight,c=i[0].scrollWidth;return s>r&&(r=s),c>l&&(l=c),[r>n.height(),l>n.width()]},B=function(){var t=e(this),o=t.data(a),n=o.opt,i=e(\"#mCSB_\"+o.idx),r=e(\"#mCSB_\"+o.idx+\"_container\"),l=[e(\"#mCSB_\"+o.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+o.idx+\"_dragger_horizontal\")];if(N(t),(\"x\"!==n.axis&&!o.overflowed[0]||\"y\"===n.axis&&o.overflowed[0])&&(l[0].add(r).css(\"top\",0),V(t,\"_resetY\")),\"y\"!==n.axis&&!o.overflowed[1]||\"x\"===n.axis&&o.overflowed[1]){var s=dx=0;\"rtl\"===o.langDir&&(s=i.width()-r.outerWidth(!1),dx=Math.abs(s/o.scrollRatio.x)),r.css(\"left\",s),l[1].css(\"left\",dx),V(t,\"_resetX\")}},T=function(){function t(){r=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(r),R.call(o[0])):t()},100)}var o=e(this),n=o.data(a),i=n.opt;if(!n.bindEvents){if(I.call(this),i.contentTouchScroll&&D.call(this),E.call(this),i.mouseWheel.enable){var r;t()}L.call(this),P.call(this),i.advanced.autoScrollOnFocus&&z.call(this),i.scrollButtons.enable&&H.call(this),i.keyboard.enable&&U.call(this),n.bindEvents=!0}},k=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+\"_\"+o.idx,r=\".mCSB_\"+o.idx+\"_scrollbar\",l=e(\"#mCSB_\"+o.idx+\",#mCSB_\"+o.idx+\"_container,#mCSB_\"+o.idx+\"_container_wrapper,\"+r+\" .\"+d[12]+\",#mCSB_\"+o.idx+\"_dragger_vertical,#mCSB_\"+o.idx+\"_dragger_horizontal,\"+r+\">a\"),s=e(\"#mCSB_\"+o.idx+\"_container\");n.advanced.releaseDraggableSelectors&&l.add(e(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&l.add(e(n.advanced.extraDraggableSelectors)),o.bindEvents&&(e(document).add(e(!W()||top.document)).unbind(\".\"+i),l.each(function(){e(this).unbind(\".\"+i)}),clearTimeout(t[0]._focusTimeout),K(t[0],\"_focusTimeout\"),clearTimeout(o.sequential.step),K(o.sequential,\"step\"),clearTimeout(s[0].onCompleteTimeout),K(s[0],\"onCompleteTimeout\"),o.bindEvents=!1)},M=function(t){var o=e(this),n=o.data(a),i=n.opt,r=e(\"#mCSB_\"+n.idx+\"_container_wrapper\"),l=r.length?r:e(\"#mCSB_\"+n.idx+\"_container\"),s=[e(\"#mCSB_\"+n.idx+\"_scrollbar_vertical\"),e(\"#mCSB_\"+n.idx+\"_scrollbar_horizontal\")],c=[s[0].find(\".mCSB_dragger\"),s[1].find(\".mCSB_dragger\")];\"x\"!==i.axis&&(n.overflowed[0]&&!t?(s[0].add(c[0]).add(s[0].children(\"a\")).css(\"display\",\"block\"),l.removeClass(d[8]+\" \"+d[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[0].css(\"display\",\"none\"),l.removeClass(d[10])):(s[0].css(\"display\",\"none\"),l.addClass(d[10])),l.addClass(d[8]))),\"y\"!==i.axis&&(n.overflowed[1]&&!t?(s[1].add(c[1]).add(s[1].children(\"a\")).css(\"display\",\"block\"),l.removeClass(d[9]+\" \"+d[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[1].css(\"display\",\"none\"),l.removeClass(d[11])):(s[1].css(\"display\",\"none\"),l.addClass(d[11])),l.addClass(d[9]))),n.overflowed[0]||n.overflowed[1]?o.removeClass(d[5]):o.addClass(d[5])},O=function(t){var o=t.type,a=t.target.ownerDocument!==document?[e(frameElement).offset().top,e(frameElement).offset().left]:null,n=W()&&t.target.ownerDocument!==top.document?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(o){case\"pointerdown\":case\"MSPointerDown\":case\"pointermove\":case\"MSPointerMove\":case\"pointerup\":case\"MSPointerUp\":return a?[t.originalEvent.pageY-a[0]+n[0],t.originalEvent.pageX-a[1]+n[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case\"touchstart\":case\"touchmove\":case\"touchend\":var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[i.screenY,i.screenX,r>1]:[i.pageY,i.pageX,r>1];default:return a?[t.pageY-a[0]+n[0],t.pageX-a[1]+n[1],!1]:[t.pageY,t.pageX,!1]}},I=function(){function t(e){var t=m.find(\"iframe\");if(t.length){var o=e?\"auto\":\"none\";t.css(\"pointer-events\",o)}}function o(e,t,o,a){if(m[0].idleTimer=u.scrollInertia<233?250:0,n.attr(\"id\")===h[1])var i=\"x\",r=(n[0].offsetLeft-t+a)*d.scrollRatio.x;else var i=\"y\",r=(n[0].offsetTop-e+o)*d.scrollRatio.y;V(l,r.toString(),{dir:i,drag:!0})}var n,i,r,l=e(this),d=l.data(a),u=d.opt,f=a+\"_\"+d.idx,h=[\"mCSB_\"+d.idx+\"_dragger_vertical\",\"mCSB_\"+d.idx+\"_dragger_horizontal\"],m=e(\"#mCSB_\"+d.idx+\"_container\"),p=e(\"#\"+h[0]+\",#\"+h[1]),g=u.advanced.releaseDraggableSelectors?p.add(e(u.advanced.releaseDraggableSelectors)):p,v=u.advanced.extraDraggableSelectors?e(!W()||top.document).add(e(u.advanced.extraDraggableSelectors)):e(!W()||top.document);p.bind(\"mousedown.\"+f+\" touchstart.\"+f+\" pointerdown.\"+f+\" MSPointerDown.\"+f,function(o){if(o.stopImmediatePropagation(),o.preventDefault(),Z(o)){c=!0,s&&(document.onselectstart=function(){return!1}),t(!1),N(l),n=e(this);var a=n.offset(),d=O(o)[0]-a.top,f=O(o)[1]-a.left,h=n.height()+a.top,m=n.width()+a.left;h>d&&d>0&&m>f&&f>0&&(i=d,r=f),C(n,\"active\",u.autoExpandScrollbar)}}).bind(\"touchmove.\"+f,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=n.offset(),a=O(e)[0]-t.top,l=O(e)[1]-t.left;o(i,r,a,l)}),e(document).add(v).bind(\"mousemove.\"+f+\" pointermove.\"+f+\" MSPointerMove.\"+f,function(e){if(n){var t=n.offset(),a=O(e)[0]-t.top,l=O(e)[1]-t.left;if(i===a&&r===l)return;o(i,r,a,l)}}).add(g).bind(\"mouseup.\"+f+\" touchend.\"+f+\" pointerup.\"+f+\" MSPointerUp.\"+f,function(e){n&&(C(n,\"active\",u.autoExpandScrollbar),n=null),c=!1,s&&(document.onselectstart=null),t(!0)})},D=function(){function o(e){if(!$(e)||c||O(e)[2])return void(t=0);t=1,b=0,C=0,d=1,y.removeClass(\"mCS_touch_action\");var o=I.offset();u=O(e)[0]-o.top,f=O(e)[1]-o.left,z=[O(e)[0],O(e)[1]]}function n(e){if($(e)&&!c&&!O(e)[2]&&(T.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!C||b)&&d)){g=G();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left,n=\"mcsLinearOut\";if(E.push(o),R.push(a),z[2]=Math.abs(O(e)[0]-z[0]),z[3]=Math.abs(O(e)[1]-z[1]),B.overflowed[0])var i=D[0].parent().height()-D[0].height(),r=u-o>0&&o-u>-(i*B.scrollRatio.y)&&(2*z[3]<z[2]||\"yx\"===T.axis);if(B.overflowed[1])var l=D[1].parent().width()-D[1].width(),h=f-a>0&&a-f>-(l*B.scrollRatio.x)&&(2*z[2]<z[3]||\"yx\"===T.axis);r||h?(U||e.preventDefault(),b=1):(C=1,y.addClass(\"mCS_touch_action\")),U&&e.preventDefault(),w=\"yx\"===T.axis?[u-o,f-a]:\"x\"===T.axis?[null,f-a]:[u-o,null],I[0].idleTimer=250,B.overflowed[0]&&s(w[0],A,n,\"y\",\"all\",!0),B.overflowed[1]&&s(w[1],A,n,\"x\",L,!0)}}function i(e){if(!$(e)||c||O(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),N(y),p=G();var o=M.offset();h=O(e)[0]-o.top,m=O(e)[1]-o.left,E=[],R=[]}function r(e){if($(e)&&!c&&!O(e)[2]){d=0,e.stopImmediatePropagation(),b=0,C=0,v=G();var t=M.offset(),o=O(e)[0]-t.top,a=O(e)[1]-t.left;if(!(v-g>30)){_=1e3/(v-p);var n=\"mcsEaseOut\",i=2.5>_,r=i?[E[E.length-2],R[R.length-2]]:[0,0];x=i?[o-r[0],a-r[1]]:[o-h,a-m];var u=[Math.abs(x[0]),Math.abs(x[1])];_=i?[Math.abs(x[0]/4),Math.abs(x[1]/4)]:[_,_];var f=[Math.abs(I[0].offsetTop)-x[0]*l(u[0]/_[0],_[0]),Math.abs(I[0].offsetLeft)-x[1]*l(u[1]/_[1],_[1])];w=\"yx\"===T.axis?[f[0],f[1]]:\"x\"===T.axis?[null,f[1]]:[f[0],null],S=[4*u[0]+T.scrollInertia,4*u[1]+T.scrollInertia];var y=parseInt(T.contentTouchScroll)||0;w[0]=u[0]>y?w[0]:0,w[1]=u[1]>y?w[1]:0,B.overflowed[0]&&s(w[0],S[0],n,\"y\",L,!1),B.overflowed[1]&&s(w[1],S[1],n,\"x\",L,!1)}}}function l(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?o[0]:o[3]:e>60?t>3?o[3]:o[2]:e>30?t>8?o[1]:t>6?o[0]:t>4?t:o[2]:t>8?t:o[3]}function s(e,t,o,a,n,i){e&&V(y,e.toString(),{dur:t,scrollEasing:o,dir:a,overwrite:n,drag:i})}var d,u,f,h,m,p,g,v,x,_,w,S,b,C,y=e(this),B=y.data(a),T=B.opt,k=a+\"_\"+B.idx,M=e(\"#mCSB_\"+B.idx),I=e(\"#mCSB_\"+B.idx+\"_container\"),D=[e(\"#mCSB_\"+B.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+B.idx+\"_dragger_horizontal\")],E=[],R=[],A=0,L=\"yx\"===T.axis?\"none\":\"all\",z=[],P=I.find(\"iframe\"),H=[\"touchstart.\"+k+\" pointerdown.\"+k+\" MSPointerDown.\"+k,\"touchmove.\"+k+\" pointermove.\"+k+\" MSPointerMove.\"+k,\"touchend.\"+k+\" pointerup.\"+k+\" MSPointerUp.\"+k],U=void 0!==document.body.style.touchAction;I.bind(H[0],function(e){o(e)}).bind(H[1],function(e){n(e)}),M.bind(H[0],function(e){i(e)}).bind(H[2],function(e){r(e)}),P.length&&P.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(H[0],function(e){o(e),i(e)}).bind(H[1],function(e){n(e)}).bind(H[2],function(e){r(e)})})})},E=function(){function o(){return window.getSelection?window.getSelection().toString():document.selection&&\"Control\"!=document.selection.type?document.selection.createRange().text:0}function n(e,t,o){d.type=o&&i?\"stepped\":\"stepless\",d.scrollAmount=10,F(r,e,t,\"mcsLinearOut\",o?60:null)}var i,r=e(this),l=r.data(a),s=l.opt,d=l.sequential,u=a+\"_\"+l.idx,f=e(\"#mCSB_\"+l.idx+\"_container\"),h=f.parent();f.bind(\"mousedown.\"+u,function(e){t||i||(i=1,c=!0)}).add(document).bind(\"mousemove.\"+u,function(e){if(!t&&i&&o()){var a=f.offset(),r=O(e)[0]-a.top+f[0].offsetTop,c=O(e)[1]-a.left+f[0].offsetLeft;r>0&&r<h.height()&&c>0&&c<h.width()?d.step&&n(\"off\",null,\"stepped\"):(\"x\"!==s.axis&&l.overflowed[0]&&(0>r?n(\"on\",38):r>h.height()&&n(\"on\",40)),\"y\"!==s.axis&&l.overflowed[1]&&(0>c?n(\"on\",37):c>h.width()&&n(\"on\",39)))}}).bind(\"mouseup.\"+u+\" dragend.\"+u,function(e){t||(i&&(i=0,n(\"off\",null)),c=!1)})},R=function(){function t(t,a){if(N(o),!A(o,t.target)){var r=\"auto\"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):s&&t.deltaFactor<100?100:t.deltaFactor||100,d=i.scrollInertia;if(\"x\"===i.axis||\"x\"===i.mouseWheel.axis)var u=\"x\",f=[Math.round(r*n.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],h=\"auto\"!==i.mouseWheel.scrollAmount?f[1]:f[0]>=l.width()?.9*l.width():f[0],m=Math.abs(e(\"#mCSB_\"+n.idx+\"_container\")[0].offsetLeft),p=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v=t.deltaX||t.deltaY||a;else var u=\"y\",f=[Math.round(r*n.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],h=\"auto\"!==i.mouseWheel.scrollAmount?f[1]:f[0]>=l.height()?.9*l.height():f[0],m=Math.abs(e(\"#mCSB_\"+n.idx+\"_container\")[0].offsetTop),p=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=t.deltaY||a;\"y\"===u&&!n.overflowed[0]||\"x\"===u&&!n.overflowed[1]||((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),i.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==p||0>v&&p!==g||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<2&&!i.mouseWheel.normalizeDelta&&(h=t.deltaFactor,d=17),V(o,(m-v*h).toString(),{dir:u,dur:d}))}}if(e(this).data(a)){var o=e(this),n=o.data(a),i=n.opt,r=a+\"_\"+n.idx,l=e(\"#mCSB_\"+n.idx),c=[e(\"#mCSB_\"+n.idx+\"_dragger_vertical\"),e(\"#mCSB_\"+n.idx+\"_dragger_horizontal\")],d=e(\"#mCSB_\"+n.idx+\"_container\").find(\"iframe\");d.length&&d.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(\"mousewheel.\"+r,function(e,o){t(e,o)})})}),l.bind(\"mousewheel.\"+r,function(e,o){t(e,o)})}},W=function(e){var t=null;if(e){try{var o=e.contentDocument||e.contentWindow.document;t=o.body.innerHTML}catch(a){}return null!==t}try{var o=top.document;t=o.body.innerHTML}catch(a){}return null!==t},A=function(t,o){var n=o.nodeName.toLowerCase(),i=t.data(a).opt.mouseWheel.disableOver,r=[\"select\",\"textarea\"];return e.inArray(n,i)>-1&&!(e.inArray(n,r)>-1&&!e(o).is(\":focus\"))},L=function(){var t,o=e(this),n=o.data(a),i=a+\"_\"+n.idx,r=e(\"#mCSB_\"+n.idx+\"_container\"),l=r.parent(),s=e(\".mCSB_\"+n.idx+\"_scrollbar .\"+d[12]);s.bind(\"mousedown.\"+i+\" touchstart.\"+i+\" pointerdown.\"+i+\" MSPointerDown.\"+i,function(o){c=!0,e(o.target).hasClass(\"mCSB_dragger\")||(t=1)}).bind(\"touchend.\"+i+\" pointerup.\"+i+\" MSPointerUp.\"+i,function(e){c=!1}).bind(\"click.\"+i,function(a){if(t&&(t=0,e(a.target).hasClass(d[12])||e(a.target).hasClass(\"mCSB_draggerRail\"))){N(o);var i=e(this),s=i.find(\".mCSB_dragger\");if(i.parent(\".mCSB_scrollTools_horizontal\").length>0){if(!n.overflowed[1])return;var c=\"x\",u=a.pageX>s.offset().left?-1:1,f=Math.abs(r[0].offsetLeft)-.9*u*l.width()}else{if(!n.overflowed[0])return;var c=\"y\",u=a.pageY>s.offset().top?-1:1,f=Math.abs(r[0].offsetTop)-.9*u*l.height()}V(o,f.toString(),{dir:c,scrollEasing:\"mcsEaseInOut\"})}})},z=function(){var t=e(this),o=t.data(a),n=o.opt,i=a+\"_\"+o.idx,r=e(\"#mCSB_\"+o.idx+\"_container\"),l=r.parent();r.bind(\"focusin.\"+i,function(o){var a=e(document.activeElement),i=r.find(\".mCustomScrollBox\").length,s=0;a.is(n.advanced.autoScrollOnFocus)&&(N(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=i?(s+17)*i:0,t[0]._focusTimeout=setTimeout(function(){var e=[te(a)[0],te(a)[1]],o=[r[0].offsetTop,r[0].offsetLeft],i=[o[0]+e[0]>=0&&o[0]+e[0]<l.height()-a.outerHeight(!1),o[1]+e[1]>=0&&o[0]+e[1]<l.width()-a.outerWidth(!1)],c=\"yx\"!==n.axis||i[0]||i[1]?\"all\":\"none\";\"x\"===n.axis||i[0]||V(t,e[0].toString(),{dir:\"y\",scrollEasing:\"mcsEaseInOut\",overwrite:c,dur:s}),\"y\"===n.axis||i[1]||V(t,e[1].toString(),{dir:\"x\",scrollEasing:\"mcsEaseInOut\",overwrite:c,dur:s})},t[0]._focusTimer))})},P=function(){var t=e(this),o=t.data(a),n=a+\"_\"+o.idx,i=e(\"#mCSB_\"+o.idx+\"_container\").parent();i.bind(\"scroll.\"+n,function(t){(0!==i.scrollTop()||0!==i.scrollLeft())&&e(\".mCSB_\"+o.idx+\"_scrollbar\").css(\"visibility\",\"hidden\")})},H=function(){var t=e(this),o=t.data(a),n=o.opt,i=o.sequential,r=a+\"_\"+o.idx,l=\".mCSB_\"+o.idx+\"_scrollbar\",s=e(l+\">a\");s.bind(\"mousedown.\"+r+\" touchstart.\"+r+\" pointerdown.\"+r+\" MSPointerDown.\"+r+\" mouseup.\"+r+\" touchend.\"+r+\" pointerup.\"+r+\" MSPointerUp.\"+r+\" mouseout.\"+r+\" pointerout.\"+r+\" MSPointerOut.\"+r+\" click.\"+r,function(a){function r(e,o){i.scrollAmount=n.scrollButtons.scrollAmount,F(t,e,o)}if(a.preventDefault(),Z(a)){var l=e(this).attr(\"class\");switch(i.type=n.scrollButtons.scrollType,a.type){case\"mousedown\":case\"touchstart\":case\"pointerdown\":case\"MSPointerDown\":if(\"stepped\"===i.type)return;c=!0,o.tweenRunning=!1,r(\"on\",l);break;case\"mouseup\":case\"touchend\":case\"pointerup\":case\"MSPointerUp\":case\"mouseout\":case\"pointerout\":case\"MSPointerOut\":if(\"stepped\"===i.type)return;c=!1,i.dir&&r(\"off\",l);break;case\"click\":if(\"stepped\"!==i.type||o.tweenRunning)return;r(\"on\",l)}}})},U=function(){function t(t){function a(e,t){r.type=i.keyboard.scrollType,r.scrollAmount=i.keyboard.scrollAmount,\"stepped\"===r.type&&n.tweenRunning||F(o,e,t)}switch(t.type){case\"blur\":n.tweenRunning&&r.dir&&a(\"off\",null);break;case\"keydown\":case\"keyup\":var l=t.keyCode?t.keyCode:t.which,s=\"on\";if(\"x\"!==i.axis&&(38===l||40===l)||\"y\"!==i.axis&&(37===l||39===l)){if((38===l||40===l)&&!n.overflowed[0]||(37===l||39===l)&&!n.overflowed[1])return;\"keyup\"===t.type&&(s=\"off\"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),a(s,l))}else if(33===l||34===l){if((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),\"keyup\"===t.type){N(o);var f=34===l?-1:1;if(\"x\"===i.axis||\"yx\"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h=\"x\",m=Math.abs(c[0].offsetLeft)-.9*f*d.width();else var h=\"y\",m=Math.abs(c[0].offsetTop)-.9*f*d.height();V(o,m.toString(),{dir:h,scrollEasing:\"mcsEaseInOut\"})}}else if((35===l||36===l)&&!e(document.activeElement).is(u)&&((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),\"keyup\"===t.type)){if(\"x\"===i.axis||\"yx\"===i.axis&&n.overflowed[1]&&!n.overflowed[0])var h=\"x\",m=35===l?Math.abs(d.width()-c.outerWidth(!1)):0;else var h=\"y\",m=35===l?Math.abs(d.height()-c.outerHeight(!1)):0;V(o,m.toString(),{dir:h,scrollEasing:\"mcsEaseInOut\"})}}}var o=e(this),n=o.data(a),i=n.opt,r=n.sequential,l=a+\"_\"+n.idx,s=e(\"#mCSB_\"+n.idx),c=e(\"#mCSB_\"+n.idx+\"_container\"),d=c.parent(),u=\"input,textarea,select,datalist,keygen,[contenteditable='true']\",f=c.find(\"iframe\"),h=[\"blur.\"+l+\" keydown.\"+l+\" keyup.\"+l];f.length&&f.each(function(){e(this).load(function(){W(this)&&e(this.contentDocument||this.contentWindow.document).bind(h[0],function(e){t(e)})})}),s.attr(\"tabindex\",\"0\").bind(h[0],function(e){t(e)})},F=function(t,o,n,i,r){function l(e){u.snapAmount&&(f.scrollAmount=u.snapAmount instanceof Array?\"x\"===f.dir[0]?u.snapAmount[1]:u.snapAmount[0]:u.snapAmount);var o=\"stepped\"!==f.type,a=r?r:e?o?p/1.5:g:1e3/60,n=e?o?7.5:40:2.5,s=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],d=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],m=\"x\"===f.dir[0]?s[1]+f.dir[1]*d[1]*n:s[0]+f.dir[1]*d[0]*n,v=\"x\"===f.dir[0]?s[1]+f.dir[1]*parseInt(f.scrollAmount):s[0]+f.dir[1]*parseInt(f.scrollAmount),x=\"auto\"!==f.scrollAmount?v:m,_=i?i:e?o?\"mcsLinearOut\":\"mcsEaseInOut\":\"mcsLinear\",w=e?!0:!1;return e&&17>a&&(x=\"x\"===f.dir[0]?s[1]:s[0]),V(t,x.toString(),{dir:f.dir[0],scrollEasing:_,dur:a,onComplete:w}),e?void(f.dir=!1):(clearTimeout(f.step),void(f.step=setTimeout(function(){l()},a)))}function s(){clearTimeout(f.step),K(f,\"step\"),N(t)}var c=t.data(a),u=c.opt,f=c.sequential,h=e(\"#mCSB_\"+c.idx+\"_container\"),m=\"stepped\"===f.type?!0:!1,p=u.scrollInertia<26?26:u.scrollInertia,g=u.scrollInertia<1?17:u.scrollInertia;switch(o){case\"on\":if(f.dir=[n===d[16]||n===d[15]||39===n||37===n?\"x\":\"y\",n===d[13]||n===d[15]||38===n||37===n?-1:1],N(t),ee(n)&&\"stepped\"===f.type)return;l(m);break;case\"off\":s(),(m||c.tweenRunning&&f.dir)&&l(!0)}},q=function(t){var o=e(this).data(a).opt,n=[];return\"function\"==typeof t&&(t=t()),t instanceof Array?n=t.length>1?[t[0],t[1]]:\"x\"===o.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||\"x\"===o.axis?null:t,n[1]=t.x?t.x:t.y||\"y\"===o.axis?null:t),\"function\"==typeof n[0]&&(n[0]=n[0]()),\"function\"==typeof n[1]&&(n[1]=n[1]()),n},Y=function(t,o){if(null!=t&&\"undefined\"!=typeof t){var n=e(this),i=n.data(a),r=i.opt,l=e(\"#mCSB_\"+i.idx+\"_container\"),s=l.parent(),c=typeof t;o||(o=\"x\"===r.axis?\"x\":\"y\");var d=\"x\"===o?l.outerWidth(!1):l.outerHeight(!1),f=\"x\"===o?l[0].offsetLeft:l[0].offsetTop,h=\"x\"===o?\"left\":\"top\";switch(c){case\"function\":return t();case\"object\":var m=t.jquery?t:e(t);if(!m.length)return;return\"x\"===o?te(m)[1]:te(m)[0];case\"string\":case\"number\":if(ee(t))return Math.abs(t);if(-1!==t.indexOf(\"%\"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf(\"-=\"))return Math.abs(f-parseInt(t.split(\"-=\")[1]));if(-1!==t.indexOf(\"+=\")){var p=f+parseInt(t.split(\"+=\")[1]);return p>=0?0:Math.abs(p)}if(-1!==t.indexOf(\"px\")&&ee(t.split(\"px\")[0]))return Math.abs(t.split(\"px\")[0]);if(\"top\"===t||\"left\"===t)return 0;if(\"bottom\"===t)return Math.abs(s.height()-l.outerHeight(!1));if(\"right\"===t)return Math.abs(s.width()-l.outerWidth(!1));if(\"first\"===t||\"last\"===t){var m=l.find(\":\"+t);return\"x\"===o?te(m)[1]:te(m)[0]}return e(t).length?\"x\"===o?te(e(t))[1]:te(e(t))[0]:(l.css(h,t),void u.update.call(null,n[0]))}}},X=function(t){function o(){return clearTimeout(f[0].autoUpdate),0===l.parents(\"html\").length?void(l=null):void(f[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(s.poll.change.n=i(),s.poll.change.n!==s.poll.change.o)?(s.poll.change.o=s.poll.change.n,void r(3)):c.advanced.updateOnContentResize&&(s.poll.size.n=l[0].scrollHeight+l[0].scrollWidth+f[0].offsetHeight+l[0].offsetHeight+l[0].offsetWidth,s.poll.size.n!==s.poll.size.o)?(s.poll.size.o=s.poll.size.n,void r(1)):!c.advanced.updateOnImageLoad||\"auto\"===c.advanced.updateOnImageLoad&&\"y\"===c.axis||(s.poll.img.n=f.find(\"img\").length,s.poll.img.n===s.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&o()):(s.poll.img.o=s.poll.img.n,void f.find(\"img\").each(function(){n(this)}))},c.advanced.autoUpdateTimeout))}function n(t){function o(e,t){return function(){return t.apply(e,arguments)}}function a(){this.onload=null,e(t).addClass(d[2]),r(2)}if(e(t).hasClass(d[2]))return void r();var n=new Image;n.onload=o(n,a),n.src=t.src}function i(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange=\"*\");var e=0,t=f.find(c.advanced.updateOnSelectorChange);\n\nreturn c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function r(e){clearTimeout(f[0].autoUpdate),u.update.call(null,l[0],e)}var l=e(this),s=l.data(a),c=s.opt,f=e(\"#mCSB_\"+s.idx+\"_container\");return t?(clearTimeout(f[0].autoUpdate),void K(f[0],\"autoUpdate\")):void o()},j=function(e,t,o){return Math.round(e/t)*t-o},N=function(t){var o=t.data(a),n=e(\"#mCSB_\"+o.idx+\"_container,#mCSB_\"+o.idx+\"_container_wrapper,#mCSB_\"+o.idx+\"_dragger_vertical,#mCSB_\"+o.idx+\"_dragger_horizontal\");n.each(function(){J.call(this)})},V=function(t,o,n){function i(e){return s&&c.callbacks[e]&&\"function\"==typeof c.callbacks[e]}function r(){return[c.callbacks.alwaysTriggerOffsets||w>=S[0]+y,c.callbacks.alwaysTriggerOffsets||-B>=w]}function l(){var e=[h[0].offsetTop,h[0].offsetLeft],o=[x[0].offsetTop,x[0].offsetLeft],a=[h.outerHeight(!1),h.outerWidth(!1)],i=[f.height(),f.width()];t[0].mcs={content:h,top:e[0],left:e[1],draggerTop:o[0],draggerLeft:o[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(a[0])-i[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(a[1])-i[1])),direction:n.dir}}var s=t.data(a),c=s.opt,d={trigger:\"internal\",dir:\"y\",scrollEasing:\"mcsEaseOut\",drag:!1,dur:c.scrollInertia,overwrite:\"all\",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=e.extend(d,n),u=[n.dur,n.drag?0:n.dur],f=e(\"#mCSB_\"+s.idx),h=e(\"#mCSB_\"+s.idx+\"_container\"),m=h.parent(),p=c.callbacks.onTotalScrollOffset?q.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?q.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=n.trigger,(0!==m.scrollTop()||0!==m.scrollLeft())&&(e(\".mCSB_\"+s.idx+\"_scrollbar\").css(\"visibility\",\"visible\"),m.scrollTop(0).scrollLeft(0)),\"_resetY\"!==o||s.contentReset.y||(i(\"onOverflowYNone\")&&c.callbacks.onOverflowYNone.call(t[0]),s.contentReset.y=1),\"_resetX\"!==o||s.contentReset.x||(i(\"onOverflowXNone\")&&c.callbacks.onOverflowXNone.call(t[0]),s.contentReset.x=1),\"_resetY\"!==o&&\"_resetX\"!==o){if(!s.contentReset.y&&t[0].mcs||!s.overflowed[0]||(i(\"onOverflowY\")&&c.callbacks.onOverflowY.call(t[0]),s.contentReset.x=null),!s.contentReset.x&&t[0].mcs||!s.overflowed[1]||(i(\"onOverflowX\")&&c.callbacks.onOverflowX.call(t[0]),s.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?\"x\"===n.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;o=j(o,v,c.snapOffset)}switch(n.dir){case\"x\":var x=e(\"#mCSB_\"+s.idx+\"_dragger_horizontal\"),_=\"left\",w=h[0].offsetLeft,S=[f.width()-h.outerWidth(!1),x.parent().width()-x.width()],b=[o,0===o?0:o/s.scrollRatio.x],y=p[1],B=g[1],T=y>0?y/s.scrollRatio.x:0,k=B>0?B/s.scrollRatio.x:0;break;case\"y\":var x=e(\"#mCSB_\"+s.idx+\"_dragger_vertical\"),_=\"top\",w=h[0].offsetTop,S=[f.height()-h.outerHeight(!1),x.parent().height()-x.height()],b=[o,0===o?0:o/s.scrollRatio.y],y=p[0],B=g[0],T=y>0?y/s.scrollRatio.y:0,k=B>0?B/s.scrollRatio.y:0}b[1]<0||0===b[0]&&0===b[1]?b=[0,0]:b[1]>=S[1]?b=[S[0],S[1]]:b[0]=-b[0],t[0].mcs||(l(),i(\"onInit\")&&c.callbacks.onInit.call(t[0])),clearTimeout(h[0].onCompleteTimeout),Q(x[0],_,Math.round(b[1]),u[1],n.scrollEasing),(s.tweenRunning||!(0===w&&b[0]>=0||w===S[0]&&b[0]<=S[0]))&&Q(h[0],_,Math.round(b[0]),u[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!s.tweenRunning&&(i(\"onScrollStart\")&&(l(),c.callbacks.onScrollStart.call(t[0])),s.tweenRunning=!0,C(x),s.cbOffsets=r())},onUpdate:function(){n.callbacks&&n.onUpdate&&i(\"whileScrolling\")&&(l(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){\"yx\"===c.axis&&clearTimeout(h[0].onCompleteTimeout);var e=h[0].idleTimer||0;h[0].onCompleteTimeout=setTimeout(function(){i(\"onScroll\")&&(l(),c.callbacks.onScroll.call(t[0])),i(\"onTotalScroll\")&&b[1]>=S[1]-T&&s.cbOffsets[0]&&(l(),c.callbacks.onTotalScroll.call(t[0])),i(\"onTotalScrollBack\")&&b[1]<=k&&s.cbOffsets[1]&&(l(),c.callbacks.onTotalScrollBack.call(t[0])),s.tweenRunning=!1,h[0].idleTimer=0,C(x,\"hide\")},e)}}})}},Q=function(e,t,o,a,n,i,r){function l(){S.stop||(x||m.call(),x=G()-v,s(),x>=S.time&&(S.time=x>S.time?x+f-(x-S.time):x+f-1,S.time<x+1&&(S.time=x+1)),S.time<a?S.id=h(l):g.call())}function s(){a>0?(S.currVal=u(S.time,_,b,a,n),w[t]=Math.round(S.currVal)+\"px\"):w[t]=o+\"px\",p.call()}function c(){f=1e3/60,S.time=x+f,h=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return s(),setTimeout(e,.01)},S.id=h(l)}function d(){null!=S.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(S.id):clearTimeout(S.id),S.id=null)}function u(e,t,o,a,n){switch(n){case\"linear\":case\"mcsLinear\":return o*e/a+t;case\"mcsLinearOut\":return e/=a,e--,o*Math.sqrt(1-e*e)+t;case\"easeInOutSmooth\":return e/=a/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t);case\"easeInOutStrong\":return e/=a/2,1>e?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(-Math.pow(2,-10*e)+2)+t);case\"easeInOut\":case\"mcsEaseInOut\":return e/=a/2,1>e?o/2*e*e*e+t:(e-=2,o/2*(e*e*e+2)+t);case\"easeOutSmooth\":return e/=a,e--,-o*(e*e*e*e-1)+t;case\"easeOutStrong\":return o*(-Math.pow(2,-10*e/a)+1)+t;case\"easeOut\":case\"mcsEaseOut\":default:var i=(e/=a)*e,r=i*e;return t+o*(.499999999999997*r*i+-2.5*i*i+5.5*r+-6.5*i+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var f,h,r=r||{},m=r.onStart||function(){},p=r.onUpdate||function(){},g=r.onComplete||function(){},v=G(),x=0,_=e.offsetTop,w=e.style,S=e._mTween[t];\"left\"===t&&(_=e.offsetLeft);var b=o-_;S.stop=0,\"none\"!==i&&d(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},J=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=[\"top\",\"left\"],o=0;o<t.length;o++){var a=t[o];e._mTween[a].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[a].id):clearTimeout(e._mTween[a].id),e._mTween[a].id=null,e._mTween[a].stop=1)}},K=function(e,t){try{delete e[t]}catch(o){e[t]=null}},Z=function(e){return!(e.which&&1!==e.which)},$=function(e){var t=e.originalEvent.pointerType;return!(t&&\"touch\"!==t&&2!==t)},ee=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},te=function(e){var t=e.parents(\".mCSB_container\");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},oe=function(){function e(){var e=[\"webkit\",\"moz\",\"ms\",\"o\"];if(\"hidden\"in document)return\"hidden\";for(var t=0;t<e.length;t++)if(e[t]+\"Hidden\"in document)return e[t]+\"Hidden\";return null}var t=e();return t?document[t]:!1};e.fn[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):\"object\"!=typeof t&&t?void e.error(\"Method \"+t+\" does not exist\"):u.init.apply(this,arguments)},e[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):\"object\"!=typeof t&&t?void e.error(\"Method \"+t+\" does not exist\"):u.init.apply(this,arguments)},e[o].defaults=i,window[o]=!0,e(window).load(function(){e(n)[o](),e.extend(e.expr[\":\"],{mcsInView:e.expr[\":\"].mcsInView||function(t){var o,a,n=e(t),i=n.parents(\".mCSB_container\");if(i.length)return o=i.parent(),a=[i[0].offsetTop,i[0].offsetLeft],a[0]+te(n)[0]>=0&&a[0]+te(n)[0]<o.height()-n.outerHeight(!1)&&a[1]+te(n)[1]>=0&&a[1]+te(n)[1]<o.width()-n.outerWidth(!1)},mcsOverflow:e.expr[\":\"].mcsOverflow||function(t){var o=e(t).data(a);if(o)return o.overflowed[0]||o.overflowed[1]}})})})});"]}]}